(function(){"use strict";var e={3799:function(e,t,a){a(7658);var s=a(9242),r=a(4161),i=a(3396);const l={key:0,class:"fullcontent"},n={class:"flex mt-[4.7rem] md:mt-0 overflow-hidden"},o={class:"content"},c={key:1};function d(e,t,a,s,r,d){const u=(0,i.up)("MobileMenu"),p=(0,i.up)("SideMenu"),m=(0,i.up)("TopBar"),h=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[d.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(u),(0,i._)("div",n,[(0,i.Wm)(p),(0,i._)("div",o,[(0,i.Wm)(m),!d.isAuthenticated||d.isLoginRoute||d.isResetRoute||d.isForgetRoute?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(h,{key:0}))])])])):((0,i.wg)(),(0,i.iD)("div",c,[d.isResetRoute||d.isForgetRoute?((0,i.wg)(),(0,i.j4)(h,{key:0})):d.isLoginRoute?((0,i.wg)(),(0,i.j4)(h,{key:1})):(0,i.kq)("",!0)]))])}a(2801);var u=a.p+"img/logo.71910c9a.png";const p={class:"mobile-menu md:hidden"},m=(0,i.uE)('<div class="mobile-menu-bar"><a href="#" class="flex mr-auto"><img alt="logo" class="w-6" src="'+u+'"></a><a href="javascript:;" class="mobile-menu-toggler"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-2 w-8 h-8 text-white transform -rotate-90"><line x1="18" x2="18" y1="20" y2="10"></line><line x1="12" x2="12" y1="20" y2="4"></line><line x1="6" x2="6" y1="20" y2="14"></line></svg></a></div>',1),h={class:"scrollable"},g=(0,i._)("a",{href:"javascript:;",class:"mobile-menu-toggler"},[(0,i._)("i",{"data-lucide":"x-circle",class:"w-8 h-8 text-white transform -rotate-90"})],-1),f={class:"scrollable__content py-2"},w={key:0},v=(0,i._)("a",{href:"javascript:;",class:"menu"},[(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"menu__title"},"Home")],-1),_=[v],y={key:1},x=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-candlestick-chart"},[(0,i._)("path",{d:"M9 5v4"}),(0,i._)("rect",{width:"4",height:"6",x:"7",y:"9",rx:"1"}),(0,i._)("path",{d:"M9 15v2"}),(0,i._)("path",{d:"M17 3v2"}),(0,i._)("rect",{width:"4",height:"8",x:"15",y:"5",rx:"1"}),(0,i._)("path",{d:"M17 13v3"}),(0,i._)("path",{d:"M3 3v18h18"})])],-1),b=(0,i._)("div",{class:"menu__title"},"Services",-1),k={key:2},D=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),C=(0,i._)("div",{class:"menu__title"},"My Transactions",-1),P={key:0},S=(0,i._)("a",{href:"javascript:;",class:"menu"},[(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"menu__title"},"Home")],-1),z=[S],N={key:0},T=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg></div><div class="menu__title"> Individual <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),M={class:""},I={key:0},U=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),E=(0,i._)("div",{class:"menu__title"},"Add customer",-1),F={key:1},$=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),A=(0,i._)("div",{class:"menu__title"},"List customer",-1),B={key:2},q=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),j=(0,i._)("div",{class:"menu__title"},"List customer",-1),V={key:1},L=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building-2"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></svg></div><div class="menu__title"> Companies <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Z={class:""},R={key:0},W=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),H=(0,i._)("div",{class:"menu__title"},"Add company",-1),O={key:1},Y=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),K=(0,i._)("div",{class:"menu__title"},"List companies",-1),G={key:2},J=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Q=(0,i._)("div",{class:"menu__title"},"List companies",-1),X={key:2},ee=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-handshake"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"></path><path d="m18 15-2-2"></path><path d="m15 18-2-2"></path></svg></div><div class="menu__title"> Partner <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),te={class:""},ae=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),se=(0,i._)("div",{class:"menu__title"},"Add partner",-1),re=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ie=(0,i._)("div",{class:"menu__title"},"List partner",-1),le={key:3},ne=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),oe=(0,i._)("div",{class:"menu__title"},"All Customers",-1),ce={key:4},de=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),ue=(0,i._)("div",{class:"menu__title"},"All Customers",-1),pe={key:5,class:"side-nav__devider my-6"},me={key:6},he=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gantt-chart-square"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 8h7"></path><path d="M8 12h6"></path><path d="M11 16h5"></path></svg></div><div class="menu__title"> Plan <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),ge={class:""},fe={key:0},we=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ve=(0,i._)("div",{class:"menu__title"},"Add plan",-1),_e={key:1},ye=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),xe=(0,i._)("div",{class:"menu__title"},"List plan",-1),be={key:7},ke=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog-2"><circle cx="18" cy="15" r="3"></circle><circle cx="8" cy="9" r="4"></circle><path d="M10.5 13.5A6 6 0 0 0 2 19"></path><path d="m21.7 16.4-.9-.3"></path><path d="m15.2 13.9-.9-.3"></path><path d="m16.6 18.7.3-.9"></path><path d="m19.1 12.2.3-.9"></path><path d="m19.6 18.7-.4-1"></path><path d="m16.8 12.3-.4-1"></path><path d="m14.3 16.6 1-.4"></path><path d="m20.7 13.8 1-.4"></path></svg></div><div class="menu__title"> Employer <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),De={class:"Create Agent"},Ce={key:0},Pe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Se=(0,i._)("div",{class:"menu__title"},"Employer managment",-1),ze={key:1},Ne=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Te=(0,i._)("div",{class:"menu__title"},"My Agents",-1),Me={key:8},Ie=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Ue=(0,i._)("div",{class:"menu__title"},"Chat",-1),Ee={key:9},Fe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),$e=(0,i._)("div",{class:"menu__title"},"Chat",-1),Ae={key:10},Be=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),qe=(0,i._)("div",{class:"menu__title"},"Chat",-1),je={key:11},Ve=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Le=(0,i._)("div",{class:"menu__title"},"Transactions",-1),Ze={key:12},Re=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),We=(0,i._)("div",{class:"menu__title"},"Transactions",-1),He={key:13},Oe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-git-pull-request-closed"},[(0,i._)("circle",{cx:"18",cy:"18",r:"3"}),(0,i._)("circle",{cx:"6",cy:"6",r:"3"}),(0,i._)("path",{d:"M18 11.5V15"}),(0,i._)("path",{d:"m21 3-6 6"}),(0,i._)("path",{d:"m21 9-6-6"}),(0,i._)("line",{x1:"6",x2:"6",y1:"9",y2:"21"})])],-1),Ye=(0,i._)("div",{class:"menu__title"},"Requests",-1),Ke={key:14},Ge=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),Je=(0,i._)("div",{class:"menu__title"},"My Requests",-1),Qe={key:15},Xe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),et=(0,i._)("div",{class:"menu__title"},"Requests",-1),tt={key:16},at={key:17},st=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),rt=(0,i._)("div",{class:"menu__title"},"My Transactions",-1),it={key:18},lt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),nt=(0,i._)("div",{class:"menu__title"},"All Transactions",-1),ot=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1),ct={key:19},dt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ut=(0,i._)("div",{class:"menu__title"},"Template Files",-1),pt={key:20},mt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ht=(0,i._)("div",{class:"menu__title"},"Template Files",-1),gt=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1);function ft(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",p,[m,(0,i._)("div",h,[g,(0,i._)("ul",f,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[l.hasRoute("Dashboard")?((0,i.wg)(),(0,i.iD)("li",w,_)):(0,i.kq)("",!0),l.hasRoute("My Services")?((0,i.wg)(),(0,i.iD)("li",y,[(0,i.Wm)(n,{to:"/myservices",class:"menu"},{default:(0,i.w5)((()=>[x,b])),_:1})])):(0,i.kq)("",!0),l.hasRoute("User Transactions")?((0,i.wg)(),(0,i.iD)("li",k,[(0,i.Wm)(n,{to:"/usertransactions",class:"menu"},{default:(0,i.w5)((()=>[D,C])),_:1})])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(n,{to:"/hospital"},{default:(0,i.w5)((()=>[l.hasRoute("Partner")?((0,i.wg)(),(0,i.iD)("li",P,z)):(0,i.kq)("",!0)])),_:1}),l.hasRoute("View Individual Customer")?((0,i.wg)(),(0,i.iD)("li",N,[T,(0,i._)("ul",M,[l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",I,[(0,i.Wm)(n,{to:"/createcustomer",class:"menu"},{default:(0,i.w5)((()=>[U,E])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",F,[(0,i.Wm)(n,{to:"/viewcustomer",class:"menu"},{default:(0,i.w5)((()=>[$,A])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Individual Customer")?((0,i.wg)(),(0,i.iD)("li",B,[(0,i.Wm)(n,{to:"/viewmycustomers",class:"menu"},{default:(0,i.w5)((()=>[q,j])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Company Members")?((0,i.wg)(),(0,i.iD)("li",V,[L,(0,i._)("ul",Z,[l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",R,[(0,i.Wm)(n,{to:"/createcompany",class:"menu"},{default:(0,i.w5)((()=>[W,H])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",O,[(0,i.Wm)(n,{to:"/viewcompany",class:"menu"},{default:(0,i.w5)((()=>[Y,K])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Manager Companies")?((0,i.wg)(),(0,i.iD)("li",G,[(0,i.Wm)(n,{to:"/viewmanagercompanies",class:"menu"},{default:(0,i.w5)((()=>[J,Q])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Partner")?((0,i.wg)(),(0,i.iD)("li",X,[ee,(0,i._)("ul",te,[(0,i._)("li",null,[(0,i.Wm)(n,{to:"/createpartner",class:"menu"},{default:(0,i.w5)((()=>[ae,se])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(n,{to:"/viewpartner",class:"menu"},{default:(0,i.w5)((()=>[re,ie])),_:1})])])])):(0,i.kq)("",!0),l.hasRoute("View All Customers")?((0,i.wg)(),(0,i.iD)("li",le,[(0,i.Wm)(n,{to:"/allcustomers",class:"menu"},{default:(0,i.w5)((()=>[ne,oe])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My All Customers")?((0,i.wg)(),(0,i.iD)("li",ce,[(0,i.Wm)(n,{to:"/viewmyallcustomers",class:"menu"},{default:(0,i.w5)((()=>[de,ue])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",pe)):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",me,[he,(0,i._)("ul",ge,[l.hasRoute("Create Plan")?((0,i.wg)(),(0,i.iD)("li",fe,[(0,i.Wm)(n,{to:"/createplan",class:"menu"},{default:(0,i.w5)((()=>[we,ve])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",_e,[(0,i.Wm)(n,{to:"/viewplan",class:"menu"},{default:(0,i.w5)((()=>[ye,xe])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Create Employer")?((0,i.wg)(),(0,i.iD)("li",be,[ke,(0,i._)("ul",De,[l.hasRoute("Employer management")?((0,i.wg)(),(0,i.iD)("li",Ce,[(0,i.Wm)(n,{to:"/employermanagement",class:"menu"},{default:(0,i.w5)((()=>[Pe,Se])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Agents")?((0,i.wg)(),(0,i.iD)("li",ze,[(0,i.Wm)(n,{to:"/viewmyagents",class:"menu"},{default:(0,i.w5)((()=>[Ne,Te])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Chat")?((0,i.wg)(),(0,i.iD)("li",Me,[(0,i.Wm)(n,{to:"/chat",class:"menu"},{default:(0,i.w5)((()=>[Ie,Ue])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ee,[(0,i.Wm)(n,{to:"/managerchatpage",class:"menu"},{default:(0,i.w5)((()=>[Fe,$e])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Admin Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ae,[(0,i.Wm)(n,{to:"/adminchat",class:"menu"},{default:(0,i.w5)((()=>[Be,qe])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",je,[(0,i.Wm)(n,{to:"/customertransactions",class:"menu"},{default:(0,i.w5)((()=>[Ve,Le])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Manager Transactions")?((0,i.wg)(),(0,i.iD)("li",Ze,[(0,i.Wm)(n,{to:"/allmanagertransactions",class:"menu"},{default:(0,i.w5)((()=>[Re,We])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Customer Request")?((0,i.wg)(),(0,i.iD)("li",He,[(0,i.Wm)(n,{to:"/viewrequestadmin",class:"menu"},{default:(0,i.w5)((()=>[Oe,Ye])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Request")?((0,i.wg)(),(0,i.iD)("li",Ke,[(0,i.Wm)(n,{to:"/viewrequest",class:"menu"},{default:(0,i.w5)((()=>[Ge,Je])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Requests")?((0,i.wg)(),(0,i.iD)("li",Qe,[(0,i.Wm)(n,{to:"/managerrequests",class:"menu"},{default:(0,i.w5)((()=>[Xe,et])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",tt)):(0,i.kq)("",!0),l.hasRoute("My Transactions")?((0,i.wg)(),(0,i.iD)("li",at,[(0,i.Wm)(n,{to:"/mytransactions",class:"menu"},{default:(0,i.w5)((()=>[st,rt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Transactions")?((0,i.wg)(),(0,i.iD)("li",it,[(0,i.Wm)(n,{to:"/alltransactions",class:"menu"},{default:(0,i.w5)((()=>[lt,nt])),_:1})])):(0,i.kq)("",!0),ot,l.hasRoute("Template Files")?((0,i.wg)(),(0,i.iD)("li",ct,[(0,i.Wm)(n,{to:"/templatefiles",class:"menu"},{default:(0,i.w5)((()=>[dt,ut])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Template Files")?((0,i.wg)(),(0,i.iD)("li",pt,[(0,i.Wm)(n,{to:"/viewtemplatefiles",class:"menu"},{default:(0,i.w5)((()=>[mt,ht])),_:1})])):(0,i.kq)("",!0),gt])])])])}var wt=a(680),vt={computed:{filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t}}},_t=a(89);const yt=(0,_t.Z)(vt,[["render",ft]]);var xt=yt;const bt={class:"side-nav"},kt=(0,i._)("img",{alt:"logo",class:"w-6",src:u},null,-1),Dt=(0,i._)("span",{class:"hidden xl:block text-white text-lg ml-3"}," Mediplus ",-1),Ct=(0,i._)("div",{class:"side-nav__devider my-6"},null,-1),Pt={key:0},St=(0,i._)("a",{href:"javascript:;",class:"side-menu"},[(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"side-menu__title"},"Home")],-1),zt=[St],Nt={key:1},Tt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-candlestick-chart"},[(0,i._)("path",{d:"M9 5v4"}),(0,i._)("rect",{width:"4",height:"6",x:"7",y:"9",rx:"1"}),(0,i._)("path",{d:"M9 15v2"}),(0,i._)("path",{d:"M17 3v2"}),(0,i._)("rect",{width:"4",height:"8",x:"15",y:"5",rx:"1"}),(0,i._)("path",{d:"M17 13v3"}),(0,i._)("path",{d:"M3 3v18h18"})])],-1),Mt=(0,i._)("div",{class:"side-menu__title"},"Services",-1),It={key:2},Ut=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Et=(0,i._)("div",{class:"side-menu__title"},"My Transactions",-1),Ft={key:0},$t=(0,i._)("a",{href:"javascript:;",class:"side-menu"},[(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"side-menu__title"},"Home")],-1),At=[$t],Bt={key:0},qt=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg></div><div class="side-menu__title"> Individual <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),jt={class:""},Vt={key:0},Lt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Zt=(0,i._)("div",{class:"side-menu__title"},"Add customer",-1),Rt={key:1},Wt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Ht=(0,i._)("div",{class:"side-menu__title"},"List customer",-1),Ot={key:2},Yt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Kt=(0,i._)("div",{class:"side-menu__title"},"List customer",-1),Gt={key:1},Jt=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building-2"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></svg></div><div class="side-menu__title"> Companies <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Qt={class:""},Xt={key:0},ea=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ta=(0,i._)("div",{class:"side-menu__title"},"Add company",-1),aa={key:1},sa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ra=(0,i._)("div",{class:"side-menu__title"},"List companies",-1),ia={key:2},la=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),na=(0,i._)("div",{class:"side-menu__title"},"List companies",-1),oa={key:2},ca=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-handshake"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"></path><path d="m18 15-2-2"></path><path d="m15 18-2-2"></path></svg></div><div class="side-menu__title"> Partner <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),da={class:""},ua=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),pa=(0,i._)("div",{class:"side-menu__title"},"Add partner",-1),ma=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ha=(0,i._)("div",{class:"side-menu__title"},"List partner",-1),ga={key:3},fa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),wa=(0,i._)("div",{class:"side-menu__title"},"All Customers",-1),va={key:4},_a=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),ya=(0,i._)("div",{class:"side-menu__title"},"All Customers",-1),xa={key:5,class:"side-nav__devider my-6"},ba={key:6},ka=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gantt-chart-square"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 8h7"></path><path d="M8 12h6"></path><path d="M11 16h5"></path></svg></div><div class="side-menu__title"> Plan <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Da={class:""},Ca={key:0},Pa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Sa=(0,i._)("div",{class:"side-menu__title"},"Add plan",-1),za={key:1},Na=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Ta=(0,i._)("div",{class:"side-menu__title"},"List plan",-1),Ma={key:7},Ia=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog-2"><circle cx="18" cy="15" r="3"></circle><circle cx="8" cy="9" r="4"></circle><path d="M10.5 13.5A6 6 0 0 0 2 19"></path><path d="m21.7 16.4-.9-.3"></path><path d="m15.2 13.9-.9-.3"></path><path d="m16.6 18.7.3-.9"></path><path d="m19.1 12.2.3-.9"></path><path d="m19.6 18.7-.4-1"></path><path d="m16.8 12.3-.4-1"></path><path d="m14.3 16.6 1-.4"></path><path d="m20.7 13.8 1-.4"></path></svg></div><div class="side-menu__title"> Employer <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Ua={class:"Create Agent"},Ea={key:0},Fa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),$a=(0,i._)("div",{class:"side-menu__title"},"Employer managment",-1),Aa={key:1},Ba=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),qa=(0,i._)("div",{class:"side-menu__title"},"My Agents",-1),ja={key:8},Va=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),La=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Za={key:9},Ra=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Wa=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Ha={key:10},Oa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Ya=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Ka={key:11},Ga=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Ja=(0,i._)("div",{class:"side-menu__title"},"Transactions",-1),Qa={key:12},Xa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),es=(0,i._)("div",{class:"side-menu__title"},"Transactions",-1),ts={key:13},as=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-git-pull-request-closed"},[(0,i._)("circle",{cx:"18",cy:"18",r:"3"}),(0,i._)("circle",{cx:"6",cy:"6",r:"3"}),(0,i._)("path",{d:"M18 11.5V15"}),(0,i._)("path",{d:"m21 3-6 6"}),(0,i._)("path",{d:"m21 9-6-6"}),(0,i._)("line",{x1:"6",x2:"6",y1:"9",y2:"21"})])],-1),ss=(0,i._)("div",{class:"side-menu__title"},"Requests",-1),rs={key:14},is=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),ls=(0,i._)("div",{class:"side-menu__title"},"My Requests",-1),ns={key:15},os=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),cs=(0,i._)("div",{class:"side-menu__title"},"Requests",-1),ds={key:16},us={key:17},ps=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),ms=(0,i._)("div",{class:"side-menu__title"},"My Transactions",-1),hs={key:18},gs=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),fs=(0,i._)("div",{class:"side-menu__title"},"All Transactions",-1),ws=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1),vs={key:19},_s=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ys=(0,i._)("div",{class:"side-menu__title"},"Template Files",-1),xs={key:20},bs=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ks=(0,i._)("div",{class:"side-menu__title"},"Template Files",-1),Ds=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1);function Cs(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",bt,[(0,i.Wm)(n,{to:"/",class:"intro-x flex items-center pl-5 pt-4 mt-3"},{default:(0,i.w5)((()=>[kt,Dt])),_:1}),Ct,(0,i._)("ul",null,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[l.hasRoute("Dashboard")?((0,i.wg)(),(0,i.iD)("li",Pt,zt)):(0,i.kq)("",!0),l.hasRoute("My Services")?((0,i.wg)(),(0,i.iD)("li",Nt,[(0,i.Wm)(n,{to:"/myservices",class:"side-menu"},{default:(0,i.w5)((()=>[Tt,Mt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("User Transactions")?((0,i.wg)(),(0,i.iD)("li",It,[(0,i.Wm)(n,{to:"/usertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Ut,Et])),_:1})])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(n,{to:"/hospital"},{default:(0,i.w5)((()=>[l.hasRoute("Partner")?((0,i.wg)(),(0,i.iD)("li",Ft,At)):(0,i.kq)("",!0)])),_:1}),l.hasRoute("View Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Bt,[qt,(0,i._)("ul",jt,[l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Vt,[(0,i.Wm)(n,{to:"/createcustomer",class:"side-menu"},{default:(0,i.w5)((()=>[Lt,Zt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Rt,[(0,i.Wm)(n,{to:"/viewcustomer",class:"side-menu"},{default:(0,i.w5)((()=>[Wt,Ht])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Ot,[(0,i.Wm)(n,{to:"/viewmycustomers",class:"side-menu"},{default:(0,i.w5)((()=>[Yt,Kt])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Company Members")?((0,i.wg)(),(0,i.iD)("li",Gt,[Jt,(0,i._)("ul",Qt,[l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",Xt,[(0,i.Wm)(n,{to:"/createcompany",class:"side-menu"},{default:(0,i.w5)((()=>[ea,ta])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",aa,[(0,i.Wm)(n,{to:"/viewcompany",class:"side-menu"},{default:(0,i.w5)((()=>[sa,ra])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Manager Companies")?((0,i.wg)(),(0,i.iD)("li",ia,[(0,i.Wm)(n,{to:"/viewmanagercompanies",class:"side-menu"},{default:(0,i.w5)((()=>[la,na])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Partner")?((0,i.wg)(),(0,i.iD)("li",oa,[ca,(0,i._)("ul",da,[(0,i._)("li",null,[(0,i.Wm)(n,{to:"/createpartner",class:"side-menu"},{default:(0,i.w5)((()=>[ua,pa])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(n,{to:"/viewpartner",class:"side-menu"},{default:(0,i.w5)((()=>[ma,ha])),_:1})])])])):(0,i.kq)("",!0),l.hasRoute("View All Customers")?((0,i.wg)(),(0,i.iD)("li",ga,[(0,i.Wm)(n,{to:"/allcustomers",class:"side-menu"},{default:(0,i.w5)((()=>[fa,wa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My All Customers")?((0,i.wg)(),(0,i.iD)("li",va,[(0,i.Wm)(n,{to:"/viewmyallcustomers",class:"side-menu"},{default:(0,i.w5)((()=>[_a,ya])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",xa)):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",ba,[ka,(0,i._)("ul",Da,[l.hasRoute("Create Plan")?((0,i.wg)(),(0,i.iD)("li",Ca,[(0,i.Wm)(n,{to:"/createplan",class:"side-menu"},{default:(0,i.w5)((()=>[Pa,Sa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",za,[(0,i.Wm)(n,{to:"/viewplan",class:"side-menu"},{default:(0,i.w5)((()=>[Na,Ta])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Create Employer")?((0,i.wg)(),(0,i.iD)("li",Ma,[Ia,(0,i._)("ul",Ua,[l.hasRoute("Employer management")?((0,i.wg)(),(0,i.iD)("li",Ea,[(0,i.Wm)(n,{to:"/employermanagement",class:"side-menu"},{default:(0,i.w5)((()=>[Fa,$a])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Agents")?((0,i.wg)(),(0,i.iD)("li",Aa,[(0,i.Wm)(n,{to:"/viewmyagents",class:"side-menu"},{default:(0,i.w5)((()=>[Ba,qa])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Chat")?((0,i.wg)(),(0,i.iD)("li",ja,[(0,i.Wm)(n,{to:"/chat",class:"side-menu"},{default:(0,i.w5)((()=>[Va,La])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Chat Page")?((0,i.wg)(),(0,i.iD)("li",Za,[(0,i.Wm)(n,{to:"/managerchatpage",class:"side-menu"},{default:(0,i.w5)((()=>[Ra,Wa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Admin Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ha,[(0,i.Wm)(n,{to:"/adminchat",class:"side-menu"},{default:(0,i.w5)((()=>[Oa,Ya])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",Ka,[(0,i.Wm)(n,{to:"/customertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Ga,Ja])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Manager Transactions")?((0,i.wg)(),(0,i.iD)("li",Qa,[(0,i.Wm)(n,{to:"/allmanagertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Xa,es])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Customer Request")?((0,i.wg)(),(0,i.iD)("li",ts,[(0,i.Wm)(n,{to:"/viewrequestadmin",class:"side-menu"},{default:(0,i.w5)((()=>[as,ss])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Request")?((0,i.wg)(),(0,i.iD)("li",rs,[(0,i.Wm)(n,{to:"/viewrequest",class:"side-menu"},{default:(0,i.w5)((()=>[is,ls])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Requests")?((0,i.wg)(),(0,i.iD)("li",ns,[(0,i.Wm)(n,{to:"/managerrequests",class:"side-menu"},{default:(0,i.w5)((()=>[os,cs])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",ds)):(0,i.kq)("",!0),l.hasRoute("My Transactions")?((0,i.wg)(),(0,i.iD)("li",us,[(0,i.Wm)(n,{to:"/mytransactions",class:"side-menu"},{default:(0,i.w5)((()=>[ps,ms])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Transactions")?((0,i.wg)(),(0,i.iD)("li",hs,[(0,i.Wm)(n,{to:"/alltransactions",class:"side-menu"},{default:(0,i.w5)((()=>[gs,fs])),_:1})])):(0,i.kq)("",!0),ws,l.hasRoute("Template Files")?((0,i.wg)(),(0,i.iD)("li",vs,[(0,i.Wm)(n,{to:"/templatefiles",class:"side-menu"},{default:(0,i.w5)((()=>[_s,ys])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Template Files")?((0,i.wg)(),(0,i.iD)("li",xs,[(0,i.Wm)(n,{to:"/viewtemplatefiles",class:"side-menu"},{default:(0,i.w5)((()=>[bs,ks])),_:1})])):(0,i.kq)("",!0),Ds])])])}var Ps={computed:{filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t}}};const Ss=(0,_t.Z)(Ps,[["render",Cs]]);var zs=Ss,Ns=a(7139),Ts=a.p+"img/logo.00c55a06.png";const Ms=e=>((0,i.dD)("data-v-1df3e0ee"),e=e(),(0,i.Cn)(),e),Is={class:"notification-container"},Us=Ms((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-alert-circle w-6 h-6 mr-2"},[(0,i._)("circle",{cx:"12",cy:"12",r:"10"}),(0,i._)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i._)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})],-1))),Es=Ms((()=>(0,i._)("button",{type:"button",class:"btn-close text-white","data-tw-dismiss":"alert","aria-label":"Close"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-x w-4 h-4"},[(0,i._)("path",{d:"M18 6 6 18"}),(0,i._)("path",{d:"m6 6 12 12"})])],-1))),Fs={key:0,class:"notification-container"},$s=Ms((()=>(0,i._)("i",{"data-lucide":"alert-triangle",class:"w-6 h-6 mr-2"},null,-1))),As={class:"notification-content"},Bs=Ms((()=>(0,i._)("button",{type:"button",class:"btn-close","data-tw-dismiss":"alert","aria-label":"Close"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-x"},[(0,i._)("path",{d:"M18 6 6 18"}),(0,i._)("path",{d:"m6 6 12 12"})])],-1))),qs={class:"top-bar -mx-4 px-4 md:mx-0 md:px-0"},js={"aria-label":"breadcrumb",class:"-intro-x mr-auto hidden sm:flex"},Vs={class:"breadcrumb"},Ls=Ms((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#"},"Application")],-1))),Zs={class:"breadcrumb-item active","aria-current":"page"},Rs={class:"intro-x dropdown w-8 h-8"},Ws={class:"dropdown-toggle w-8 h-8 rounded-full overflow-hidden shadow-lg image-fit zoom-in",role:"button","aria-expanded":"false","data-tw-toggle":"dropdown"},Hs=["src"],Os={key:1,src:Ts,alt:"profilecustomer",class:"rounded-full"},Ys={class:"dropdown-menu w-56"},Ks={class:"dropdown-content bg-primary text-white"},Gs={class:"p-2"},Js={class:"font-medium"},Qs={class:"text-xs text-white/70 mt-0.5 dark:text-slate-500"},Xs=Ms((()=>(0,i._)("li",null,[(0,i._)("hr",{class:"dropdown-divider border-white/[0.08]"})],-1))),er={key:0},tr=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),ar={key:1},sr=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),rr={key:2},ir=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),lr=Ms((()=>(0,i._)("li",null,[(0,i._)("hr",{class:"dropdown-divider border-white/[0.08]"})],-1))),nr=Ms((()=>(0,i._)("i",{"data-lucide":"toggle-right",class:"w-4 h-4 mr-2"},null,-1)));function or(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Is,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.notifications,(e=>((0,i.wg)(),(0,i.j4)(n,{key:e.id,class:"alert alert-primary alert-dismissible show flex items-center mb-2 notification",role:"alert",to:`/customertransactiondetail/${e.transactionId}`},{default:(0,i.w5)((()=>[Us,(0,i.Uk)(" "+(0,Ns.zw)(e.message)+" ",1),Es])),_:2},1032,["to"])))),128))]),r.notifications.length>0?((0,i.wg)(),(0,i.iD)("div",Fs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.reversedNotifications,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"alert alert-success alert-dismissible show flex items-center mb-2",role:"alert"},[$s,(0,i._)("div",As,(0,Ns.zw)(e),1),Bs])))),128))])):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i._)("div",qs,[(0,i._)("nav",js,[(0,i._)("ol",Vs,[Ls,(0,i._)("li",Zs,(0,Ns.zw)(l.currentRouteName),1)])]),(0,i._)("div",Rs,[(0,i._)("div",Ws,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,Hs)):((0,i.wg)(),(0,i.iD)("img",Os))]),(0,i._)("div",Ys,[(0,i._)("ul",Ks,[(0,i._)("li",Gs,[(0,i._)("div",Js,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",Qs,(0,Ns.zw)(l.getRole(r.role)),1)]),Xs,1===r.role||2===r.role||3===r.role||6===r.role?((0,i.wg)(),(0,i.iD)("li",er,[(0,i.Wm)(n,{to:`/employerprofile/${r.userID}`},{default:(0,i.w5)((()=>[tr])),_:1},8,["to"])])):(0,i.kq)("",!0),4===r.role||5===r.role?((0,i.wg)(),(0,i.iD)("li",ar,[(0,i.Wm)(n,{to:`/customerprofile/${r.userID}`},{default:(0,i.w5)((()=>[sr])),_:1},8,["to"])])):(0,i.kq)("",!0),7===r.role||8===r.role?((0,i.wg)(),(0,i.iD)("li",rr,[(0,i.Wm)(n,{to:`/dependentprofile/${r.userID}`},{default:(0,i.w5)((()=>[ir])),_:1},8,["to"])])):(0,i.kq)("",!0),lr,(0,i._)("li",null,[(0,i._)("a",{href:"#",class:"dropdown-item hover:bg-white/5",onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e))},[nr,(0,i.Uk)(" Logout ")])])])])])])])],64)}var cr={data(){return{avatar:null,routeName:null,firstName:"",lastName:"",role:"",ogv:null,userID:"",notifications:[],showNotificationsDropdown:!1}},computed:{reversedNotifications(){return this.notifications.slice().reverse()},currentRouteName(){return this.$route.name},filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{getProfile(){const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{const t=e.data.user;this.firstName=t.firstName,this.lastName=t.lastName,this.idType=t.idType,this.idNumber=t.idNumber,this.avatar=t.avatar,this.dob=this.formatDate(t.dob),this.gender=t.gender,this.role=t.role,this.password=t.password,this.email=t.email,this.address=t.address,this.contact1=t.contact1,this.contact2=t.contact2,this.userID=t._id,this.status=t.status})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},async logout(){wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore"),this.$router.go("/login")},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace(/\\/g,"/")}`:`${r.Z.defaults.baseURL}/path/to/default/image/logow.png`},hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":4===e||5===e?"Customer":6===e?"Partner":7===e||8===e?"Dependent":""}},created(){this.getProfile(),this.$socket.on("notification",(e=>{console.log("Received notification:",e),this.notifications.push(e)}));const e=new EventSource("https://localhost/api/notifications");e.addEventListener("message",(e=>{const t=JSON.parse(e.data);this.notifications.push(t)}))},mounted(){const e=wt.Z.get("token");r.Z.get("/me",{headers:{token:e,withCredentials:!0}}).then((e=>{const t=e.data;if(t.success){const e=t.user;this.response=e,this.userID=e._id,this.$socket.emit("user-online",this.userID)}else console.error("Failed to retrieve user profile")})).catch((e=>{console.error("Error:",e)}))}};const dr=(0,_t.Z)(cr,[["render",or],["__scopeId","data-v-1df3e0ee"]]);var ur=dr,pr={name:"App",components:{TopBar:ur,SideMenu:zs,MobileMenu:xt},computed:{isAuthenticated(){const e=wt.Z.get("token");return!!e&&this.isTokenValid(e)},isLoginRoute(){return"Login"===this.$route.name},isResetRoute(){return"Reset Token"===this.$route.name},isForgetRoute(){return"Forget Password"===this.$route.name}},methods:{isTokenValid(e){if(!e)return!1;try{const t=JSON.parse(atob(e.split(".")[1])),a=t?.exp,s=Math.floor(Date.now()/1e3);return s<a}catch(t){return console.error("Invalid token format"),!1}}}};const mr=(0,_t.Z)(pr,[["render",d]]);var hr=mr,gr=a(5269),fr=a.n(gr),wr=a(2483),vr=a.p+"img/illustration2.d014bc52.svg";const _r={class:"login"},yr={class:"sm:px-10"},xr={class:"block xl:grid grid-cols-2 gap-4"},br=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen"><a href="#" class="-intro-x flex items-center pt-5"><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'"><span class="text-white text-lg ml-3"> Mediplus </span></a><div class="my-auto"><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'"><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10"><br> Sign in to your account. </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400"></div></div></div>',1),kr={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},Dr={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},Cr=(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Sign In ",-1),Pr=(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"}," Sign in to your account.. ",-1),Sr={class:"intro-x mt-8"},zr={key:0,class:"invalid-feedback"},Nr={class:"intro-x flex text-slate-600 dark:text-slate-500 text-xs sm:text-sm mt-4"},Tr=(0,i._)("div",{class:"flex items-center mr-auto"},[(0,i._)("input",{id:"remember-me",type:"checkbox",class:"form-check-input border mr-2"})],-1),Mr={class:"intro-x mt-5 xl:mt-8 text-center xl:text-left"},Ir=["disabled"],Ur=(0,i._)("div",{class:"intro-x mt-10 xl:mt-24 text-slate-600 dark:text-slate-500 text-center xl:text-left"},[(0,i.Uk)(" By signin up, you agree to our "),(0,i._)("a",{class:"text-primary dark:text-slate-200",href:"#"},"Terms and Conditions"),(0,i.Uk)(" & "),(0,i._)("a",{class:"text-primary dark:text-slate-200",href:"#"},"Privacy Policy")],-1);function Er(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",_r,[(0,i._)("div",yr,[(0,i._)("div",xr,[br,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>n.onLogin&&n.onLogin(...e)),["prevent"]))},[(0,i._)("div",kr,[(0,i._)("div",Dr,[Cr,Pr,(0,i._)("div",Sr,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block",{"is-invalid":l.errors.email}]),placeholder:"Email"},null,2),[[s.nr,l.email]]),(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block mt-4",{"is-invalid":l.errors.password}]),placeholder:"Password"},null,2),[[s.nr,l.password]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",zr,(0,Ns.zw)(l.errors.password[0]),1)):(0,i.kq)("",!0)]),(0,i._)("div",Nr,[Tr,(0,i.Wm)(o,{to:"/forget-password"},{default:(0,i.w5)((()=>[(0,i.Uk)("Forgot Password?")])),_:1})]),(0,i._)("div",Mr,[(0,i._)("button",{class:"btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit",disabled:l.btnloading}," Login ",8,Ir)]),Ur])])],32)])])])}var Fr=a(5147),$r=a.n(Fr),Ar={data(){return{email:"",password:"",btnloading:!1,errors:{}}},methods:{onLogin(){this.btnloading=!1,this.errors={};let e={email:this.email,password:this.password};r.Z.post("/api/signin",e).then((e=>{200===e.status&&(wt.Z.set("token",e.data.token,{expires:7}),wt.Z.set("role",e.data.role,{expires:7}),this.btnloading=!0,this.$emit("loginSuccess"),this.$router.go("/"))})).catch((e=>{e.response&&e.response.data&&e.response.data.error&&(this.errors={email:[e.response.data.error]},console.log(this.errors),$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${this.errors.email}`,timer:3e3,showConfirmButton:!1,position:"top-end"}))}))}},beforeRouteEnter(e,t,a){const s=wt.Z.get("token");s?a({name:"Dashboard"}):a()}};const Br=(0,_t.Z)(Ar,[["render",Er]]);var qr=Br;const jr={class:"row"},Vr={class:"col-md-6 offset-md-3"},Lr=(0,i._)("div",null,[(0,i._)("h3",null,"Signup"),(0,i._)("hr")],-1),Zr={class:"form-group"},Rr=(0,i._)("label",{for:"inputEmail"},"Email",-1),Wr={key:0,class:"error"},Hr={class:"form-group"},Or=(0,i._)("label",{for:"inputPassword"},"Password",-1),Yr={key:0,class:"error"},Kr=(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Signup",-1);function Gr(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",jr,[(0,i._)("div",Vr,[Lr,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)((e=>n.onSignup()),["prevent"]))},[(0,i._)("div",Zr,[Rr,(0,i.wy)((0,i._)("input",{type:"email",class:"form-control",id:"inputEmail",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e)},null,512),[[s.nr,l.email,void 0,{trim:!0}]]),l.errors.email?((0,i.wg)(),(0,i.iD)("div",Wr,(0,Ns.zw)(l.errors.email),1)):(0,i.kq)("",!0)]),(0,i._)("div",Hr,[Or,(0,i.wy)((0,i._)("input",{type:"password",class:"form-control",id:"inputPassword",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e)},null,512),[[s.nr,l.password,void 0,{trim:!0}]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",Yr,(0,Ns.zw)(l.errors.password),1)):(0,i.kq)("",!0)]),Kr],32)])])}class Jr{static checkEmail(e){const t=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)}static minLength(e,t){return e.length>=t}}class Qr{constructor(e,t,a){this.email=e,this.password=t,this.firstName=a}checkValidations(){const e={};return Jr.checkEmail(this.email)||(e.email="Invalid Email"),Jr.minLength(this.password,6)||(e.password="Password should be at least 6 characters long"),e}}var Xr=a(65);const ei="[actions]  signup user";var ti={data(){return{email:"",password:"",errors:{}}},methods:{...(0,Xr.nv)("auth",{signup:ei}),onSignup(){console.log("Ola");let e=new Qr(this.email,this.password);if(this.errors=e.checkValidations(),"email"in this.errors||"password"in this.errors)return!1;this.signup({email:this.email,password:this.password})}}};const ai=(0,_t.Z)(ti,[["render",Gr]]);var si=ai;const ri={class:"grid grid-cols-12 gap-6"},ii={class:"col-span-12 2xl:col-span-9"},li={class:"grid grid-cols-12 gap-6"},ni={class:"col-span-12 mt-8"},oi=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Dashboard")],-1),ci={class:"grid grid-cols-12 gap-6 mt-5"},di={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},ui={class:"report-box zoom-in"},pi={class:"box p-5"},mi={class:"text-3xl font-medium leading-8 mt-6"},hi={key:0},gi={key:1},fi=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),wi=[fi],vi=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Customers",-1),_i={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},yi={class:"report-box zoom-in"},xi={class:"box p-5"},bi={class:"text-3xl font-medium leading-8 mt-6"},ki={key:0},Di={key:1},Ci=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Pi=[Ci],Si=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Companies",-1),zi={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Ni={class:"report-box zoom-in"},Ti={class:"box p-5"},Mi={class:"text-3xl font-medium leading-8 mt-6"},Ii={key:0},Ui={key:1},Ei=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Fi=[Ei],$i=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Partners",-1),Ai={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Bi={class:"report-box zoom-in"},qi={class:"box p-5"},ji={class:"text-3xl font-medium leading-8 mt-6"},Vi={key:0},Li={key:1},Zi=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ri=[Zi],Wi=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Transactions ",-1),Hi={class:"col-span-12 lg:col-span-6 mt-8"},Oi=(0,i._)("div",{class:"intro-y block sm:flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Sales Report")],-1),Yi={class:"intro-y box p-5 mt-12 sm:mt-5"},Ki={class:"flex flex-col md:flex-row md:items-center"},Gi={class:"flex"},Ji={class:"text-primary dark:text-slate-300 text-lg xl:text-xl font-medium"},Qi=(0,i._)("div",{class:"mt-0.5 text-slate-500"},"This Month",-1),Xi=(0,i._)("div",{class:"w-px h-12 border border-r border-dashed border-slate-200 dark:border-darkmode-300 mx-4 xl:mx-5"},null,-1),el={class:"text-slate-500 text-lg xl:text-xl font-medium"},tl=(0,i._)("div",{class:"mt-0.5 text-slate-500"},"Last Month",-1),al=(0,i._)("div",{class:"report-chart"},[(0,i._)("div",{class:"h-[275px]"},[(0,i._)("canvas",{id:"myChart",class:"mt-6 -mb-6"})])],-1),sl=(0,i.uE)('<div class="col-span-12 sm:col-span-12 lg:col-span-6 mt-8"><div class="intro-y flex items-center h-10"><h2 class="text-lg font-medium truncate mr-5"> Must Used Services </h2></div><div class="intro-y box p-5 mt-12 sm:mt-5"><div class="flex flex-col md:flex-row md:items-center justify-center"><div class="h-[275px]"><canvas id="service-popularity-chart"></canvas></div></div></div></div>',1),rl={class:"col-span-12 xl:col-span-4 mt-6"},il=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Customer Requests ")],-1),ll={class:"mt-5"},nl={key:0,class:"intro-y"},ol=(0,i._)("div",{class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},[(0,i._)("img",{alt:"Midone - HTML Admin Template",src:""})],-1),cl={class:"ml-4 mr-auto"},dl={class:"font-medium"},ul={class:"text-slate-500 text-xs mt-0.5"},pl={key:1},ml=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),hl=[ml],gl=(0,i._)("a",{href:"#",class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),fl={class:"col-span-12 2xl:col-span-3"},wl={class:"2xl:border-l -mb-10 pb-10"},vl={class:"2xl:pl-6 grid grid-cols-12 gap-x-6 2xl:gap-x-0 gap-y-6"},_l={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3 2xl:mt-8"},yl=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Recent Pending Transactions ")],-1),xl={class:"mt-5"},bl={key:0},kl={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Dl={class:"ml mr-auto"},Cl={class:"font-medium"},Pl={class:"text-slate-500 text-xs mt-0.5"},Sl={class:"text-primary truncate"},zl={key:1},Nl=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Tl=[Nl],Ml=(0,i._)("a",{href:"/customertransactions",class:"intro-x w-full block text-center rounded-md py-3 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),Il={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},Ul=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Last Transactions "),(0,i._)("a",{href:"#",class:"ml-auto text-primary truncate"},"Show More")],-1),El={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},Fl={key:0},$l={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Al={class:"ml mr-auto"},Bl={class:"font-medium"},ql={class:"text-slate-500 text-xs mt-0.5"},jl={class:"text-success"},Vl={key:1},Ll=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Zl=[Ll],Rl={class:"col-span-12 md:col-span-6 xl:col-span-12 xl:col-start-1 xl:row-start-1 2xl:col-start-auto 2xl:row-start-auto mt-3"},Wl=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-auto"}," New messages ")],-1),Hl={key:0},Ol={class:"box zoom-in"},Yl={class:"tiny-slider",id:"important-notes"},Kl={class:"p-5"},Gl={class:"text-base font-medium truncate"},Jl={class:"text-slate-400 mt-1"},Ql={class:"text-slate-500 text-justify mt-1"},Xl={key:1},en=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),tn=[en];function an(e,t,a,s,r,l){const n=(0,i.up)("notification-component"),o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n),(0,i._)("div",ri,[(0,i._)("div",ii,[(0,i._)("div",li,[(0,i._)("div",ni,[oi,(0,i._)("div",ci,[(0,i._)("div",di,[(0,i.Wm)(o,{to:"/allcustomers"},{default:(0,i.w5)((()=>[(0,i._)("div",ui,[(0,i._)("div",pi,[(0,i._)("div",mi,[r.totalCustomers?((0,i.wg)(),(0,i.iD)("label",hi,(0,Ns.zw)(r.totalCustomers),1)):((0,i.wg)(),(0,i.iD)("label",gi,wi))]),vi])])])),_:1})]),(0,i._)("div",_i,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[(0,i._)("div",yi,[(0,i._)("div",xi,[(0,i._)("div",bi,[r.totalCompanies?((0,i.wg)(),(0,i.iD)("label",ki,(0,Ns.zw)(r.totalCompanies),1)):((0,i.wg)(),(0,i.iD)("label",Di,Pi))]),Si])])])),_:1})]),(0,i._)("div",zi,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[(0,i._)("div",Ni,[(0,i._)("div",Ti,[(0,i._)("div",Mi,[r.totalPartners?((0,i.wg)(),(0,i.iD)("label",Ii,(0,Ns.zw)(r.totalPartners),1)):((0,i.wg)(),(0,i.iD)("label",Ui,Fi))]),$i])])])),_:1})]),(0,i._)("div",Ai,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[(0,i._)("div",Bi,[(0,i._)("div",qi,[(0,i._)("div",ji,[r.totalTransactions?((0,i.wg)(),(0,i.iD)("label",Vi,(0,Ns.zw)(r.totalTransactions),1)):((0,i.wg)(),(0,i.iD)("label",Li,Ri))]),Wi])])])),_:1})])])]),(0,i._)("div",Hi,[Oi,(0,i._)("div",Yi,[(0,i._)("div",Ki,[(0,i._)("div",Gi,[(0,i._)("div",null,[(0,i._)("div",Ji,(0,Ns.zw)(l.formatCurrency(this.currentMonthRevenue)),1),Qi]),Xi,(0,i._)("div",null,[(0,i._)("div",el,(0,Ns.zw)(l.formatCurrency(r.lastMonthRevenue)),1),tl])])]),al])]),sl,(0,i._)("div",rl,[il,(0,i._)("div",ll,[r.recentRequests.length>0?((0,i.wg)(),(0,i.iD)("div",nl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentRequests,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"box px-4 py-4 mb-3 flex items-center zoom-in"},[ol,(0,i._)("div",cl,[(0,i._)("div",dl,(0,Ns.zw)(e.title),1),(0,i._)("div",ul,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["text-black cursor-pointer font-medium",l.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)])))),128))])):((0,i.wg)(),(0,i.iD)("div",pl,hl)),gl])])])]),(0,i._)("div",fl,[(0,i._)("div",wl,[(0,i._)("div",vl,[(0,i._)("div",_l,[yl,(0,i._)("div",xl,[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",bl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentPendingTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",kl,[(0,i._)("div",Dl,[(0,i._)("div",Cl,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",Pl,(0,Ns.zw)(e.createdAt),1)]),(0,i._)("div",Sl,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",zl,Tl)),Ml])]),(0,i._)("div",Il,[Ul,(0,i._)("div",El,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",Fl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",$l,[(0,i._)("div",Al,[(0,i._)("div",Bl,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",ql,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",jl,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Vl,Zl))])),_:1})])]),(0,i._)("div",Rl,[Wl,r.recentMessages.length>0?((0,i.wg)(),(0,i.iD)("div",Hl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentMessages,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mt-5 intro-x"},[(0,i._)("div",Ol,[(0,i._)("div",Yl,[(0,i._)("div",Kl,[(0,i._)("div",Gl,(0,Ns.zw)(e.senderName),1),(0,i._)("div",Jl,(0,Ns.zw)(l.formatDateWithTime(e.timestamp)),1),(0,i._)("div",Ql,(0,Ns.zw)(e.text),1)])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Xl,tn))])])])])])])}var sn=a(6580),rn={data(){return{response:null,userID:"",totalCustomers:"",totalIndivCustomers:"",totalCorpCustomers:"",totalTransactions:"",totalPendingTransactions:"",totalMessages:"",totalCompanies:"",totalPartners:"",totalServices:"",totalRequests:"",recentTransactions:[],recentPendingTransactions:[],recentMessages:[],recentRequests:[],currentMonthRevenue:"",lastMonthRevenue:"",dailyTransactionAmounts:"",servicePopularity:""}},created(){this.getDashboardData(),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e)})),setInterval((()=>{this.getDashboardData()}),12e4)},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`},async getDashboardData(){const e=wt.Z.get("token");await r.Z.get("/api/dashboard/getdata",{headers:{token:e}}).then((e=>{const t=e.data;this.totalCustomers=t.totalCustomers,this.totalIndivCustomers=t.totalIndivCustomers,this.totalCorpCustomers=t.totalCorpCustomers,this.totalTransactions=t.totalTransactions,this.totalPendingTransactions=t.totalPendingTransactions,this.totalMessages=t.totalMessages,this.totalCompanies=t.totalCompanies,this.totalPartners=t.totalPartners,this.totalServices=t.totalServices,this.totalRequests=t.totalRequests,this.recentTransactions=t.recentTransactions,this.recentPendingTransactions=t.recentPendingTransactions,this.recentMessages=t.recentMessages,this.recentRequests=t.recentRequests,this.currentMonthRevenue=t.currentMonthRevenue,this.lastMonthRevenue=t.lastMonthRevenue,this.dailyTransactionAmounts=t.dailyTransactionAmounts,this.servicePopularity=t.servicePopularity;const a=t.dailyTransactionStats,s=Object.keys(a),r=s.map((e=>a[e].amount)),i=document.getElementById("myChart");new sn.ZP(i,{type:"bar",data:{labels:s,datasets:[{label:"Daily Transactions",data:r,borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}});const l=this.servicePopularity.map((e=>({label:e.serviceName,data:[e.count]}))),n=["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],o=document.getElementById("service-popularity-chart");new sn.ZP(o,{type:"doughnut",data:{labels:l.map((e=>e.label)),datasets:[{label:"Service Popularity",data:l.map((e=>e.data[0])),backgroundColor:n,borderWidth:1}]},plugins:{legend:{position:"top",responsive:!0,maintainAspectRatio:!1,padding:10},tooltip:{callbacks:{label:function(e){const t=l[e.dataIndex].label,a=l[e.dataIndex].data;return`${t}: ${a}`}}}}})})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))}},mounted(){this.getDashboardData()}};const ln=(0,_t.Z)(rn,[["render",an]]);var nn=ln;const on=(0,i._)("h2",{class:"intro-y text-2xl font-medium mt-10 text-center mr-auto"}," Best Price & Services ",-1),cn=(0,i._)("div",{class:"intro-y flex items-center mt-8"},null,-1),dn={class:"flex flex-wrap justify-center mt-1 space-x-4 gap-4"},un=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"block w-12 h-12 text-primary mx-auto lucide lucide-credit-card"},[(0,i._)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,i._)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})],-1),pn={class:"text-xl font-medium text-center mt-5"},mn=(0,i._)("p",{class:"text-center mt-5",style:{"font-size":"1.25rem"}},"Description",-1),hn={class:"text-slate-600 dark:text-slate-500 text-center mt-3",style:{"font-size":"1.05rem"}},gn=(0,i._)("p",{class:"text-center mt-5",style:{"font-size":"1.25rem"}},"Area Of Cover",-1),fn={class:"text-slate-500 px-10 text-center mx-auto mt-3",style:{"font-size":"1.05rem"}},wn={class:"flex justify-center mt-3"},vn={class:"relative text-2xl font-semibold mt-8 mx-auto"},_n=(0,i._)("span",{class:"absolute text-2xl top-0 left-0 -ml-4"},null,-1),yn={key:0},xn=(0,i._)("button",{type:"button",class:"btn btn-rounded-primary py-3 px-4 block mx-auto mt-8"}," Services ",-1),bn={key:1,class:"flex justify-center mt-1"},kn=(0,i._)("button",{type:"button",class:"btn btn-rounded-secondary py-3 px-4 block mx-auto mt-8"}," Edit ",-1);function Dn(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[on,cn,(0,i._)("div",dn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.allplans,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y box w-1/5 h-96 px-5 py-16",key:e._id},[un,(0,i._)("p",{class:(0,Ns.C_)(["text-center mt-5",l.getStatusClass(e.status)])},[(0,i._)("b",null,(0,Ns.zw)(e.status),1)],2),(0,i._)("div",pn,(0,Ns.zw)(e.planName),1),mn,(0,i._)("p",hn,[(0,i._)("span",null,(0,Ns.zw)(e.planDescription),1)]),gn,(0,i._)("div",fn,(0,Ns.zw)(e.areaOfCover),1),(0,i._)("div",wn,[(0,i._)("div",vn,[_n,(0,i.Uk)(" "+(0,Ns.zw)(l.formatCurrency(e.planPrice)),1)])]),"Inactive"!==e.status?((0,i.wg)(),(0,i.iD)("div",yn,[(0,i.Wm)(n,{to:`/viewservices/${e._id}`},{default:(0,i.w5)((()=>[xn])),_:2},1032,["to"])])):(0,i.kq)("",!0),1===r.role?((0,i.wg)(),(0,i.iD)("div",bn,[(0,i.Wm)(n,{to:`/updateplan/${e._id}`},{default:(0,i.w5)((()=>[kn])),_:2},1032,["to"])])):(0,i.kq)("",!0)])))),128))])])}var Cn=a(7092),Pn=a(8577),Sn=a.n(Pn),zn={data(){return{allplans:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allplans",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allplans=t.data.plan,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=wt.Z.get("role");this.role="1"===e?1:0}};const Nn=(0,_t.Z)(zn,[["render",Dn]]);var Tn=Nn;const Mn={class:"intro-y flex items-center mt-8"},In=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create plan",-1),Un={key:0},En=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Fn=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),$n=[En,Fn],An={class:"grid grid-cols-12 gap-6 mt-5"},Bn={class:"intro-y col-span-12 lg:col-span-6"},qn={class:"intro-y box p-5"},jn={class:"grid grid-cols-2 gap-6 mt-3"},Vn=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name *",-1),Ln={class:"input-group"},Zn=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Rn={class:"input-group"},Wn={class:"grid grid-cols-6 gap-6 mt-3"},Hn=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Area of cover *",-1),On={class:"input-group"},Yn={class:"grid grid-cols-6 gap-6 mt-3"},Kn=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),Gn={class:"input-group"},Jn={class:"text-right mt-8"},Qn=["disabled"];function Xn(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Mn,[In,l.loading?((0,i.wg)(),(0,i.iD)("div",Un,$n)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>n.onCreatePlan&&n.onCreatePlan(...e)),["prevent"]))},[(0,i._)("div",An,[(0,i._)("div",Bn,[(0,i._)("div",qn,[(0,i._)("div",jn,[(0,i._)("div",null,[Vn,(0,i._)("div",Ln,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.planName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planName]])])]),(0,i._)("div",null,[Zn,(0,i._)("div",Rn,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.planPrice=e),id:"crud-form-5",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planPrice]])])])]),(0,i._)("div",Wn,[(0,i._)("div",null,[Hn,(0,i._)("div",On,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.areaOfCover=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.areaOfCover]])])])]),(0,i._)("div",Yn,[(0,i._)("div",null,[Kn,(0,i._)("div",Gn,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.planDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planDescription]])])])]),(0,i._)("div",Jn,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[4]||(t[4]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Qn)])])])])],32)])}var eo={data(){return{planName:"",planPrice:"",planDescription:"",areaOfCover:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreatePlan(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["planName","planPrice","planDescription","areaOfCover"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("planName",this.planName),a.append("planPrice",this.planPrice),a.append("planDescription",this.planDescription),a.append("areaOfCover",this.areaOfCover),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/plan/create",a,{headers:{token:t,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Plan created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("Plan created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const to=(0,_t.Z)(eo,[["render",Xn]]);var ao=to;const so={class:"intro-y flex items-center mt-8"},ro=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create plan",-1),io={key:0},lo=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),no=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),oo=[lo,no],co={class:"grid grid-cols-12 gap-6 mt-5"},uo={class:"intro-y col-span-12 lg:col-span-6"},po={class:"intro-y box p-5"},mo={class:"grid grid-cols-2 gap-6 mt-3"},ho=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name *",-1),go={class:"input-group"},fo=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),wo={class:"input-group"},vo={class:"grid grid-cols-6 gap-6 mt-3"},_o=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Area of cover *",-1),yo={class:"input-group"},xo={class:"grid grid-cols-6 gap-6 mt-3"},bo=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),ko={class:"input-group"},Do=(0,i._)("label",{for:"crud-form-18",class:"form-label mt-3"},"Status",-1),Co={class:"grid grid-cols-3 gap-6"},Po={class:"input-group"},So=(0,i._)("option",{value:"Active"},"Active",-1),zo=(0,i._)("option",{value:"Inactive"},"Inactive",-1),No=[So,zo],To={class:""},Mo={class:"text-right mt-8"},Io=["disabled"];function Uo(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",so,[ro,l.loading?((0,i.wg)(),(0,i.iD)("div",io,oo)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onUpdatePlan&&n.onUpdatePlan(...e)),["prevent"]))},[(0,i._)("div",co,[(0,i._)("div",uo,[(0,i._)("div",po,[(0,i._)("div",mo,[(0,i._)("div",null,[ho,(0,i._)("div",go,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.planName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planName]])])]),(0,i._)("div",null,[fo,(0,i._)("div",wo,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.planPrice=e),id:"crud-form-5",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planPrice]])])])]),(0,i._)("div",vo,[(0,i._)("div",null,[_o,(0,i._)("div",yo,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.areaOfCover=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.areaOfCover]])])])]),(0,i._)("div",xo,[(0,i._)("div",null,[bo,(0,i._)("div",ko,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.planDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planDescription]])])])]),Do,(0,i._)("div",Co,[(0,i._)("div",Po,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.status=e),class:"form-control","aria-label":"Default select example"},No,512),[[s.bM,l.status]])])]),(0,i._)("div",To,[(0,i._)("div",Mo,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,Io)])])])])])],32)])}var Eo={data(){return{planName:"",planPrice:"",planDescription:"",areaOfCover:"",status:"",plans:[],btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.fetchData(),this.getPlans()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){try{const e=await r.Z.get("/api/allplans");if(!e.data.success)throw new Error("Failed to fetch plans");this.plans=e.data.plan}catch(e){console.error("Error fetching plans:",e)}},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}`,{headers:{token:t}});this.planName=a.data.plan.planName,this.planPrice=a.data.plan.planPrice,this.planDescription=a.data.plan.planDescription,this.areaOfCover=a.data.plan.areaOfCover,this.status=a.data.plan.status}catch(e){console.error(e)}finally{this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePlan(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["planName","planPrice","planDescription","areaOfCover","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("planName",this.planName),a.append("planPrice",this.planPrice),a.append("planDescription",this.planDescription),a.append("areaOfCover",this.areaOfCover),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/plan/update/${e}`,a,{headers:{token:s,"Content-Type":"application/json"}});t.fire({icon:"success",title:"Success!",text:"Plan updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("Updated successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating plan:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating plan:",i.message);this.btnloading=!1}}}};const Fo=(0,_t.Z)(Eo,[["render",Uo]]);var $o=Fo;const Ao=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Services",-1),Bo={key:0,class:"shadow-md"},qo=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),jo=[qo],Vo={class:"grid grid-cols-12 gap-6 mt-5"},Lo={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Zo={class:"flex w-full sm:w-auto"},Ro={class:"w-48 relative text-slate-500"},Wo=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Ho=(0,i._)("div",{class:"hidden xl:block mx-auto text-slate-500"},null,-1),Oo={key:0,class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},Yo=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)("Add service ")],-1),Ko={class:"box"},Go={class:"flex items-start px-5 pt-5"},Jo={class:"w-full flex flex-col lg:flex-row items-left"},Qo={class:"font-medium"},Xo={class:"text-slate-500 text-xs mt-0.5"},ec={key:0,class:"absolute right-0 top-0 mr-5 mt-3 dropdown"},tc=(0,i.uE)('<a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),ac={class:"dropdown-menu w-40"},sc={class:"dropdown-content"},rc=(0,i._)("label",{class:"dropdown-item"}," Edit ",-1),ic={class:"text-center lg:text-left p-5 text-slate-500 text-xs mt-0.5"},lc={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-5"},nc={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-1"},oc={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},cc=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),dc=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),uc=[cc,dc],pc={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},mc={class:"w-full sm:w-auto sm:mr-auto"},hc={class:"pagination"},gc={class:"page-item"},fc=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),wc=[fc],vc=["onClick"],_c={class:"page-item"},yc=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),xc=[yc],bc=(0,i._)("option",null,"10",-1),kc=(0,i._)("option",null,"25",-1),Dc=(0,i._)("option",null,"35",-1),Cc=(0,i._)("option",null,"50",-1),Pc=(0,i._)("option",null,"100",-1),Sc=[bc,kc,Dc,Cc,Pc];function zc(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Ao,l.loading?((0,i.wg)(),(0,i.iD)("label",Bo,jo)):(0,i.kq)("",!0),(0,i._)("div",Vo,[(0,i._)("div",Lo,[(0,i._)("div",Zo,[(0,i._)("div",Ro,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Wo])]),Ho,1===l.role?((0,i.wg)(),(0,i.iD)("div",Oo,[(0,i.Wm)(o,{to:`/createservice/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Yo])),_:1},8,["to"])])):(0,i.kq)("",!0)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-6 lg:col-span-4",key:e._id},[(0,i._)("div",Ko,[(0,i._)("div",Go,[(0,i._)("div",Jo,[(0,i._)("div",{class:(0,Ns.C_)(["lg:ml-4 text-left lg:text-left mt-3 lg:mt-0",n.getStatusClass(e.status)])},[(0,i._)("label",Qo,(0,Ns.zw)(e.status),1),(0,i._)("div",Xo,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice)),1)])],2)]),1===l.role?((0,i.wg)(),(0,i.iD)("div",ec,[tc,(0,i._)("div",ac,[(0,i._)("div",sc,[(0,i.Wm)(o,{to:`/updateservice/${e._id}`},{default:(0,i.w5)((()=>[rc])),_:2},1032,["to"])])])])):(0,i.kq)("",!0)]),(0,i._)("div",ic,[(0,i._)("div",null,(0,Ns.zw)(e.serviceDescription),1),(0,i._)("div",lc,(0,Ns.zw)(e.serviceName),1),(0,i._)("div",nc,(0,Ns.zw)(e.serviceAreaOfCover),1)])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",oc,uc)):(0,i.kq)("",!0),(0,i._)("div",pc,[(0,i._)("nav",mc,[(0,i._)("ul",hc,[(0,i._)("li",gc,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},wc)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,vc)],2)))),128)),(0,i._)("li",_c,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},xc)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Sc,544),[[s.bM,l.pageSize]])])])])}var Nc={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:15,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}/?pageSize=9/`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=a.data.plan.planService,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=wt.Z.get("role");this.role="1"===e?1:0},mounted(){this.allPartners=Array.from(this.allPartners),console.log("allPartners:",this.allPartners)}};const Tc=(0,_t.Z)(Nc,[["render",zc]]);var Mc=Tc;const Ic={class:"intro-y flex items-center mt-8"},Uc={class:"text-lg font-medium mr-auto"},Ec={key:0},Fc=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),$c=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Ac=[Fc,$c],Bc={class:"grid grid-cols-12 gap-6 mt-5"},qc={class:"intro-y col-span-12 lg:col-span-6"},jc={class:"intro-y box p-5"},Vc={class:"grid grid-cols-2 gap-6 mt-3"},Lc=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Area of cover *",-1),Zc={class:"input-group"},Rc=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Access *",-1),Wc={class:"input-group"},Hc={class:"grid grid-cols-2 gap-6 mt-3"},Oc=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Yc={class:"input-group"},Kc=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Need authorization *",-1),Gc={class:"input-group"},Jc=(0,i._)("option",{selected:""},"no",-1),Qc=(0,i._)("option",null,"yes",-1),Xc=[Jc,Qc],ed={class:"grid grid-cols-6 gap-6 mt-3"},td=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),ad={class:"input-group"},sd={class:"text-right mt-8"},rd=["disabled"];function id(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Ic,[(0,i._)("h2",Uc,"Create service for "+(0,Ns.zw)(l.planName)+" || "+(0,Ns.zw)(n.formatCurrency(l.planPrice)),1),l.loading?((0,i.wg)(),(0,i.iD)("div",Ec,Ac)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"]))},[(0,i._)("div",Bc,[(0,i._)("div",qc,[(0,i._)("div",jc,[(0,i._)("div",Vc,[(0,i._)("div",null,[Lc,(0,i._)("div",Zc,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceAreaOfCover=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceAreaOfCover]])])]),(0,i._)("div",null,[Rc,(0,i._)("div",Wc,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.serviceName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"access","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceName]])])])]),(0,i._)("div",Hc,[(0,i._)("div",null,[Oc,(0,i._)("div",Yc,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.servicePrice=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.servicePrice]])])]),(0,i._)("div",null,[Kc,(0,i._)("div",Gc,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.preAuthorization=e)},Xc,512),[[s.bM,l.preAuthorization]])])])]),(0,i._)("div",ed,[(0,i._)("div",null,[td,(0,i._)("div",ad,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceDescription]])])])]),(0,i._)("div",sd,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,rd)])])])])],32)])}var ld={data(){return{serviceName:"",servicePrice:"",serviceDescription:"",serviceAreaOfCover:"",preAuthorization:"",planName:"",planPrice:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}`,{headers:{token:t}});this.planName=a.data.plan.planName,this.planPrice=a.data.plan.planPrice}catch(e){console.error(e)}finally{this.loading=!1}},async onCreateIndivitualCustomer(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["serviceName","servicePrice","serviceDescription","serviceAreaOfCover","preAuthorization"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("serviceName",this.serviceName),a.append("servicePrice",this.servicePrice),a.append("serviceDescription",this.serviceDescription),a.append("serviceAreaOfCover",this.serviceAreaOfCover),a.append("preAuthorization",this.preAuthorization),a.append("planId",this.$route.params.id),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/service/createservice",a,{headers:{token:t,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Service created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetchData()}};const nd=(0,_t.Z)(ld,[["render",id]]);var od=nd;const cd={class:"intro-y flex items-center mt-8"},dd=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update service",-1),ud={key:0},pd=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),md=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),hd=[pd,md],gd={class:"grid grid-cols-12 gap-6 mt-5"},fd={class:"intro-y col-span-12 lg:col-span-6"},wd={class:"intro-y box p-5"},vd={class:"grid grid-cols-2 gap-6 mt-3"},_d=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Area of cover *",-1),yd={class:"input-group"},xd=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Access *",-1),bd={class:"input-group"},kd={class:"grid grid-cols-2 gap-6 mt-3"},Dd=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Cd={class:"input-group"},Pd=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Need authorization *",-1),Sd={class:"input-group"},zd=(0,i._)("option",{selected:""},"no",-1),Nd=(0,i._)("option",null,"yes",-1),Td=[zd,Nd],Md={class:"grid grid-cols-6 gap-6 mt-3"},Id=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),Ud={class:"input-group"},Ed=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Status",-1),Fd={class:"input-group"},$d=(0,i._)("option",{value:"Active"},"Active",-1),Ad=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Bd=[$d,Ad],qd={class:"text-right mt-8"},jd=["disabled"];function Vd(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",cd,[dd,l.loading?((0,i.wg)(),(0,i.iD)("div",ud,hd)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>n.onUpdateService&&n.onUpdateService(...e)),["prevent"]))},[(0,i._)("div",gd,[(0,i._)("div",fd,[(0,i._)("div",wd,[(0,i._)("div",vd,[(0,i._)("div",null,[_d,(0,i._)("div",yd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceAreaOfCover=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceAreaOfCover]])])]),(0,i._)("div",null,[xd,(0,i._)("div",bd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.serviceName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"access","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceName]])])])]),(0,i._)("div",kd,[(0,i._)("div",null,[Dd,(0,i._)("div",Cd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.servicePrice=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.servicePrice]])])]),(0,i._)("div",null,[Pd,(0,i._)("div",Sd,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.preAuthorization=e)},Td,512),[[s.bM,l.preAuthorization]])])])]),(0,i._)("div",Md,[(0,i._)("div",null,[Id,(0,i._)("div",Ud,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceDescription]])])])]),(0,i._)("div",null,[Ed,(0,i._)("div",Fd,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.status=e),class:"form-control","aria-label":"Default select example"},Bd,512),[[s.bM,l.status]])])]),(0,i._)("div",qd,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,jd)])])])])],32)])}var Ld={data(){return{serviceName:"",servicePrice:"",serviceDescription:"",serviceAreaOfCover:"",preAuthorization:"",planId:"",status:"",plans:[],btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.fetchData(),this.getPlans()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){try{const e=await r.Z.get("/api/allplans");if(!e.data.success)throw new Error("Failed to fetch plans");this.plans=e.data.plan}catch(e){console.error("Error fetching plans:",e)}},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/service/${e}`,{headers:{token:t}});this.serviceName=a.data.service.serviceName,this.servicePrice=a.data.service.servicePrice,this.serviceDescription=a.data.service.serviceDescription,this.serviceAreaOfCover=a.data.service.serviceAreaOfCover,this.preAuthorization=a.data.service.preAuthorization,this.status=a.data.service.status}catch(e){console.error(e)}finally{this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateService(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["serviceName","servicePrice","serviceDescription","serviceAreaOfCover","preAuthorization","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("serviceName",this.serviceName),a.append("servicePrice",this.servicePrice),a.append("serviceDescription",this.serviceDescription),a.append("serviceAreaOfCover",this.serviceAreaOfCover),a.append("preAuthorization",this.preAuthorization),a.append("status",this.status),a.append("planId",this.planId),this.btnloading=!0;const i=await r.Z.put(`/api/service/update/${e}`,a,{headers:{token:s,"Content-Type":"application/json"}});t.fire({icon:"success",title:"Success!",text:"Service updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("Updated successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating service:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating service:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}}}};const Zd=(0,_t.Z)(Ld,[["render",Vd]]);var Rd=Zd;const Wd=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"All Transactions",-1),Hd={class:"grid grid-cols-12 gap-6 mt-5"},Od={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Yd={class:"report-box zoom-in"},Kd={class:"box p-5"},Gd={key:0,class:"flex text-xl"},Jd={class:"text-3xl font-medium leading-8 mt-6"},Qd={key:0},Xd={key:1},eu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),tu=[eu],au=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"In progress",-1),su={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},ru={class:"report-box zoom-in"},iu={class:"box p-5"},lu={key:0,class:"flex text-xl"},nu={class:"text-3xl font-medium leading-8 mt-6"},ou={key:0},cu={key:1},du=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),uu=[du],pu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Pending for approval ",-1),mu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},hu={class:"report-box zoom-in"},gu={class:"box p-5"},fu={key:0,class:"flex text-xl"},wu={class:"text-3xl font-medium leading-8 mt-6"},vu={key:0},_u={key:1},yu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),xu=[yu],bu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Aproved",-1),ku={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Du={class:"report-box zoom-in"},Cu={class:"box p-5"},Pu={key:0,class:"flex text-xl"},Su={class:"text-3xl font-medium leading-8 mt-6"},zu={key:0},Nu={key:1},Tu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Mu=[Tu],Iu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Completed",-1),Uu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Eu={class:"report-box zoom-in"},Fu={class:"box p-5"},$u={key:0,class:"flex text-xl"},Au={class:"text-3xl font-medium leading-8 mt-6"},Bu={key:0},qu={key:1},ju=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Vu=[ju],Lu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Canceled",-1),Zu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Ru={class:"report-box zoom-in"},Wu={class:"box p-5"},Hu={key:0,class:"flex text-xl"},Ou={class:"text-3xl font-medium leading-8 mt-6"},Yu={key:0},Ku={key:1},Gu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ju=[Gu],Qu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Revoked",-1),Xu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},ep={class:"report-box zoom-in"},tp={class:"box p-5"},ap={key:0,class:"flex text-xl"},sp={class:"text-2xl font-medium leading-8 mt-6"},rp={key:0},ip={key:1},lp=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),np=[lp],op=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Average Approval Time ",-1),cp={key:0,class:"shadow-md"},dp=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),up=[dp],pp={class:"grid grid-cols-12 gap-6 mt-8"},mp={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},hp={class:"flex w-full sm:w-auto"},gp={class:"w-48 relative text-slate-500"},fp=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),wp={class:"ml-1"},vp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),_p=[vp],yp={class:"hidden xl:block mx-auto text-slate-500"},xp=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),bp={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},kp={class:"table table-report -mt-2"},Dp=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Cp={class:"w-40 !py-4"},Pp={class:"decoration-dotted whitespace-nowrap"},Sp={class:"w-40 !py-4"},zp={key:0,class:"decoration-dotted whitespace-nowrap"},Np={key:1,class:"decoration-dotted whitespace-nowrap"},Tp={class:"w-40 !py-4"},Mp={class:"decoration-dotted whitespace-nowrap"},Ip={class:"w-40"},Up={class:"font-medium whitespace-nowrap"},Ep={class:"text-center"},Fp={key:0,class:"flex items-center justify-center whitespace-nowrap"},$p={key:1,class:"flex items-center justify-center whitespace-nowrap"},Ap={class:"whitespace-nowrap"},Bp={class:"whitespace-nowrap"},qp={class:"whitespace-nowrap"},jp={class:"w-40 !py-4"},Vp={class:"table-report__action"},Lp={class:"flex justify-center items-center"},Zp=["onClick"],Rp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Wp={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Hp=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),Op={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},Yp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Kp={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Gp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Jp={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Qp=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Xp=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),em=[Qp,Xp],tm={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},am={class:"w-full sm:w-auto sm:mr-auto"},sm={class:"pagination"},rm={class:"page-item"},im=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),lm=[im],nm=["onClick"],om={class:"page-item"},cm=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),dm=[cm],um=(0,i._)("option",null,"10",-1),pm=(0,i._)("option",null,"25",-1),mm=(0,i._)("option",null,"35",-1),hm=(0,i._)("option",null,"50",-1),gm=(0,i._)("option",null,"100",-1),fm=(0,i._)("option",null,"500",-1),wm=(0,i._)("option",null,"1000",-1),vm=[um,pm,mm,hm,gm,fm,wm],_m={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},ym={class:"modal-dialog"},xm={class:"modal-content"},bm={class:"modal-body p-0"},km={class:"p-5 text-center"},Dm=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Cm=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Pm={class:"text-slate-500 mt-2"},Sm=["href"],zm=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Nm(e,t,a,r,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[Wd,(0,i._)("div",Hd,[(0,i._)("div",Od,[(0,i.Wm)(o,{to:"/transactionsinprogress"},{default:(0,i.w5)((()=>[(0,i._)("div",Yd,[(0,i._)("div",Kd,[l.inprogress?((0,i.wg)(),(0,i.iD)("div",Gd,(0,Ns.zw)(n.formatCurrency(l.inprogress)),1)):(0,i.kq)("",!0),(0,i._)("div",Jd,[l.inprogressCount?((0,i.wg)(),(0,i.iD)("label",Qd,(0,Ns.zw)(n.formatNumber(l.inprogressCount)),1)):((0,i.wg)(),(0,i.iD)("label",Xd,tu))]),au])])])),_:1})]),(0,i._)("div",su,[(0,i.Wm)(o,{to:"/transactionspending"},{default:(0,i.w5)((()=>[(0,i._)("div",ru,[(0,i._)("div",iu,[l.pending?((0,i.wg)(),(0,i.iD)("div",lu,(0,Ns.zw)(n.formatCurrency(l.pending)),1)):(0,i.kq)("",!0),(0,i._)("div",nu,[l.pending?((0,i.wg)(),(0,i.iD)("label",ou,(0,Ns.zw)(n.formatNumber(l.pendingCount)),1)):((0,i.wg)(),(0,i.iD)("label",cu,uu))]),pu])])])),_:1})]),(0,i._)("div",mu,[(0,i.Wm)(o,{to:"/transactionsaproved"},{default:(0,i.w5)((()=>[(0,i._)("div",hu,[(0,i._)("div",gu,[l.aproved?((0,i.wg)(),(0,i.iD)("div",fu,(0,Ns.zw)(n.formatCurrency(l.aproved)),1)):(0,i.kq)("",!0),(0,i._)("div",wu,[l.revoked?((0,i.wg)(),(0,i.iD)("label",vu,(0,Ns.zw)(n.formatNumber(l.aprovedCount)),1)):((0,i.wg)(),(0,i.iD)("label",_u,xu))]),bu])])])),_:1})]),(0,i._)("div",ku,[(0,i.Wm)(o,{to:"/transactionscompleted"},{default:(0,i.w5)((()=>[(0,i._)("div",Du,[(0,i._)("div",Cu,[l.completed?((0,i.wg)(),(0,i.iD)("div",Pu,(0,Ns.zw)(n.formatCurrency(l.completed)),1)):(0,i.kq)("",!0),(0,i._)("div",Su,[l.completed?((0,i.wg)(),(0,i.iD)("label",zu,(0,Ns.zw)(n.formatNumber(l.completedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Nu,Mu))]),Iu])])])),_:1})]),(0,i._)("div",Uu,[(0,i.Wm)(o,{to:"/transactionscanceled"},{default:(0,i.w5)((()=>[(0,i._)("div",Eu,[(0,i._)("div",Fu,[l.completed?((0,i.wg)(),(0,i.iD)("div",$u,(0,Ns.zw)(n.formatCurrency(l.canceled)),1)):(0,i.kq)("",!0),(0,i._)("div",Au,[l.completed?((0,i.wg)(),(0,i.iD)("label",Bu,(0,Ns.zw)(n.formatNumber(l.canceledCount)),1)):((0,i.wg)(),(0,i.iD)("label",qu,Vu))]),Lu])])])),_:1})]),(0,i._)("div",Zu,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",Ru,[(0,i._)("div",Wu,[l.revoked?((0,i.wg)(),(0,i.iD)("div",Hu,(0,Ns.zw)(n.formatCurrency(l.revoked)),1)):(0,i.kq)("",!0),(0,i._)("div",Ou,[l.revoked?((0,i.wg)(),(0,i.iD)("label",Yu,(0,Ns.zw)(n.formatNumber(l.revokedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Ku,Ju))]),Qu])])])),_:1})]),(0,i._)("div",Xu,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",ep,[(0,i._)("div",tp,[l.averageApprovalTime?((0,i.wg)(),(0,i.iD)("div",ap)):(0,i.kq)("",!0),(0,i._)("div",sp,[l.revoked?((0,i.wg)(),(0,i.iD)("label",rp,(0,Ns.zw)(n.formattedAverageApprovalTime),1)):((0,i.wg)(),(0,i.iD)("label",ip,np))]),op])])])),_:1})])]),l.loading?((0,i.wg)(),(0,i.iD)("label",cp,up)):(0,i.kq)("",!0),(0,i._)("div",pp,[(0,i._)("div",mp,[(0,i._)("div",hp,[(0,i._)("div",gp,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),fp])]),(0,i._)("div",wp,[(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},_p)]),(0,i._)("div",yp," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),xp]),(0,i._)("div",bp,[(0,i._)("table",kp,[Dp,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Cp,[(0,i._)("a",Pp,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Sp,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",zp,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Np," Individual "))]),(0,i._)("td",Tp,[(0,i._)("a",Mp,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Ip,[(0,i._)("a",Up,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Ep,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Fp,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",$p,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Ap,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Bp,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",qp,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",jp,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",Vp,[(0,i._)("div",Lp,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[Rp,(0,i.Uk)(" Files ")],8,Zp),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Wp,[Hp,(0,i.Wm)(o,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Op,[Yp,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Kp,[Gp,(0,i.Wm)(o,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Jp,em)):(0,i.kq)("",!0),(0,i._)("div",tm,[(0,i._)("nav",am,[(0,i._)("ul",sm,[(0,i._)("li",rm,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},lm)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,nm)],2)))),128)),(0,i._)("li",om,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},dm)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},vm,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",_m,[(0,i._)("div",ym,[(0,i._)("div",xm,[(0,i._)("div",bm,[(0,i._)("div",km,[Dm,Cm,(0,i._)("div",Pm,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Sm)])))),128))])])]),zm])])])])])}var Tm={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/getall",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardTotals(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/total/transactionsbystatus",{headers:{token:e}});if(t){const e=t.data.statusCounts;this.inprogress=e["In progress"].totalAmount,this.revoked=e.Revoked.totalAmount,this.aproved=e.Aproved.totalAmount,this.pending=e.Pending.totalAmount,this.completed=e.Completed.totalAmount,this.canceled=e.Canceled.totalAmount,this.inprogressCount=e["In progress"].count,this.revokedCount=e.Revoked.count,this.aprovedCount=e.Aproved.count,this.pendingCount=e.Pending.count,this.completedCount=e.Completed.count,this.canceledCount=e.Canceled.count}else this.inprogress=0,this.revoked=0,this.aproved=0,this.pending=0,this.completed=0,this.canceled=0,this.inprogressCount=0,this.revokedCount=0,this.aprovedCount=0,this.pendingCount=0,this.completedCount=0,this.canceledCount=0}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardAVT(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/averageapprovaltime",{headers:{token:e}}),a=t.data;this.averageApprovalTime=a.averageApprovalTime}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData(),this.fetchDashboardTotals(),this.fetchDashboardAVT()}};const Mm=(0,_t.Z)(Tm,[["render",Nm]]);var Im=Mm;const Um={class:"intro-y flex items-center mt-8"},Em=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Aprove our Revoke Transaction",-1),Fm={key:0,class:"shadow-md"},$m=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Am=[$m],Bm={class:"grid grid-cols-12 gap-6 mt-5"},qm={class:"intro-y col-span-12 lg:col-span-6"},jm={class:"intro-y box p-5"},Vm={class:"grid grid-cols-2 gap-6 mt-3"},Lm=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name:",-1),Zm=(0,i._)("div",{class:"mt-2"},null,-1),Rm={for:"",class:"form-control"},Wm=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Date:",-1),Hm=(0,i._)("div",{class:"mt-2"},null,-1),Om={for:"",class:"form-control"},Ym={class:"grid grid-cols-2 gap-6 mt-3"},Km=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Partner:",-1),Gm=(0,i._)("div",{class:"mt-2"},null,-1),Jm={for:"",class:"form-control"},Qm=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Amount:",-1),Xm=(0,i._)("div",{class:"mt-2"},null,-1),eh={for:"",class:"form-control"},th={class:"grid grid-cols-2 gap-6 mt-3"},ah=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service:",-1),sh=(0,i._)("div",{class:"mt-2"},null,-1),rh={for:"",class:"form-control"},ih=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Area of Cover:",-1),lh=(0,i._)("div",{class:"mt-2"},null,-1),nh={for:"",class:"form-control"},oh={class:"grid grid-cols-6 gap-12 mt-3"},ch=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Service Description",-1),dh=(0,i._)("div",{class:"mt-1"},null,-1),uh={class:"input-group"},ph=(0,i._)("div",{class:"mt-4"},null,-1),mh={class:"intro-y box col-span-12 lg:col-span-12"},hh=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="">Documents</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),gh={key:0,class:"p-5"},fh={class:"file"},wh=["href"],vh={class:"ml-4"},_h=["href"],yh={class:"text-slate-500 text-xs mt-0.5"},xh={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},bh=(0,i._)("a",{href:"#"},null,-1),kh={class:"text-right mt-8"},Dh=["disabled"],Ch=["disabled"];function Ph(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Um,[Em,l.loading?((0,i.wg)(),(0,i.iD)("label",Fm,Am)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"])),enctype:"multipart/form-data","data-single":"true"},[(0,i._)("div",Bm,[(0,i._)("div",qm,[(0,i._)("div",jm,[(0,i._)("div",Vm,[(0,i._)("div",null,[Lm,Zm,(0,i._)("label",Rm,[(0,i._)("strong",null,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1)])]),(0,i._)("div",null,[Wm,Hm,(0,i._)("label",Om,[(0,i._)("strong",null,(0,Ns.zw)(l.updatedAt),1)])])]),(0,i._)("div",Ym,[(0,i._)("div",null,[Km,Gm,(0,i._)("label",Jm,[(0,i._)("strong",null,(0,Ns.zw)(l.partnerName),1)])]),(0,i._)("div",null,[Qm,Xm,(0,i._)("label",eh,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(l.amount)),1)])])]),(0,i._)("div",th,[(0,i._)("div",null,[ah,sh,(0,i._)("label",rh,[(0,i._)("strong",null,(0,Ns.zw)(l.service),1)])]),(0,i._)("div",null,[ih,lh,(0,i._)("label",nh,[(0,i._)("strong",null,(0,Ns.zw)(l.serviceAreaOfCover),1)])])]),(0,i._)("div",oh,[(0,i._)("div",null,[ch,dh,(0,i._)("div",uh,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.serviceDescription]])])])]),ph,(0,i._)("div",mh,[hh,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",gh,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",fh,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,wh)]),(0,i._)("div",vh,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,_h),(0,i._)("div",yh,(0,Ns.zw)(n.getFileSize(e)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",xh,[(0,i.Uk)(" No files available. Add customer documents "),bh]))]),(0,i._)("div",kh,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[1]||(t[1]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{onClick:t[2]||(t[2]=e=>n.aprove()),type:"submit",class:"btn btn-success text-white w-24 mr-1",disabled:l.btnloading}," Aprove ",8,Dh),(0,i._)("button",{onClick:t[3]||(t[3]=e=>n.revoke()),type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Revoke ",8,Ch)])])])])],32)])}var Sh={data(){return{plan:"",errorMessage:"",loading:!1,btnloading:!1,transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",multipleFiles:[],startDate:"",endDate:"",selectedDate:null,status:""}},created(){this.getProfile()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filesArray(){const e=this.user.multipleFiles;return e.split(",")}},methods:{async aprove(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.put(`/aprove/transaction/${t}`,{},{headers:{token:e}});$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} aproved`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(a)}catch(a){this.btnloading=!1,this.loading=!1,$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${a.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error aproving invoice:",a)}},async revoke(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.put(`/revoke/transaction/${t}`,{},{headers:{token:e}});$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} revoked`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(a)}catch(a){this.btnloading=!1,this.loading=!1,$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${a.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error revoking invoice:",a)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){this.btnloading=!0,this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.amount=t.amount,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.partnerName=t.user.partnerUser.partnerName,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""}}};const zh=(0,_t.Z)(Sh,[["render",Ph]]);var Nh=zh;const Th={class:"intro-y flex items-center mt-8"},Mh=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},[(0,i.Uk)(" Cancel Transaction || "),(0,i._)("span",{class:"text-sm font-medium mr-auto"},"The amount will be returned to the customer's account.")],-1),Ih={key:0},Uh=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Eh=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Fh=[Uh,Eh],$h={class:"grid grid-cols-12 gap-6 mt-5"},Ah={class:"intro-y col-span-12 lg:col-span-6"},Bh={class:"intro-y box p-5"},qh={class:"grid grid-cols-2 gap-6 mt-3"},jh=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name:",-1),Vh=(0,i._)("div",{class:"mt-2"},null,-1),Lh={for:"",class:"form-control"},Zh=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Date:",-1),Rh=(0,i._)("div",{class:"mt-2"},null,-1),Wh={for:"",class:"form-control"},Hh={class:"grid grid-cols-2 gap-6 mt-3"},Oh=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Partner:",-1),Yh=(0,i._)("div",{class:"mt-2"},null,-1),Kh={for:"",class:"form-control"},Gh=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Amount:",-1),Jh=(0,i._)("div",{class:"mt-2"},null,-1),Qh={for:"",class:"form-control"},Xh={class:"grid grid-cols-2 gap-6 mt-3"},eg=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service:",-1),tg=(0,i._)("div",{class:"mt-2"},null,-1),ag={for:"",class:"form-control"},sg=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Area of Cover:",-1),rg=(0,i._)("div",{class:"mt-2"},null,-1),ig={for:"",class:"form-control"},lg={class:"grid grid-cols-6 gap-12 mt-3"},ng=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Service Description",-1),og=(0,i._)("div",{class:"mt-1"},null,-1),cg={class:"input-group"},dg=(0,i._)("div",{class:"mt-4"},null,-1),ug={class:"intro-y box col-span-12 lg:col-span-12"},pg=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="">Documents</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),mg={key:0,class:"p-5"},hg={class:"file"},gg=["href"],fg={class:"ml-4"},wg=["href"],vg={class:"text-slate-500 text-xs mt-0.5"},_g={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},yg=(0,i._)("a",{href:"#"},null,-1),xg={class:"grid grid-cols-6 gap-12 mt-5"},bg=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Cancelation reason",-1),kg=(0,i._)("div",{class:"mt-2"},null,-1),Dg={class:"input-group"},Cg={class:"text-right mt-8"},Pg=["disabled"];function Sg(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Th,[Mh,l.loading?((0,i.wg)(),(0,i.iD)("div",Ih,Fh)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"])),enctype:"multipart/form-data","data-single":"true"},[(0,i._)("div",$h,[(0,i._)("div",Ah,[(0,i._)("div",Bh,[(0,i._)("div",qh,[(0,i._)("div",null,[jh,Vh,(0,i._)("label",Lh,[(0,i._)("strong",null,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1)])]),(0,i._)("div",null,[Zh,Rh,(0,i._)("label",Wh,[(0,i._)("strong",null,(0,Ns.zw)(l.updatedAt),1)])])]),(0,i._)("div",Hh,[(0,i._)("div",null,[Oh,Yh,(0,i._)("label",Kh,[(0,i._)("strong",null,(0,Ns.zw)(l.partnerName),1)])]),(0,i._)("div",null,[Gh,Jh,(0,i._)("label",Qh,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(l.amount)),1)])])]),(0,i._)("div",Xh,[(0,i._)("div",null,[eg,tg,(0,i._)("label",ag,[(0,i._)("strong",null,(0,Ns.zw)(l.service),1)])]),(0,i._)("div",null,[sg,rg,(0,i._)("label",ig,[(0,i._)("strong",null,(0,Ns.zw)(l.serviceAreaOfCover),1)])])]),(0,i._)("div",lg,[(0,i._)("div",null,[ng,og,(0,i._)("div",cg,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.serviceDescription]])])])]),dg,(0,i._)("div",ug,[pg,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",mg,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",hg,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,gg)]),(0,i._)("div",fg,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,wg),(0,i._)("div",vg,(0,Ns.zw)(n.getFileSize(e)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",_g,[(0,i.Uk)(" No files available. Add customer documents "),yg]))]),(0,i._)("div",xg,[(0,i._)("div",null,[bg,kg,(0,i._)("div",Dg,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.cancelReason=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"insert cancelation reason here","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.cancelReason]])])])]),(0,i._)("div",Cg,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Back "),(0,i._)("button",{onClick:t[3]||(t[3]=e=>n.cancel()),type:"submit",class:"btn btn-primary",disabled:l.btnloading}," Cancel transaction ",8,Pg)])])])])],32)])}var zg={data(){return{plan:"",errorMessage:"",loading:!1,btnloading:!1,transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",multipleFiles:[],cancelReason:"",status:""}},created(){this.getProfile()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filesArray(){const e=this.user.multipleFiles;return e.split(",")}},methods:{async cancel(){const e=new FormData;e.append("cancelReason",this.cancelReason),this.loading=!0,this.btnloading=!0;const t=wt.Z.get("token"),a=this.$route.params.id;try{const s=await r.Z.put(`/cancel/transaction/${a}`,e,{headers:{token:t,"Content-Type":"application/json"}});$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} canceled`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(s)}catch(s){this.btnloading=!1,this.loading=!1,$r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${s.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error canceling invoice:",s)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){this.btnloading=!0,this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.amount=t.amount,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.partnerName=t.user.partnerUser.partnerName,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""}}};const Ng=(0,_t.Z)(zg,[["render",Sg]]);var Tg=Ng;const Mg=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Pending Transactions",-1),Ig={key:0,class:"shadow-md"},Ug=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Eg=[Ug],Fg={class:"grid grid-cols-12 gap-6 mt-8"},$g={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Ag={class:"flex w-full sm:w-auto"},Bg={class:"w-48 relative text-slate-500"},qg=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),jg={class:"ml-1"},Vg=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Lg=[Vg],Zg={class:"hidden xl:block mx-auto text-slate-500"},Rg=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Wg={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Hg={class:"table table-report -mt-2"},Og=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Yg={class:"w-40 !py-4"},Kg={class:"decoration-dotted whitespace-nowrap"},Gg={class:"w-40 !py-4"},Jg={key:0,class:"decoration-dotted whitespace-nowrap"},Qg={key:1,class:"decoration-dotted whitespace-nowrap"},Xg={class:"w-40 !py-4"},ef={class:"decoration-dotted whitespace-nowrap"},tf={class:"w-40"},af={class:"font-medium whitespace-nowrap"},sf={class:"text-center"},rf={key:0,class:"flex items-center justify-center whitespace-nowrap"},lf={key:1,class:"flex items-center justify-center whitespace-nowrap"},nf={class:"whitespace-nowrap"},of={class:"whitespace-nowrap"},cf={class:"whitespace-nowrap"},df={class:"w-40 !py-4"},uf={class:"table-report__action"},pf={class:"flex justify-center items-center"},mf=["onClick"],hf=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),gf={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},ff=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),wf={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},vf=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),_f={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},yf=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),xf={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},bf=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),kf=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Df=[bf,kf],Cf={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Pf={class:"w-full sm:w-auto sm:mr-auto"},Sf={class:"pagination"},zf={class:"page-item"},Nf=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Tf=[Nf],Mf=["onClick"],If={class:"page-item"},Uf=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Ef=[Uf],Ff=(0,i._)("option",null,"10",-1),$f=(0,i._)("option",null,"25",-1),Af=(0,i._)("option",null,"35",-1),Bf=(0,i._)("option",null,"50",-1),qf=(0,i._)("option",null,"100",-1),jf=(0,i._)("option",null,"500",-1),Vf=(0,i._)("option",null,"1000",-1),Lf=[Ff,$f,Af,Bf,qf,jf,Vf],Zf={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Rf={class:"modal-dialog"},Wf={class:"modal-content"},Hf={class:"modal-body p-0"},Of={class:"p-5 text-center"},Yf=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Kf=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Gf={class:"text-slate-500 mt-2"},Jf=["href"],Qf=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Xf(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Mg,l.loading?((0,i.wg)(),(0,i.iD)("label",Ig,Eg)):(0,i.kq)("",!0),(0,i._)("div",Fg,[(0,i._)("div",$g,[(0,i._)("div",Ag,[(0,i._)("div",Bg,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),qg])]),(0,i._)("div",jg,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Lg)]),(0,i._)("div",Zg," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Rg]),(0,i._)("div",Wg,[(0,i._)("table",Hg,[Og,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Yg,[(0,i._)("a",Kg,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Gg,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Jg,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Qg," Individual "))]),(0,i._)("td",Xg,[(0,i._)("a",ef,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",tf,[(0,i._)("a",af,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",sf,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",rf,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",lf,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",nf,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",of,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",cf,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",df,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",uf,[(0,i._)("div",pf,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[hf,(0,i.Uk)(" Files ")],8,mf),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",gf,[ff,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",wf,[vf,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",_f,[yf,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",xf,Df)):(0,i.kq)("",!0),(0,i._)("div",Cf,[(0,i._)("nav",Pf,[(0,i._)("ul",Sf,[(0,i._)("li",zf,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Tf)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Mf)],2)))),128)),(0,i._)("li",If,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Ef)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Lf,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Zf,[(0,i._)("div",Rf,[(0,i._)("div",Wf,[(0,i._)("div",Hf,[(0,i._)("div",Of,[Yf,Kf,(0,i._)("div",Gf,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Jf)])))),128))])])]),Qf])])])])])}var ew={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/pending",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const tw=(0,_t.Z)(ew,[["render",Xf]]);var aw=tw;const sw=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Aproved Transactions",-1),rw={key:0,class:"shadow-md"},iw=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),lw=[iw],nw={class:"grid grid-cols-12 gap-6 mt-8"},ow={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},cw={class:"flex w-full sm:w-auto"},dw={class:"w-48 relative text-slate-500"},uw=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),pw={class:"ml-1"},mw=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),hw=[mw],gw={class:"hidden xl:block mx-auto text-slate-500"},fw=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),ww={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},vw={class:"table table-report -mt-2"},_w=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),yw={class:"w-40 !py-4"},xw={class:"decoration-dotted whitespace-nowrap"},bw={class:"w-40 !py-4"},kw={key:0,class:"decoration-dotted whitespace-nowrap"},Dw={key:1,class:"decoration-dotted whitespace-nowrap"},Cw={class:"w-40 !py-4"},Pw={class:"decoration-dotted whitespace-nowrap"},Sw={class:"w-40"},zw={class:"font-medium whitespace-nowrap"},Nw={class:"text-center"},Tw={key:0,class:"flex items-center justify-center whitespace-nowrap"},Mw={key:1,class:"flex items-center justify-center whitespace-nowrap"},Iw={class:"whitespace-nowrap"},Uw={class:"whitespace-nowrap"},Ew={class:"whitespace-nowrap"},Fw={class:"w-40 !py-4"},$w={class:"table-report__action"},Aw={class:"flex justify-center items-center"},Bw=["onClick"],qw=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),jw={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Vw=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),Lw={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},Zw=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Rw={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ww=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Hw={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Ow=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Yw=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Kw=[Ow,Yw],Gw={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Jw={class:"w-full sm:w-auto sm:mr-auto"},Qw={class:"pagination"},Xw={class:"page-item"},ev=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),tv=[ev],av=["onClick"],sv={class:"page-item"},rv=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),iv=[rv],lv=(0,i._)("option",null,"10",-1),nv=(0,i._)("option",null,"25",-1),ov=(0,i._)("option",null,"35",-1),cv=(0,i._)("option",null,"50",-1),dv=(0,i._)("option",null,"100",-1),uv=(0,i._)("option",null,"500",-1),pv=(0,i._)("option",null,"1000",-1),mv=[lv,nv,ov,cv,dv,uv,pv],hv={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},gv={class:"modal-dialog"},fv={class:"modal-content"},wv={class:"modal-body p-0"},vv={class:"p-5 text-center"},_v=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),yv=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),xv={class:"text-slate-500 mt-2"},bv=["href"],kv=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Dv(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[sw,l.loading?((0,i.wg)(),(0,i.iD)("label",rw,lw)):(0,i.kq)("",!0),(0,i._)("div",nw,[(0,i._)("div",ow,[(0,i._)("div",cw,[(0,i._)("div",dw,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),uw])]),(0,i._)("div",pw,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},hw)]),(0,i._)("div",gw," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),fw]),(0,i._)("div",ww,[(0,i._)("table",vw,[_w,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",yw,[(0,i._)("a",xw,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",bw,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",kw,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Dw," Individual "))]),(0,i._)("td",Cw,[(0,i._)("a",Pw,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Sw,[(0,i._)("a",zw,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Nw,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Tw,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",Mw,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Iw,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Uw,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",Ew,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",Fw,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",$w,[(0,i._)("div",Aw,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[qw,(0,i.Uk)(" Files ")],8,Bw),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",jw,[Vw,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Lw,[Zw,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Rw,[Ww,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Hw,Kw)):(0,i.kq)("",!0),(0,i._)("div",Gw,[(0,i._)("nav",Jw,[(0,i._)("ul",Qw,[(0,i._)("li",Xw,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},tv)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,av)],2)))),128)),(0,i._)("li",sv,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},iv)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},mv,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",hv,[(0,i._)("div",gv,[(0,i._)("div",fv,[(0,i._)("div",wv,[(0,i._)("div",vv,[_v,yv,(0,i._)("div",xv,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,bv)])))),128))])])]),kv])])])])])}var Cv={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/aproved",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Pv=(0,_t.Z)(Cv,[["render",Dv]]);var Sv=Pv;const zv=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Canceled Transactions",-1),Nv={key:0,class:"shadow-md"},Tv=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Mv=[Tv],Iv={class:"grid grid-cols-12 gap-6 mt-8"},Uv={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Ev={class:"flex w-full sm:w-auto"},Fv={class:"w-48 relative text-slate-500"},$v=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Av={class:"ml-1"},Bv=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),qv=[Bv],jv={class:"hidden xl:block mx-auto text-slate-500"},Vv=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Lv={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Zv={class:"table table-report -mt-2"},Rv=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"whitespace-nowrap"},"Reason"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Wv={class:"w-40 !py-4"},Hv={class:"decoration-dotted whitespace-nowrap"},Ov={class:"w-40 !py-4"},Yv={key:0,class:"decoration-dotted whitespace-nowrap"},Kv={key:1,class:"decoration-dotted whitespace-nowrap"},Gv={class:"w-40 !py-4"},Jv={class:"decoration-dotted whitespace-nowrap"},Qv={class:"w-40"},Xv={class:"font-medium whitespace-nowrap"},e_={class:"text-center"},t_={key:0,class:"flex items-center justify-center whitespace-nowrap"},a_={key:1,class:"flex items-center justify-center whitespace-nowrap"},s_={class:"whitespace-nowrap"},r_={class:"whitespace-nowrap"},i_={class:"whitespace-nowrap"},l_={class:"whitespace-nowrap"},n_={class:"w-40 !py-4"},o_={class:"table-report__action"},c_={class:"flex justify-center items-center"},d_=["onClick"],u_=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),p_={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},m_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),h_={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},g_=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),f_={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},w_=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),v_={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},__=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),y_=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),x_=[__,y_],b_={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},k_={class:"w-full sm:w-auto sm:mr-auto"},D_={class:"pagination"},C_={class:"page-item"},P_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),S_=[P_],z_=["onClick"],N_={class:"page-item"},T_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),M_=[T_],I_=(0,i._)("option",null,"10",-1),U_=(0,i._)("option",null,"25",-1),E_=(0,i._)("option",null,"35",-1),F_=(0,i._)("option",null,"50",-1),$_=(0,i._)("option",null,"100",-1),A_=(0,i._)("option",null,"500",-1),B_=(0,i._)("option",null,"1000",-1),q_=[I_,U_,E_,F_,$_,A_,B_],j_={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},V_={class:"modal-dialog"},L_={class:"modal-content"},Z_={class:"modal-body p-0"},R_={class:"p-5 text-center"},W_=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),H_=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),O_={class:"text-slate-500 mt-2"},Y_=["href"],K_=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function G_(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[zv,l.loading?((0,i.wg)(),(0,i.iD)("label",Nv,Mv)):(0,i.kq)("",!0),(0,i._)("div",Iv,[(0,i._)("div",Uv,[(0,i._)("div",Ev,[(0,i._)("div",Fv,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),$v])]),(0,i._)("div",Av,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},qv)]),(0,i._)("div",jv," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Vv]),(0,i._)("div",Lv,[(0,i._)("table",Zv,[Rv,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Wv,[(0,i._)("a",Hv,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Ov,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Yv,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Kv," Individual "))]),(0,i._)("td",Gv,[(0,i._)("a",Jv,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Qv,[(0,i._)("a",Xv,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",e_,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",t_,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",a_,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",s_,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",r_,(0,Ns.zw)(e.cancelReason),1)]),(0,i._)("td",null,[(0,i._)("div",i_,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",l_,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",n_,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",o_,[(0,i._)("div",c_,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[u_,(0,i.Uk)(" Files ")],8,d_),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",p_,[m_,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",h_,[g_,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",f_,[w_,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",v_,x_)):(0,i.kq)("",!0),(0,i._)("div",b_,[(0,i._)("nav",k_,[(0,i._)("ul",D_,[(0,i._)("li",C_,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},S_)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,z_)],2)))),128)),(0,i._)("li",N_,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},M_)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},q_,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",j_,[(0,i._)("div",V_,[(0,i._)("div",L_,[(0,i._)("div",Z_,[(0,i._)("div",R_,[W_,H_,(0,i._)("div",O_,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Y_)])))),128))])])]),K_])])])])])}var J_={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/canceled",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Q_=(0,_t.Z)(J_,[["render",G_]]);var X_=Q_;const ey=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Completed Transactions",-1),ty={key:0,class:"shadow-md"},ay=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),sy=[ay],ry={class:"grid grid-cols-12 gap-6 mt-8"},iy={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ly={class:"flex w-full sm:w-auto"},ny={class:"w-48 relative text-slate-500"},oy=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),cy={class:"ml-1"},dy=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),uy=[dy],py={class:"hidden xl:block mx-auto text-slate-500"},my=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),hy={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},gy={class:"table table-report -mt-2"},fy=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),wy={class:"w-40 !py-4"},vy={class:"decoration-dotted whitespace-nowrap"},_y={class:"w-40 !py-4"},yy={key:0,class:"decoration-dotted whitespace-nowrap"},xy={key:1,class:"decoration-dotted whitespace-nowrap"},by={class:"w-40 !py-4"},ky={class:"decoration-dotted whitespace-nowrap"},Dy={class:"w-40"},Cy={class:"font-medium whitespace-nowrap"},Py={class:"text-center"},Sy={key:0,class:"flex items-center justify-center whitespace-nowrap"},zy={key:1,class:"flex items-center justify-center whitespace-nowrap"},Ny={class:"whitespace-nowrap"},Ty={class:"whitespace-nowrap"},My={class:"whitespace-nowrap"},Iy={class:"w-40 !py-4"},Uy={class:"table-report__action"},Ey={class:"flex justify-center items-center"},Fy=["onClick"],$y=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Ay={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},By=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),qy={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},jy=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Vy={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ly=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Zy={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Ry=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Wy=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Hy=[Ry,Wy],Oy={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Yy={class:"w-full sm:w-auto sm:mr-auto"},Ky={class:"pagination"},Gy={class:"page-item"},Jy=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Qy=[Jy],Xy=["onClick"],ex={class:"page-item"},tx=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),ax=[tx],sx=(0,i._)("option",null,"10",-1),rx=(0,i._)("option",null,"25",-1),ix=(0,i._)("option",null,"35",-1),lx=(0,i._)("option",null,"50",-1),nx=(0,i._)("option",null,"100",-1),ox=(0,i._)("option",null,"500",-1),cx=(0,i._)("option",null,"1000",-1),dx=[sx,rx,ix,lx,nx,ox,cx],ux={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},px={class:"modal-dialog"},mx={class:"modal-content"},hx={class:"modal-body p-0"},gx={class:"p-5 text-center"},fx=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),wx=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),vx={class:"text-slate-500 mt-2"},_x=["href"],yx=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function xx(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[ey,l.loading?((0,i.wg)(),(0,i.iD)("label",ty,sy)):(0,i.kq)("",!0),(0,i._)("div",ry,[(0,i._)("div",iy,[(0,i._)("div",ly,[(0,i._)("div",ny,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),oy])]),(0,i._)("div",cy,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},uy)]),(0,i._)("div",py," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),my]),(0,i._)("div",hy,[(0,i._)("table",gy,[fy,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",wy,[(0,i._)("a",vy,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",_y,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",yy,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",xy," Individual "))]),(0,i._)("td",by,[(0,i._)("a",ky,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Dy,[(0,i._)("a",Cy,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Py,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Sy,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",zy,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Ny,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Ty,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",My,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",Iy,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",Uy,[(0,i._)("div",Ey,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[$y,(0,i.Uk)(" Files ")],8,Fy),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Ay,[By,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",qy,[jy,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Vy,[Ly,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Zy,Hy)):(0,i.kq)("",!0),(0,i._)("div",Oy,[(0,i._)("nav",Yy,[(0,i._)("ul",Ky,[(0,i._)("li",Gy,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Qy)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Xy)],2)))),128)),(0,i._)("li",ex,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},ax)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},dx,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",ux,[(0,i._)("div",px,[(0,i._)("div",mx,[(0,i._)("div",hx,[(0,i._)("div",gx,[fx,wx,(0,i._)("div",vx,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,_x)])))),128))])])]),yx])])])])])}var bx={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/completed",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const kx=(0,_t.Z)(bx,[["render",xx]]);var Dx=kx;const Cx=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Revoked Transactions",-1),Px={key:0,class:"shadow-md"},Sx=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),zx=[Sx],Nx={class:"grid grid-cols-12 gap-6 mt-8"},Tx={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Mx={class:"flex w-full sm:w-auto"},Ix={class:"w-48 relative text-slate-500"},Ux=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Ex={class:"ml-1"},Fx=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),$x=[Fx],Ax={class:"hidden xl:block mx-auto text-slate-500"},Bx=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),qx={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},jx={class:"table table-report -mt-2"},Vx=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Lx={class:"w-40 !py-4"},Zx={class:"decoration-dotted whitespace-nowrap"},Rx={class:"w-40 !py-4"},Wx={key:0,class:"decoration-dotted whitespace-nowrap"},Hx={key:1,class:"decoration-dotted whitespace-nowrap"},Ox={class:"w-40 !py-4"},Yx={class:"decoration-dotted whitespace-nowrap"},Kx={class:"w-40"},Gx={class:"font-medium whitespace-nowrap"},Jx={class:"text-center"},Qx={class:"flex items-center justify-center whitespace-nowrap"},Xx={class:"whitespace-nowrap"},eb={class:"whitespace-nowrap"},tb={class:"whitespace-nowrap"},ab={class:"w-40 !py-4"},sb={class:"table-report__action"},rb={class:"flex justify-center items-center"},ib=["onClick"],lb=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),nb={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},ob=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),cb={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},db=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),ub={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},pb=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),mb={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},hb=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),gb=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),fb=[hb,gb],wb={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},vb={class:"w-full sm:w-auto sm:mr-auto"},_b={class:"pagination"},yb={class:"page-item"},xb=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),bb=[xb],kb=["onClick"],Db={class:"page-item"},Cb=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Pb=[Cb],Sb=(0,i._)("option",null,"10",-1),zb=(0,i._)("option",null,"25",-1),Nb=(0,i._)("option",null,"35",-1),Tb=(0,i._)("option",null,"50",-1),Mb=(0,i._)("option",null,"100",-1),Ib=(0,i._)("option",null,"500",-1),Ub=(0,i._)("option",null,"1000",-1),Eb=[Sb,zb,Nb,Tb,Mb,Ib,Ub],Fb={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},$b={class:"modal-dialog"},Ab={class:"modal-content"},Bb={class:"modal-body p-0"},qb={class:"p-5 text-center"},jb=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Vb=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Lb={class:"text-slate-500 mt-2"},Zb=["href"],Rb=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Wb(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Cx,l.loading?((0,i.wg)(),(0,i.iD)("label",Px,zx)):(0,i.kq)("",!0),(0,i._)("div",Nx,[(0,i._)("div",Tx,[(0,i._)("div",Mx,[(0,i._)("div",Ix,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Ux])]),(0,i._)("div",Ex,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},$x)]),(0,i._)("div",Ax," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Bx]),(0,i._)("div",qx,[(0,i._)("table",jx,[Vx,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Lx,[(0,i._)("a",Zx,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Rx,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Wx,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Hx," Individual "))]),(0,i._)("td",Ox,[(0,i._)("a",Yx,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Kx,[(0,i._)("a",Gx,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Jx,[(0,i._)("div",Qx,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1)]),(0,i._)("td",null,[(0,i._)("div",Xx,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",eb,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",tb,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",ab,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",sb,[(0,i._)("div",rb,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[lb,(0,i.Uk)(" Files ")],8,ib),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",nb,[ob,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",cb,[db,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",ub,[pb,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",mb,fb)):(0,i.kq)("",!0),(0,i._)("div",wb,[(0,i._)("nav",vb,[(0,i._)("ul",_b,[(0,i._)("li",yb,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},bb)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,kb)],2)))),128)),(0,i._)("li",Db,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Pb)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Eb,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Fb,[(0,i._)("div",$b,[(0,i._)("div",Ab,[(0,i._)("div",Bb,[(0,i._)("div",qb,[jb,Vb,(0,i._)("div",Lb,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Zb)])))),128))])])]),Rb])])])])])}var Hb={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/revoked",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Ob=(0,_t.Z)(Hb,[["render",Wb]]);var Yb=Ob,Kb=a.p+"img/logow.71910c9a.png";const Gb=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),Jb={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},Qb={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},Xb=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),ek={class:"tab-content"},tk={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},ak={key:0},sk={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},rk={class:"w-12 h-12 flex-none image-fit mr-1"},ik=["title","src"],lk={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},nk={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},ok={class:"ml-2 overflow-hidden"},ck={class:"flex items-center"},dk={href:"javascript:;",class:"font-medium"},uk={class:"w-full truncate text-slate-500 mt-0.5"},pk={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},mk={class:"w-12 h-12 flex-none image-fit mr-1"},hk=["title","src"],gk={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},fk={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},wk={class:"ml-2 overflow-hidden"},vk={class:"flex items-center"},_k={href:"javascript:;",class:"font-medium"},yk={class:"w-full truncate text-slate-500 mt-0.5"},xk={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},bk={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},kk={class:"chat__box box"},Dk={class:"h-full flex flex-col"},Ck={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},Pk={class:"flex items-center"},Sk={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},zk=["title","src"],Nk={class:"ml-3 mr-auto"},Tk={class:"font-medium text-base"},Mk=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),Ik={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},Uk={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},Ek=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-vertical",class:"w-4 h-4"})])],-1),Fk={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},$k={class:"mt-1 text-xs text-white text-opacity-80"},Ak={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},Bk=["title","src"],qk={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},jk={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},Vk={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},Lk=["title","src"],Zk={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},Rk={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},Wk={class:"mt-1 text-xs text-slate-500"},Hk={key:0,class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},Ok=(0,i.uE)('<div class="flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"><div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div><div class="w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"><i data-lucide="paperclip" class="w-full h-full"></i><input type="file" class="w-full h-full top-0 left-0 absolute opacity-0"></div></div>',1),Yk=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),Kk=[Yk],Gk=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey, Charlize Theron!</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function Jk(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[Gb,(0,i._)("div",Jb,[(0,i._)("div",Qb,[Xb,(0,i._)("div",ek,[(0,i._)("div",tk,[null!==l.manager||null!==l.agent?((0,i.wg)(),(0,i.iD)("div",ak,[(0,i._)("div",sk,[null!==l.manager?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[2]||(t[2]=e=>n.selectChat(l.manager)),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",rk,[l.manager.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.manager.avatarUploadDate?"Uploaded at "+l.manager.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${l.manager.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,ik)):((0,i.wg)(),(0,i.iD)("img",lk)),l.manager.isOnline?((0,i.wg)(),(0,i.iD)("div",nk)):(0,i.kq)("",!0)]),(0,i._)("div",ok,[(0,i._)("div",ck,[(0,i._)("a",dk,(0,Ns.zw)(l.manager.firstName)+" "+(0,Ns.zw)(l.manager.lastName),1)]),(0,i._)("div",uk,(0,Ns.zw)(l.manager.email),1)]),l.manager.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",pk,(0,Ns.zw)(l.manager.unreadCount),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),null!==l.agent?((0,i.wg)(),(0,i.iD)("div",{key:1,onClick:t[5]||(t[5]=e=>n.selectChat(l.agent)),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",mk,[l.agent.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.agent.avatarUploadDate?"Uploaded at "+l.agent.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${l.agent.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,hk)):((0,i.wg)(),(0,i.iD)("img",gk)),l.agent.isOnline?((0,i.wg)(),(0,i.iD)("div",fk)):(0,i.kq)("",!0)]),(0,i._)("div",wk,[(0,i._)("div",vk,[(0,i._)("a",_k,(0,Ns.zw)(l.agent.firstName)+" "+(0,Ns.zw)(l.agent.lastName),1)]),(0,i._)("div",yk,(0,Ns.zw)(l.agent.email),1)]),l.agent.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",xk,(0,Ns.zw)(l.agent.unreadCount),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])])]),(0,i._)("div",bk,[(0,i._)("div",kk,[(0,i._)("div",Dk,[(0,i._)("div",Ck,[(0,i._)("div",Pk,[(0,i._)("div",Sk,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${l.avatarCustomer}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,zk)):(0,i.kq)("",!0)]),(0,i._)("div",Nk,[(0,i._)("div",Tk,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),Mk])])]),(0,i._)("div",Ik,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",Uk,[Ek,(0,i._)("div",Fk,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",$k,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",Ak,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[8]||(t[8]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[9]||(t[9]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Bk)):((0,i.wg)(),(0,i.iD)("img",qk))])])):((0,i.wg)(),(0,i.iD)("div",jk,[(0,i._)("div",Vk,[a.senderId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[10]||(t[10]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[11]||(t[11]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Lk)):((0,i.wg)(),(0,i.iD)("img",Zk))]),(0,i._)("div",Rk,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",Wk,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",Hk,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[12]||(t[12]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),Ok,(0,i._)("a",{href:"javascript:;",onClick:t[13]||(t[13]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},Kk)])):(0,i.kq)("",!0)]),Gk])])])])}var Qk={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,manager:null,agent:null,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null}},computed:{axiosBaseUrl(){return r.Z.defaults.baseURL}},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){const t=e.senderId._id===this.profileId;return t},getProfile(){this.loading=!0;const e=wt.Z.get("token");this.axios.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1;const t=e.data.user;this.profileId=e.data.user._id,t?(this.profileId=t._id,this.manager=t.manager,t.agent&&(this.agent=t.agent)):this.errorMessage="No user data found."})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving user:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");this.axios.get("/api/allusers",{headers:{token:e}}).then((e=>{this.users=e.data.users})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await this.axios.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""!==this.newMessage.trim()){const t={text:this.newMessage,senderId:this.profileId,receiverId:this.receiverUser},a=wt.Z.get("token");try{await this.axios.post("/api/chat/message",t,{headers:{token:a}}),t.receiverId===this.selectedChat._id?this.messages.push({...t,senderId:this.selectedChat}):this.messages.push(t),this.newMessage="",this.$socket.emit("chat message",t),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(t.receiverId),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const Xk=(0,_t.Z)(Qk,[["render",Jk]]);var eD=Xk;const tD=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),aD={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},sD={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},rD=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),iD={class:"tab-content"},lD={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},nD={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},oD={key:0,class:"shadow-md"},cD=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),dD=[cD],uD=["onClick"],pD={class:"w-12 h-12 flex-none image-fit mr-1"},mD=["title","src"],hD={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},gD={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},fD={class:"ml-2 overflow-hidden"},wD={class:"flex items-center"},vD={href:"javascript:;",class:"font-medium"},_D={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},yD={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},xD={class:"chat__box box"},bD={class:"h-full flex flex-col"},kD={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},DD={class:"flex items-center"},CD={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},PD=["title","src"],SD={class:"ml-3 mr-auto"},zD={class:"font-medium text-base"},ND=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),TD={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},MD={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},ID=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"})],-1),UD={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},ED={key:0},FD=["href"],$D={key:1},AD=["title","src"],BD={class:"mt-1 text-xs text-white text-opacity-80"},qD={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},jD=["title","src"],VD={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},LD={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},ZD={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},RD=["title","src"],WD={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},HD={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},OD=["title","src"],YD={key:1},KD=["href"],GD={key:2},JD={class:"mt-1 text-xs text-slate-500"},QD={key:0,enctype:"multipart/form-data","data-single":"true",action:"/file-upload",class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},XD={class:"flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"},eC=(0,i.uE)('<div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div>',1),tC={class:"w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"},aC=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-paperclip"},[(0,i._)("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})],-1),sC=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),rC=[sC],iC=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey,</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function lC(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[tD,(0,i._)("div",aD,[(0,i._)("div",sD,[rD,(0,i._)("div",iD,[(0,i._)("div",lD,[(0,i._)("div",nD,[l.loading?((0,i.wg)(),(0,i.iD)("label",oD,dD)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.users,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,onClick:e=>n.selectChat(a),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",pD,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,mD)):((0,i.wg)(),(0,i.iD)("img",hD)),a.isOnline?((0,i.wg)(),(0,i.iD)("div",gD)):(0,i.kq)("",!0)]),(0,i._)("div",fD,[(0,i._)("div",wD,[(0,i._)("a",vD,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)])]),a.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",_D,(0,Ns.zw)(a.unreadCount),1)):(0,i.kq)("",!0)],8,uD)))),128))])])])]),(0,i._)("div",yD,[(0,i._)("div",xD,[(0,i._)("div",bD,[(0,i._)("div",kD,[(0,i._)("div",DD,[(0,i._)("div",CD,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${l.avatarCustomer}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,PD)):(0,i.kq)("",!0)]),(0,i._)("div",SD,[(0,i._)("div",zD,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),ND])])]),(0,i._)("div",TD,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",MD,[ID,(0,i._)("div",UD,[n.isFile(a.senderAvatar)?((0,i.wg)(),(0,i.iD)("div",ED,[(0,i._)("a",{href:`${e.axios.defaults.baseURL}/${a.senderAvatar}`,target:"_blank",rel:"noopener noreferrer"},(0,Ns.zw)(n.getFileName(a.senderAvatar)),9,FD)])):((0,i.wg)(),(0,i.iD)("div",$D,[a.senderAvatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Sender's Avatar",src:`${e.axios.defaults.baseURL}/${a.senderAvatar}`,onError:t[4]||(t[4]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[5]||(t[5]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,AD)):(0,i.kq)("",!0)])),(0,i.Uk)(" "+(0,Ns.zw)(a.text)+" ",1),(0,i._)("div",BD,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",qD,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.senderId.avatar}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,jD)):((0,i.wg)(),(0,i.iD)("img",VD))])])):((0,i.wg)(),(0,i.iD)("div",LD,[(0,i._)("div",ZD,[a.receiverId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.senderId.avatar}`,onError:t[8]||(t[8]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[9]||(t[9]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,RD)):((0,i.wg)(),(0,i.iD)("img",WD))]),(0,i._)("div",HD,[a.receiverAvatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Receiver's Avatar",src:`http://localhost:8000/${a.receiverAvatar}`,onError:t[10]||(t[10]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[11]||(t[11]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,OD)):(0,i.kq)("",!0),n.isFile(a.text)?((0,i.wg)(),(0,i.iD)("div",YD,[(0,i._)("a",{href:a.text,target:"_blank",rel:"noopener noreferrer"},(0,Ns.zw)(n.getFileName(a.text)),9,KD)])):((0,i.wg)(),(0,i.iD)("div",GD,(0,Ns.zw)(a.text),1)),(0,i._)("div",JD,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",QD,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[12]||(t[12]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),(0,i._)("div",XD,[eC,(0,i._)("div",tC,[aC,(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[13]||(t[13]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"w-full h-full top-0 left-0 absolute opacity-0"},null,544)])]),(0,i._)("a",{href:"javascript:;",onClick:t[14]||(t[14]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},rC)])):(0,i.kq)("",!0)]),iC])])])])}var nC={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",senderAvatar:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null,loadingSelect:!1,loading:!1}},mounted(){this.fetchChatMessages()},watch(){this.receiverUser=this.profileId,this.fetchChatMessages()},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("ENTROU"),console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{isFile(e){return/\.(pdf|xlsx)$/i.test(e)},getFileName(e){const t=e.split("/");return t[t.length-1]},onFileChange(e){const t=e.target.files[0];this.senderAvatar=t},incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){return!(!e.senderId||!e.senderId.avatar||e.senderId._id!==this.profileId)},getProfile(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1,this.profileId=e.data.user._id,console.log(this.profileId)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/allusers",{headers:{token:e}}).then((e=>{this.users=e.data.users,this.loading=!1})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.loadingSelect=!0,this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.loadingSelect=!1,this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""===this.newMessage.trim()&&!this.senderAvatar||""===this.newMessage.trim()&&!this.senderAvatar){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});e.fire({icon:"success",title:"Success!",text:"Cannot send empty message",timer:3e3})}else{const t=new FormData;t.append("text",this.newMessage),t.append("senderId",this.profileId),t.append("receiverId",this.receiverUser),t.append("senderAvatar",this.senderAvatar),console.log("senderID",this.profileId);const a=wt.Z.get("token");try{await r.Z.post("/api/chat/message",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});const e={text:this.newMessage,senderId:this.profileId};this.senderAvatar="",e.isCurrentUser=!0,this.messages.push(e),this.newMessage="",this.$socket.emit("chat message",e),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(this.receiverUser),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const oC=(0,_t.Z)(nC,[["render",lC]]);var cC=oC;const dC=(0,i.uE)('<div class="intro-y flex flex-col sm:flex-row items-center mt-8"><h2 class="text-lg font-medium mr-auto">Calendar</h2><div class="w-full sm:w-auto flex mt-4 sm:mt-0"><button class="btn btn-primary shadow-md mr-2">Print Schedule</button><div class="dropdown ml-auto sm:ml-0"><button class="dropdown-toggle btn px-2 box" aria-expanded="false" data-tw-toggle="dropdown"><span class="w-5 h-5 flex items-center justify-center"><i class="w-4 h-4" data-lucide="plus"></i></span></button><div class="dropdown-menu w-40"><ul class="dropdown-content"><li><a href="#" class="dropdown-item"><i data-lucide="share-2" class="w-4 h-4 mr-2"></i> Share </a></li><li><a href="#" class="dropdown-item"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Settings </a></li></ul></div></div></div></div><div class="grid grid-cols-12 gap-5 mt-5"><div class="col-span-12 xl:col-span-4 2xl:col-span-3"><div class="box p-5 intro-y"><button type="button" class="btn btn-primary w-full mt-2"><i class="w-4 h-4 mr-2" data-lucide="edit-3"></i> Add New Schedule </button><div class="border-t border-b border-slate-200/60 dark:border-darkmode-400 mt-6 mb-5 py-3" id="calendar-events"><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">VueJS Amsterdam</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">2</span> Days <span class="mx-1"></span> 10:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-warning rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">Vue Fes Japan 2019</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">3</span> Days <span class="mx-1"></span> 07:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">Laracon 2021</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">4</span> Days <span class="mx-1"></span> 11:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="text-slate-500 p-3 text-center hidden" id="calendar-no-events"> No events yet </div></div><div class="form-check form-switch flex"><label class="form-check-label" for="checkbox-events">Remove after drop</label><input class="show-code form-check-input ml-auto" type="checkbox" id="checkbox-events"></div></div><div class="box p-5 intro-y mt-5"><div class="flex"><i data-lucide="chevron-left" class="w-5 h-5 text-slate-500"></i><div class="font-medium text-base mx-auto">April</div><i data-lucide="chevron-right" class="w-5 h-5 text-slate-500"></i></div><div class="grid grid-cols-7 gap-4 mt-5 text-center"><div class="font-medium">Su</div><div class="font-medium">Mo</div><div class="font-medium">Tu</div><div class="font-medium">We</div><div class="font-medium">Th</div><div class="font-medium">Fr</div><div class="font-medium">Sa</div><div class="py-0.5 rounded relative text-slate-500">29</div><div class="py-0.5 rounded relative text-slate-500">30</div><div class="py-0.5 rounded relative text-slate-500">31</div><div class="py-0.5 rounded relative">1</div><div class="py-0.5 rounded relative">2</div><div class="py-0.5 rounded relative">3</div><div class="py-0.5 rounded relative">4</div><div class="py-0.5 rounded relative">5</div><div class="py-0.5 bg-success/20 dark:bg-success/30 rounded relative"> 6 </div><div class="py-0.5 rounded relative">7</div><div class="py-0.5 bg-primary text-white rounded relative">8</div><div class="py-0.5 rounded relative">9</div><div class="py-0.5 rounded relative">10</div><div class="py-0.5 rounded relative">11</div><div class="py-0.5 rounded relative">12</div><div class="py-0.5 rounded relative">13</div><div class="py-0.5 rounded relative">14</div><div class="py-0.5 rounded relative">15</div><div class="py-0.5 rounded relative">16</div><div class="py-0.5 rounded relative">17</div><div class="py-0.5 rounded relative">18</div><div class="py-0.5 rounded relative">19</div><div class="py-0.5 rounded relative">20</div><div class="py-0.5 rounded relative">21</div><div class="py-0.5 rounded relative">22</div><div class="py-0.5 bg-pending/20 dark:bg-pending/30 rounded relative"> 23 </div><div class="py-0.5 rounded relative">24</div><div class="py-0.5 rounded relative">25</div><div class="py-0.5 rounded relative">26</div><div class="py-0.5 bg-primary/10 dark:bg-primary/50 rounded relative"> 27 </div><div class="py-0.5 rounded relative">28</div><div class="py-0.5 rounded relative">29</div><div class="py-0.5 rounded relative">30</div><div class="py-0.5 rounded relative text-slate-500">1</div><div class="py-0.5 rounded relative text-slate-500">2</div><div class="py-0.5 rounded relative text-slate-500">3</div><div class="py-0.5 rounded relative text-slate-500">4</div><div class="py-0.5 rounded relative text-slate-500">5</div><div class="py-0.5 rounded relative text-slate-500">6</div><div class="py-0.5 rounded relative text-slate-500">7</div><div class="py-0.5 rounded relative text-slate-500">8</div><div class="py-0.5 rounded relative text-slate-500">9</div></div><div class="border-t border-slate-200/60 dark:border-darkmode-400 pt-5 mt-5"><div class="flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><span class="truncate">Independence Day</span><div class="h-px flex-1 border border-r border-dashed border-slate-200 mx-3 xl:hidden"></div><span class="font-medium xl:ml-auto">23th</span></div><div class="flex items-center mt-4"><div class="w-2 h-2 bg-primary rounded-full mr-3"></div><span class="truncate">Memorial Day</span><div class="h-px flex-1 border border-r border-dashed border-slate-200 mx-3 xl:hidden"></div><span class="font-medium xl:ml-auto">10th</span></div></div></div></div><div class="col-span-12 xl:col-span-8 2xl:col-span-9"><div class="box p-5"><div class="full-calendar" id="calendar"></div></div></div></div>',2),uC=[dC];function pC(e,t){return(0,i.wg)(),(0,i.iD)("div",null,uC)}const mC={},hC=(0,_t.Z)(mC,[["render",pC]]);var gC=hC;const fC=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create a Partner")],-1),wC={class:"grid grid-cols-12 gap-6 mt-5"},vC={class:"intro-y col-span-12 lg:col-span-6"},_C={class:"intro-y box p-5"},yC=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Partner Name *",-1),xC={class:"mt-3"},bC=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Location *",-1),kC={class:"input-group"},DC={class:"mt-3"},CC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Business *",-1),PC={class:"input-group"},SC={class:"mt-3"},zC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),NC={class:"input-group"},TC={class:"grid grid-cols-3 gap-6 mt-3"},MC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),IC={class:"input-group"},UC=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),EC={class:"input-group"},FC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),$C={class:"input-group"},AC=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),BC={class:"fallback"},qC={class:"text-right mt-5"},jC=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),VC=["disabled"];function LC(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[fC,(0,i._)("form",{onSubmit:t[8]||(t[8]=(0,s.iM)(((...e)=>n.onCreatePartner&&n.onCreatePartner(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",wC,[(0,i._)("div",vC,[(0,i._)("div",_C,[(0,i._)("div",null,[yC,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.partnerName=e),id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name"},null,512),[[s.nr,l.partnerName]])]),(0,i._)("div",xC,[bC,(0,i._)("div",kC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.partnerLocation=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"location","aria-describedby":"input-group-1"},null,512),[[s.nr,l.partnerLocation]])])]),(0,i._)("div",DC,[CC,(0,i._)("div",PC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.partnerBusiness=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"business","aria-describedby":"input-group-2"},null,512),[[s.nr,l.partnerBusiness]])])]),(0,i._)("div",SC,[zC,(0,i._)("div",NC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-2"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",TC,[(0,i._)("div",null,[MC,(0,i._)("div",IC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[UC,(0,i._)("div",EC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e),type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[FC,(0,i._)("div",$C,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e),type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",null,[AC,(0,i._)("div",BC,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",qC,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[jC])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,VC)])])])])],32)])}var ZC={data(){return{partnerName:"",partnerLocation:"",partnerBusiness:"",contact1:"",contact2:"",enrolmentDate:"",email:"",avatar:null,monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreatePartner(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=["partnerName","partnerLocation","partnerBusiness","contact1","contact2","enrolmentDate","email","avatar"];for(const s of t)if(""===this[s])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${s} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const t=new FormData;t.append("partnerName",this.partnerName),t.append("partnerLocation",this.partnerLocation),t.append("partnerBusiness",this.partnerBusiness),t.append("contact1",this.contact1),t.append("contact2",this.contact2),t.append("enrolmentDate",this.enrolmentDate),t.append("email",this.email),t.append("avatar",this.avatar),this.btnloading=!0;const a=wt.Z.get("token"),s=await r.Z.post("/api/partner/create",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Partner created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewpartner"),this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("created successfully")}catch(a){if(a.response&&a.response.data&&a.response.data.error){const e=a.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error creating partner:",e)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error creating partner:",a.message);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const RC=(0,_t.Z)(ZC,[["render",LC]]);var WC=RC;const HC={class:"intro-y flex items-center mt-8"},OC=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create a Partner",-1),YC={key:0},KC=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),GC=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),JC=[KC,GC],QC={class:"grid grid-cols-12 gap-6 mt-5"},XC={class:"intro-y col-span-12 lg:col-span-6"},eP={class:"intro-y box p-5"},tP=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Partner Name *",-1),aP={class:"mt-3"},sP=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Location *",-1),rP={class:"input-group"},iP={class:"mt-3"},lP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Business *",-1),nP={class:"input-group"},oP={class:"mt-3"},cP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),dP={class:"input-group"},uP={class:"grid grid-cols-3 gap-6 mt-3"},pP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),mP={class:"input-group"},hP=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),gP={class:"input-group"},fP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),wP={class:"input-group"},vP=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),_P={class:"fallback"},yP=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),xP={class:"grid grid-cols-2 gap-6 mt-1"},bP=(0,i._)("option",{value:"Active"},"Active",-1),kP=(0,i._)("option",{value:"Inactive"},"Inactive",-1),DP=[bP,kP],CP={class:"text-right mt-5"},PP=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),SP=["disabled"];function zP(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",HC,[OC,l.loading?((0,i.wg)(),(0,i.iD)("div",YC,JC)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[9]||(t[9]=(0,s.iM)(((...e)=>n.onUpdatePartner&&n.onUpdatePartner(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",QC,[(0,i._)("div",XC,[(0,i._)("div",eP,[(0,i._)("div",null,[tP,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.partnerName=e),id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name"},null,512),[[s.nr,l.partnerName]])]),(0,i._)("div",aP,[sP,(0,i._)("div",rP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.partnerLocation=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"location","aria-describedby":"input-group-1"},null,512),[[s.nr,l.partnerLocation]])])]),(0,i._)("div",iP,[lP,(0,i._)("div",nP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.partnerBusiness=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"business","aria-describedby":"input-group-2"},null,512),[[s.nr,l.partnerBusiness]])])]),(0,i._)("div",oP,[cP,(0,i._)("div",dP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-2"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",uP,[(0,i._)("div",null,[pP,(0,i._)("div",mP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[hP,(0,i._)("div",gP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e),type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[fP,(0,i._)("div",wP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e),type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",null,[vP,(0,i._)("div",_P,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),yP,(0,i._)("div",xP,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},DP,512),[[s.bM,l.status]])]),(0,i._)("div",CP,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[PP])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,SP)])])])])],32)])}var NP={data(){return{partnerName:"",partnerLocation:"",partnerBusiness:"",contact1:"",contact2:"",enrolmentDate:"",email:"",avatar:null,monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){console.log("response 1");const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/partner/${e}`,{headers:{token:t}}).then((e=>{this.partnerName=e.data.partner.partnerName,this.partnerLocation=e.data.partner.partnerLocation,this.partnerBusiness=e.data.partner.partnerBusiness,this.contact1=e.data.partner.contact1,this.contact2=e.data.partner.contact2,this.enrolmentDate=this.formatDate(e.data.partner.enrolmentDate),this.enrolmentDate=this.formatDate(e.data.partner.enrolmentDate),this.email=e.data.partner.email,this.status=e.data.partner.status})).catch((e=>{this.errorMessage="Error retrieving this partner. Please try again.",console.error("Error retrieving partner:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePartner(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["partnerName","partnerLocation","partnerBusiness","contact1","contact2","enrolmentDate","email","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("partnerName",this.partnerName),a.append("partnerLocation",this.partnerLocation),a.append("partnerBusiness",this.partnerBusiness),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("enrolmentDate",this.enrolmentDate),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/partner/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Partner update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating partner:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating partner:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const TP=(0,_t.Z)(NP,[["render",zP]]);var MP=TP;const IP=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Partner",-1),UP={key:0},EP=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),FP=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),$P=[EP,FP],AP={class:"grid grid-cols-12 gap-6 mt-5"},BP={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},qP={class:"flex w-full sm:w-auto"},jP={class:"w-48 relative text-slate-500"},VP=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),LP={class:"hidden xl:block mx-auto text-slate-500"},ZP=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),RP={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},WP={class:"table table-report -mt-2"},HP=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner name"),(0,i._)("th",{class:"whitespace-nowrap"},"Location"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Business"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),OP={class:"w-40 !py-4"},YP={class:"w-10 h-10 image-fit zoom-in"},KP=["title","src"],GP={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},JP={class:"w-40 !py-4"},QP={href:"#",class:"decoration-dotted whitespace-nowrap"},XP={class:"w-40"},eS={href:"#",class:"font-medium whitespace-nowrap"},tS={class:"text-center"},aS={class:"flex items-center justify-center whitespace-nowrap"},sS={class:"w-40"},rS={class:"font-medium whitespace-nowrap"},iS={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},lS={class:"text-center"},nS={class:"flex items-center justify-center whitespace-nowrap"},oS=["href"],cS={class:"w-40 !py-4"},dS={class:"table-report__action"},uS={class:"flex justify-center items-center"},pS={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},mS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),hS={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},gS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),fS={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},wS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),vS={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},_S=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),yS=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),xS=[_S,yS],bS={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},kS={class:"w-full sm:w-auto sm:mr-auto"},DS={class:"pagination"},CS={class:"page-item"},PS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),SS=[PS],zS=["onClick"],NS={class:"page-item"},TS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),MS=[TS],IS=(0,i._)("option",null,"10",-1),US=(0,i._)("option",null,"25",-1),ES=(0,i._)("option",null,"35",-1),FS=(0,i._)("option",null,"50",-1),$S=(0,i._)("option",null,"100",-1),AS=[IS,US,ES,FS,$S],BS=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function qS(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[IP,l.loading?((0,i.wg)(),(0,i.iD)("div",UP,$P)):(0,i.kq)("",!0),(0,i._)("div",AP,[(0,i._)("div",BP,[(0,i._)("div",qP,[(0,i._)("div",jP,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),VP])]),(0,i._)("div",LP," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),ZP]),(0,i._)("div",RP,[(0,i._)("table",WP,[HP,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",OP,[(0,i._)("div",YP,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,KP)):((0,i.wg)(),(0,i.iD)("img",GP))])]),(0,i._)("td",JP,[(0,i._)("label",QP,(0,Ns.zw)(a.partnerName),1)]),(0,i._)("td",XP,[(0,i._)("label",eS,(0,Ns.zw)(a.partnerLocation),1)]),(0,i._)("td",tS,[(0,i._)("div",aS,(0,Ns.zw)(a.partnerBusiness),1)]),(0,i._)("td",sS,[(0,i._)("label",rS,(0,Ns.zw)(a.contact1),1),(0,i._)("div",iS,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",lS,[(0,i._)("div",nS,[(0,i._)("a",{href:"mailto:"+a.email},(0,Ns.zw)(a.email),9,oS)])]),(0,i._)("td",cS,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",dS,[(0,i._)("div",uS,[(0,i._)("a",pS,[mS,(0,i.Wm)(o,{to:`/updatepartner/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",hS,[gS,(0,i.Wm)(o,{to:`/viewpartneruser/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",fS,[wS,(0,i.Wm)(o,{to:`/viewpartneruser/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",vS,xS)):(0,i.kq)("",!0),(0,i._)("div",bS,[(0,i._)("nav",kS,[(0,i._)("ul",DS,[(0,i._)("li",CS,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},SS)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,zS)],2)))),128)),(0,i._)("li",NS,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},MS)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},AS,544),[[s.bM,l.pageSize]])])]),BS])}var jS={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allpartner",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=t.data.partner,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const VS=(0,_t.Z)(jS,[["render",qS]]);var LS=VS;const ZS={class:""},RS={class:"intro-y col-span-12 flex flex-wrap sm:flex-nowrap items-center mt-2"},WS={class:"w-full sm:w-auto mt-3 sm:mt-0 sm:ml-auto md:ml-0 ml-2"},HS={class:"w-56 relative text-slate-500 ml-2"},OS={key:0},YS=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),KS=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),GS=[YS,KS],JS={key:0,class:"intro-y box px-5 pt-5 mt-5"},QS={class:""},XS=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),ez={class:"p-5"},tz={class:"relative flex items-center"},az={class:"w-12 h-12 flex-none image-fit"},sz=["src"],rz={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},iz={class:"ml-4 mr-auto"},lz={href:"#",class:"font-medium"},nz={class:"text-slate-500 mr-5 sm:mr-5"},oz={class:"font-medium text-slate-600 dark:text-slate-500"},cz=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),dz={class:"w-12 h-12 flex-none image-fit"},uz=["title","src"],pz={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},mz={class:"ml-4 mr-auto"},hz={href:"#",class:"font-medium"},gz={class:"text-slate-500 mr-5 sm:mr-5"},fz=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),wz={class:"row mt-3"},vz={class:"col-md-12 bg-light text-right"};function _z(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ZS,[(0,i._)("div",RS,[(0,i._)("div",WS,[(0,i._)("div",HS,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-56 box pr-10",placeholder:"Insert MembershipID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md ml-2",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search "),l.loading?((0,i.wg)(),(0,i.iD)("div",OS,GS)):(0,i.kq)("",!0)]),this.userData?((0,i.wg)(),(0,i.iD)("div",JS,[(0,i._)("div",QS,[XS,(0,i._)("div",ez,[(0,i._)("div",tz,[(0,i._)("div",az,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,sz)):((0,i.wg)(),(0,i.iD)("img",rz))]),(0,i._)("div",iz,[(0,i._)("a",lz,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",nz,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1)+" * "+(0,Ns.zw)(this.userData.relation)+" * "+(0,Ns.zw)(this.userData.email),1)]),(0,i._)("div",oz,[(0,i.Wm)(o,{to:`/createtransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[cz])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex items-center mt-5"},[(0,i._)("div",dz,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,uz)):((0,i.wg)(),(0,i.iD)("img",pz))]),(0,i._)("div",mz,[(0,i._)("a",hz,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",gz,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1)+" * "+(0,Ns.zw)(a.relation)+" * "+(0,Ns.zw)(a.email),1)]),(0,i.Wm)(o,{to:`/createtransaction/${a._id}`},{default:(0,i.w5)((()=>[fz])),_:2},1032,["to"])])))),128)),(0,i._)("div",wz,[(0,i._)("div",vz,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-5 mt-3 mb-3",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var yz=a(2492),xz=a.n(yz),bz={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void xz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(console.log("User not found:",s.error),xz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),xz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),xz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const kz=(0,_t.Z)(bz,[["render",_z]]);var Dz=kz;const Cz={class:""},Pz={class:"intro-y col-span-12 flex flex-wrap items-center mt-2 space-x-2"},Sz={class:"w-full sm:w-auto flex items-center"},zz={class:"relative text-slate-500"},Nz={key:0,class:"shadow-md"},Tz=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Mz=[Tz],Iz={key:1,class:"intro-y box px-5 pt-5 mt-5"},Uz={class:""},Ez=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),Fz={class:"p-5"},$z={class:"flex flex-col md:flex-row items-center"},Az={class:"w-12 h-12 flex-none image-fit"},Bz=["src"],qz={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},jz={class:"ml-4 md:ml-0 md:mr-auto text-center md:text-left"},Vz={href:"#",class:"font-medium"},Lz={class:"text-slate-500 mt-1"},Zz={class:"md:ml-auto md:mr-0 mt-3 md:mt-0 font-medium text-slate-300 dark:text-slate-200 text-center"},Rz=(0,i._)("button",{class:"btn btn-outline-primary w-24 inline-block mr-1 mb-2"}," History ",-1),Wz=(0,i._)("button",{class:"btn btn-primary shadow-md ml-1 md:ml-5 mt-3 md:mt-0"}," Process transaction ",-1),Hz={class:"w-12 h-12 flex-none image-fit"},Oz=["title","src"],Yz={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},Kz={class:"ml-4 md:ml-0 md:mr-auto text-center md:text-left"},Gz={href:"#",class:"font-medium"},Jz={class:"text-slate-500 mt-1"},Qz={class:"md:ml-auto md:mr-0 mt-3 md:mt-0 font-medium text-slate-300 dark:text-slate-200 text-center"},Xz=(0,i._)("button",{class:"btn btn-outline-primary w-24 inline-block mr-1 mb-2"}," History ",-1),eN=(0,i._)("button",{class:"btn btn-primary shadow-md ml-1 md:ml-5 mt-3 md:mt-0"}," Process transaction ",-1),tN={class:"row mt-3"},aN={class:"col-md-12 bg-light text-center md:text-right"};function sN(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Cz,[(0,i._)("div",Pz,[(0,i._)("div",Sz,[(0,i._)("div",zz,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-full sm:w-56 pr-10",placeholder:"Insert Membership ID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 right-0 cursor-pointer","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md flex-shrink-0 ml-3 mt-3 md:mt-0 mx-auto",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search ")]),l.loading?((0,i.wg)(),(0,i.iD)("label",Nz,Mz)):(0,i.kq)("",!0),this.userData?((0,i.wg)(),(0,i.iD)("div",Iz,[(0,i._)("div",Uz,[Ez,(0,i._)("div",Fz,[(0,i._)("div",$z,[(0,i._)("div",Az,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,Bz)):((0,i.wg)(),(0,i.iD)("img",qz))]),(0,i._)("div",jz,[(0,i._)("a",Vz,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",Lz,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1),1)]),(0,i._)("div",Zz,[(0,i.Wm)(o,{to:`/transactionhitory/${this.userData._id}`},{default:(0,i.w5)((()=>[Rz])),_:1},8,["to"]),(0,i.Wm)(o,{to:`/hospitaltransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[Wz])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex flex-col md:flex-row items-center mt-5"},[(0,i._)("div",Hz,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Oz)):((0,i.wg)(),(0,i.iD)("img",Yz))]),(0,i._)("div",Kz,[(0,i._)("a",Gz,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",Jz,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1),1)]),(0,i._)("div",Qz,[(0,i.Wm)(o,{to:`/transactionhitory/${a._id}`},{default:(0,i.w5)((()=>[Xz])),_:2},1032,["to"]),(0,i.Wm)(o,{to:`/hospitaltransaction/${a._id}`},{default:(0,i.w5)((()=>[eN])),_:2},1032,["to"])])])))),128)),(0,i._)("div",tN,[(0,i._)("div",aN,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-1 md:ml-5 mt-3 md:mt-0",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var rN={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null,this.memberShipID=""},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void xz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(this.loading=!1,console.log("User not found:",s.error),xz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),xz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.loading=!1,this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),xz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const iN=(0,_t.Z)(rN,[["render",sN]]);var lN=iN;const nN={class:""},oN={class:"intro-y col-span-12 flex flex-wrap sm:flex-nowrap items-center mt-2"},cN={class:"w-full sm:w-auto mt-3 sm:mt-0 sm:ml-auto md:ml-0 ml-2"},dN={class:"w-56 relative text-slate-500 ml-2"},uN={key:0,class:"shadow-md"},pN=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),mN=[pN],hN={key:1,class:"intro-y box px-5 pt-5 mt-5"},gN={class:""},fN=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),wN={class:"p-5"},vN={class:"relative flex items-center"},_N={class:"w-12 h-12 flex-none image-fit"},yN=["src"],xN={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},bN={class:"ml-4 mr-auto"},kN={href:"#",class:"font-medium"},DN={class:"text-slate-500 mr-5 sm:mr-5"},CN={class:"font-medium text-slate-600 dark:text-slate-500"},PN=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),SN={class:"w-12 h-12 flex-none image-fit"},zN=["title","src"],NN={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},TN={class:"ml-4 mr-auto"},MN={href:"#",class:"font-medium"},IN={class:"text-slate-500 mr-5 sm:mr-5"},UN=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),EN={class:"row mt-3"},FN={class:"col-md-12 bg-light text-right"};function $N(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",nN,[(0,i._)("div",oN,[(0,i._)("div",cN,[(0,i._)("div",dN,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-56 box pr-10",placeholder:"Insert MembershipID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md ml-2",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search ")]),l.loading?((0,i.wg)(),(0,i.iD)("label",uN,mN)):(0,i.kq)("",!0),this.userData?((0,i.wg)(),(0,i.iD)("div",hN,[(0,i._)("div",gN,[fN,(0,i._)("div",wN,[(0,i._)("div",vN,[(0,i._)("div",_N,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,yN)):((0,i.wg)(),(0,i.iD)("img",xN))]),(0,i._)("div",bN,[(0,i._)("a",kN,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",DN,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1)+" * "+(0,Ns.zw)(this.userData.relation)+" * "+(0,Ns.zw)(this.userData.email),1)]),(0,i._)("div",CN,[(0,i.Wm)(o,{to:`/farmacytransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[PN])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex items-center mt-5"},[(0,i._)("div",SN,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,zN)):((0,i.wg)(),(0,i.iD)("img",NN))]),(0,i._)("div",TN,[(0,i._)("a",MN,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",IN,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1)+" * "+(0,Ns.zw)(a.relation)+" * "+(0,Ns.zw)(a.email),1)]),(0,i.Wm)(o,{to:`/farmacytransaction/${a._id}`},{default:(0,i.w5)((()=>[UN])),_:2},1032,["to"])])))),128)),(0,i._)("div",EN,[(0,i._)("div",FN,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-5 mt-3 mb-3",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var AN={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null,this.memberShipID=""},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void xz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(this.loading=!1,console.log("User not found:",s.error),xz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),xz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),xz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const BN=(0,_t.Z)(AN,[["render",$N]]);var qN=BN;const jN={class:"intro-y flex items-center mt-8"},VN={class:"text-lg font-medium mr-auto"},LN={key:0},ZN=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),RN=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),WN=[ZN,RN],HN={class:"grid grid-cols-12 gap-6 mt-5"},ON={class:"intro-y col-span-12 lg:col-span-6"},YN={class:"intro-y box p-5"},KN={class:"grid grid-cols-2 gap-6 mt-3"},GN=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),JN={class:"input-group"},QN=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),XN={class:"input-group"},eT={class:"grid grid-cols-3 gap-6 mt-3"},tT=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),aT={class:"input-group"},sT=(0,i._)("option",null,"ID",-1),rT=(0,i._)("option",null,"Drive Licence",-1),iT=(0,i._)("option",null,"Passport",-1),lT=(0,i._)("option",null,"Voters",-1),nT=(0,i._)("option",null,"...",-1),oT=[sT,rT,iT,lT,nT],cT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),dT={class:"input-group"},uT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),pT={class:"input-group"},mT={class:"grid grid-cols-2 gap-6 mt-3"},hT=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),gT={class:"input-group"},fT=(0,i._)("option",null,"male",-1),wT=(0,i._)("option",null,"female",-1),vT=(0,i._)("option",null,"other",-1),_T=[fT,wT,vT],yT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),xT={class:"input-group"},bT={class:"mt-3"},kT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),DT={class:"input-group"},CT={class:"mt-3"},PT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Profile *",-1),ST={class:"input-group"},zT={class:"grid grid-cols-3 gap-6 mt-3"},NT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),TT={class:"input-group"},MT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),IT={class:"input-group"},UT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),ET={class:"input-group"},FT={class:"grid grid-cols-2 gap-6 mt-3"},$T=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),AT={class:"fallback mt-4"},BT={class:"text-right mt-8"},qT=["disabled"];function jT(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",jN,[(0,i._)("h2",VN," Create user for "+(0,Ns.zw)(l.partnerName),1),l.loading?((0,i.wg)(),(0,i.iD)("div",LN,WN)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",HN,[(0,i._)("div",ON,[(0,i._)("div",YN,[(0,i._)("div",KN,[(0,i._)("div",null,[GN,(0,i._)("div",JN,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[QN,(0,i._)("div",XN,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",eT,[(0,i._)("div",null,[tT,(0,i._)("div",aT,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},oT,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[cT,(0,i._)("div",dT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[uT,(0,i._)("div",pT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",mT,[(0,i._)("div",null,[hT,(0,i._)("div",gT,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},_T,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[yT,(0,i._)("div",xT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",bT,[kT,(0,i._)("div",DT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",CT,[PT,(0,i._)("div",ST,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.profile=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"profile","aria-describedby":"input-group-1"},null,512),[[s.nr,l.profile]])])]),(0,i._)("div",zT,[(0,i._)("div",null,[NT,(0,i._)("div",TT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[MT,(0,i._)("div",IT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-14",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[UT,(0,i._)("div",ET,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-15",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",FT,[(0,i._)("div",null,[$T,(0,i._)("div",AT,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",BT,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,qT)])])])])],32)])}var VT={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",profile:"",contact1:"",contact2:"",partnerName:"",manager:"",password:"",avatar:null,plans:[],partners:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPartner(){this.loading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.get(`/api/partner/${t}`,{headers:{token:e}});if(!a.data.success)throw new Error("Failed to fetch plans");this.partnerName=a.data.partner.partnerName,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateIndivitualCustomer(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","profile","contact1"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("profile",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("id",this.$route.params.id),a.append("password",this.password),this.loading=!0;const s=await r.Z.post("/api/user/partneruser/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});this.loading=!1,e.fire({icon:"success",title:"Success!",text:"Partner user created successfully",timer:3e3}),this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){this.loading=!1,s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message))}}},created(){this.getPartner()}};const LT=(0,_t.Z)(VT,[["render",jT]]);var ZT=LT;const RT={class:"intro-y flex items-center mt-8"},WT=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Individual Customer",-1),HT={key:0},OT=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),YT=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),KT=[OT,YT],GT={class:"grid grid-cols-12 gap-6 mt-5"},JT={class:"intro-y col-span-12 lg:col-span-6"},QT={class:"intro-y box p-5"},XT={class:"grid grid-cols-2 gap-6 mt-3"},eM=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),tM={class:"input-group"},aM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),sM={class:"input-group"},rM={class:"grid grid-cols-3 gap-6 mt-3"},iM=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),lM={class:"input-group"},nM=(0,i._)("option",null,"ID",-1),oM=(0,i._)("option",null,"Drive Licence",-1),cM=(0,i._)("option",null,"Passport",-1),dM=(0,i._)("option",null,"Voters",-1),uM=(0,i._)("option",null,"...",-1),pM=[nM,oM,cM,dM,uM],mM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),hM={class:"input-group"},gM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),fM={class:"input-group"},wM={class:"grid grid-cols-2 gap-6 mt-3"},vM=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),_M={class:"input-group"},yM=(0,i._)("option",null,"male",-1),xM=(0,i._)("option",null,"female",-1),bM=(0,i._)("option",null,"other",-1),kM=[yM,xM,bM],DM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),CM={class:"input-group"},PM={class:"mt-3"},SM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),zM={class:"input-group"},NM={class:"mt-3"},TM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Profile *",-1),MM={class:"input-group"},IM={class:"grid grid-cols-3 gap-6 mt-3"},UM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),EM={class:"input-group"},FM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),$M={class:"input-group"},AM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),BM={class:"input-group"},qM={class:"grid grid-cols-2 gap-6 mt-3"},jM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),VM={class:"fallback mt-4"},LM={class:"text-right mt-8"},ZM=["disabled"];function RM(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",RT,[WT,l.loading?((0,i.wg)(),(0,i.iD)("div",HT,KT)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdatePartnerUser&&n.onUpdatePartnerUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",GT,[(0,i._)("div",JT,[(0,i._)("div",QT,[(0,i._)("div",XT,[(0,i._)("div",null,[eM,(0,i._)("div",tM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[aM,(0,i._)("div",sM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",rM,[(0,i._)("div",null,[iM,(0,i._)("div",lM,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},pM,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[mM,(0,i._)("div",hM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[gM,(0,i._)("div",fM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",wM,[(0,i._)("div",null,[vM,(0,i._)("div",_M,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},kM,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[DM,(0,i._)("div",CM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",PM,[SM,(0,i._)("div",zM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-18",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",NM,[TM,(0,i._)("div",MM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.profile=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"profile","aria-describedby":"input-group-1"},null,512),[[s.nr,l.profile]])])]),(0,i._)("div",IM,[(0,i._)("div",null,[UM,(0,i._)("div",EM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[FM,(0,i._)("div",$M,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[AM,(0,i._)("div",BM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",qM,[(0,i._)("div",null,[jM,(0,i._)("div",VM,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",LM,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,ZM)])])])])],32)])}var WM={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",profile:"",email:"",address:"",contact1:"",contact2:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.password=e.data.user.password,this.profile=e.data.user.profile,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePartnerUser(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","profile","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("profile",this.profile),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/partneruser/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Partner user updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating partner:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating partner:",i.message);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const HM=(0,_t.Z)(WM,[["render",RM]]);var OM=HM;const YM=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"}," Partner users",-1),KM={key:0},GM=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),JM=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),QM=[GM,JM],XM={class:"grid grid-cols-12 gap-6 mt-5"},eI={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},tI={class:"flex w-full sm:w-auto"},aI={class:"w-48 relative text-slate-500"},sI=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),rI=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])])])])])],-1),iI={class:"hidden xl:block mx-auto text-slate-500"},lI={class:"box"},nI={class:"flex flex-col lg:flex-row items-center p-5"},oI={class:"w-24 h-24 lg:w-12 lg:h-12 image-fit lg:mr-1"},cI=["title","src"],dI={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},uI={class:"lg:ml-2 lg:mr-auto text-center lg:text-left mt-3 lg:mt-0"},pI={href:"#",class:"font-medium"},mI={class:"text-slate-500 text-xs mt-0.5 mb-1"},hI={class:"flex mt-4 lg:mt-0"},gI={class:"text btn-secondary py-1 px-2 mr-2"},fI=(0,i._)("button",{class:"btn btn-outline-secondary py-1 px-2"}," Profile ",-1),wI={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},vI=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),_I=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),yI=[vI,_I],xI={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},bI={class:"w-full sm:w-auto sm:mr-auto"},kI={class:"pagination"},DI={class:"page-item"},CI=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),PI=[CI],SI=["onClick"],zI={class:"page-item"},NI=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),TI=[NI],MI=(0,i._)("option",null,"10",-1),II=(0,i._)("option",null,"25",-1),UI=(0,i._)("option",null,"35",-1),EI=(0,i._)("option",null,"50",-1),FI=(0,i._)("option",null,"100",-1),$I=[MI,II,UI,EI,FI],AI=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function BI(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[YM,l.loading?((0,i.wg)(),(0,i.iD)("div",KM,QM)):(0,i.kq)("",!0),(0,i._)("div",XM,[(0,i._)("div",eI,[(0,i._)("div",tI,[(0,i._)("div",aI,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),sI])]),(0,i.Wm)(o,{to:`/createpartneruser/${this.$route.params.id}`},{default:(0,i.w5)((()=>[rI])),_:1},8,["to"]),(0,i._)("div",iI," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-4",key:a._id},[(0,i._)("div",lI,[(0,i._)("div",nI,[(0,i._)("div",oI,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,cI)):((0,i.wg)(),(0,i.iD)("img",dI))]),(0,i._)("div",uI,[(0,i._)("a",pI,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",mI,(0,Ns.zw)(a.profile),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("div",hI,[(0,i._)("label",gI,(0,Ns.zw)(a.contact2),1),(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[fI])),_:2},1032,["to"])])])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",wI,yI)):(0,i.kq)("",!0),(0,i._)("div",xI,[(0,i._)("nav",bI,[(0,i._)("ul",kI,[(0,i._)("li",DI,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},PI)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,SI)],2)))),128)),(0,i._)("li",zI,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},TI)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},$I,544),[[s.bM,l.pageSize]])])]),AI])}var qI={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:15,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/user/usersbypartner/${e}/?pageSize=15/`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=a.data.allUsers,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const jI=(0,_t.Z)(qI,[["render",BI]]);var VI=jI;const LI={class:"intro-y flex items-center mt-8"},ZI=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),RI={key:0},WI=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),HI=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),OI=[WI,HI],YI={class:"grid grid-cols-12 gap-6 mt-5"},KI={class:"intro-y col-span-12 lg:col-span-6"},GI={class:"intro-y box p-5"},JI={class:"grid grid-cols-2 gap-6 mt-3"},QI=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),XI={class:"input-group"},eU=["value"],tU=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),aU={class:"input-group"},sU={class:"grid grid-cols-2 gap-6 mt-5"},rU=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),iU={class:"fallback mt-4"},lU={class:"mt-5"},nU={class:"text-right mt-8"},oU=["disabled"];function cU(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",LI,[ZI,l.loading?((0,i.wg)(),(0,i.iD)("div",RI,OI)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",YI,[(0,i._)("div",KI,[(0,i._)("div",GI,[(0,i._)("div",JI,[(0,i._)("div",null,[QI,(0,i._)("div",XI,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,eU)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[tU,(0,i._)("div",aU,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",sU,[(0,i._)("div",null,[rU,(0,i._)("div",iU,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",lU,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",nU,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,oU)])])])])],32)])}var dU={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1,customerCompany:""}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.planId=a.data.user.plan[0]._id,console.log("Company: ",a.data.user.company),this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),a.append("customerName",this.customerName),a.append("customerCompany",this.customerCompany),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/ctransation/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const uU=(0,_t.Z)(dU,[["render",cU]]);var pU=uU;const mU={class:"intro-y flex items-center mt-8"},hU=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),gU={class:"grid grid-cols-12 gap-6 mt-5"},fU={class:"intro-y col-span-12 lg:col-span-6"},wU={key:0,class:"shadow-md"},vU=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),_U=[vU],yU={class:"intro-y box p-5"},xU={class:"grid grid-cols-2 gap-6 mt-3"},bU=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),kU={class:"input-group"},DU=["value"],CU=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),PU={class:"input-group"},SU={class:"grid grid-cols-2 gap-6 mt-5"},zU=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),NU={class:"fallback mt-4"},TU={class:"mt-5"},MU={class:"text-right mt-8"},IU=["disabled"];function UU(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",mU,[hU,(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",gU,[(0,i._)("div",fU,[l.loading?((0,i.wg)(),(0,i.iD)("label",wU,_U)):(0,i.kq)("",!0),(0,i._)("div",yU,[(0,i._)("div",xU,[(0,i._)("div",null,[bU,(0,i._)("div",kU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,DU)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[CU,(0,i._)("div",PU,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",SU,[(0,i._)("div",null,[zU,(0,i._)("div",NU,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",TU,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",MU,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,IU)])])])])],32)])}var EU={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1,customerCompany:"",customerName:""}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.customerName=a.data.user.firstName+" "+a.data.user.lastName,this.planId=a.data.user.plan[0]._id,a.data.user&&a.data.user.company?this.customerCompany=a.data.user.company:this.customerCompany,this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("customerName",this.customerName),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),a.append("customerCompany",this.customerCompany),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/hospitaltrasaction/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const FU=(0,_t.Z)(EU,[["render",UU]]);var $U=FU;const AU={class:"intro-y flex items-center mt-8"},BU=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),qU={key:0},jU=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),VU=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),LU=[jU,VU],ZU={class:"grid grid-cols-12 gap-6 mt-5"},RU={class:"intro-y col-span-12 lg:col-span-6"},WU={key:0,class:"shadow-md"},HU=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),OU=[HU],YU={class:"intro-y box p-5"},KU={class:"grid grid-cols-2 gap-6 mt-3"},GU=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),JU={class:"input-group"},QU=["value"],XU=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),eE={class:"input-group"},tE={class:"grid grid-cols-2 gap-6 mt-5"},aE=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),sE={class:"fallback mt-4"},rE={class:"mt-5"},iE={class:"text-right mt-8"},lE=["disabled"];function nE(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",AU,[BU,l.loading?((0,i.wg)(),(0,i.iD)("div",qU,LU)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",ZU,[(0,i._)("div",RU,[l.loading?((0,i.wg)(),(0,i.iD)("label",WU,OU)):(0,i.kq)("",!0),(0,i._)("div",YU,[(0,i._)("div",KU,[(0,i._)("div",null,[GU,(0,i._)("div",JU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,QU)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[XU,(0,i._)("div",eE,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",tE,[(0,i._)("div",null,[aE,(0,i._)("div",sE,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",rE,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",iE,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,lE)])])])])],32)])}var oE={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.planId=a.data.user.plan[0]._id,this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/farmacytrasaction/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const cE=(0,_t.Z)(oE,[["render",nE]]);var dE=cE;const uE={class:"intro-y flex items-center mt-8"},pE=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),mE={key:0},hE=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),gE=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),fE=[hE,gE],wE={class:"grid grid-cols-12 gap-6 mt-5"},vE={class:"intro-y col-span-12 lg:col-span-6"},_E={class:"intro-y box p-5"},yE=(0,i._)("div",{class:"grid grid-cols-2 gap-6 mb-5 mt-3"},[(0,i._)("div"),(0,i._)("div")],-1),xE={class:"grid grid-cols-2 gap-6 mt-3"},bE=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),kE={class:"input-group"},DE=["value"],CE=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),PE={class:"input-group"},SE={class:"mt-5"},zE={class:"text-right mt-8"},NE=["disabled"],TE={class:"intro-y box col-span-6 lg:col-span-12"},ME=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"></h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),IE={key:0,class:"p-5"},UE={class:"file"},EE=["href"],FE={class:"ml-4"},$E=["href"],AE={class:"text-slate-500 text-xs mt-0.5"},BE={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},qE={class:"flex items-center text-danger",href:"javascript:;"},jE=["onClick"],VE=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),LE=[VE],ZE={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},RE=(0,i._)("a",{href:"#"},null,-1),WE={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},HE={class:"modal-dialog"},OE={class:"modal-content"},YE=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),KE={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},GE={class:"modal-body grid grid-cols-6 gap-4 gap-y-3"},JE={class:"col-span-12"},QE=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),XE={class:"fallback"},eF={class:"modal-footer text-right"},tF=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function aF(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",uE,[pE,l.loading?((0,i.wg)(),(0,i.iD)("div",mE,fE)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>n.onUpdateTransaction&&n.onUpdateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",wE,[(0,i._)("div",vE,[(0,i._)("div",_E,[yE,(0,i._)("div",xE,[(0,i._)("div",null,[bE,(0,i._)("div",kE,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,DE)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[CE,(0,i._)("div",PE,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",SE,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",zE,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[4]||(t[4]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,NE)])])])])],32),(0,i._)("div",TE,[ME,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",IE,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",UE,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,EE)]),(0,i._)("div",FE,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,$E),(0,i._)("div",AE,(0,Ns.zw)(n.getFileSize(e)),1)]),(0,i._)("div",BE,[(0,i._)("a",qE,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>n.deleteFile(e)},LE,8,jE))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",ZE,[(0,i.Uk)(" No files available. Add customer documents "),RE]))]),(0,i._)("div",WE,[(0,i._)("div",HE,[(0,i._)("div",OE,[YE,l.loading?((0,i.wg)(),(0,i.iD)("div",KE)):(0,i.kq)("",!0),(0,i._)("div",GE,[(0,i._)("div",JE,[QE,(0,i._)("div",XE,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[6]||(t[6]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",eF,[tF,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[7]||(t[7]=(...e)=>n.uploadFiles&&n.uploadFiles(...e))}," Upload ")])])])])])}var sF={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",firstName:"",lastName:"",serviceId:"",plans:[],multipleFiles:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");{const e=a.data.transaction;this.amount=e.amount,this.serviceId=e.serviceIds[0]._id,this.plans=e.planId.planService,e.multipleFiles?this.multipleFiles=e.multipleFiles.split(","):this.multipleFiles=[],this.loading=!1}}catch(t){console.error("Error fetching services:",t),this.loading=!1}},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/transaction/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.fetch(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("transaction/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},async onUpdateTransaction(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.put(`/api/update/transaction/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage})):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const rF=(0,_t.Z)(sF,[["render",aF]]);var iF=rF;const lF=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Transactions")],-1),nF={key:0,class:"shadow-md"},oF=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),cF=[oF],dF={class:"grid grid-cols-12 gap-6 mt-5"},uF={class:"intro-y col-span-12 lg:col-span-6"},pF={class:"intro-y box p-5"},mF=(0,i._)("div",{class:"grid grid-cols-2 gap-6 mb-5 mt-3"},[(0,i._)("div"),(0,i._)("div")],-1),hF={class:"grid grid-cols-2 gap-6 mt-3"},gF=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),fF={class:"input-group"},wF=["value"],vF=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),_F={class:"input-group"},yF={class:"grid grid-cols-2 gap-6 mt-5"},xF=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Current status",-1),bF={class:"input-group"},kF=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Update status",-1),DF={class:"input-group"},CF=(0,i._)("option",{value:"In progress"},"In progress",-1),PF=(0,i._)("option",{value:"Completed"},"Completed",-1),SF=[CF,PF],zF={class:"mt-5"},NF={class:"text-right mt-8"},TF=["disabled"],MF={class:"grid grid-cols-12 gap-6 mt-5"},IF={class:"intro-y box col-span-6 lg:col-span-6"},UF=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"></h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),EF={key:0,class:"p-5"},FF={class:"file"},$F=["href"],AF={class:"ml-4"},BF=["href"],qF={class:"text-slate-500 text-xs mt-0.5"},jF={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},VF={class:"flex items-center text-danger",href:"javascript:;"},LF=["onClick"],ZF=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),RF=[ZF],WF={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},HF=(0,i._)("a",{href:"#"},null,-1),OF={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},YF={class:"modal-dialog"},KF={class:"modal-content"},GF=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),JF={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},QF={class:"modal-body grid grid-cols-6 gap-4 gap-y-3"},XF={class:"col-span-12"},e$=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),t$={class:"fallback"},a$={class:"modal-footer text-right"},s$=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function r$(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[lF,l.loading?((0,i.wg)(),(0,i.iD)("label",nF,cF)):(0,i.kq)("",!0),(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>n.onUpdateTransaction&&n.onUpdateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",dF,[(0,i._)("div",uF,[(0,i._)("div",pF,[mF,(0,i._)("div",hF,[(0,i._)("div",null,[gF,(0,i._)("div",fF,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,wF)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[vF,(0,i._)("div",_F,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",yF,[(0,i._)("div",null,[xF,(0,i._)("div",bF,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.transactionStatus=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.transactionStatus]])])]),(0,i._)("div",null,[kF,(0,i._)("div",DF,[(0,i.wy)((0,i._)("select",{class:"form-select mt-2 sm:mr-2","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.transactionStatus=e)},SF,512),[[s.bM,l.transactionStatus]])])])]),(0,i._)("div",zF,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",NF,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,TF)])])])])],32),(0,i._)("div",MF,[(0,i._)("div",IF,[UF,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",EF,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",FF,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,$F)]),(0,i._)("div",AF,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,BF),(0,i._)("div",qF,(0,Ns.zw)(n.getFileSize(e)),1)]),(0,i._)("div",jF,[(0,i._)("a",VF,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>n.deleteFile(e)},RF,8,LF))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",WF,[(0,i.Uk)(" No files available. Add customer documents "),HF]))])]),(0,i._)("div",OF,[(0,i._)("div",YF,[(0,i._)("div",KF,[GF,l.loading?((0,i.wg)(),(0,i.iD)("div",JF)):(0,i.kq)("",!0),(0,i._)("div",QF,[(0,i._)("div",XF,[e$,(0,i._)("div",t$,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[8]||(t[8]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",a$,[s$,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[9]||(t[9]=(...e)=>n.uploadFiles&&n.uploadFiles(...e))}," Upload ")])])])])])}var i$={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",firstName:"",lastName:"",serviceId:"",updateStatus:"",transactionStatus:"",plans:[],multipleFiles:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");{const e=a.data.transaction;this.planId=e.planId._id,this.transactionStatus=e.transactionStatus,this.customerId=e.customerId._id,this.amount=e.amount,this.serviceId=e.serviceIds[0]._id,this.plans=e.planId.planService,e.multipleFiles?this.multipleFiles=e.multipleFiles.split(","):this.multipleFiles=[],this.loading=!1}}catch(t){console.error("Error fetching services:",t),this.loading=!1}},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/transaction/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.fetch(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/transaction/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},async onUpdateTransaction(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});if(""===this.transactionStatus)e.fire({icon:"warning",title:"warning!",text:"Please update status to 'In Progress' our 'Completed'",timer:3e3});else{const a=wt.Z.get("token"),s=["amount"];for(const e of s)if(""===this[e])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${e} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const t=new FormData;t.append("amount",this.amount),t.append("serviceId",this.serviceId),t.append("customerId",this.customerId),t.append("transactionStatus",this.transactionStatus),t.append("planId",this.planId),t.append("paymentMethod",this.paymentMethod),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.put(`/api/update/transaction/${s}`,t,{headers:{token:a,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Transaction updated successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(t){t.response&&t.response.data&&t.response.data.error?(this.errorMessage=t.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage})):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",t.message)),this.btnloading=!1,this.loading=!1}}}},created(){this.fetch()}};const l$=(0,_t.Z)(i$,[["render",r$]]);var n$=l$;const o$=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),c$={key:0,class:"shadow-md"},d$=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),u$=[d$],p$={class:"grid grid-cols-12 gap-12 mt-5"},m$={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},h$={class:"flex w-full sm:w-auto"},g$={class:"w-48 relative text-slate-500"},f$=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),w$={class:"ml-1"},v$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),_$=[v$],y$={class:"hidden xl:block mx-auto text-slate-500"},x$=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),b$={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible mt-8"},k$={class:"table table-report -mt-2"},D$=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),C$={class:"w-40 !py-4"},P$={class:"decoration-dotted whitespace-nowrap"},S$={class:"w-40 !py-4"},z$={key:0,class:"decoration-dotted whitespace-nowrap"},N$={key:1,class:"decoration-dotted whitespace-nowrap"},T$={class:"w-40"},M$={class:"font-medium whitespace-nowrap"},I$={class:"text-center"},U$={key:0,class:"flex items-center justify-center whitespace-nowrap"},E$={key:1,class:"flex items-center justify-center whitespace-nowrap"},F$={class:"whitespace-nowrap"},$$={class:"whitespace-nowrap"},A$={class:"whitespace-nowrap"},B$={class:"w-40 !py-4"},q$={class:"table-report__action"},j$={class:"flex justify-center items-center"},V$=["onClick"],L$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Z$={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},R$=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),W$={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},H$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),O$={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Y$=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),K$=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),G$=[Y$,K$],J$={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Q$={class:"w-full sm:w-auto sm:mr-auto"},X$={class:"pagination"},eA={class:"page-item"},tA=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),aA=[tA],sA=["onClick"],rA={class:"page-item"},iA=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),lA=[iA],nA=(0,i._)("option",null,"10",-1),oA=(0,i._)("option",null,"25",-1),cA=(0,i._)("option",null,"35",-1),dA=(0,i._)("option",null,"50",-1),uA=(0,i._)("option",null,"100",-1),pA=(0,i._)("option",null,"500",-1),mA=(0,i._)("option",null,"1000",-1),hA=[nA,oA,cA,dA,uA,pA,mA],gA={id:"files-modal",class:"modal mt",tabindex:"-1","aria-hidden":"true"},fA={class:"modal-dialog"},wA={class:"modal-content"},vA={class:"modal-body p-0"},_A={class:"p-5 text-center"},yA=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),xA=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),bA={class:"text-slate-500 mt-2"},kA=["href"],DA=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function CA(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[o$,l.loading?((0,i.wg)(),(0,i.iD)("label",c$,u$)):(0,i.kq)("",!0),(0,i._)("div",p$,[(0,i._)("div",m$,[(0,i._)("div",h$,[(0,i._)("div",g$,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...t)=>e.applyFilter&&e.applyFilter(...t))},null,544),[[s.nr,l.searchTerm]]),f$])]),(0,i._)("div",w$,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},_$)]),(0,i._)("div",y$," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),x$]),(0,i._)("div",b$,[(0,i._)("table",k$,[D$,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",C$,[(0,i._)("a",P$,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",S$,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",z$,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",N$," Individual "))]),(0,i._)("td",T$,[(0,i._)("a",M$,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",I$,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",U$,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",E$,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",F$,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",$$,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",A$,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",B$,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",q$,[(0,i._)("div",j$,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[L$,(0,i.Uk)(" Files ")],8,V$),"Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Z$,[R$,(0,i.Wm)(c,{to:`/updatehospitaltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",W$,[H$,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",O$,G$)):(0,i.kq)("",!0),(0,i._)("div",J$,[(0,i._)("nav",Q$,[(0,i._)("ul",X$,[(0,i._)("li",eA,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},aA)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,sA)],2)))),128)),(0,i._)("li",rA,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},lA)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},hA,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",gA,[(0,i._)("div",fA,[(0,i._)("div",wA,[(0,i._)("div",vA,[(0,i._)("div",_A,[yA,xA,(0,i._)("div",bA,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,kA)])))),128))])])]),DA])])])])])}var PA={data(){return{companyName:"",transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/mytransaction",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const SA=(0,_t.Z)(PA,[["render",CA]]);var zA=SA;const NA=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Transactions",-1),TA={key:0,class:"shadow-md"},MA=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),IA=[MA],UA={class:"grid grid-cols-12 gap-12 mt-5"},EA={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},FA={class:"flex w-full sm:w-auto"},$A={class:"w-48 relative text-slate-500"},AA=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),BA={class:"ml-1"},qA=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),jA=[qA],VA={class:"hidden xl:block mx-auto text-slate-500"},LA=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),ZA={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},RA={class:"table table-report -mt-2"},WA=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),HA={class:"w-40 !py-4"},OA={href:"#",class:"decoration-dotted whitespace-nowrap"},YA={class:"w-40 !py-4"},KA={key:0,class:"decoration-dotted whitespace-nowrap"},GA={key:1,class:"decoration-dotted whitespace-nowrap"},JA={class:"w-40"},QA={href:"#",class:"font-medium whitespace-nowrap"},XA={class:"text-center"},eB={key:0,class:"flex items-center justify-center whitespace-nowrap"},tB={key:1,class:"flex items-center justify-center whitespace-nowrap"},aB={class:"whitespace-nowrap"},sB={class:"whitespace-nowrap"},rB={class:"whitespace-nowrap"},iB={class:"w-40 !py-4"},lB={class:"table-report__action"},nB={class:"flex justify-center items-center"},oB=["onClick"],cB=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),dB={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},uB=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),pB={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},mB=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),hB=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),gB=[mB,hB],fB={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},wB={class:"w-full sm:w-auto sm:mr-auto"},vB={class:"pagination"},_B={class:"page-item"},yB=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),xB=[yB],bB=["onClick"],kB={class:"page-item"},DB=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),CB=[DB],PB=(0,i._)("option",null,"10",-1),SB=(0,i._)("option",null,"25",-1),zB=(0,i._)("option",null,"35",-1),NB=(0,i._)("option",null,"50",-1),TB=(0,i._)("option",null,"100",-1),MB=(0,i._)("option",null,"500",-1),IB=(0,i._)("option",null,"1000",-1),UB=[PB,SB,zB,NB,TB,MB,IB],EB={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},FB={class:"modal-dialog"},$B={class:"modal-content"},AB={class:"modal-body p-0"},BB={class:"p-5 text-center"},qB=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),jB=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),VB={class:"text-slate-500 mt-2"},LB=["href"],ZB=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function RB(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[NA,l.loading?((0,i.wg)(),(0,i.iD)("label",TA,IA)):(0,i.kq)("",!0),(0,i._)("div",UA,[(0,i._)("div",EA,[(0,i._)("div",FA,[(0,i._)("div",$A,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),AA])]),(0,i._)("div",BA,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},jA)]),(0,i._)("div",VA," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),LA]),(0,i._)("div",ZA,[(0,i._)("table",RA,[WA,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allTransactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",HA,[(0,i._)("a",OA,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",YA,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",KA,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",GA," Individual "))]),(0,i._)("td",JA,[(0,i._)("a",QA,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",XA,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",eB,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",tB,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",aB,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",sB,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",rB,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",iB,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",lB,[(0,i._)("div",nB,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[cB,(0,i.Uk)(" Files ")],8,oB),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",dB,[uB,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",pB,gB)):(0,i.kq)("",!0),(0,i._)("div",fB,[(0,i._)("nav",wB,[(0,i._)("ul",vB,[(0,i._)("li",_B,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},xB)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,bB)],2)))),128)),(0,i._)("li",kB,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},CB)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},UB,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",EB,[(0,i._)("div",FB,[(0,i._)("div",$B,[(0,i._)("div",AB,[(0,i._)("div",BB,[qB,jB,(0,i._)("div",VB,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,LB)])))),128))])])]),ZB])])])])])}var WB={data(){return{allTransactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/allcompanytransactions",{headers:{token:e},params:t});this.allTransactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const HB=(0,_t.Z)(WB,[["render",RB]]);var OB=HB;const YB={class:"intro-y flex items-center mt-8"},KB={key:0},GB=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),JB=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),QB=[GB,JB],XB=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),eq={key:1},tq=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),aq={key:2},sq=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),rq={class:"intro-y box px-5 pt-5 mt-5"},iq={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},lq={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},nq={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},oq=["src"],cq={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},dq={class:"ml-5"},uq={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},pq={class:"text-slate-500"},mq={class:"text-slate-200 mt-1"},hq={class:"text-slate-200 mt-1"},gq={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},fq=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),wq={class:"flex flex-col justify-center items-center lg:items-start mt-4"},vq={class:"truncate sm:whitespace-normal flex items-center"},_q=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),yq={class:"truncate sm:whitespace-normal flex items-center mt-3"},xq=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),bq={class:"truncate sm:whitespace-normal flex items-center mt-3"},kq=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Dq={class:"truncate sm:whitespace-normal flex items-center mt-3"},Cq=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),Pq={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Sq={class:"font-medium text-center lg:text-left lg:mt-2"},zq={class:"flex items-center justify-center lg:justify-start mt-2"},Nq={class:""},Tq={class:"ml-3 font-medium"},Mq={class:"flex items-center justify-center lg:justify-start mt-2"},Iq={class:""},Uq={class:"ml-3 font-medium"},Eq={class:"flex items-center justify-center lg:justify-start mt-2"},Fq={class:""},$q={class:"ml-3 font-medium"},Aq={class:"flex items-center justify-center lg:justify-start mt-2"},Bq={class:""},qq={class:"ml-3 font-medium"},jq={class:"flex items-center justify-center lg:justify-start mt-2"},Vq={class:""},Lq={class:"ml-3 font-medium"},Zq={class:"tab-content mt-5"},Rq={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Wq={class:"grid grid-cols-12 gap-6"},Hq=(0,i._)("div",{class:"intro-y box col-span-12 lg:col-span-6"},[(0,i._)("div",{class:"flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"},[(0,i._)("h2",{class:"font-medium text-base mr-auto mt-3 mb-3"}," Latest Transaction "),(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])])]),(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])])],-1),Oq={class:"intro-y box col-span-12 lg:col-span-6"},Yq=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Kq={class:"p-5"},Gq={class:"tab-content"},Jq={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},Qq={key:0,class:"intro-y"},Xq={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},ej={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},tj=["title","src"],aj={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},sj={class:"ml-4 mr-auto"},rj={class:"font-medium"},ij={class:"text-slate-500 text-xs mt-0.5"},lj={class:"text-slate-500 text-xs mt-0.5"},nj={key:1,class:"text-center text-gray-600 mt-4"},oj={class:"intro-y box col-span-12 lg:col-span-12"},cj=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">Uploads</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),dj={key:0,class:"p-5"},uj={class:"file"},pj=["href"],mj={class:"ml-4"},hj=["href"],gj={class:"text-slate-500 text-xs mt-0.5"},fj={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},wj={class:"flex items-center text-danger",href:"javascript:;"},vj=["onClick"],_j=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),yj=[_j],xj={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},bj=(0,i._)("a",{href:"#"},null,-1),kj={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Dj={class:"modal-dialog"},Cj={class:"modal-content"},Pj=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),Sj={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},zj={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Nj={class:"col-span-12"},Tj=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),Mj={class:"fallback"},Ij={class:"modal-footer text-right"},Uj=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function Ej(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",YB,[r.loading?((0,i.wg)(),(0,i.iD)("div",KB,QB)):(0,i.kq)("",!0),XB,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Cancel "),4===r.role?((0,i.wg)(),(0,i.iD)("div",eq,[(0,i.Wm)(n,{to:`/updatecorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[tq])),_:1},8,["to"])])):(0,i.kq)("",!0),4!==r.role?((0,i.wg)(),(0,i.iD)("div",aq,[(0,i.Wm)(n,{to:`/updatecustomer/${this.$route.params.id}`},{default:(0,i.w5)((()=>[sq])),_:1},8,["to"])])):(0,i.kq)("",!0)]),(0,i._)("div",rq,[(0,i._)("div",iq,[(0,i._)("div",lq,[(0,i._)("div",nq,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,oq)):((0,i.wg)(),(0,i.iD)("img",cq))]),(0,i._)("div",dq,[(0,i._)("div",uq,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",pq,(0,Ns.zw)(l.getRole(r.role)),1),(0,i._)("div",mq,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",hq,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",gq,[fq,(0,i._)("div",wq,[(0,i._)("div",vq,[_q,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",yq,[xq,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",bq,[kq,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",Dq,[Cq,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",Pq,[(0,i._)("div",Sq," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",zq,[(0,i._)("div",Nq,[(0,i.Uk)(" Gender: "),(0,i._)("span",Tq,(0,Ns.zw)(r.gender),1)])]),(0,i._)("div",Mq,[(0,i._)("div",Iq,[(0,i.Uk)(" DOB: "),(0,i._)("span",Uq,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",Eq,[(0,i._)("div",Fq,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",$q,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",Aq,[(0,i._)("div",Bq,[(0,i.Uk)(" Plan: "),(0,i._)("span",qq,(0,Ns.zw)(r.plan),1)])]),(0,i._)("div",jq,[(0,i._)("div",Vq,[(0,i.Uk)(" Manager: "),(0,i._)("span",Lq,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",Zq,[(0,i._)("div",Rq,[(0,i._)("div",Wq,[Hq,(0,i._)("div",Oq,[Yq,(0,i._)("div",Kq,[(0,i._)("div",Gq,[(0,i._)("div",Jq,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",Qq,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/dependentprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",Xq,[(0,i._)("div",ej,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,tj)):((0,i.wg)(),(0,i.iD)("img",aj))]),(0,i._)("div",sj,[(0,i._)("div",rj,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",ij,(0,Ns.zw)(a.relation),1),(0,i._)("div",lj,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",nj," No members found. "))])])])]),(0,i._)("div",oj,[cj,r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",dj,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",uj,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,pj)]),(0,i._)("div",mj,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,hj),(0,i._)("div",gj,(0,Ns.zw)(l.getFileSize(e)),1)]),(0,i._)("div",fj,[(0,i._)("a",wj,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},yj,8,vj))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",xj,[(0,i.Uk)(" No files available. Add customer documents "),bj]))])])])]),(0,i._)("div",kj,[(0,i._)("div",Dj,[(0,i._)("div",Cj,[Pj,r.loading?((0,i.wg)(),(0,i.iD)("div",Sj)):(0,i.kq)("",!0),(0,i._)("div",zj,[(0,i._)("div",Nj,[Tj,(0,i._)("div",Mj,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",Ij,[Uj,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var Fj={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",address:"",balancePlan:"",contact1:"",contact2:"",company:"",dob:"",email:"",gender:"",memberShipID:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",id:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.getProfile()},computed:{},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.manager=e.data.user.manager,this.managerFirstName=this.manager.firstName,this.managerLastName=this.manager.lastName,this.company=e.data.user.company,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.role=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const $j=(0,_t.Z)(Fj,[["render",Ej]]);var Aj=$j;const Bj={class:"intro-y flex items-center mt-8"},qj={key:0},jj=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Vj=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Lj=[jj,Vj],Zj=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Invoice",-1),Rj={id:"print-content",class:"intro-y box overflow-hidden mt-5"},Wj={class:"border-b border-slate-200/60 dark:border-darkmode-400 text-center sm:text-left"},Hj={class:"px-5 py-10 sm:px-20 sm:py-20"},Oj=(0,i._)("div",{class:"text-primary font-semibold text-3xl"},"INVOICE",-1),Yj={class:"mt-2"},Kj={class:"font-medium"},Gj={class:"mt-1"},Jj={class:"flex flex-col lg:flex-row px-5 sm:px-20 pt-10 pb-10 sm:pb-20"},Qj=(0,i._)("div",{class:"text-base text-slate-500"},"Client Details",-1),Xj={class:"text-lg font-medium text-primary mt-2"},eV={class:"mt-1"},tV={class:"mt-1"},aV={class:"mt-1"},sV=(0,i._)("div",{class:"mt-1"},null,-1),rV={class:"lg:text-right mt-10 lg:mt-0 lg:ml-auto"},iV=(0,i._)("div",{class:"text-base text-slate-500"},"Payment to",-1),lV={class:"text-lg font-medium text-primary mt-2"},nV={class:"mt-1"},oV={class:"mt-1"},cV={class:"px-5 sm:px-16 py-10 sm:py-20"},dV={class:"overflow-x-auto"},uV={class:"table"},pV=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"border-b-2 dark:border-darkmode-400 whitespace-nowrap"}," Service ")])],-1),mV={class:"border-b dark:border-darkmode-400"},hV={class:"font-medium whitespace-nowrap"},gV={class:"text-slate-500 text-sm mt-0.5 whitespace-nowrap"},fV={class:"text-slate-500 text-sm mt-0.5 whitespace-nowrap"},wV={class:"px-5 sm:px-20 pb-10 sm:pb-20 flex flex-col-reverse sm:flex-row"},vV={class:"text-center sm:text-left mt-10 sm:mt-0"},_V=(0,i._)("div",{class:"text-base text-slate-500"},"Processed by",-1),yV={class:"text-lg text-primary font-medium mt-2"},xV={class:"mt-1"},bV=(0,i._)("div",{class:"mt-1"},null,-1),kV={class:"text-center sm:text-right sm:ml-auto"},DV=(0,i._)("div",{class:"text-base text-slate-500"},"Amount",-1),CV={class:"text-xl text-primary font-medium mt-2"},PV=(0,i._)("div",{class:"mt-1"},"Taxes included",-1);function SV(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Bj,[e.loading?((0,i.wg)(),(0,i.iD)("div",qj,Lj)):(0,i.kq)("",!0),Zj,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-primary mt-5",onClick:t[1]||(t[1]=(...e)=>l.DonloadInvoice&&l.DonloadInvoice(...e))}," Download ")])]),(0,i._)("div",Rj,[(0,i._)("div",Wj,[(0,i._)("div",Hj,[Oj,(0,i._)("div",Yj,[(0,i.Uk)(" Receipt: "),(0,i._)("span",Kj,(0,Ns.zw)(r.invoiceNumber),1)]),(0,i._)("div",Gj,(0,Ns.zw)(r.updatedAt),1)]),(0,i._)("div",Jj,[(0,i._)("div",null,[Qj,(0,i._)("div",Xj,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",eV,(0,Ns.zw)(r.email),1),(0,i._)("div",tV,(0,Ns.zw)(r.address),1),(0,i._)("div",aV,(0,Ns.zw)(r.contact1)+" , "+(0,Ns.zw)(r.contact2),1),sV]),(0,i._)("div",rV,[iV,(0,i._)("div",lV,(0,Ns.zw)(r.partnerName),1),(0,i._)("div",nV,(0,Ns.zw)(r.partnerEmail),1),(0,i._)("div",oV,(0,Ns.zw)(r.partnerContact1)+" , "+(0,Ns.zw)(r.partnerContact2),1)])])]),(0,i._)("div",cV,[(0,i._)("div",dV,[(0,i._)("table",uV,[pV,(0,i._)("tbody",null,[(0,i._)("tr",null,[(0,i._)("td",mV,[(0,i._)("div",hV,(0,Ns.zw)(r.service),1),(0,i._)("div",gV,(0,Ns.zw)(r.serviceAreaOfCover),1),(0,i._)("div",fV,(0,Ns.zw)(r.serviceDescription),1)])])])])])]),(0,i._)("div",wV,[(0,i._)("div",vV,[_V,(0,i._)("div",yV,(0,Ns.zw)(r.agentPartnerFirstName)+" "+(0,Ns.zw)(r.agentPartnerLastName),1),(0,i._)("div",xV,(0,Ns.zw)(r.agentPartnerContact1)+" , "+(0,Ns.zw)(r.agentPartnerContact2),1),bV]),(0,i._)("div",kV,[DV,(0,i._)("div",CV,(0,Ns.zw)(l.formatCurrency(r.amount)),1),PV])])])])}a(6229),a(7330),a(2062);var zV={data(){return{plan:"",errorMessage:"",transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",status:""}},watch:{id(){this.getProfile()}},created(){this.getProfile()},computed:{},methods:{async DonloadInvoice(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");try{const a=await r.Z.get(`/api/get/customerinvoice/${e}`,{headers:{token:t},responseType:"blob"});if(this.loading=!1,"application/json"===a.data.type){const e=new FileReader;e.onload=e=>{const t=JSON.parse(e.target.result);this.errorMessage=t.error,console.error("Error retrieving plan:",this.errorMessage)},e.readAsText(a.data)}else{const t=new Blob([a.data],{type:"application/pdf"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`invoice_${e}.pdf`,r.click(),window.URL.revokeObjectURL(s)}}catch(a){this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",a)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.transactionStatus=t.transactionStatus,this.email=t.customerId.email,this.amount=t.amount,this.contact1=t.customerId.contact1,this.contact2=t.customerId.contact2,this.address=t.customerId.address,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.agentPartnerFirstName=t.user.firstName,this.agentPartnerLastName=t.user.lastName,this.agentPartnerContact1=t.user.contact1,this.agentPartnerContact2=t.user.contact2,this.partnerName=t.user.partnerUser.partnerName,this.partnerEmail=t.user.partnerUser.email,this.partnerContact1=t.user.partnerUser.contact1,this.partnerContact2=t.user.partnerUser.contact2,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const NV=(0,_t.Z)(zV,[["render",SV]]);var TV=NV;const MV=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),IV={key:0,class:"shadow-md"},UV=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),EV=[UV],FV={class:"grid grid-cols-12 gap-6 mt-5"},$V={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},AV={class:"flex w-full sm:w-auto"},BV={class:"w-48 relative text-slate-500"},qV=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),jV={class:"hidden xl:block mx-auto text-slate-500"},VV=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),LV={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},ZV={class:"table table-report -mt-2"},RV=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Date")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),WV={class:"w-40 !py-4"},HV={class:"decoration-dotted whitespace-nowrap"},OV={class:"w-40 !py-4"},YV={key:0,class:"decoration-dotted whitespace-nowrap"},KV={key:1,class:"decoration-dotted whitespace-nowrap"},GV={class:"w-40"},JV={class:"font-medium whitespace-nowrap"},QV={class:"text-center"},XV={class:"flex items-center justify-center whitespace-nowrap"},eL={class:"whitespace-nowrap"},tL={class:"whitespace-nowrap"},aL={class:"w-40 !py-4"},sL={class:"table-report__action"},rL={class:"flex justify-center items-center"},iL={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},lL=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),nL={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},oL=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),cL={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},dL=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),uL=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),pL=[dL,uL],mL={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},hL={class:"w-full sm:w-auto sm:mr-auto"},gL={class:"pagination"},fL={class:"page-item"},wL=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),vL=[wL],_L=["onClick"],yL={class:"page-item"},xL=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),bL=[xL],kL=(0,i._)("option",null,"10",-1),DL=(0,i._)("option",null,"25",-1),CL=(0,i._)("option",null,"35",-1),PL=(0,i._)("option",null,"50",-1),SL=(0,i._)("option",null,"100",-1),zL=(0,i._)("option",null,"500",-1),NL=(0,i._)("option",null,"1000",-1),TL=[kL,DL,CL,PL,SL,zL,NL],ML=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function IL(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[MV,l.loading?((0,i.wg)(),(0,i.iD)("label",IV,EV)):(0,i.kq)("",!0),(0,i._)("div",FV,[(0,i._)("div",$V,[(0,i._)("div",AV,[(0,i._)("div",BV,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),qV])]),(0,i._)("div",jV," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),VV]),(0,i._)("div",LV,[(0,i._)("table",ZV,[RV,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",WV,[(0,i._)("a",HV,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",OV,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",YV,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",KV,"Individual"))]),(0,i._)("td",GV,[(0,i._)("a",JV,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",QV,[(0,i._)("div",XV,(0,Ns.zw)(n.formatCurrency(e.amount)),1)]),(0,i._)("td",null,[(0,i._)("div",eL,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",tL,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",aL,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",sL,[(0,i._)("div",rL,["Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",iL,[lL,(0,i.Wm)(o,{to:`/updatehospitaltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",nL,[oL,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",cL,pL)):(0,i.kq)("",!0),(0,i._)("div",mL,[(0,i._)("nav",hL,[(0,i._)("ul",gL,[(0,i._)("li",fL,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},vL)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,_L)],2)))),128)),(0,i._)("li",yL,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},bL)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},TL,544),[[s.bM,l.pageSize]])])]),ML])}var UL={data(){return{companyName:"",transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/gettransactionshistory/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const EL=(0,_t.Z)(UL,[["render",IL]]);var FL=EL;const $L=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Company")],-1),AL={class:"grid grid-cols-12 gap-6 mt-5"},BL={class:"intro-y col-span-12 lg:col-span-6"},qL={class:"intro-y box p-5"},jL=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Company Name *",-1),VL={class:"mt-3"},LL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Brand *",-1),ZL={class:"input-group"},RL={class:"mt-3"},WL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Company Manager",-1),HL={class:"input-group"},OL={class:"mt-3"},YL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email *",-1),KL={class:"input-group"},GL={class:"mt-3"},JL=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Account Manager *",-1),QL={class:"input-group"},XL=["value"],eZ={class:"mt-3"},tZ=(0,i._)("label",{class:"form-label"},"Contacts *",-1),aZ={class:"sm:grid grid-cols-3 gap-2"},sZ={class:"input-group"},rZ={class:"input-group mt-2 sm:mt-0"},iZ=(0,i._)("label",{for:"pos-form-1",class:"form-label mt-3"},"Select Avatar",-1),lZ={class:"fallback"},nZ={class:"text-right mt-5"},oZ=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),cZ=["disabled"];function dZ(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[$L,(0,i._)("form",{onSubmit:t[8]||(t[8]=(0,s.iM)(((...e)=>n.onCreateCompany&&n.onCreateCompany(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",AL,[(0,i._)("div",BL,[(0,i._)("div",qL,[(0,i._)("div",null,[jL,(0,i.wy)((0,i._)("input",{id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyName=e)},null,512),[[s.nr,l.companyName]])]),(0,i._)("div",VL,[LL,(0,i._)("div",ZL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"brand","aria-describedby":"input-group-1","onUpdate:modelValue":t[1]||(t[1]=e=>l.brand=e)},null,512),[[s.nr,l.brand]])])]),(0,i._)("div",RL,[WL,(0,i._)("div",HL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"manager","aria-describedby":"input-group-1","onUpdate:modelValue":t[2]||(t[2]=e=>l.accountManager=e)},null,512),[[s.nr,l.accountManager]])])]),(0,i._)("div",OL,[YL,(0,i._)("div",KL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1","onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e)},null,512),[[s.nr,l.email]])])]),(0,i._)("div",GL,[JL,(0,i._)("div",QL,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.manager=e),class:"form-control","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,XL)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",eZ,[tZ,(0,i._)("div",aZ,[(0,i._)("div",sZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3","onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e)},null,512),[[s.nr,l.contact1]])]),(0,i._)("div",rZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4","onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e)},null,512),[[s.nr,l.contact2]])])])]),iZ,(0,i._)("div",lZ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)]),(0,i._)("div",nZ,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[oZ])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,cZ)])])])])],32)])}var uZ={data(){return{companyName:"",brand:"",accountManager:"",contact1:"",contact2:"",email:"",managers:[],manager:"",avatar:null,btnloading:!1}},created(){this.getMagers()},methods:{async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateCompany(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=["companyName","brand","accountManager","email","contact1","manager"],a=wt.Z.get("token");for(const r of t)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const t=new FormData;t.append("companyName",this.companyName),t.append("brand",this.brand),t.append("accountManager",this.accountManager),t.append("email",this.email),t.append("contact1",this.contact1),t.append("contact2",this.contact2),t.append("avatar",this.avatar),t.append("manager",this.manager),this.btnloading=!0;const s=await r.Z.post("/api/company/create",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Company created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcompany"),this.isSuccess=!0,console.log(s),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error creating company:",e),setTimeout((()=>{window.location.reload()}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error creating company:",s.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const pZ=(0,_t.Z)(uZ,[["render",dZ]]);var mZ=pZ;const hZ={class:"intro-y flex items-center mt-8"},gZ=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Company",-1),fZ={key:0},wZ=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),vZ=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),_Z=[wZ,vZ],yZ={class:"grid grid-cols-12 gap-6 mt-5"},xZ={class:"intro-y col-span-12 lg:col-span-6"},bZ={class:"intro-y box p-5"},kZ=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Company Name",-1),DZ={class:"mt-3"},CZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Brand",-1),PZ={class:"input-group"},SZ={class:"mt-3"},zZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Account Manager",-1),NZ={class:"input-group"},TZ={class:"mt-3"},MZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),IZ={class:"input-group"},UZ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),EZ={class:"input-group"},FZ=["value"],$Z={class:"mt-3"},AZ=(0,i._)("label",{class:"form-label"},"Contacts",-1),BZ={class:"sm:grid grid-cols-3 gap-2"},qZ={class:"input-group"},jZ={class:"input-group mt-2 sm:mt-0"},VZ=(0,i._)("label",{for:"pos-form-1",class:"form-label mt-3"},"Select Avatar",-1),LZ={class:"fallback"},ZZ=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),RZ={class:"grid grid-cols-2 gap-6 mt-1"},WZ=(0,i._)("option",{value:"Active"},"Active",-1),HZ=(0,i._)("option",{value:"Inactive"},"Inactive",-1),OZ=[WZ,HZ],YZ={class:"text-right mt-5"},KZ=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),GZ=["disabled"];function JZ(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",hZ,[gZ,l.loading?((0,i.wg)(),(0,i.iD)("div",fZ,_Z)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[9]||(t[9]=(0,s.iM)(((...e)=>n.onUpdateCompany&&n.onUpdateCompany(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",yZ,[(0,i._)("div",xZ,[(0,i._)("div",bZ,[(0,i._)("div",null,[kZ,(0,i.wy)((0,i._)("input",{id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyName=e)},null,512),[[s.nr,l.companyName]])]),(0,i._)("div",DZ,[CZ,(0,i._)("div",PZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"brand","aria-describedby":"input-group-1","onUpdate:modelValue":t[1]||(t[1]=e=>l.brand=e)},null,512),[[s.nr,l.brand]])])]),(0,i._)("div",SZ,[zZ,(0,i._)("div",NZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"manager","aria-describedby":"input-group-1","onUpdate:modelValue":t[2]||(t[2]=e=>l.accountManager=e)},null,512),[[s.nr,l.accountManager]])])]),(0,i._)("div",TZ,[MZ,(0,i._)("div",IZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1","onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e)},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[UZ,(0,i._)("div",EZ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" "+(0,Ns.zw)(e.contact1),9,FZ)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",$Z,[AZ,(0,i._)("div",BZ,[(0,i._)("div",qZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3","onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e)},null,512),[[s.nr,l.contact1]])]),(0,i._)("div",jZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4","onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e)},null,512),[[s.nr,l.contact2]])])])]),VZ,(0,i._)("div",LZ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)]),ZZ,(0,i._)("div",RZ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},OZ,512),[[s.bM,l.status]])]),(0,i._)("div",YZ,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[KZ])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,GZ)])])])])],32)])}var QZ={data(){return{companyName:"",brand:"",accountManager:"",contact1:"",contact2:"",email:"",avatar:null,manager:"",managers:[],status:"",btnloading:!1,loading:!1}},watch:{id(){this.getCompany()}},created(){this.getCompany(),this.getMagers()},methods:{async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getCompany(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/company/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.companyName=e.data.company.companyName,this.brand=e.data.company.brand,this.accountManager=e.data.company.accountManager,this.contact1=e.data.company.contact1,this.contact2=e.data.company.contact2,this.email=e.data.company.email,this.manager=e.data.company.manager,this.status=e.data.company.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateCompany(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["companyName","brand","accountManager","manager","email","contact1","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("companyName",this.companyName),a.append("brand",this.brand),a.append("accountManager",this.accountManager),a.append("manager",this.manager),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0,this.loading=!0;const i=await r.Z.put(`/api/company/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Company update successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewcompany"),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,this.loading=!1,setTimeout((()=>{window.location.reload()}),3e3),console.error("Error updating company:",e)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message);this.btnloading=!1,this.loading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const XZ=(0,_t.Z)(QZ,[["render",JZ]]);var eR=XZ;const tR=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Company",-1),aR={key:0},sR=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),rR=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),iR=[sR,rR],lR={class:"grid grid-cols-12 gap-6 mt-5"},nR={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},oR={class:"flex w-full sm:w-auto"},cR={class:"w-48 relative text-slate-500"},dR=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),uR={class:"hidden xl:block mx-auto text-slate-500"},pR={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},mR={class:"table table-report -mt-2"},hR=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Company name"),(0,i._)("th",{class:"whitespace-nowrap"},"Brand"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Company Manager"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Account Manager"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),gR={class:"w-40 !py-4"},fR={class:"w-10 h-10 image-fit zoom-in"},wR=["title","src"],vR={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},_R={class:"w-40 !py-4"},yR={href:"#",class:"decoration-dotted whitespace-nowrap"},xR={class:"w-40"},bR={href:"#",class:"font-medium whitespace-nowrap"},kR={class:"text-center"},DR={class:"flex items-center justify-center whitespace-nowrap"},CR={class:"w-40"},PR={href:"#",class:"font-medium whitespace-nowrap"},SR={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},zR={class:"text-center"},NR={key:0,class:"flex items-center justify-center whitespace-nowrap"},TR={class:"w-40 !py-4"},MR={class:"table-report__action"},IR={class:"flex justify-center items-center"},UR={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},ER=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),FR={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},$R=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),AR={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},BR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),qR={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},jR=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),VR=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),LR=[jR,VR],ZR={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},RR={class:"w-full sm:w-auto sm:mr-auto"},WR={class:"pagination"},HR={class:"page-item"},OR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),YR=[OR],KR=["onClick"],GR={class:"page-item"},JR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),QR=[JR],XR=(0,i._)("option",null,"10",-1),eW=(0,i._)("option",null,"25",-1),tW=(0,i._)("option",null,"35",-1),aW=(0,i._)("option",null,"50",-1),sW=(0,i._)("option",null,"100",-1),rW=[XR,eW,tW,aW,sW],iW=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function lW(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[tR,l.loading?((0,i.wg)(),(0,i.iD)("div",aR,iR)):(0,i.kq)("",!0),(0,i._)("div",lR,[(0,i._)("div",nR,[(0,i._)("div",oR,[(0,i._)("div",cR,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),dR])]),(0,i._)("div",uR," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",pR,[(0,i._)("table",mR,[hR,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allCompanies,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",gR,[(0,i._)("div",fR,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,wR)):((0,i.wg)(),(0,i.iD)("img",vR))])]),(0,i._)("td",_R,[(0,i._)("a",yR,(0,Ns.zw)(a.companyName),1)]),(0,i._)("td",xR,[(0,i._)("a",bR,(0,Ns.zw)(a.brand),1)]),(0,i._)("td",kR,[(0,i._)("div",DR,(0,Ns.zw)(a.accountManager),1)]),(0,i._)("td",CR,[(0,i._)("a",PR,(0,Ns.zw)(a.contact1),1),(0,i._)("div",SR,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",zR,[a.manager?((0,i.wg)(),(0,i.iD)("div",NR,(0,Ns.zw)(a.manager.firstName)+" "+(0,Ns.zw)(a.manager.lastName),1)):(0,i.kq)("",!0)]),(0,i._)("td",TR,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",MR,[(0,i._)("div",IR,[(0,i._)("a",UR,[ER,(0,i.Wm)(o,{to:`/updatecompany/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",FR,[$R,(0,i.Wm)(o,{to:`/companymembers/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",AR,[BR,(0,i.Wm)(o,{to:`/viewcompanytransactions/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",qR,LR)):(0,i.kq)("",!0),(0,i._)("div",ZR,[(0,i._)("nav",RR,[(0,i._)("ul",WR,[(0,i._)("li",HR,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},YR)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,KR)],2)))),128)),(0,i._)("li",GR,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},QR)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},rW,544),[[s.bM,l.pageSize]])])]),iW])}var nW={data(){return{allCompanies:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allcompany",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allCompanies=t.data.companies,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const oW=(0,_t.Z)(nW,[["render",lW]]);var cW=oW;const dW=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),uW={key:0},pW=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),mW=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),hW=[pW,mW],gW={class:"grid grid-cols-12 gap-6 mt-5"},fW={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},wW={class:"flex w-full sm:w-auto"},vW={class:"w-48 relative text-slate-500"},_W=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),yW=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])])])])])],-1),xW=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])]),(0,i.Uk)(" Add Bulk ")])])])],-1),bW={class:"hidden xl:block mx-auto text-slate-500"},kW={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},DW={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},CW={class:"table table-report -mt-2"},PW=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contact"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Gender"),(0,i._)("th",{class:"whitespace-nowrap"},"Monthlyfee"),(0,i._)("th",{class:"whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Membership ID"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),SW={class:"w-40 !py-4"},zW={href:"javascript:;",class:"decoration-dotted whitespace-nowrap"},NW={class:"w-40"},TW={href:"#",class:"font-medium whitespace-nowrap"},MW={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},IW={class:"text-center"},UW={class:"flex items-center justify-center whitespace-nowrap"},EW={class:"w-40 text-right"},FW={class:"pr-16"},$W={class:"whitespace-nowrap"},AW={class:"whitespace-nowrap"},BW={class:"w-40"},qW={key:0},jW={href:"javascript:;",class:"font-medium whitespace-nowrap"},VW={key:1},LW={class:"table-report__action"},ZW={class:"flex justify-center items-center"},RW={key:0,a:"",class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},WW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),HW={key:1,a:"",class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},OW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),YW={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5 ml-5",href:"javascript:;"},KW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),GW={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},JW=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),QW=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),XW=[JW,QW],eH={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},tH={class:"w-full sm:w-auto sm:mr-auto"},aH={class:"pagination"},sH={class:"page-item"},rH=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),iH=[rH],lH=["onClick"],nH={class:"page-item"},oH=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),cH=[oH],dH=(0,i._)("option",null,"10",-1),uH=(0,i._)("option",null,"25",-1),pH=(0,i._)("option",null,"35",-1),mH=(0,i._)("option",null,"50",-1),hH=(0,i._)("option",null,"100",-1),gH=[dH,uH,pH,mH,hH],fH=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function wH(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[dW,l.loading?((0,i.wg)(),(0,i.iD)("div",uW,hW)):(0,i.kq)("",!0),(0,i._)("div",gW,[(0,i._)("div",fW,[(0,i._)("div",wW,[(0,i._)("div",vW,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),_W])]),(0,i.Wm)(o,{to:`/createcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[yW])),_:1},8,["to"]),(0,i.Wm)(o,{to:`/createbulkcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[xW])),_:1},8,["to"]),(0,i._)("div",bW," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",kW,[(0,i._)("button",{class:"btn btn-secondary shadow-md mr-2",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")])]),(0,i._)("div",DW,[(0,i._)("table",CW,[PW,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.companymembers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",SW,[(0,i._)("a",zW,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",NW,[(0,i._)("a",TW,(0,Ns.zw)(e.contact1),1),(0,i._)("div",MW,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",IW,[(0,i._)("div",UW,(0,Ns.zw)(e.gender),1)]),(0,i._)("td",EW,[(0,i._)("div",FW,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",null,[(0,i._)("div",$W,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[(0,i._)("div",AW,(0,Ns.zw)(e.memberShipID),1)]),(0,i._)("td",BW,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",qW,[(0,i._)("a",jW,(0,Ns.zw)(e.plan[0].planName),1)])):((0,i.wg)(),(0,i.iD)("div",VW,"No Plan add"))]),(0,i._)("td",null,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",LW,[(0,i._)("div",ZW,[7===e.userType?((0,i.wg)(),(0,i.iD)("a",RW,[WW,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),4===e.userType?((0,i.wg)(),(0,i.iD)("a",HW,[OW,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),4===e.userType?((0,i.wg)(),(0,i.iD)("a",YW,[KW,(0,i.Wm)(o,{to:`/createdependentcorporate/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependent")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",GW,XW)):(0,i.kq)("",!0),(0,i._)("div",eH,[(0,i._)("nav",tH,[(0,i._)("ul",aH,[(0,i._)("li",sH,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.previousPage&&n.previousPage(...e))},iH)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,lH)],2)))),128)),(0,i._)("li",nH,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.nextPage&&n.nextPage(...e))},cH)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[5]||(t[5]=e=>l.pageSize=e),onChange:t[6]||(t[6]=(...t)=>e.changePageSize&&e.changePageSize(...t))},gH,544),[[s.bM,l.pageSize]])])]),fH])}var vH={data(){return{companymembers:[],currentPage:1,totalPages:1,itemsPerPage:10,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",pageSize:10,count:0,loading:!1}},computed:{},methods:{goBack(){this.$router.go(-1)},isActivePage(e){return e===this.currentPage},applyFilter(){this.currentPage=1,this.getCompanyUsers()},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},async getCompanyUsers(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/allcompanyuser/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.companymembers=a.data.allUsers,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.fetchData())},previousPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.goToPage(this.currentPage+1)},updatePerPage(){this.currentPage=1,this.getCompanyUsers()},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"Company_Members.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactinos_list.pdf"}).from(t).save()}),500)}},created(){this.getCompanyUsers()}};const _H=(0,_t.Z)(vH,[["render",wH]]);var yH=_H;const xH={key:0,class:"shadow-md"},bH=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),kH=[bH],DH={class:"intro-y flex items-center mt-8"},CH={class:"text-lg font-medium mr-auto"},PH={class:"grid grid-cols-12 gap-6 mt-5"},SH={class:"intro-y col-span-12 lg:col-span-6"},zH={class:"intro-y box p-5"},NH={class:"grid grid-cols-2 gap-6 mt-3"},TH=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),MH={class:"input-group"},IH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),UH={class:"input-group"},EH={class:"grid grid-cols-3 gap-6 mt-3"},FH=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),$H={class:"input-group"},AH=(0,i._)("option",null,"ID",-1),BH=(0,i._)("option",null,"Drive Licence",-1),qH=(0,i._)("option",null,"Passport",-1),jH=(0,i._)("option",null,"Voters",-1),VH=(0,i._)("option",null,"...",-1),LH=[AH,BH,qH,jH,VH],ZH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),RH={class:"input-group"},WH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),HH={class:"input-group"},OH={class:"grid grid-cols-3 gap-6 mt-3"},YH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),KH={class:"input-group"},GH=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),JH={class:"input-group"},QH=(0,i._)("option",null,"male",-1),XH=(0,i._)("option",null,"female",-1),eO=(0,i._)("option",null,"other",-1),tO=[QH,XH,eO],aO=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),sO={class:"input-group"},rO={class:"grid grid-cols-2 gap-6 mt-3"},iO=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),lO={class:"input-group"},nO=["value"],oO=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),cO={class:"input-group"},dO={class:"grid grid-cols-2 gap-6 mt-3"},uO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),pO={class:"input-group"},mO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),hO={class:"input-group"},gO={class:"grid grid-cols-3 gap-6 mt-3"},fO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),wO={class:"input-group"},vO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),_O={class:"input-group"},yO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),xO={class:"input-group"},bO={class:"grid grid-cols-2 gap-6 mt-3"},kO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),DO={class:"input-group"},CO=["value"],PO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),SO={class:"fallback mt-4"},zO={class:"text-right mt-8"},NO=["disabled"];function TO(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",xH,kH)):(0,i.kq)("",!0),(0,i._)("div",DH,[(0,i._)("h2",CH," Add Customer on "+(0,Ns.zw)(l.company)+" account ",1)]),(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onCreateCorporateCustomer&&n.onCreateCorporateCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",PH,[(0,i._)("div",SH,[(0,i._)("div",zH,[(0,i._)("div",NH,[(0,i._)("div",null,[TH,(0,i._)("div",MH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[IH,(0,i._)("div",UH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",EH,[(0,i._)("div",null,[FH,(0,i._)("div",$H,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},LH,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[ZH,(0,i._)("div",RH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[WH,(0,i._)("div",HH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",OH,[(0,i._)("div",null,[YH,(0,i._)("div",KH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[GH,(0,i._)("div",JH,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},tO,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[aO,(0,i._)("div",sO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",rO,[(0,i._)("div",null,[iO,(0,i._)("div",lO,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,nO)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[oO,(0,i._)("div",cO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",dO,[(0,i._)("div",null,[uO,(0,i._)("div",pO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[mO,(0,i._)("div",hO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",gO,[(0,i._)("div",null,[fO,(0,i._)("div",wO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[vO,(0,i._)("div",_O,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[yO,(0,i._)("div",xO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",bO,[(0,i._)("div",null,[kO,(0,i._)("div",DO,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,CO)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[PO,(0,i._)("div",SO,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",zO,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,NO)])])])])],32)])}var MO={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",manager:"",password:"",avatar:null,plans:[],managers:[],company:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/agent/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async getCompany(){const e=this.$route.params.id;this.loading=!0;const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/company/${e}`,{headers:{token:t}});if(!a.data.success)throw new Error("Failed to fetch plans");this.company=a.data.company.companyName,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateCorporateCustomer(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","manager","company"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.post(`/api/user/corporate/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customer created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){const e=this.$route.params.id;e||window.location.reload(),this.getCompany(),this.getPlans(),this.getMagers()}};const IO=(0,_t.Z)(MO,[["render",TO]]);var UO=IO;const EO={key:0,class:"shadow-md"},FO=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$O=[FO],AO={class:"intro-y flex items-center mt-8"},BO={class:"text-lg font-medium mr-auto"},qO={class:"grid grid-cols-12 gap-6 mt-5"},jO={class:"intro-y col-span-12 lg:col-span-6"},VO={class:"intro-y box p-5"},LO={class:"grid grid-cols-1 gap-6 mt-3"},ZO=(0,i.uE)('<label for="crud-form-4" class="form-label">Select file to create customers</label><div class="mt-8 mb-2"><p><span>Rules: </span></p><p class="mt-2"><span>1. Dates must be in the format yyyy/mm/dd</span></p><p class="mt-2"><span>2. Contact must be in numeric format, unique, and begin with the prefix +258</span></p><p class="mt-2"><span>3. Please use a valid and unique email address</span></p><p class="mt-2"><span>4. Membership IDs must be unique</span></p><p class="mt-2"><span>5. There should be no empty rows or columns</span></p><p class="mt-2"><span>6. After uploading the file, please review the fields before submitting</span></p></div>',2),RO={class:"fallback mt-8"},WO={class:"text-right mt-8"},HO=["disabled"],OO=(0,i._)("div",{class:"grid grid-cols-12 gap-12 mt-5"},[(0,i._)("div",{class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},[(0,i._)("div",{class:"table-wrapper"},[(0,i._)("table",{class:"table table-report -mt-2",id:"csvDataTable"},[(0,i._)("thead",null,[(0,i._)("tr")]),(0,i._)("tbody",null,[(0,i._)("tr")])])])])],-1);function YO(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",EO,$O)):(0,i.kq)("",!0),(0,i._)("div",AO,[(0,i._)("h2",BO," Add Bulk Customers on "+(0,Ns.zw)(l.company)+" account ",1)]),(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>n.onCreateBulkCorporateCustomer&&n.onCreateBulkCorporateCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",qO,[(0,i._)("div",jO,[(0,i._)("div",VO,[(0,i._)("div",LO,[(0,i._)("div",null,[ZO,(0,i._)("div",RO,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".csv",name:"csvFile",onChange:t[0]||(t[0]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",WO,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[1]||(t[1]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,HO)])])])])],32),OO])}var KO=a(6026),GO=a.n(KO),JO={data(){return{csvContent:"",manager:"",company:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0],a=new FileReader;a.onload=e=>{const t=e.target.result;console.log("CSV File Content:",t),this.csvContent=t,this.displayCSVData(t)},a.readAsText(t)},displayCSVData(e){const t=GO().parse(e,{header:!0}).data,a=Object.keys(t[0]),s=document.getElementById("csvDataTable");s.innerHTML="<thead></thead><tbody></tbody>";const r=s.querySelector("thead"),i=document.createElement("tr");a.forEach((e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)})),r.appendChild(i);const l=s.querySelector("tbody");t.forEach((e=>{const t=document.createElement("tr");a.forEach((a=>{const s=document.createElement("td");s.textContent=e[a],t.appendChild(s)})),l.appendChild(t)}))},async getCompany(){const e=this.$route.params.id;this.loading=!0;const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/company/${e}`,{headers:{token:t}});if(!a.data.success)throw new Error("Failed to fetch plans");this.company=a.data.company.companyName,this.manager=a.data.company.manager,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateBulkCorporateCustomer(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["csvFile","manager"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("csvContent",this.csvContent),a.append("manager",this.manager),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.post(`/api/user/bulk/corporatebulk/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customers created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){const e=this.$route.params.id;e||window.location.reload(),this.getCompany()}};const QO=(0,_t.Z)(JO,[["render",YO]]);var XO=QO;const eY={key:0,class:"shadow-md"},tY=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),aY=[tY],sY=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update corporate customer")],-1),rY={class:"grid grid-cols-12 gap-6 mt-5"},iY={class:"intro-y col-span-12 lg:col-span-6"},lY={class:"intro-y box p-5"},nY={class:"grid grid-cols-2 gap-6 mt-3"},oY=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),cY={class:"input-group"},dY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),uY={class:"input-group"},pY={class:"grid grid-cols-3 gap-6 mt-3"},mY=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),hY={class:"input-group"},gY=(0,i._)("option",null,"ID",-1),fY=(0,i._)("option",null,"Drive Licence",-1),wY=(0,i._)("option",null,"Passport",-1),vY=(0,i._)("option",null,"Voters",-1),_Y=(0,i._)("option",null,"...",-1),yY=[gY,fY,wY,vY,_Y],xY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),bY={class:"input-group"},kY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),DY={class:"input-group"},CY={class:"grid grid-cols-3 gap-6 mt-3"},PY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),SY={class:"input-group"},zY=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),NY={class:"input-group"},TY=(0,i._)("option",null,"male",-1),MY=(0,i._)("option",null,"female",-1),IY=(0,i._)("option",null,"other",-1),UY=[TY,MY,IY],EY=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),FY={class:"input-group"},$Y={class:"grid grid-cols-2 gap-6 mt-3"},AY=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),BY={class:"input-group"},qY=["value"],jY=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),VY={class:"input-group"},LY={class:"grid grid-cols-2 gap-6 mt-3"},ZY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),RY={class:"input-group"},WY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),HY={class:"input-group"},OY={class:"grid grid-cols-3 gap-6 mt-3"},YY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),KY={class:"input-group"},GY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),JY={class:"input-group"},QY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),XY={class:"input-group"},eK={class:"grid grid-cols-2 gap-6 mt-3"},tK=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),aK={class:"input-group"},sK=["value"],rK=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),iK={class:"fallback mt-4"},lK={class:"text-right mt-8"},nK=["disabled"];function oK(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",eY,aY)):(0,i.kq)("",!0),sY,(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onUpdateCorporate&&n.onUpdateCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",rY,[(0,i._)("div",iY,[(0,i._)("div",lY,[(0,i._)("div",nY,[(0,i._)("div",null,[oY,(0,i._)("div",cY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[dY,(0,i._)("div",uY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",pY,[(0,i._)("div",null,[mY,(0,i._)("div",hY,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},yY,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[xY,(0,i._)("div",bY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[kY,(0,i._)("div",DY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",CY,[(0,i._)("div",null,[PY,(0,i._)("div",SY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[zY,(0,i._)("div",NY,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},UY,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[EY,(0,i._)("div",FY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",$Y,[(0,i._)("div",null,[AY,(0,i._)("div",BY,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,qY)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[jY,(0,i._)("div",VY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",LY,[(0,i._)("div",null,[ZY,(0,i._)("div",RY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[WY,(0,i._)("div",HY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",OY,[(0,i._)("div",null,[YY,(0,i._)("div",KY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[GY,(0,i._)("div",JY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[QY,(0,i._)("div",XY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",eK,[(0,i._)("div",null,[tK,(0,i._)("div",aK,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,sK)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[rK,(0,i._)("div",iK,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",lK,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,nK)])])])])],32)])}var cK={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){const e=this.$route.params.id;e||window.location("/"),this.getUser(),this.getPlans(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){this.loading=!0,this.btnloading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1,this.btnloading=!1}},async getMagers(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1,this.btnloading=!1}},getUser(){this.btnloading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.plan[0]._id,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateCorporate(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/corporate/edit/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const dK=(0,_t.Z)(cK,[["render",oK]]);var uK=dK;const pK=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),mK={key:0,class:"shadow-md"},hK=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),gK=[hK],fK={class:"grid grid-cols-12 gap-6 mt-5"},wK={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},vK={class:"flex w-full sm:w-auto"},_K={class:"w-48 relative text-slate-500"},yK=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),xK={class:"ml-1"},bK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),kK=[bK],DK={class:"hidden xl:block mx-auto text-slate-500"},CK={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},PK={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},SK={class:"table table-report -mt-2"},zK=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),NK={class:"w-40 !py-4"},TK={href:"#",class:"decoration-dotted whitespace-nowrap"},MK={class:"w-40 !py-4"},IK={key:0,class:"decoration-dotted whitespace-nowrap"},UK={key:1,class:"decoration-dotted whitespace-nowrap"},EK={class:"w-40 !py-4"},FK={class:"decoration-dotted whitespace-nowrap"},$K={class:"w-40"},AK={href:"#",class:"font-medium whitespace-nowrap"},BK={class:"text-center"},qK={key:0,class:"flex items-center justify-center whitespace-nowrap"},jK={key:1,class:"flex items-center justify-center whitespace-nowrap"},VK={class:"whitespace-nowrap"},LK={class:"whitespace-nowrap"},ZK={class:"whitespace-nowrap"},RK={class:"w-40 !py-4"},WK={class:"table-report__action"},HK={class:"flex justify-center items-center"},OK=["onClick"],YK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),KK={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},GK=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),JK={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},QK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),XK={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},eG=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),tG={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},aG=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),sG=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),rG=[aG,sG],iG={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},lG={class:"w-full sm:w-auto sm:mr-auto"},nG={class:"pagination"},oG={class:"page-item"},cG=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),dG=[cG],uG=["onClick"],pG={class:"page-item"},mG=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),hG=[mG],gG=(0,i._)("option",null,"10",-1),fG=(0,i._)("option",null,"25",-1),wG=(0,i._)("option",null,"35",-1),vG=(0,i._)("option",null,"50",-1),_G=(0,i._)("option",null,"100",-1),yG=(0,i._)("option",null,"500",-1),xG=(0,i._)("option",null,"1000",-1),bG=[gG,fG,wG,vG,_G,yG,xG],kG={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},DG={class:"modal-dialog"},CG={class:"modal-content"},PG={class:"modal-body p-0"},SG={class:"p-5 text-center"},zG=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),NG=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),TG={class:"text-slate-500 mt-2"},MG=["href"],IG=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function UG(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[pK,l.loading?((0,i.wg)(),(0,i.iD)("label",mK,gK)):(0,i.kq)("",!0),(0,i._)("div",fK,[(0,i._)("div",wK,[(0,i._)("div",vK,[(0,i._)("div",_K,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),yK])]),(0,i._)("div",xK,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},kK)]),(0,i._)("div",DK," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",CK,[(0,i._)("button",{class:"btn btn-secondary shadow-md mr-2",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")])]),(0,i._)("div",PK,[(0,i._)("table",SK,[zK,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",NK,[(0,i._)("a",TK,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",MK,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",IK,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",UK," Individual "))]),(0,i._)("td",EK,[(0,i._)("a",FK,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",$K,[(0,i._)("a",AK,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",BK,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",qK,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",jK,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",VK,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",LK,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",ZK,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",RK,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",WK,[(0,i._)("div",HK,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[YK,(0,i.Uk)(" Files ")],8,OK),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",KK,[GK,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),(0,i._)("a",JK,[QK,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])]),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",XK,[eG,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",tG,rG)):(0,i.kq)("",!0),(0,i._)("div",iG,[(0,i._)("nav",lG,[(0,i._)("ul",nG,[(0,i._)("li",oG,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},dG)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,uG)],2)))),128)),(0,i._)("li",pG,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},hG)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},bG,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",kG,[(0,i._)("div",DG,[(0,i._)("div",CG,[(0,i._)("div",PG,[(0,i._)("div",SG,[zG,NG,(0,i._)("div",TG,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,MG)])))),128))])])]),IG])])])])])}var EG={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`http://localhost:8000/${e}`},goBack(){this.$router.go(-1)},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(a.startDate=this.startDate,a.endDate=this.endDate);const s=await r.Z.get(`/api/companytransactions/get/${e}`,{headers:{token:t},params:a});this.transactions=s.data.transactions,this.count=s.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"Company_Transactions.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"Company_Transactions.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const FG=(0,_t.Z)(EG,[["render",UG]]);var $G=FG;const AG={class:"intro-y flex items-center mt-8"},BG={class:"text-lg font-medium mr-auto"},qG={class:"grid grid-cols-12 gap-6 mt-5"},jG={class:"intro-y col-span-12 lg:col-span-6"},VG={class:"intro-y box p-5"},LG={class:"grid grid-cols-2 gap-6 mt-3"},ZG=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),RG={class:"input-group"},WG=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),HG={class:"input-group"},OG={class:"grid grid-cols-3 gap-6 mt-3"},YG=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),KG={class:"input-group"},GG=(0,i._)("option",null,"ID",-1),JG=(0,i._)("option",null,"Drive Licence",-1),QG=(0,i._)("option",null,"Passport",-1),XG=(0,i._)("option",null,"Voters",-1),eJ=(0,i._)("option",null,"...",-1),tJ=[GG,JG,QG,XG,eJ],aJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),sJ={class:"input-group"},rJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),iJ={class:"input-group"},lJ={class:"grid grid-cols-3 gap-6 mt-3"},nJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),oJ={class:"input-group"},cJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),dJ={class:"input-group"},uJ=(0,i._)("option",null,"male",-1),pJ=(0,i._)("option",null,"female",-1),mJ=(0,i._)("option",null,"Other",-1),hJ=[uJ,pJ,mJ],gJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),fJ={class:"input-group"},wJ=(0,i._)("option",null,"Wife",-1),vJ=(0,i._)("option",null,"Son",-1),_J=(0,i._)("option",null,"Daughter",-1),yJ=(0,i._)("option",null,"Mother",-1),xJ=(0,i._)("option",null,"Father",-1),bJ=[wJ,vJ,_J,yJ,xJ],kJ={class:"grid grid-cols-2 gap-6 mt-3"},DJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),CJ={class:"input-group"},PJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),SJ={class:"input-group"},zJ={class:"grid grid-cols-3 gap-6 mt-3"},NJ={class:"mt-3"},TJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),MJ={class:"input-group"},IJ={class:"mt-3"},UJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),EJ={class:"input-group"},FJ={class:"mt-3"},$J=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),AJ={class:"input-group"},BJ={class:"grid grid-cols-2 gap-6 mt-3"},qJ={class:"mt-3"},jJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),VJ={class:"input-group"},LJ={class:"mt-3"},ZJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),RJ={class:"input-group"},WJ=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),HJ={class:"fallback"},OJ={class:"mt-4"},YJ=(0,i._)("label",null,"manager: ",-1),KJ=(0,i._)("label",null,"plan: ",-1),GJ=(0,i._)("label",null,"company: ",-1),JJ={class:"text-right mt-8"},QJ=["disabled"];function XJ(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",AG,[(0,i._)("h2",BG," Create Dependente for "+(0,Ns.zw)(l.memberFirstName)+" "+(0,Ns.zw)(l.memberLastName),1)]),(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onCreateDependent&&n.onCreateDependent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",qG,[(0,i._)("div",jG,[(0,i._)("div",VG,[(0,i._)("div",LG,[(0,i._)("div",null,[ZG,(0,i._)("div",RG,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[WG,(0,i._)("div",HG,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",OG,[(0,i._)("div",null,[YG,(0,i._)("div",KG,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},tJ,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[aJ,(0,i._)("div",sJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[rJ,(0,i._)("div",iJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",lJ,[(0,i._)("div",null,[nJ,(0,i._)("div",oJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[cJ,(0,i._)("div",dJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},hJ,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[gJ,(0,i._)("div",fJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},bJ,512),[[s.bM,l.relation]])])])]),(0,i._)("div",kJ,[(0,i._)("div",null,[DJ,(0,i._)("div",CJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[PJ,(0,i._)("div",SJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",zJ,[(0,i._)("div",NJ,[TJ,(0,i._)("div",MJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",IJ,[UJ,(0,i._)("div",EJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",FJ,[$J,(0,i._)("div",AJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",BJ,[(0,i._)("div",qJ,[jJ,(0,i._)("div",VJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",LJ,[ZJ,(0,i._)("div",RJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[WJ,(0,i._)("div",HJ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",OJ,[YJ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:""},null,512),[[s.nr,l.manager]]),KJ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:""},null,512),[[s.nr,l.plan]]),GJ,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>l.company=e)},null,512),[[s.nr,l.company]])]),(0,i._)("div",JJ,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,QJ)])])])])],32)])}var eQ={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",gender:"",relation:"",email:"",memberShipID:"",address:"",contact1:"",contact2:"",plan:"",password:"",avatar:null,memberFirstName:"",memberLastName:"",company:"",monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/api/user/${e}`,{headers:{token:t}}).then((e=>{this.plan=e.data.user.plan[0]._id,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status,this.memberFirstName=e.data.user.firstName,this.memberLastName=e.data.user.lastName,this.company=e.data.user.company})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateDependent(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","company","relation","avatar","status"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("company",this.company),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),a.append("id",e),this.btnloading=!0;const s=wt.Z.get("token"),i=await r.Z.post("/api/user/corporatedependent/create",a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcustomer"),this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",s.message);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const tQ=(0,_t.Z)(eQ,[["render",XJ]]);var aQ=tQ;const sQ={class:"intro-y flex items-center mt-8"},rQ={class:"text-lg font-medium mr-auto"},iQ={class:"grid grid-cols-12 gap-6 mt-5"},lQ={class:"intro-y col-span-12 lg:col-span-6"},nQ={class:"intro-y box p-5"},oQ={class:"grid grid-cols-2 gap-6 mt-3"},cQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),dQ={class:"input-group"},uQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),pQ={class:"input-group"},mQ={class:"grid grid-cols-3 gap-6 mt-3"},hQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),gQ={class:"input-group"},fQ=(0,i._)("option",null,"ID",-1),wQ=(0,i._)("option",null,"Drive Licence",-1),vQ=(0,i._)("option",null,"Passport",-1),_Q=(0,i._)("option",null,"Voters",-1),yQ=(0,i._)("option",null,"...",-1),xQ=[fQ,wQ,vQ,_Q,yQ],bQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),kQ={class:"input-group"},DQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),CQ={class:"input-group"},PQ={class:"grid grid-cols-3 gap-6 mt-3"},SQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),zQ={class:"input-group"},NQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),TQ={class:"input-group"},MQ=(0,i._)("option",null,"male",-1),IQ=(0,i._)("option",null,"female",-1),UQ=(0,i._)("option",null,"Other",-1),EQ=[MQ,IQ,UQ],FQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),$Q={class:"input-group"},AQ=(0,i._)("option",null,"Wife",-1),BQ=(0,i._)("option",null,"Son",-1),qQ=(0,i._)("option",null,"Daughter",-1),jQ=(0,i._)("option",null,"Mother",-1),VQ=(0,i._)("option",null,"Father",-1),LQ=[AQ,BQ,qQ,jQ,VQ],ZQ={class:"grid grid-cols-2 gap-6 mt-3"},RQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),WQ={class:"input-group"},HQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),OQ={class:"input-group"},YQ={class:"grid grid-cols-3 gap-6 mt-3"},KQ={class:"mt-3"},GQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),JQ={class:"input-group"},QQ={class:"mt-3"},XQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),eX={class:"input-group"},tX={class:"mt-3"},aX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),sX={class:"input-group"},rX={class:"grid grid-cols-2 gap-6 mt-3"},iX={class:"mt-3"},lX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),nX={class:"input-group"},oX={class:"mt-3"},cX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),dX={class:"input-group"},uX=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),pX={class:"fallback"},mX={class:"mt-4"},hX=(0,i._)("label",null,"monthly fee",-1),gX=(0,i._)("label",null,"manager",-1),fX=(0,i._)("label",null,"plan",-1),wX={class:"text-right mt-8"},vX=["disabled"];function _X(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",sQ,[(0,i._)("h2",rQ," Create Dependente for "+(0,Ns.zw)(l.memberFirstName)+" "+(0,Ns.zw)(l.memberLastName),1)]),(0,i._)("form",{onSubmit:t[19]||(t[19]=(0,s.iM)(((...e)=>n.onCreateDependent&&n.onCreateDependent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",iQ,[(0,i._)("div",lQ,[(0,i._)("div",nQ,[(0,i._)("div",oQ,[(0,i._)("div",null,[cQ,(0,i._)("div",dQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[uQ,(0,i._)("div",pQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",mQ,[(0,i._)("div",null,[hQ,(0,i._)("div",gQ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},xQ,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[bQ,(0,i._)("div",kQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[DQ,(0,i._)("div",CQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",PQ,[(0,i._)("div",null,[SQ,(0,i._)("div",zQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[NQ,(0,i._)("div",TQ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},EQ,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[FQ,(0,i._)("div",$Q,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},LQ,512),[[s.bM,l.relation]])])])]),(0,i._)("div",ZQ,[(0,i._)("div",null,[RQ,(0,i._)("div",WQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[HQ,(0,i._)("div",OQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",YQ,[(0,i._)("div",KQ,[GQ,(0,i._)("div",JQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",QQ,[XQ,(0,i._)("div",eX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",tX,[aX,(0,i._)("div",sX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",rX,[(0,i._)("div",iX,[lX,(0,i._)("div",nX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",oX,[cX,(0,i._)("div",dX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[uX,(0,i._)("div",pX,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",mX,[hX,gX,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:""},null,512),[[s.nr,l.manager]]),fX,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:""},null,512),[[s.nr,l.plan]])]),(0,i._)("div",wX,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[18]||(t[18]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,vX)])])])])],32)])}var yX={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",gender:"",relation:"",email:"",memberShipID:"",address:"",contact1:"",contact2:"",plan:"",password:"",avatar:null,memberFirstName:"",memberLastName:"",monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.plan=e.data.user.plan[0]._id,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status,this.memberFirstName=e.data.user.firstName,this.memberLastName=e.data.user.lastName})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateDependent(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","company","relation","avatar","status"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("company",this.company),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),a.append("id",e),this.btnloading=!0;const s=wt.Z.get("token"),i=await r.Z.post("/api/user/individualdependent/create",a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcustomer"),this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",s.message);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const xX=(0,_t.Z)(yX,[["render",_X]]);var bX=xX;const kX=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"}," Update Dependent ")],-1),DX={class:"grid grid-cols-12 gap-6 mt-5"},CX={class:"intro-y col-span-12 lg:col-span-6"},PX={class:"intro-y box p-5"},SX={class:"grid grid-cols-2 gap-6 mt-3"},zX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),NX={class:"input-group"},TX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),MX={class:"input-group"},IX={class:"grid grid-cols-3 gap-6 mt-3"},UX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),EX={class:"input-group"},FX=(0,i._)("option",null,"ID",-1),$X=(0,i._)("option",null,"Drive Licence",-1),AX=(0,i._)("option",null,"Passport",-1),BX=(0,i._)("option",null,"Voters",-1),qX=(0,i._)("option",null,"...",-1),jX=[FX,$X,AX,BX,qX],VX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),LX={class:"input-group"},ZX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),RX={class:"input-group"},WX={class:"grid grid-cols-3 gap-6 mt-3"},HX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),OX={class:"input-group"},YX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),KX={class:"input-group"},GX=(0,i._)("option",null,"male",-1),JX=(0,i._)("option",null,"female",-1),QX=(0,i._)("option",null,"Other",-1),XX=[GX,JX,QX],e0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),t0={class:"input-group"},a0=(0,i._)("option",null,"Wife",-1),s0=(0,i._)("option",null,"Son",-1),r0=(0,i._)("option",null,"Daughter",-1),i0=(0,i._)("option",null,"Mother",-1),l0=(0,i._)("option",null,"Father",-1),n0=[a0,s0,r0,i0,l0],o0={class:"grid grid-cols-2 gap-6 mt-3"},c0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),d0={class:"input-group"},u0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),p0={class:"input-group"},m0={class:"grid grid-cols-3 gap-6 mt-3"},h0={class:"mt-3"},g0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),f0={class:"input-group"},w0={class:"mt-3"},v0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),_0={class:"input-group"},y0={class:"mt-3"},x0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),b0={class:"input-group"},k0={class:"grid grid-cols-2 gap-6 mt-3"},D0={class:"mt-3"},C0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),P0={class:"input-group"},S0={class:"mt-3"},z0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),N0={class:"input-group"},T0=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),M0={class:"fallback"},I0={class:"mt-4"},U0=(0,i._)("label",{hidden:""},"monthly fee",-1),E0=(0,i._)("label",{hidden:""},"manager",-1),F0=(0,i._)("label",{hidden:""},"plan",-1),$0=(0,i._)("label",{hidden:""},"company",-1),A0={class:"text-right mt-8"},B0=["disabled"];function q0(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[kX,(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onUpdateDependentCorporate&&n.onUpdateDependentCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",DX,[(0,i._)("div",CX,[(0,i._)("div",PX,[(0,i._)("div",SX,[(0,i._)("div",null,[zX,(0,i._)("div",NX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[TX,(0,i._)("div",MX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",IX,[(0,i._)("div",null,[UX,(0,i._)("div",EX,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},jX,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[VX,(0,i._)("div",LX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[ZX,(0,i._)("div",RX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",WX,[(0,i._)("div",null,[HX,(0,i._)("div",OX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[YX,(0,i._)("div",KX,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},XX,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[e0,(0,i._)("div",t0,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},n0,512),[[s.bM,l.relation]])])])]),(0,i._)("div",o0,[(0,i._)("div",null,[c0,(0,i._)("div",d0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[u0,(0,i._)("div",p0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",m0,[(0,i._)("div",h0,[g0,(0,i._)("div",f0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",w0,[v0,(0,i._)("div",_0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",y0,[x0,(0,i._)("div",b0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",k0,[(0,i._)("div",D0,[C0,(0,i._)("div",P0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",S0,[z0,(0,i._)("div",N0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[T0,(0,i._)("div",M0,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",I0,[U0,E0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),F0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]]),$0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=t=>e.company=t),disabled:"",hidden:""},null,512),[[s.nr,e.company]])]),(0,i._)("div",A0,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,B0)])])])])],32)])}var j0={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",memberLastName:"",memberFirstName:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.manager=e.data.user.accountOwner.manager._id,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.company=e.data.user.company,this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.accountOwner.plan[0],this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateDependentCorporate(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("company",this.company),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/corporatedependent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating dependent:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating dependent:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const V0=(0,_t.Z)(j0,[["render",q0]]);var L0=V0;const Z0=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"}," Update Dependent ")],-1),R0={class:"grid grid-cols-12 gap-6 mt-5"},W0={class:"intro-y col-span-12 lg:col-span-6"},H0={class:"intro-y box p-5"},O0={class:"grid grid-cols-2 gap-6 mt-3"},Y0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),K0={class:"input-group"},G0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),J0={class:"input-group"},Q0={class:"grid grid-cols-3 gap-6 mt-3"},X0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),e1={class:"input-group"},t1=(0,i._)("option",null,"ID",-1),a1=(0,i._)("option",null,"Drive Licence",-1),s1=(0,i._)("option",null,"Passport",-1),r1=(0,i._)("option",null,"Voters",-1),i1=(0,i._)("option",null,"...",-1),l1=[t1,a1,s1,r1,i1],n1=(0,i._)("label",{for:"crud-form-16",class:"form-label"},"ID Number",-1),o1={class:"input-group"},c1=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"DOB",-1),d1={class:"input-group"},u1={class:"grid grid-cols-3 gap-6 mt-3"},p1=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Enrolment date",-1),m1={class:"input-group"},h1=(0,i._)("label",{for:"crud-form-9",class:"form-label"},"Gender",-1),g1={class:"input-group"},f1=(0,i._)("option",null,"male",-1),w1=(0,i._)("option",null,"female",-1),v1=(0,i._)("option",null,"Other",-1),_1=[f1,w1,v1],y1=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Relation",-1),x1={class:"input-group"},b1=(0,i._)("option",null,"Wife",-1),k1=(0,i._)("option",null,"Son",-1),D1=(0,i._)("option",null,"Daughter",-1),C1=(0,i._)("option",null,"Mother",-1),P1=(0,i._)("option",null,"Father",-1),S1=[b1,k1,D1,C1,P1],z1={class:"grid grid-cols-2 gap-6 mt-3"},N1=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Email",-1),T1={class:"input-group"},M1=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),I1={class:"input-group"},U1={class:"grid grid-cols-3 gap-6 mt-3"},E1={class:"mt-3"},F1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),$1={class:"input-group"},A1={class:"mt-3"},B1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),q1={class:"input-group"},j1={class:"mt-3"},V1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),L1={class:"input-group"},Z1={class:"grid grid-cols-2 gap-6 mt-3"},R1={class:"mt-3"},W1=(0,i._)("label",{for:"crud-form-12",class:"form-label"},"Address",-1),H1={class:"input-group"},O1={class:"mt-3"},Y1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),K1={class:"input-group"},G1=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),J1={class:"fallback"},Q1={class:"mt-4"},X1=(0,i._)("label",{hidden:""},"monthly fee",-1),e2=(0,i._)("label",{hidden:""},"manager",-1),t2=(0,i._)("label",{hidden:""},"plan",-1),a2={class:"text-right mt-8"},s2=["disabled"];function r2(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[Z0,(0,i._)("form",{onSubmit:t[19]||(t[19]=(0,s.iM)(((...e)=>n.onUpdateDependentCorporate&&n.onUpdateDependentCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",R0,[(0,i._)("div",W0,[(0,i._)("div",H0,[(0,i._)("div",O0,[(0,i._)("div",null,[Y0,(0,i._)("div",K0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-14",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[G0,(0,i._)("div",J0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-15",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",Q0,[(0,i._)("div",null,[X0,(0,i._)("div",e1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},l1,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[n1,(0,i._)("div",o1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-16",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[c1,(0,i._)("div",d1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-17",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",u1,[(0,i._)("div",null,[p1,(0,i._)("div",m1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-18",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[h1,(0,i._)("div",g1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},_1,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[y1,(0,i._)("div",x1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},S1,512),[[s.bM,l.relation]])])])]),(0,i._)("div",z1,[(0,i._)("div",null,[N1,(0,i._)("div",T1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-19",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[M1,(0,i._)("div",I1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",U1,[(0,i._)("div",E1,[F1,(0,i._)("div",$1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-11",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",A1,[B1,(0,i._)("div",q1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",j1,[V1,(0,i._)("div",L1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",Z1,[(0,i._)("div",R1,[W1,(0,i._)("div",H1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-7",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",O1,[Y1,(0,i._)("div",K1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-8",type:"password",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[G1,(0,i._)("div",J1,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",Q1,[X1,e2,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),t2,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]])]),(0,i._)("div",a2,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[18]||(t[18]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,s2)])])])])],32)])}var i2={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",memberLastName:"",memberFirstName:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.manager=e.data.user.accountOwner.manager._id,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.accountOwner.plan[0],this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateDependentCorporate(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/individualdependent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating dependent:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating dependent:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const l2=(0,_t.Z)(i2,[["render",r2]]);var n2=l2;const o2={key:0,class:"shadow-md"},c2=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),d2=[c2],u2=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Individual Customer")],-1),p2={class:"grid grid-cols-12 gap-6 mt-5"},m2={class:"intro-y col-span-12 lg:col-span-6"},h2={class:"intro-y box p-5"},g2={class:"grid grid-cols-2 gap-6 mt-3"},f2=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),w2={class:"input-group"},v2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),_2={class:"input-group"},y2={class:"grid grid-cols-3 gap-6 mt-3"},x2=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),b2={class:"input-group"},k2=(0,i._)("option",null,"ID",-1),D2=(0,i._)("option",null,"Drive Licence",-1),C2=(0,i._)("option",null,"Passport",-1),P2=(0,i._)("option",null,"Voters",-1),S2=(0,i._)("option",null,"...",-1),z2=[k2,D2,C2,P2,S2],N2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),T2={class:"input-group"},M2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),I2={class:"input-group"},U2={class:"grid grid-cols-3 gap-6 mt-3"},E2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),F2={class:"input-group"},$2=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),A2={class:"input-group"},B2=(0,i._)("option",null,"male",-1),q2=(0,i._)("option",null,"female",-1),j2=(0,i._)("option",null,"other",-1),V2=[B2,q2,j2],L2=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),Z2={class:"input-group"},R2={class:"grid grid-cols-2 gap-6 mt-3"},W2=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),H2={class:"input-group"},O2=["value"],Y2=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),K2={class:"input-group"},G2={class:"grid grid-cols-2 gap-6 mt-3"},J2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Q2={class:"input-group"},X2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),e4={class:"input-group"},t4={class:"grid grid-cols-3 gap-6 mt-3"},a4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),s4={class:"input-group"},r4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),i4={class:"input-group"},l4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),n4={class:"input-group"},o4={class:"grid grid-cols-2 gap-6 mt-3"},c4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),d4={class:"input-group"},u4=["value"],p4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),m4={class:"fallback mt-4"},h4={class:"text-right mt-8"},g4=["disabled"];function f4(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",o2,d2)):(0,i.kq)("",!0),u2,(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",p2,[(0,i._)("div",m2,[(0,i._)("div",h2,[(0,i._)("div",g2,[(0,i._)("div",null,[f2,(0,i._)("div",w2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[v2,(0,i._)("div",_2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",y2,[(0,i._)("div",null,[x2,(0,i._)("div",b2,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},z2,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[N2,(0,i._)("div",T2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[M2,(0,i._)("div",I2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",U2,[(0,i._)("div",null,[E2,(0,i._)("div",F2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[$2,(0,i._)("div",A2,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},V2,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[L2,(0,i._)("div",Z2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",R2,[(0,i._)("div",null,[W2,(0,i._)("div",H2,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,O2)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[Y2,(0,i._)("div",K2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",G2,[(0,i._)("div",null,[J2,(0,i._)("div",Q2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[X2,(0,i._)("div",e4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",t4,[(0,i._)("div",null,[a4,(0,i._)("div",s4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[r4,(0,i._)("div",i4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[l4,(0,i._)("div",n4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",o4,[(0,i._)("div",null,[c4,(0,i._)("div",d4,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,u4)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[p4,(0,i._)("div",m4,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",h4,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,g4)])])])])],32)])}var w4={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",avatar:null,plans:[],managers:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.btnloading=!0,this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.btnloading=!1,this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateIndivitualCustomer(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","manager"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/invididual/create/customer",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customer created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewcustomer"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getPlans(),this.getMagers()}};const v4=(0,_t.Z)(w4,[["render",f4]]);var _4=v4;const y4={class:"intro-y flex items-center mt-8"},x4=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Individual Customer",-1),b4={key:0},k4=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),D4=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),C4=[k4,D4],P4={class:"grid grid-cols-12 gap-6 mt-5"},S4={class:"intro-y col-span-12 lg:col-span-6"},z4={class:"intro-y box p-5"},N4={class:"grid grid-cols-2 gap-6 mt-3"},T4=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),M4={class:"input-group"},I4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),U4={class:"input-group"},E4={class:"grid grid-cols-3 gap-6 mt-3"},F4=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),$4={class:"input-group"},A4=(0,i._)("option",null,"ID",-1),B4=(0,i._)("option",null,"Drive Licence",-1),q4=(0,i._)("option",null,"Passport",-1),j4=(0,i._)("option",null,"Voters",-1),V4=(0,i._)("option",null,"...",-1),L4=[A4,B4,q4,j4,V4],Z4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),R4={class:"input-group"},W4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),H4={class:"input-group"},O4={class:"grid grid-cols-3 gap-6 mt-3"},Y4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),K4={class:"input-group"},G4=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),J4={class:"input-group"},Q4=(0,i._)("option",null,"male",-1),X4=(0,i._)("option",null,"female",-1),e5=(0,i._)("option",null,"other",-1),t5=[Q4,X4,e5],a5={key:0},s5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),r5={class:"input-group"},i5=(0,i._)("option",null,"Wife",-1),l5=(0,i._)("option",null,"Son",-1),n5=(0,i._)("option",null,"Daughter",-1),o5=(0,i._)("option",null,"Mother",-1),c5=(0,i._)("option",null,"Father",-1),d5=[i5,l5,n5,o5,c5],u5={key:1},p5=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee",-1),m5={class:"input-group"},h5={class:"grid grid-cols-2 gap-6 mt-3"},g5=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),f5={class:"input-group"},w5=["value"],v5=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),_5={class:"input-group"},y5={class:"grid grid-cols-2 gap-6 mt-3"},x5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),b5={class:"input-group"},k5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),D5={class:"input-group"},C5={class:"grid grid-cols-3 gap-6 mt-3"},P5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),S5={class:"input-group"},z5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),N5={class:"input-group"},T5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),M5={class:"input-group"},I5={class:"grid grid-cols-2 gap-6 mt-3"},U5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),E5={class:"input-group"},F5=["value"],$5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),A5={class:"fallback mt-4"},B5=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),q5={class:"grid grid-cols-2 gap-6 mt-1"},j5=(0,i._)("option",{value:"Active"},"Active",-1),V5=(0,i._)("option",{value:"Inactive"},"Inactive",-1),L5=[j5,V5],Z5={class:"text-right mt-8"},R5=["disabled"];function W5(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",y4,[x4,l.loading?((0,i.wg)(),(0,i.iD)("div",b4,C4)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onUpdateUser&&n.onUpdateUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",P4,[(0,i._)("div",S4,[(0,i._)("div",z4,[(0,i._)("div",N4,[(0,i._)("div",null,[T4,(0,i._)("div",M4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[I4,(0,i._)("div",U4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",E4,[(0,i._)("div",null,[F4,(0,i._)("div",$4,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},L4,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[Z4,(0,i._)("div",R4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[W4,(0,i._)("div",H4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",O4,[(0,i._)("div",null,[Y4,(0,i._)("div",K4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[G4,(0,i._)("div",J4,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},t5,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,["Main"!==l.relation?((0,i.wg)(),(0,i.iD)("div",a5,[s5,(0,i._)("div",r5,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e)},d5,512),[[s.bM,l.relation]])])])):(0,i.kq)("",!0),"Main"===l.relation?((0,i.wg)(),(0,i.iD)("div",u5,[p5,(0,i._)("div",m5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])):(0,i.kq)("",!0)])]),(0,i._)("div",h5,[(0,i._)("div",null,[g5,(0,i._)("div",f5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,w5)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[v5,(0,i._)("div",_5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",y5,[(0,i._)("div",null,[x5,(0,i._)("div",b5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[k5,(0,i._)("div",D5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",C5,[(0,i._)("div",null,[P5,(0,i._)("div",S5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[z5,(0,i._)("div",N5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[T5,(0,i._)("div",M5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",I5,[(0,i._)("div",null,[U5,(0,i._)("div",E5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" "+(0,Ns.zw)(e.contact1),9,F5)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[$5,(0,i._)("div",A5,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[17]||(t[17]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),B5,(0,i._)("div",q5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[18]||(t[18]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},L5,512),[[s.bM,l.status]])]),(0,i._)("div",Z5,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,R5)])])])])],32)])}var H5={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser(),this.getPlans(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.plan[0]._id,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateUser(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","relation","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/invididual/edit/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const O5=(0,_t.Z)(H5,[["render",W5]]);var Y5=O5;const K5=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Customers",-1),G5={key:0},J5=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Q5=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),X5=[J5,Q5],e3={class:"grid grid-cols-12 gap-6 mt-5"},t3={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},a3={class:"flex w-full sm:w-auto"},s3={class:"w-48 relative text-slate-500"},r3=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),i3={class:"hidden xl:block mx-auto text-slate-500"},l3=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),n3={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},o3={class:"table table-report -mt-2"},c3=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),d3={class:"w-40 !py-4"},u3={href:"#",class:"decoration-dotted whitespace-nowrap"},p3={class:"w-40"},m3={href:"#",class:"font-medium whitespace-nowrap"},h3={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},g3={class:"text-center"},f3={class:"flex items-center justify-center whitespace-nowrap"},w3={key:0,class:"whitespace-nowrap"},v3={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},_3={class:"w-40 text-right"},y3={class:"pr-16"},x3={class:"w-40 !py-4"},b3={class:"table-report__action"},k3={class:"flex justify-center items-center"},D3={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},C3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),P3={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},S3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),z3={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},N3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),T3={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},M3=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),I3=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),U3=[M3,I3],E3={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},F3={class:"w-full sm:w-auto sm:mr-auto"},$3={class:"pagination"},A3={class:"page-item"},B3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),q3=[B3],j3=["onClick"],V3={class:"page-item"},L3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Z3=[L3],R3=(0,i._)("option",null,"10",-1),W3=(0,i._)("option",null,"25",-1),H3=(0,i._)("option",null,"35",-1),O3=(0,i._)("option",null,"50",-1),Y3=(0,i._)("option",null,"100",-1),K3=(0,i._)("option",null,"500",-1),G3=(0,i._)("option",null,"1000",-1),J3=[R3,W3,H3,O3,Y3,K3,G3],Q3=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function X3(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[K5,l.loading?((0,i.wg)(),(0,i.iD)("div",G5,X5)):(0,i.kq)("",!0),(0,i._)("div",e3,[(0,i._)("div",t3,[(0,i._)("div",a3,[(0,i._)("div",s3,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),r3])]),(0,i._)("div",i3," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),l3]),(0,i._)("div",n3,[(0,i._)("table",o3,[c3,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",d3,[(0,i._)("a",u3,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",p3,[(0,i._)("a",m3,(0,Ns.zw)(e.contact1),1),(0,i._)("div",h3,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",g3,[(0,i._)("div",f3,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",w3,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",v3,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",_3,[(0,i._)("div",y3,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",x3,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",b3,[(0,i._)("div",k3,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",D3,[C3,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",P3,[S3,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",z3,[N3,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",T3,U3)):(0,i.kq)("",!0),(0,i._)("div",E3,[(0,i._)("nav",F3,[(0,i._)("ul",$3,[(0,i._)("li",A3,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},q3)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,j3)],2)))),128)),(0,i._)("li",V3,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},Z3)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},J3,544),[[s.bM,l.pageSize]])])]),Q3])}var e6={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/invididual/allindividualuser",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const t6=(0,_t.Z)(e6,[["render",X3]]);var a6=t6;const s6={key:0,class:"shadow-md"},r6=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),i6=[r6],l6=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Customers",-1),n6={class:"grid grid-cols-12 gap-6 mt-5"},o6={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},c6={class:"flex w-full sm:w-auto"},d6={class:"w-48 relative text-slate-500"},u6=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),p6={class:"ml-1"},m6=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),h6=[m6],g6={class:"hidden xl:block mx-auto text-slate-500"},f6=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),w6={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},v6={class:"table table-report -mt-2"},_6=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),y6={class:"w-40 !py-4"},x6={href:"#",class:"decoration-dotted whitespace-nowrap"},b6={class:"w-40 !py-4"},k6={key:0,class:"decoration-dotted whitespace-nowrap"},D6={key:1,class:"decoration-dotted whitespace-nowrap"},C6={class:"w-40"},P6={href:"#",class:"font-medium whitespace-nowrap"},S6={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},z6={class:"text-center"},N6={class:"flex items-center justify-center whitespace-nowrap"},T6={key:0,class:"whitespace-nowrap"},M6={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},I6={class:"w-40 text-right"},U6={class:"pr-16"},E6={class:"w-40 !py-4"},F6={class:"table-report__action"},$6={class:"flex justify-center items-center"},A6={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},B6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),q6={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},j6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),V6={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},L6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Z6={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},R6=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),W6=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),H6=[R6,W6],O6={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Y6={class:"w-full sm:w-auto sm:mr-auto"},K6={class:"pagination"},G6={class:"page-item"},J6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Q6=[J6],X6=["onClick"],e8={class:"page-item"},t8=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),a8=[t8],s8=(0,i._)("option",null,"10",-1),r8=(0,i._)("option",null,"25",-1),i8=(0,i._)("option",null,"35",-1),l8=(0,i._)("option",null,"50",-1),n8=(0,i._)("option",null,"100",-1),o8=(0,i._)("option",null,"500",-1),c8=(0,i._)("option",null,"1000",-1),d8=[s8,r8,i8,l8,n8,o8,c8],u8=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function p8(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",s6,i6)):(0,i.kq)("",!0),l6,(0,i._)("div",n6,[(0,i._)("div",o6,[(0,i._)("div",c6,[(0,i._)("div",d6,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),u6])]),(0,i._)("div",p6,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},h6)]),(0,i._)("div",g6," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),f6]),(0,i._)("div",w6,[(0,i._)("table",v6,[_6,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",y6,[(0,i._)("a",x6,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",b6,[e.company&&void 0!==e.company?((0,i.wg)(),(0,i.iD)("div",k6,(0,Ns.zw)(e.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",D6," Individual "))]),(0,i._)("td",C6,[(0,i._)("a",P6,(0,Ns.zw)(e.contact1),1),(0,i._)("div",S6,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",z6,[(0,i._)("div",N6,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",T6,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",M6,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",I6,[(0,i._)("div",U6,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",E6,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",F6,[(0,i._)("div",$6,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",A6,[B6,(0,i.Wm)(c,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",q6,[j6,(0,i.Wm)(c,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",V6,[L6,(0,i.Wm)(c,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Z6,H6)):(0,i.kq)("",!0),(0,i._)("div",O6,[(0,i._)("nav",Y6,[(0,i._)("ul",K6,[(0,i._)("li",G6,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Q6)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,X6)],2)))),128)),(0,i._)("li",e8,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},a8)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},d8,544),[[s.bM,l.pageSize]])])]),u8])}var m8={data(){return{exportExcel:!1,indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/allcustomers",{headers:{token:e},params:t});this.indivUsers=a.data.users,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const h8=(0,_t.Z)(m8,[["render",p8]]);var g8=h8;function f8(e,t){return(0,i.wg)(),(0,i.iD)("div",null,"hama")}const w8={},v8=(0,_t.Z)(w8,[["render",f8]]);var _8=v8;function y8(e,t){return(0,i.wg)(),(0,i.iD)("div")}const x8={},b8=(0,_t.Z)(x8,[["render",y8]]);var k8=b8;const D8=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),C8={class:"flex justify-center"},P8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Admin"}," Create Admin ",-1),S8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Line Manager"}," Create Manager ",-1),z8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Agent"}," Create Agent ",-1),N8={key:0},T8=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),M8=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),I8=[T8,M8],U8={class:"grid grid-cols-12 gap-6 mt-5"},E8={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},F8={class:"flex w-full sm:w-auto"},$8={class:"w-48 relative text-slate-500"},A8=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),B8={class:"hidden xl:block mx-auto text-slate-500"},q8={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},j8={class:"table table-report -mt-2"},V8=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Avatar"),(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"UserType"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),L8={class:"text-center"},Z8={class:"w-10 h-10 image-fit zoom-in"},R8=["title","src"],W8={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},H8={class:"w-40 !py-4"},O8={class:"decoration-dotted whitespace-nowrap"},Y8={class:"w-40"},K8={class:"decoration-dotted whitespace-nowrap"},G8={class:"w-40 text-center"},J8={class:"font-medium whitespace-nowrap"},Q8={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},X8={class:"w-40 text-center"},e7={class:"decoration-dotted whitespace-nowrap"},t7={class:"w-40 text-center !py-4"},a7={class:"table-report__action"},s7={class:"flex justify-center items-center"},r7={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},i7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),l7={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},n7=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),o7=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),c7=[n7,o7],d7={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},u7={class:"w-full sm:w-auto sm:mr-auto"},p7={class:"pagination"},m7={class:"page-item"},h7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),g7=[h7],f7=["onClick"],w7={class:"page-item"},v7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),_7=[v7],y7=(0,i._)("option",null,"10",-1),x7=(0,i._)("option",null,"25",-1),b7=(0,i._)("option",null,"35",-1),k7=(0,i._)("option",null,"50",-1),D7=(0,i._)("option",null,"100",-1),C7=(0,i._)("option",null,"500",-1),P7=(0,i._)("option",null,"1000",-1),S7=[y7,x7,b7,k7,D7,C7,P7],z7=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function N7(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[D8,(0,i._)("div",C8,[(0,i.Wm)(o,{to:"/createadmin"},{default:(0,i.w5)((()=>[P8])),_:1}),(0,i.Wm)(o,{to:"/createmanager"},{default:(0,i.w5)((()=>[S8])),_:1}),(0,i.Wm)(o,{to:"/createagent"},{default:(0,i.w5)((()=>[z8])),_:1})]),l.loading?((0,i.wg)(),(0,i.iD)("div",N8,I8)):(0,i.kq)("",!0),(0,i._)("div",U8,[(0,i._)("div",E8,[(0,i._)("div",F8,[(0,i._)("div",$8,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),A8])]),(0,i._)("div",B8," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",q8,[(0,i._)("table",j8,[V8,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",L8,[(0,i._)("div",Z8,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,R8)):((0,i.wg)(),(0,i.iD)("img",W8))])]),(0,i._)("td",H8,[(0,i._)("a",O8,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)]),(0,i._)("td",Y8,[(0,i._)("a",K8,(0,Ns.zw)(a.email),1)]),(0,i._)("td",G8,[(0,i._)("a",J8,(0,Ns.zw)(a.contact1),1),(0,i._)("div",Q8,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",X8,[(0,i._)("div",e7,(0,Ns.zw)(n.getRole(a.role)),1)]),(0,i._)("td",t7,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",a7,[(0,i._)("div",s7,[(0,i._)("a",r7,[i7,(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",l7,c7)):(0,i.kq)("",!0),(0,i._)("div",d7,[(0,i._)("nav",u7,[(0,i._)("ul",p7,[(0,i._)("li",m7,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},g7)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,f7)],2)))),128)),(0,i._)("li",w7,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},_7)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},S7,544),[[s.bM,l.pageSize]])])]),z7])}var T7={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/employer/get",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const M7=(0,_t.Z)(T7,[["render",N7]]);var I7=M7;const U7={class:"intro-y flex items-center mt-8"},E7=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),F7={key:0},$7=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),A7=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),B7=[$7,A7],q7={class:"grid grid-cols-12 gap-6 mt-5"},j7={class:"intro-y col-span-12 lg:col-span-6"},V7={class:"intro-y box p-5"},L7={class:"grid grid-cols-2 gap-6 mt-3"},Z7=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),R7={class:"input-group"},W7=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),H7={class:"input-group"},O7={class:"grid grid-cols-3 gap-6 mt-3"},Y7=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),K7={class:"input-group"},G7=(0,i._)("option",null,"ID",-1),J7=(0,i._)("option",null,"Drive Licence",-1),Q7=(0,i._)("option",null,"Passport",-1),X7=(0,i._)("option",null,"Voters",-1),e9=(0,i._)("option",null,"...",-1),t9=[G7,J7,Q7,X7,e9],a9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),s9={class:"input-group"},r9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),i9={class:"input-group"},l9={class:"grid grid-cols-2 gap-6 mt-3"},n9=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),o9={class:"input-group"},c9=(0,i._)("option",null,"male",-1),d9=(0,i._)("option",null,"female",-1),u9=(0,i._)("option",null,"other",-1),p9=[c9,d9,u9],m9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),h9={class:"input-group"},g9={class:"grid grid-cols-2 gap-6 mt-3"},f9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),w9={class:"input-group"},v9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Line Manager *",-1),_9={class:"input-group"},y9=["value"],x9={class:"grid grid-cols-3 gap-6 mt-3"},b9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 1 *",-1),k9={class:"input-group"},D9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),C9={class:"input-group"},P9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),S9={class:"input-group"},z9={class:"grid grid-cols-2 gap-6 mt-3"},N9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),T9={class:"fallback mt-4"},M9={class:"text-right mt-8"},I9=["disabled"];function U9(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",U7,[E7,l.loading?((0,i.wg)(),(0,i.iD)("div",F7,B7)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",q7,[(0,i._)("div",j7,[(0,i._)("div",V7,[(0,i._)("div",L7,[(0,i._)("div",null,[Z7,(0,i._)("div",R7,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[W7,(0,i._)("div",H7,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",O7,[(0,i._)("div",null,[Y7,(0,i._)("div",K7,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},t9,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[a9,(0,i._)("div",s9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[r9,(0,i._)("div",i9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",l9,[(0,i._)("div",null,[n9,(0,i._)("div",o9,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},p9,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[m9,(0,i._)("div",h9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",g9,[(0,i._)("div",null,[f9,(0,i._)("div",w9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[v9,(0,i._)("div",_9,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.lineManager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,y9)))),128))],512),[[s.bM,l.lineManager]])])])]),(0,i._)("div",x9,[(0,i._)("div",null,[b9,(0,i._)("div",k9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[D9,(0,i._)("div",C9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[P9,(0,i._)("div",S9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",z9,[(0,i._)("div",null,[N9,(0,i._)("div",T9,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",M9,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,I9)])])])])],32)])}var E9={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",lineManager:"",password:"",avatar:null,managers:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,console.log(t.data.employer),this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateAgent(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","lineManager"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/agent/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Agent created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Agent created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getMagers()}};const F9=(0,_t.Z)(E9,[["render",U9]]);var $9=F9;const A9={class:"intro-y flex items-center mt-8"},B9=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),q9={key:0},j9=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),V9=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),L9=[j9,V9],Z9={class:"grid grid-cols-12 gap-6 mt-5"},R9={class:"intro-y col-span-12 lg:col-span-6"},W9={class:"intro-y box p-5"},H9={class:"grid grid-cols-2 gap-6 mt-3"},O9=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Y9={class:"input-group"},K9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),G9={class:"input-group"},J9={class:"grid grid-cols-3 gap-6 mt-3"},Q9=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),X9={class:"input-group"},eee=(0,i._)("option",null,"ID",-1),tee=(0,i._)("option",null,"Drive Licence",-1),aee=(0,i._)("option",null,"Passport",-1),see=(0,i._)("option",null,"Voters",-1),ree=(0,i._)("option",null,"...",-1),iee=[eee,tee,aee,see,ree],lee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),nee={class:"input-group"},oee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),cee={class:"input-group"},dee={class:"grid grid-cols-2 gap-6 mt-3"},uee=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),pee={class:"input-group"},mee=(0,i._)("option",null,"male",-1),hee=(0,i._)("option",null,"female",-1),gee=(0,i._)("option",null,"other",-1),fee=[mee,hee,gee],wee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),vee={class:"input-group"},_ee={class:"grid grid-cols-2 gap-6 mt-3"},yee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),xee={class:"input-group"},bee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),kee={class:"input-group"},Dee=["value"],Cee={class:"grid grid-cols-3 gap-6 mt-3"},Pee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),See={class:"input-group"},zee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Nee={class:"input-group"},Tee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Mee={class:"input-group"},Iee={class:"grid grid-cols-2 gap-6 mt-3"},Uee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),Eee={class:"input-group"},Fee=(0,i._)("option",{value:"Active"},"Active",-1),$ee=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Aee=[Fee,$ee],Bee={class:"grid grid-cols-2 gap-6"},qee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),jee={class:"fallback"},Vee={class:"text-right mt-8"},Lee=["disabled"];function Zee(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",A9,[B9,l.loading?((0,i.wg)(),(0,i.iD)("div",q9,L9)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[15]||(t[15]=(0,s.iM)(((...e)=>n.onUpdateUser&&n.onUpdateUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Z9,[(0,i._)("div",R9,[(0,i._)("div",W9,[(0,i._)("div",H9,[(0,i._)("div",null,[O9,(0,i._)("div",Y9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[K9,(0,i._)("div",G9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",J9,[(0,i._)("div",null,[Q9,(0,i._)("div",X9,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},iee,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[lee,(0,i._)("div",nee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[oee,(0,i._)("div",cee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",dee,[(0,i._)("div",null,[uee,(0,i._)("div",pee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},fee,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[wee,(0,i._)("div",vee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",_ee,[(0,i._)("div",null,[yee,(0,i._)("div",xee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[bee,(0,i._)("div",kee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.lineManager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,Dee)))),128))],512),[[s.bM,l.lineManager]])])])]),(0,i._)("div",Cee,[(0,i._)("div",null,[Pee,(0,i._)("div",See,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[zee,(0,i._)("div",Nee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Tee,(0,i._)("div",Mee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Iee,[(0,i._)("div",null,[Uee,(0,i._)("div",Eee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},Aee,512),[[s.bM,l.status]])])]),(0,i._)("div",Bee,[(0,i._)("div",null,[qee,(0,i._)("div",jee,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[13]||(t[13]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])])]),(0,i._)("div",Vee,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[14]||(t[14]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,Lee)])])])])],32)])}var Ree={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",lineManager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.password=e.data.user.password,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.lineManager=e.data.user.lineManager,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateUser(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","lineManager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("plan",this.plan),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/agent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Wee=(0,_t.Z)(Ree,[["render",Zee]]);var Hee=Wee;const Oee=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),Yee={class:"flex justify-center"},Kee=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Agent"}," Create Agent ",-1),Gee={key:0},Jee=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Qee=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Xee=[Jee,Qee],ete={class:"grid grid-cols-12 gap-6 mt-5"},tte={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ate={class:"flex w-full sm:w-auto"},ste={class:"w-48 relative text-slate-500"},rte=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),ite={class:"hidden xl:block mx-auto text-slate-500"},lte={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},nte={class:"table table-report -mt-2"},ote=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Avatar"),(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"UserType"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),cte={class:"text-center"},dte={class:"w-10 h-10 image-fit zoom-in"},ute=["title","src"],pte={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},mte={class:"w-40 !py-4"},hte={class:"decoration-dotted whitespace-nowrap"},gte={class:"w-40"},fte={class:"decoration-dotted whitespace-nowrap"},wte={class:"w-40 text-center"},vte={class:"font-medium whitespace-nowrap"},_te={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},yte={class:"w-40 text-center"},xte={class:"decoration-dotted whitespace-nowrap"},bte={class:"w-40 text-center !py-4"},kte={class:"table-report__action"},Dte={class:"flex justify-center items-center"},Cte={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Pte=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Ste={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},zte=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Nte=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Tte=[zte,Nte],Mte={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Ite={class:"w-full sm:w-auto sm:mr-auto"},Ute={class:"pagination"},Ete={class:"page-item"},Fte=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),$te=[Fte],Ate=["onClick"],Bte={class:"page-item"},qte=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),jte=[qte],Vte=(0,i._)("option",null,"10",-1),Lte=(0,i._)("option",null,"25",-1),Zte=(0,i._)("option",null,"35",-1),Rte=(0,i._)("option",null,"50",-1),Wte=(0,i._)("option",null,"100",-1),Hte=(0,i._)("option",null,"500",-1),Ote=(0,i._)("option",null,"1000",-1),Yte=[Vte,Lte,Zte,Rte,Wte,Hte,Ote],Kte=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function Gte(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Oee,(0,i._)("div",Yee,[(0,i.Wm)(o,{to:"/createmyagent"},{default:(0,i.w5)((()=>[Kee])),_:1})]),l.loading?((0,i.wg)(),(0,i.iD)("div",Gee,Xee)):(0,i.kq)("",!0),(0,i._)("div",ete,[(0,i._)("div",tte,[(0,i._)("div",ate,[(0,i._)("div",ste,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),rte])]),(0,i._)("div",ite," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",lte,[(0,i._)("table",nte,[ote,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",cte,[(0,i._)("div",dte,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,ute)):((0,i.wg)(),(0,i.iD)("img",pte))])]),(0,i._)("td",mte,[(0,i._)("a",hte,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)]),(0,i._)("td",gte,[(0,i._)("a",fte,(0,Ns.zw)(a.email),1)]),(0,i._)("td",wte,[(0,i._)("a",vte,(0,Ns.zw)(a.contact1),1),(0,i._)("div",_te,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",yte,[(0,i._)("div",xte,(0,Ns.zw)(n.getRole(a.role)),1)]),(0,i._)("td",bte,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",kte,[(0,i._)("div",Dte,[(0,i._)("a",Cte,[Pte,(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Ste,Tte)):(0,i.kq)("",!0),(0,i._)("div",Mte,[(0,i._)("nav",Ite,[(0,i._)("ul",Ute,[(0,i._)("li",Ete,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},$te)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Ate)],2)))),128)),(0,i._)("li",Bte,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},jte)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Yte,544),[[s.bM,l.pageSize]])])]),Kte])}var Jte={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/agent/manageragents/get",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Qte=(0,_t.Z)(Jte,[["render",Gte]]);var Xte=Qte;const eae={key:0,class:"shadow-md"},tae=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),aae=[tae],sae=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Customers",-1),rae={class:"grid grid-cols-12 gap-6 mt-5"},iae={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},lae={class:"flex w-full sm:w-auto"},nae={class:"w-48 relative text-slate-500"},oae=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),cae={class:"hidden xl:block mx-auto text-slate-500"},dae={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},uae={class:"table table-report -mt-2"},pae=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),mae={class:"w-40 !py-4"},hae={href:"#",class:"decoration-dotted whitespace-nowrap"},gae={class:"w-40"},fae={href:"#",class:"font-medium whitespace-nowrap"},wae={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},vae={class:"text-center"},_ae={class:"flex items-center justify-center whitespace-nowrap"},yae={key:0,class:"whitespace-nowrap"},xae={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},bae={class:"w-40 text-right"},kae={class:"pr-16"},Dae={class:"w-40 !py-4"},Cae={class:"table-report__action"},Pae={class:"flex justify-center items-center"},Sae={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},zae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Nae={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Tae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Mae={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Iae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Uae={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Eae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Fae={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},$ae=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Aae=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Bae=[$ae,Aae],qae={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},jae={class:"w-full sm:w-auto sm:mr-auto"},Vae={class:"pagination"},Lae={class:"page-item"},Zae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Rae=[Zae],Wae=["onClick"],Hae={class:"page-item"},Oae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Yae=[Oae],Kae=(0,i._)("option",null,"10",-1),Gae=(0,i._)("option",null,"25",-1),Jae=(0,i._)("option",null,"35",-1),Qae=(0,i._)("option",null,"50",-1),Xae=(0,i._)("option",null,"100",-1),ese=(0,i._)("option",null,"500",-1),tse=(0,i._)("option",null,"1000",-1),ase=[Kae,Gae,Jae,Qae,Xae,ese,tse],sse=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function rse(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",eae,aae)):(0,i.kq)("",!0),sae,(0,i._)("div",rae,[(0,i._)("div",iae,[(0,i._)("div",lae,[(0,i._)("div",nae,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),oae])]),(0,i._)("div",cae," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",dae,[(0,i._)("table",uae,[pae,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",mae,[(0,i._)("a",hae,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",gae,[(0,i._)("a",fae,(0,Ns.zw)(e.contact1),1),(0,i._)("div",wae,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",vae,[(0,i._)("div",_ae,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",yae,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",xae,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",bae,[(0,i._)("div",kae,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",Dae,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",Cae,[(0,i._)("div",Pae,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",Sae,[zae,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",Nae,[Tae,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",Mae,[Iae,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0),(0,i._)("a",Uae,[Eae,(0,i.Wm)(o,{to:`/assignagenttocustomer/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Assign agent")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Fae,Bae)):(0,i.kq)("",!0),(0,i._)("div",qae,[(0,i._)("nav",jae,[(0,i._)("ul",Vae,[(0,i._)("li",Lae,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},Rae)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Wae)],2)))),128)),(0,i._)("li",Hae,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},Yae)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},ase,544),[[s.bM,l.pageSize]])])]),sse])}var ise={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/invididual/allindividualusermanager",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const lse=(0,_t.Z)(ise,[["render",rse]]);var nse=lse;const ose=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Company",-1),cse={key:0},dse=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),use=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),pse=[dse,use],mse={class:"grid grid-cols-12 gap-6 mt-5"},hse={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},gse={class:"flex w-full sm:w-auto"},fse={class:"w-48 relative text-slate-500"},wse=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),vse={class:"hidden xl:block mx-auto text-slate-500"},_se={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},yse={class:"table table-report -mt-2"},xse=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Company name"),(0,i._)("th",{class:"whitespace-nowrap"},"Brand"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Company Manager"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Account Manager"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),bse={class:"w-40 !py-4"},kse={class:"w-10 h-10 image-fit zoom-in"},Dse=["title","src"],Cse={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},Pse={class:"w-40 !py-4"},Sse={href:"#",class:"decoration-dotted whitespace-nowrap"},zse={class:"w-40"},Nse={href:"#",class:"font-medium whitespace-nowrap"},Tse={class:"text-center"},Mse={class:"flex items-center justify-center whitespace-nowrap"},Ise={class:"w-40"},Use={href:"#",class:"font-medium whitespace-nowrap"},Ese={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Fse={class:"text-center"},$se={key:0,class:"flex items-center justify-center whitespace-nowrap"},Ase={class:"w-40 !py-4"},Bse={class:"table-report__action"},qse={key:0,class:"flex justify-center items-center"},jse={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Vse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Lse={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Zse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Rse={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Wse=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Hse=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Ose=[Wse,Hse],Yse={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Kse={class:"w-full sm:w-auto sm:mr-auto"},Gse={class:"pagination"},Jse={class:"page-item"},Qse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Xse=[Qse],ere=["onClick"],tre={class:"page-item"},are=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),sre=[are],rre=(0,i._)("option",null,"10",-1),ire=(0,i._)("option",null,"25",-1),lre=(0,i._)("option",null,"35",-1),nre=(0,i._)("option",null,"50",-1),ore=(0,i._)("option",null,"100",-1),cre=[rre,ire,lre,nre,ore],dre=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function ure(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[ose,l.loading?((0,i.wg)(),(0,i.iD)("div",cse,pse)):(0,i.kq)("",!0),(0,i._)("div",mse,[(0,i._)("div",hse,[(0,i._)("div",gse,[(0,i._)("div",fse,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),wse])]),(0,i._)("div",vse," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",_se,[(0,i._)("table",yse,[xse,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allCompanies,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",bse,[(0,i._)("div",kse,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`http://localhost:8000/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Dse)):((0,i.wg)(),(0,i.iD)("img",Cse))])]),(0,i._)("td",Pse,[(0,i._)("a",Sse,(0,Ns.zw)(a.companyName),1)]),(0,i._)("td",zse,[(0,i._)("a",Nse,(0,Ns.zw)(a.brand),1)]),(0,i._)("td",Tse,[(0,i._)("div",Mse,(0,Ns.zw)(a.accountManager),1)]),(0,i._)("td",Ise,[(0,i._)("a",Use,(0,Ns.zw)(a.contact1),1),(0,i._)("div",Ese,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",Fse,[a.manager?((0,i.wg)(),(0,i.iD)("div",$se,(0,Ns.zw)(a.manager.firstName)+" "+(0,Ns.zw)(a.manager.lastName),1)):(0,i.kq)("",!0)]),(0,i._)("td",Ase,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",Bse,["Active"===a.status?((0,i.wg)(),(0,i.iD)("div",qse,[(0,i._)("a",jse,[Vse,(0,i.Wm)(o,{to:`/companymembers/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",Lse,[Zse,(0,i.Wm)(o,{to:`/viewcompanytransactions/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])):(0,i.kq)("",!0)])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Rse,Ose)):(0,i.kq)("",!0),(0,i._)("div",Yse,[(0,i._)("nav",Kse,[(0,i._)("ul",Gse,[(0,i._)("li",Jse,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},Xse)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,ere)],2)))),128)),(0,i._)("li",tre,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},sre)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},cre,544),[[s.bM,l.pageSize]])])]),dre])}var pre={data(){return{allCompanies:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allmanagercompany",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allCompanies=t.data.companies,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const mre=(0,_t.Z)(pre,[["render",ure]]);var hre=mre;const gre={key:0,class:"shadow-md"},fre=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),wre=[fre],vre=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Customers",-1),_re={class:"grid grid-cols-12 gap-6 mt-5"},yre={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},xre={class:"flex w-full sm:w-auto"},bre={class:"w-48 relative text-slate-500"},kre=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Dre={class:"hidden xl:block mx-auto text-slate-500"},Cre={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Pre={class:"table table-report -mt-2"},Sre=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),zre={class:"w-40 !py-4"},Nre={href:"#",class:"decoration-dotted whitespace-nowrap"},Tre={class:"w-40"},Mre={href:"#",class:"font-medium whitespace-nowrap"},Ire={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Ure={class:"text-center"},Ere={class:"flex items-center justify-center whitespace-nowrap"},Fre={key:0,class:"whitespace-nowrap"},$re={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Are={class:"w-40 text-right"},Bre={class:"pr-16"},qre={class:"w-40 !py-4"},jre={class:"table-report__action"},Vre={class:"flex justify-center items-center"},Lre={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Zre=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Rre={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Wre=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Hre={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Ore=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Yre={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Kre=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Gre=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Jre=[Kre,Gre],Qre={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Xre={class:"w-full sm:w-auto sm:mr-auto"},eie={class:"pagination"},tie={class:"page-item"},aie=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),sie=[aie],rie=["onClick"],iie={class:"page-item"},lie=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),nie=[lie],oie=(0,i._)("option",null,"10",-1),cie=(0,i._)("option",null,"25",-1),die=(0,i._)("option",null,"35",-1),uie=(0,i._)("option",null,"50",-1),pie=(0,i._)("option",null,"100",-1),mie=(0,i._)("option",null,"500",-1),hie=(0,i._)("option",null,"1000",-1),gie=[oie,cie,die,uie,pie,mie,hie],fie=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function wie(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",gre,wre)):(0,i.kq)("",!0),vre,(0,i._)("div",_re,[(0,i._)("div",yre,[(0,i._)("div",xre,[(0,i._)("div",bre,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),kre])]),(0,i._)("div",Dre," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",Cre,[(0,i._)("table",Pre,[Sre,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",zre,[(0,i._)("a",Nre,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",Tre,[(0,i._)("a",Mre,(0,Ns.zw)(e.contact1),1),(0,i._)("div",Ire,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",Ure,[(0,i._)("div",Ere,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",Fre,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",$re,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",Are,[(0,i._)("div",Bre,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",qre,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",jre,[(0,i._)("div",Vre,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",Lre,[Zre,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",Rre,[Wre,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",Hre,[Ore,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Yre,Jre)):(0,i.kq)("",!0),(0,i._)("div",Qre,[(0,i._)("nav",Xre,[(0,i._)("ul",eie,[(0,i._)("li",tie,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},sie)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,rie)],2)))),128)),(0,i._)("li",iie,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},nie)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},gie,544),[[s.bM,l.pageSize]])])]),fie])}var vie={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/manager/allcustomersfromlogedmanager",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const _ie=(0,_t.Z)(vie,[["render",wie]]);var yie=_ie;const xie=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),bie={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},kie={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},Die=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),Cie={class:"tab-content"},Pie={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},Sie={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},zie=["onClick"],Nie={class:"w-12 h-12 flex-none image-fit mr-1"},Tie=["title","src"],Mie={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},Iie={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},Uie={class:"ml-2 overflow-hidden"},Eie={class:"flex items-center"},Fie={href:"javascript:;",class:"font-medium"},$ie=(0,i._)("div",{class:"text-xs text-slate-400 ml-auto"},null,-1),Aie={class:"w-full truncate text-slate-500 mt-0.5"},Bie={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},qie={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},jie={class:"chat__box box"},Vie={class:"h-full flex flex-col"},Lie={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},Zie={class:"flex items-center"},Rie={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},Wie=["title","src"],Hie={class:"ml-3 mr-auto"},Oie={class:"font-medium text-base"},Yie=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),Kie={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},Gie={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},Jie=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-vertical",class:"w-4 h-4"})])],-1),Qie={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},Xie={class:"mt-1 text-xs text-white text-opacity-80"},ele={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},tle=["title","src"],ale={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},sle={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},rle={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},ile=["title","src"],lle={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},nle={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},ole={class:"mt-1 text-xs text-slate-500"},cle={key:0,class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},dle=(0,i.uE)('<div class="flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"><div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div><div class="w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"><i data-lucide="paperclip" class="w-full h-full"></i><input type="file" class="w-full h-full top-0 left-0 absolute opacity-0"></div></div>',1),ule=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),ple=[ule],mle=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey, Charlize Theron!</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function hle(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[xie,(0,i._)("div",bie,[(0,i._)("div",kie,[Die,(0,i._)("div",Cie,[(0,i._)("div",Pie,[(0,i._)("div",Sie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.users,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,onClick:e=>n.selectChat(a),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",Nie,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${a.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Tie)):((0,i.wg)(),(0,i.iD)("img",Mie)),a.isOnline?((0,i.wg)(),(0,i.iD)("div",Iie)):(0,i.kq)("",!0)]),(0,i._)("div",Uie,[(0,i._)("div",Eie,[(0,i._)("a",Fie,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),$ie]),(0,i._)("div",Aie,(0,Ns.zw)(a.contact1),1)]),a.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",Bie,(0,Ns.zw)(a.unreadCount),1)):(0,i.kq)("",!0)],8,zie)))),128))])])])]),(0,i._)("div",qie,[(0,i._)("div",jie,[(0,i._)("div",Vie,[(0,i._)("div",Lie,[(0,i._)("div",Zie,[(0,i._)("div",Rie,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${l.avatarCustomer}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Wie)):(0,i.kq)("",!0)]),(0,i._)("div",Hie,[(0,i._)("div",Oie,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),Yie])])]),(0,i._)("div",Kie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",Gie,[Jie,(0,i._)("div",Qie,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",Xie,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",ele,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[4]||(t[4]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[5]||(t[5]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,tle)):((0,i.wg)(),(0,i.iD)("img",ale))])])):((0,i.wg)(),(0,i.iD)("div",sle,[(0,i._)("div",rle,[a.senderId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,ile)):((0,i.wg)(),(0,i.iD)("img",lle))]),(0,i._)("div",nle,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",ole,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",cle,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[8]||(t[8]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),dle,(0,i._)("a",{href:"javascript:;",onClick:t[9]||(t[9]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},ple)])):(0,i.kq)("",!0)]),mle])])])])}var gle={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null}},computed:{axiosBaseUrl(){return r.Z.defaults.baseURL}},mounted(){},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("ENTROU"),console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){const t=e.senderId._id===this.profileId;return t},getProfile(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1,this.profileId=e.data.user._id,console.log(this.profileId)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/user/manager/allcustomersfromlogedmanager",{headers:{token:e}}).then((e=>{this.users=e.data.users,console.log("Usuarios: ",e.data.users)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""!==this.newMessage.trim()){const t={text:this.newMessage,senderId:this.profileId,receiverId:this.receiverUser},a=wt.Z.get("token");try{await r.Z.post("/api/chat/message",t,{headers:{token:a}}),t.receiverId===this.selectedChat._id?this.messages.push({...t,senderId:this.selectedChat}):this.messages.push(t),this.newMessage="",this.$socket.emit("chat message",t),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(t.receiverId),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const fle=(0,_t.Z)(gle,[["render",hle]]);var wle=fle;const vle=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"All Transactions",-1),_le={class:"grid grid-cols-12 gap-6 mt-5"},yle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},xle={class:"report-box zoom-in"},ble={class:"box p-5"},kle={key:0,class:"flex text-xl"},Dle={class:"text-3xl font-medium leading-8 mt-6"},Cle={key:0},Ple={key:1},Sle=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),zle=[Sle],Nle=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"In progress",-1),Tle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Mle={class:"report-box zoom-in"},Ile={class:"box p-5"},Ule={key:0,class:"flex text-xl"},Ele={class:"text-3xl font-medium leading-8 mt-6"},Fle={key:0},$le={key:1},Ale=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ble=[Ale],qle=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Pending for approval ",-1),jle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Vle={class:"report-box zoom-in"},Lle={class:"box p-5"},Zle={key:0,class:"flex text-xl"},Rle={class:"text-3xl font-medium leading-8 mt-6"},Wle={key:0},Hle={key:1},Ole=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Yle=[Ole],Kle=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Aproved",-1),Gle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Jle={class:"report-box zoom-in"},Qle={class:"box p-5"},Xle={key:0,class:"flex text-xl"},ene={class:"text-3xl font-medium leading-8 mt-6"},tne={key:0},ane={key:1},sne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),rne=[sne],ine=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Completed",-1),lne={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},nne={class:"report-box zoom-in"},one={class:"box p-5"},cne={key:0,class:"flex text-xl"},dne={class:"text-3xl font-medium leading-8 mt-6"},une={key:0},pne={key:1},mne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),hne=[mne],gne=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Canceled",-1),fne={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},wne={class:"report-box zoom-in"},vne={class:"box p-5"},_ne={key:0,class:"flex text-xl"},yne={class:"text-3xl font-medium leading-8 mt-6"},xne={key:0},bne={key:1},kne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Dne=[kne],Cne=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Revoked",-1),Pne={key:0,class:"shadow-md"},Sne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),zne=[Sne],Nne={class:"grid grid-cols-12 gap-6 mt-8"},Tne={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Mne={class:"flex w-full sm:w-auto"},Ine={class:"w-48 relative text-slate-500"},Une=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Ene={class:"ml-1"},Fne=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),$ne=[Fne],Ane={class:"hidden xl:block mx-auto text-slate-500"},Bne=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),qne={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},jne={class:"table table-report -mt-2"},Vne=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Lne={class:"w-40 !py-4"},Zne={class:"decoration-dotted whitespace-nowrap"},Rne={class:"w-40 !py-4"},Wne={key:0,class:"decoration-dotted whitespace-nowrap"},Hne={key:1,class:"decoration-dotted whitespace-nowrap"},One={class:"w-40 !py-4"},Yne={class:"decoration-dotted whitespace-nowrap"},Kne={class:"w-40"},Gne={class:"font-medium whitespace-nowrap"},Jne={class:"text-center"},Qne={key:0,class:"flex items-center justify-center whitespace-nowrap"},Xne={key:1,class:"flex items-center justify-center whitespace-nowrap"},eoe={class:"whitespace-nowrap"},toe={class:"whitespace-nowrap"},aoe={class:"whitespace-nowrap"},soe={class:"w-40 !py-4"},roe={class:"table-report__action"},ioe={class:"flex justify-center items-center"},loe=["onClick"],noe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),ooe={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},coe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),doe={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},uoe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),poe={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},moe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),hoe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},goe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),foe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),woe=[goe,foe],voe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},_oe={class:"w-full sm:w-auto sm:mr-auto"},yoe={class:"pagination"},xoe={class:"page-item"},boe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),koe=[boe],Doe=["onClick"],Coe={class:"page-item"},Poe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Soe=[Poe],zoe=(0,i._)("option",null,"10",-1),Noe=(0,i._)("option",null,"25",-1),Toe=(0,i._)("option",null,"35",-1),Moe=(0,i._)("option",null,"50",-1),Ioe=(0,i._)("option",null,"100",-1),Uoe=(0,i._)("option",null,"500",-1),Eoe=(0,i._)("option",null,"1000",-1),Foe=[zoe,Noe,Toe,Moe,Ioe,Uoe,Eoe],$oe={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Aoe={class:"modal-dialog"},Boe={class:"modal-content"},qoe={class:"modal-body p-0"},joe={class:"p-5 text-center"},Voe=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Loe=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Zoe={class:"text-slate-500 mt-2"},Roe=["href"],Woe=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Hoe(e,t,a,r,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[vle,(0,i._)("div",_le,[(0,i._)("div",yle,[(0,i.Wm)(o,{to:"/transactionsinprogress"},{default:(0,i.w5)((()=>[(0,i._)("div",xle,[(0,i._)("div",ble,[l.inprogress?((0,i.wg)(),(0,i.iD)("div",kle,(0,Ns.zw)(n.formatCurrency(l.inprogress)),1)):(0,i.kq)("",!0),(0,i._)("div",Dle,[l.inprogressCount?((0,i.wg)(),(0,i.iD)("label",Cle,(0,Ns.zw)(n.formatNumber(l.inprogressCount)),1)):((0,i.wg)(),(0,i.iD)("label",Ple,zle))]),Nle])])])),_:1})]),(0,i._)("div",Tle,[(0,i.Wm)(o,{to:"/transactionspending"},{default:(0,i.w5)((()=>[(0,i._)("div",Mle,[(0,i._)("div",Ile,[l.pending?((0,i.wg)(),(0,i.iD)("div",Ule,(0,Ns.zw)(n.formatCurrency(l.pending)),1)):(0,i.kq)("",!0),(0,i._)("div",Ele,[l.pending?((0,i.wg)(),(0,i.iD)("label",Fle,(0,Ns.zw)(n.formatNumber(l.pendingCount)),1)):((0,i.wg)(),(0,i.iD)("label",$le,Ble))]),qle])])])),_:1})]),(0,i._)("div",jle,[(0,i.Wm)(o,{to:"/transactionsaproved"},{default:(0,i.w5)((()=>[(0,i._)("div",Vle,[(0,i._)("div",Lle,[l.aproved?((0,i.wg)(),(0,i.iD)("div",Zle,(0,Ns.zw)(n.formatCurrency(l.aproved)),1)):(0,i.kq)("",!0),(0,i._)("div",Rle,[l.aprovedCount?((0,i.wg)(),(0,i.iD)("label",Wle,(0,Ns.zw)(n.formatNumber(l.aprovedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Hle,Yle))]),Kle])])])),_:1})]),(0,i._)("div",Gle,[(0,i.Wm)(o,{to:"/transactionscompleted"},{default:(0,i.w5)((()=>[(0,i._)("div",Jle,[(0,i._)("div",Qle,[l.completed?((0,i.wg)(),(0,i.iD)("div",Xle,(0,Ns.zw)(n.formatCurrency(l.completed)),1)):(0,i.kq)("",!0),(0,i._)("div",ene,[l.completed?((0,i.wg)(),(0,i.iD)("label",tne,(0,Ns.zw)(n.formatNumber(l.completedCount)),1)):((0,i.wg)(),(0,i.iD)("label",ane,rne))]),ine])])])),_:1})]),(0,i._)("div",lne,[(0,i.Wm)(o,{to:"/transactionscanceled"},{default:(0,i.w5)((()=>[(0,i._)("div",nne,[(0,i._)("div",one,[l.completed?((0,i.wg)(),(0,i.iD)("div",cne,(0,Ns.zw)(n.formatCurrency(l.canceled)),1)):(0,i.kq)("",!0),(0,i._)("div",dne,[l.completed?((0,i.wg)(),(0,i.iD)("label",une,(0,Ns.zw)(n.formatNumber(l.canceledCount)),1)):((0,i.wg)(),(0,i.iD)("label",pne,hne))]),gne])])])),_:1})]),(0,i._)("div",fne,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",wne,[(0,i._)("div",vne,[l.revoked?((0,i.wg)(),(0,i.iD)("div",_ne,(0,Ns.zw)(n.formatCurrency(l.revoked)),1)):(0,i.kq)("",!0),(0,i._)("div",yne,[l.revokedCount?((0,i.wg)(),(0,i.iD)("label",xne,(0,Ns.zw)(n.formatNumber(l.revokedCount)),1)):((0,i.wg)(),(0,i.iD)("label",bne,Dne))]),Cne])])])),_:1})])]),l.loading?((0,i.wg)(),(0,i.iD)("label",Pne,zne)):(0,i.kq)("",!0),(0,i._)("div",Nne,[(0,i._)("div",Tne,[(0,i._)("div",Mne,[(0,i._)("div",Ine,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Une])]),(0,i._)("div",Ene,[(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},$ne)]),(0,i._)("div",Ane," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Bne]),(0,i._)("div",qne,[(0,i._)("table",jne,[Vne,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Lne,[(0,i._)("a",Zne,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Rne,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Wne,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Hne," Individual "))]),(0,i._)("td",One,[(0,i._)("a",Yne,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Kne,[(0,i._)("a",Gne,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Jne,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Qne,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",Xne,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",eoe,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",toe,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",aoe,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",soe,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",roe,[(0,i._)("div",ioe,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[noe,(0,i.Uk)(" Files ")],8,loe),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",ooe,[coe,(0,i.Wm)(o,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",doe,[uoe,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",poe,[moe,(0,i.Wm)(o,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",hoe,woe)):(0,i.kq)("",!0),(0,i._)("div",voe,[(0,i._)("nav",_oe,[(0,i._)("ul",yoe,[(0,i._)("li",xoe,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},koe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Doe)],2)))),128)),(0,i._)("li",Coe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Soe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Foe,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",$oe,[(0,i._)("div",Aoe,[(0,i._)("div",Boe,[(0,i._)("div",qoe,[(0,i._)("div",joe,[Voe,Loe,(0,i._)("div",Zoe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Roe)])))),128))])])]),Woe])])])])])}var Ooe={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={page:this.currentPage,pages:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/logedmanagertransactions",{headers:{token:e},params:t});a&&(this.transactions=a.data.transactions,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count))}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardTotals(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/total/transactionsbystatusfrommanager",{headers:{token:e}});if(200===t.status){const e=t.data.statusCounts||{},a=["In progress","Revoked","Aproved","Pending","Completed","Canceled"];for(const t of a){const a=t.toLowerCase().replace(" ","");this[a]=e[t]?.totalAmount||0,this[a+"Count"]=e[t]?.count||0}}else console.error("Error fetching dashboard totals. Status code:",t.status),this.setAllValuesToZero()}catch(e){console.error("Error fetching dashboard totals:",e),this.setAllValuesToZero()}finally{this.loading=!1}},setAllValuesToZero(){const e=["In progress","Revoked","Aproved","Pending","Completed","Canceled"];for(const t of e){const e=t.toLowerCase().replace(" ","");this[e]=0,this[e+"Count"]=0}},async fetchDashboardAVT(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/averageapprovaltime",{headers:{token:e}}),a=t.data;this.averageApprovalTime=a.averageApprovalTime}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData(),this.fetchDashboardTotals()}};const Yoe=(0,_t.Z)(Ooe,[["render",Hoe]]);var Koe=Yoe;const Goe=e=>((0,i.dD)("data-v-14d6330b"),e=e(),(0,i.Cn)(),e),Joe={key:0,class:"shadow-md"},Qoe=Goe((()=>(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1))),Xoe=[Qoe],ece={class:"grid grid-cols-12 gap-6 mt-5"},tce={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ace={class:"flex w-full sm:w-auto"},sce={class:"w-48 relative text-slate-500"},rce=Goe((()=>(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1))),ice={class:"ml-1"},lce=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw" data-v-14d6330b><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" data-v-14d6330b></path><path d="M3 3v5h5" data-v-14d6330b></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" data-v-14d6330b></path><path d="M16 16h5v5" data-v-14d6330b></path></svg>',1),nce=[lce],oce={class:"hidden xl:block mx-auto text-slate-500"},cce=Goe((()=>(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1))),dce={class:"kanban-board"},uce=["onDragenter","onDrop"],pce=["onDragstart"],mce={class:"kanban-card-container"},hce={class:"intro-y col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3"},gce={class:"box"},fce={class:"p-5 flex flex-col items-start justify-start"},wce={class:"text-slate-600 dark:text-slate-500 mt-5"},vce={class:"flex flex-wrap items-center"},_ce={class:"flex flex-wrap items-center"},yce=Goe((()=>(0,i._)("i",{"data-lucide":"layers",class:"w-4 h-4 mr-2"},null,-1))),xce={class:"flex flex-wrap items-center"},bce={class:"text-success"},kce={class:"text-success"},Dce={class:"mt-2"},Cce=Goe((()=>(0,i._)("b",null,"Files:",-1))),Pce={class:"flex flex-wrap items-center"},Sce=["href"],zce=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink" data-v-14d6330b><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7" data-v-14d6330b></path><polyline points="14 2 14 8 20 8" data-v-14d6330b></polyline><path d="m10 18 3-3-3-3" data-v-14d6330b></path><path d="M4 18v-1a2 2 0 0 1 2-2h6" data-v-14d6330b></path></svg>',1),Nce=[zce],Tce={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Mce={class:"w-full sm:w-auto sm:mr-auto"},Ice={class:"pagination"},Uce={class:"page-item"},Ece=Goe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1))),Fce=[Ece],$ce=["onClick"],Ace={class:"page-item"},Bce=Goe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1))),qce=[Bce],jce=Goe((()=>(0,i._)("option",null,"10",-1))),Vce=Goe((()=>(0,i._)("option",null,"25",-1))),Lce=Goe((()=>(0,i._)("option",null,"35",-1))),Zce=Goe((()=>(0,i._)("option",null,"50",-1))),Rce=Goe((()=>(0,i._)("option",null,"100",-1))),Wce=Goe((()=>(0,i._)("option",null,"500",-1))),Hce=Goe((()=>(0,i._)("option",null,"1000",-1))),Oce=[jce,Vce,Lce,Zce,Rce,Wce,Hce];function Yce(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",Joe,Xoe)):(0,i.kq)("",!0),(0,i._)("div",ece,[(0,i._)("div",tce,[(0,i._)("div",ace,[(0,i._)("div",sce,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),rce])]),(0,i._)("div",ice,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},nce)]),(0,i._)("div",oce," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),cce])]),(0,i._)("div",dce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.kanbanColumns,((a,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r,class:"kanban-column"},[(0,i._)("h2",null,(0,Ns.zw)(a),1),(0,i._)("div",{class:"kanban-cards overflow-y-auto",onDragenter:(0,s.iM)((e=>n.dragEnter(r)),["prevent"]),onDragover:t[6]||(t[6]=(0,s.iM)(((...t)=>e.dragOver&&e.dragOver(...t)),["prevent"])),onDrop:(0,s.iM)((e=>n.drop(r,e)),["prevent"]),ref_for:!0,ref:`kanbanColumn-${r}`},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredRequests(r),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t._id,draggable:"true",onDragstart:a=>n.dragStart(t,e.index,r,a)},[(0,i._)("div",mce,[(0,i._)("div",hce,[(0,i._)("div",gce,[(0,i._)("div",fce,[(0,i._)("div",wce,[(0,i._)("div",vce,[(0,i._)("strong",null,(0,Ns.zw)(t.title),1)]),(0,i._)("div",_ce,[yce,(0,i.Uk)(" "+(0,Ns.zw)(t.comment),1)]),(0,i._)("div",xce,[(0,i._)("strong",bce,[(0,i.Uk)((0,Ns.zw)(t.customer.firstName)+" ",1),(0,i._)("strong",kce,(0,Ns.zw)(t.customer.lastName),1)])]),(0,i._)("div",Dce,[Cce,(0,i._)("div",Pce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},Nce,8,Sce)])))),128))])])])])])])])],40,pce)))),128))],40,uce)])))),128))]),(0,i._)("div",Tce,[(0,i._)("nav",Mce,[(0,i._)("ul",Ice,[(0,i._)("li",Uce,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},Fce)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,$ce)],2)))),128)),(0,i._)("li",Ace,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},qce)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Oce,544),[[s.bM,l.pageSize]])])])}var Kce={data(){return{currentPage:1,totalPages:1,itemsPerPage:10,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null,customerRequests:[],loading:!1,kanbanColumns:{Pending:"Pending",Received:"Received",Under_assessment:"Under assessment",canceled:"canceled",Under_approval:"Under approval",Done:"Done"},dragData:null,currentDropTarget:null}},created(){this.fetchData()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filteredRequests(){return e=>this.customerRequests.filter((t=>t.status===e))}},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},isActivePage(e){return e===this.currentPage},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/request/getfromlogedmanager",{headers:{token:e},params:t});this.customerRequests=a.data.customerRequests,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count),console.log("customerRequests:",this.customerRequests)}catch(e){console.error(e)}finally{this.loading=!1}},dragStart(e,t,a,s){console.log("Dragging card:",e),this.dragData={request:e,column:a,event:s}},dragEnter(e){console.log("target column: ",e)},async drop(e,t){if(t.preventDefault(),!this.dragData)return;const{request:a,column:s}=this.dragData;let i;if(s===e){const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const r=this.customerRequests.filter((e=>e.status===s)),l=r.findIndex((e=>e._id===a._id));r.splice(i,1),r.splice(l,0,t),console.log("Move card within",e,"from",i,"to",l)}else try{const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const l=e,n=wt.Z.get("token");console.log("New status: ",l),console.log("Card id: ",t._id),await r.Z.put(`/request/status/${t._id}`,{status:l},{headers:{token:n,"Content-Type":"application/json"}}),t.status=l;const o=this.customerRequests.filter((e=>e.status===s));o.splice(i,1);const c=this.customerRequests.filter((e=>e.status===l));c.push(t),this.customerRequests=[...this.customerRequests]}catch(l){console.error("Error updating status:",l)}this.dragData=null,t.preventDefault()}}};const Gce=(0,_t.Z)(Kce,[["render",Yce],["__scopeId","data-v-14d6330b"]]);var Jce=Gce;const Qce={class:"intro-y flex items-center mt-8"},Xce=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),ede={key:0},tde=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),ade=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),sde=[tde,ade],rde={class:"grid grid-cols-12 gap-6 mt-5"},ide={class:"intro-y col-span-12 lg:col-span-6"},lde={class:"intro-y box p-5"},nde={class:"grid grid-cols-2 gap-6 mt-3"},ode=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),cde={class:"input-group"},dde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),ude={class:"input-group"},pde={class:"grid grid-cols-3 gap-6 mt-3"},mde=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),hde={class:"input-group"},gde=(0,i._)("option",null,"ID",-1),fde=(0,i._)("option",null,"Drive Licence",-1),wde=(0,i._)("option",null,"Passport",-1),vde=(0,i._)("option",null,"Voters",-1),_de=(0,i._)("option",null,"...",-1),yde=[gde,fde,wde,vde,_de],xde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),bde={class:"input-group"},kde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),Dde={class:"input-group"},Cde={class:"grid grid-cols-2 gap-6 mt-3"},Pde=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),Sde={class:"input-group"},zde=(0,i._)("option",null,"male",-1),Nde=(0,i._)("option",null,"female",-1),Tde=(0,i._)("option",null,"other",-1),Mde=[zde,Nde,Tde],Ide=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Ude={class:"input-group"},Ede={class:"grid grid-cols-2 gap-6 mt-3"},Fde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),$de={class:"input-group"},Ade=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 1 *",-1),Bde={class:"input-group"},qde={class:"grid grid-cols-2 gap-6 mt-3"},jde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Vde={class:"input-group"},Lde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Zde={class:"input-group"},Rde={class:"grid grid-cols-2 gap-6 mt-3"},Wde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Hde={class:"fallback mt-4"},Ode={class:"text-right mt-8"},Yde=["disabled"];function Kde(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Qce,[Xce,l.loading?((0,i.wg)(),(0,i.iD)("div",ede,sde)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",rde,[(0,i._)("div",ide,[(0,i._)("div",lde,[(0,i._)("div",nde,[(0,i._)("div",null,[ode,(0,i._)("div",cde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[dde,(0,i._)("div",ude,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",pde,[(0,i._)("div",null,[mde,(0,i._)("div",hde,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},yde,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[xde,(0,i._)("div",bde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[kde,(0,i._)("div",Dde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",Cde,[(0,i._)("div",null,[Pde,(0,i._)("div",Sde,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},Mde,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[Ide,(0,i._)("div",Ude,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",Ede,[(0,i._)("div",null,[Fde,(0,i._)("div",$de,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[(0,i._)("div",null,[Ade,(0,i._)("div",Bde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])])])]),(0,i._)("div",qde,[(0,i._)("div",null,[jde,(0,i._)("div",Vde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Lde,(0,i._)("div",Zde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.lineManager=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1",hidden:""},null,512),[[s.nr,l.lineManager]]),(0,i._)("div",Rde,[(0,i._)("div",null,[Wde,(0,i._)("div",Hde,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Ode,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Yde)])])])])],32)])}var Gde={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",lineManager:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/me",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.lineManager=t.data.user._id,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateAgent(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","lineManager"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/agent/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Agent created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("viewmyagents"),this.isSuccess=!0,console.log(s),this.$emit("Agent created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getMagers()}};const Jde=(0,_t.Z)(Gde,[["render",Kde]]);var Qde=Jde;const Xde={class:"grid grid-cols-12 gap-6"},eue={class:"col-span-12 2xl:col-span-9"},tue={class:"grid grid-cols-12 gap-6"},aue={class:"col-span-12 mt-8"},sue=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Dashboard")],-1),rue={class:"grid grid-cols-12 gap-6 mt-5"},iue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},lue={class:"report-box zoom-in"},nue={class:"box p-5"},oue={class:"text-3xl font-medium leading-8 mt-6"},cue={key:0},due={key:1},uue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),pue=[uue],mue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Customers",-1),hue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},gue={class:"report-box zoom-in"},fue={class:"box p-5"},wue={class:"text-3xl font-medium leading-8 mt-6"},vue={key:0},_ue={key:1},yue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),xue=[yue],bue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Companies",-1),kue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Due={class:"report-box zoom-in"},Cue={class:"box p-5"},Pue={class:"text-3xl font-medium leading-8 mt-6"},Sue={key:0},zue={key:1},Nue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Tue=[Nue],Mue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Partners",-1),Iue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Uue={class:"report-box zoom-in"},Eue={class:"box p-5"},Fue={class:"text-3xl font-medium leading-8 mt-6"},$ue={key:0},Aue={key:1},Bue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),que=[Bue],jue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Transactions ",-1),Vue={class:"col-span-12 lg:col-span-6 mt-8"},Lue={class:"col-span-12 md:col-span-6 xl:col-span-12 xl:col-start-1 xl:row-start-1 2xl:col-start-auto 2xl:row-start-auto mt-3"},Zue=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-auto"}," New messages ")],-1),Rue={key:0},Wue={class:"box zoom-in"},Hue={class:"tiny-slider",id:"important-notes"},Oue={class:"p-5"},Yue={class:"text-base font-medium truncate"},Kue={class:"text-slate-400 mt-1"},Gue={class:"text-slate-500 text-justify mt-1"},Jue={key:1},Que=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Xue=[Que],epe={class:"col-span-12 xl:col-span-4 mt-6"},tpe=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Customer Requests ")],-1),ape={class:"mt-5"},spe={key:0,class:"intro-y"},rpe={class:"ml-4 mr-auto"},ipe={class:"font-medium"},lpe={class:"text-slate-500 text-xs mt-0.5"},npe={key:1},ope=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),cpe=[ope],dpe=(0,i._)("a",{href:"#",class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),upe={class:"col-span-12 2xl:col-span-3"},ppe={class:"2xl:border-l -mb-10 pb-10"},mpe={class:"2xl:pl-6 grid grid-cols-12 gap-x-6 2xl:gap-x-0 gap-y-6"},hpe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3 2xl:mt-8"},gpe=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Recent Pending Transactions ")],-1),fpe={class:"mt-5"},wpe={key:0},vpe={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},_pe={class:"ml mr-auto"},ype={class:"font-medium"},xpe={class:"text-slate-500 text-xs mt-0.5"},bpe={class:"text-primary truncate"},kpe={key:1},Dpe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Cpe=[Dpe],Ppe=(0,i._)("a",{href:"/customertransactions",class:"intro-x w-full block text-center rounded-md py-3 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),Spe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},zpe=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Last Transactions "),(0,i._)("a",{href:"#",class:"ml-auto text-primary truncate"},"Show More")],-1),Npe={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},Tpe={key:0},Mpe={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Ipe={class:"ml mr-auto"},Upe={class:"font-medium"},Epe={class:"text-slate-500 text-xs mt-0.5"},Fpe={class:"text-success"},$pe={key:1},Ape=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Bpe=[Ape];function qpe(e,t,a,s,r,l){const n=(0,i.up)("notification-component"),o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n),(0,i._)("div",Xde,[(0,i._)("div",eue,[(0,i._)("div",tue,[(0,i._)("div",aue,[sue,(0,i._)("div",rue,[(0,i._)("div",iue,[(0,i.Wm)(o,{to:"/allcustomers"},{default:(0,i.w5)((()=>[(0,i._)("div",lue,[(0,i._)("div",nue,[(0,i._)("div",oue,[r.totalCustomers?((0,i.wg)(),(0,i.iD)("label",cue,(0,Ns.zw)(r.totalCustomers),1)):((0,i.wg)(),(0,i.iD)("label",due,pue))]),mue])])])),_:1})]),(0,i._)("div",hue,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[(0,i._)("div",gue,[(0,i._)("div",fue,[(0,i._)("div",wue,[r.totalCompanies?((0,i.wg)(),(0,i.iD)("label",vue,(0,Ns.zw)(r.totalCompanies),1)):((0,i.wg)(),(0,i.iD)("label",_ue,xue))]),bue])])])),_:1})]),(0,i._)("div",kue,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[(0,i._)("div",Due,[(0,i._)("div",Cue,[(0,i._)("div",Pue,[r.totalPartners?((0,i.wg)(),(0,i.iD)("label",Sue,(0,Ns.zw)(r.totalPartners),1)):((0,i.wg)(),(0,i.iD)("label",zue,Tue))]),Mue])])])),_:1})]),(0,i._)("div",Iue,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[(0,i._)("div",Uue,[(0,i._)("div",Eue,[(0,i._)("div",Fue,[r.totalTransactions?((0,i.wg)(),(0,i.iD)("label",$ue,(0,Ns.zw)(r.totalTransactions),1)):((0,i.wg)(),(0,i.iD)("label",Aue,que))]),jue])])])),_:1})])])]),(0,i._)("div",Vue,[(0,i._)("div",Lue,[Zue,r.recentMessages.length>0?((0,i.wg)(),(0,i.iD)("div",Rue,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentMessages,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mt-5 intro-x"},[(0,i._)("div",Wue,[(0,i._)("div",Hue,[(0,i._)("div",Oue,[(0,i._)("div",Yue,(0,Ns.zw)(e.senderName),1),(0,i._)("div",Kue,(0,Ns.zw)(l.formatDateWithTime(e.timestamp)),1),(0,i._)("div",Gue,(0,Ns.zw)(e.text),1)])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Jue,Xue))])]),(0,i._)("div",epe,[tpe,(0,i._)("div",ape,[r.recentRequests.length>0?((0,i.wg)(),(0,i.iD)("div",spe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentRequests,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"box px-4 py-4 mb-3 flex items-center zoom-in"},[(0,i._)("div",rpe,[(0,i._)("div",ipe,(0,Ns.zw)(e.title),1),(0,i._)("div",lpe,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["text-black cursor-pointer font-medium",l.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)])))),128))])):((0,i.wg)(),(0,i.iD)("div",npe,cpe)),dpe])])])]),(0,i._)("div",upe,[(0,i._)("div",ppe,[(0,i._)("div",mpe,[(0,i._)("div",hpe,[gpe,(0,i._)("div",fpe,[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",wpe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentPendingTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",vpe,[(0,i._)("div",_pe,[(0,i._)("div",ype,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",xpe,(0,Ns.zw)(e.createdAt),1)]),(0,i._)("div",bpe,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",kpe,Cpe)),Ppe])]),(0,i._)("div",Spe,[zpe,(0,i._)("div",Npe,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",Tpe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",Mpe,[(0,i._)("div",Ipe,[(0,i._)("div",Upe,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",Epe,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",Fpe,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",$pe,Bpe))])),_:1})])])])])])])])}var jpe={data(){return{response:null,userID:"",totalCustomers:"",totalIndivCustomers:"",totalCorpCustomers:"",totalTransactions:"",totalPendingTransactions:"",totalMessages:"",totalCompanies:"",totalPartners:"",totalServices:"",totalRequests:"",recentTransactions:[],recentPendingTransactions:[],recentMessages:[],recentRequests:[],currentMonthRevenue:"",lastMonthRevenue:"",dailyTransactionAmounts:"",servicePopularity:""}},created(){this.getDashboardData(),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e)})),setInterval((()=>{this.getDashboardData()}),12e4)},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`},async getDashboardData(){const e=wt.Z.get("token");await r.Z.get("/api/dashboardmanager/getdatamanager",{headers:{token:e}}).then((e=>{const t=e.data;this.totalCustomers=t.totalCustomers,this.totalIndivCustomers=t.totalIndivCustomers,this.totalCorpCustomers=t.totalCorpCustomers,this.totalTransactions=t.totalTransactions,this.totalPendingTransactions=t.totalPendingTransactions,this.totalMessages=t.totalMessages,this.totalCompanies=t.totalCompanies,this.totalPartners=t.totalPartners,this.totalServices=t.totalServices,this.totalRequests=t.totalRequests,this.recentTransactions=t.recentTransactions,this.recentPendingTransactions=t.recentPendingTransactions,this.recentMessages=t.recentMessages,this.recentRequests=t.recentRequests,this.currentMonthRevenue=t.currentMonthRevenue,this.lastMonthRevenue=t.lastMonthRevenue,this.dailyTransactionAmounts=t.dailyTransactionAmounts,this.servicePopularity=t.servicePopularity})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))}},mounted(){this.getDashboardData()}};const Vpe=(0,_t.Z)(jpe,[["render",qpe]]);var Lpe=Vpe;const Zpe={class:"intro-y flex items-center mt-8"},Rpe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Admin",-1),Wpe={key:0},Hpe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Ope=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Ype=[Hpe,Ope],Kpe={class:"grid grid-cols-12 gap-6 mt-5"},Gpe={class:"intro-y col-span-12 lg:col-span-6"},Jpe={class:"intro-y box p-5"},Qpe={class:"grid grid-cols-2 gap-6 mt-3"},Xpe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),eme={class:"input-group"},tme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),ame={class:"input-group"},sme={class:"grid grid-cols-3 gap-6 mt-3"},rme=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),ime={class:"input-group"},lme=(0,i._)("option",null,"ID",-1),nme=(0,i._)("option",null,"Drive Licence",-1),ome=(0,i._)("option",null,"Passport",-1),cme=(0,i._)("option",null,"Voters",-1),dme=(0,i._)("option",null,"...",-1),ume=[lme,nme,ome,cme,dme],pme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),mme={class:"input-group"},hme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),gme={class:"input-group"},fme={class:"grid grid-cols-2 gap-6 mt-3"},wme=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),vme={class:"input-group"},_me=(0,i._)("option",null,"male",-1),yme=(0,i._)("option",null,"female",-1),xme=(0,i._)("option",null,"other",-1),bme=[_me,yme,xme],kme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Dme={class:"input-group"},Cme={class:"grid grid-cols-6 gap-6 mt-3"},Pme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Sme={class:"input-group"},zme={class:"grid grid-cols-3 gap-6 mt-3"},Nme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Tme={class:"input-group"},Mme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Ime={class:"input-group"},Ume=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Eme={class:"input-group"},Fme={class:"grid grid-cols-2 gap-6 mt-3"},$me=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Ame={class:"fallback mt-4"},Bme={class:"text-right mt-8"},qme=["disabled"];function jme(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Zpe,[Rpe,l.loading?((0,i.wg)(),(0,i.iD)("div",Wpe,Ype)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[13]||(t[13]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Kpe,[(0,i._)("div",Gpe,[(0,i._)("div",Jpe,[(0,i._)("div",Qpe,[(0,i._)("div",null,[Xpe,(0,i._)("div",eme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[tme,(0,i._)("div",ame,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",sme,[(0,i._)("div",null,[rme,(0,i._)("div",ime,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},ume,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[pme,(0,i._)("div",mme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[hme,(0,i._)("div",gme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",fme,[(0,i._)("div",null,[wme,(0,i._)("div",vme,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},bme,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[kme,(0,i._)("div",Dme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",Cme,[(0,i._)("div",null,[Pme,(0,i._)("div",Sme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",zme,[(0,i._)("div",null,[Nme,(0,i._)("div",Tme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Mme,(0,i._)("div",Ime,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Ume,(0,i._)("div",Eme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Fme,[(0,i._)("div",null,[$me,(0,i._)("div",Ame,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[11]||(t[11]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Bme,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[12]||(t[12]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,qme)])])])])],32)])}var Vme={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreateAgent(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/admin/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Admin created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Admin created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const Lme=(0,_t.Z)(Vme,[["render",jme]]);var Zme=Lme;const Rme={class:"intro-y flex items-center mt-8"},Wme=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Admin",-1),Hme={key:0},Ome=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Yme=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Kme=[Ome,Yme],Gme={class:"grid grid-cols-12 gap-6 mt-5"},Jme={class:"intro-y col-span-12 lg:col-span-6"},Qme={class:"intro-y box p-5"},Xme={class:"grid grid-cols-2 gap-6 mt-3"},ehe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),the={class:"input-group"},ahe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),she={class:"input-group"},rhe={class:"grid grid-cols-3 gap-6 mt-3"},ihe=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),lhe={class:"input-group"},nhe=(0,i._)("option",null,"ID",-1),ohe=(0,i._)("option",null,"Drive Licence",-1),che=(0,i._)("option",null,"Passport",-1),dhe=(0,i._)("option",null,"Voters",-1),uhe=(0,i._)("option",null,"...",-1),phe=[nhe,ohe,che,dhe,uhe],mhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),hhe={class:"input-group"},ghe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),fhe={class:"input-group"},whe={class:"grid grid-cols-2 gap-6 mt-3"},vhe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),_he={class:"input-group"},yhe=(0,i._)("option",null,"male",-1),xhe=(0,i._)("option",null,"female",-1),bhe=(0,i._)("option",null,"other",-1),khe=[yhe,xhe,bhe],Dhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Che={class:"input-group"},Phe={class:"grid grid-cols-6 gap-6 mt-3"},She=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),zhe={class:"input-group"},Nhe={class:"grid grid-cols-3 gap-6 mt-3"},The=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Mhe={class:"input-group"},Ihe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Uhe={class:"input-group"},Ehe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Fhe={class:"input-group"},$he={class:"grid grid-cols-2 gap-6 mt-3"},Ahe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),Bhe={class:"input-group"},qhe=(0,i._)("option",{value:"Active"},"Active",-1),jhe=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Vhe=[qhe,jhe],Lhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Zhe={class:"fallback mt-4"},Rhe={class:"text-right mt-8"},Whe=["disabled"];function Hhe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Rme,[Wme,l.loading?((0,i.wg)(),(0,i.iD)("div",Hme,Kme)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdateAdmin&&n.onUpdateAdmin(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Gme,[(0,i._)("div",Jme,[(0,i._)("div",Qme,[(0,i._)("div",Xme,[(0,i._)("div",null,[ehe,(0,i._)("div",the,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[ahe,(0,i._)("div",she,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",rhe,[(0,i._)("div",null,[ihe,(0,i._)("div",lhe,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},phe,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[mhe,(0,i._)("div",hhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[ghe,(0,i._)("div",fhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",whe,[(0,i._)("div",null,[vhe,(0,i._)("div",_he,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},khe,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[Dhe,(0,i._)("div",Che,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",Phe,[(0,i._)("div",null,[She,(0,i._)("div",zhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",Nhe,[(0,i._)("div",null,[The,(0,i._)("div",Mhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Ihe,(0,i._)("div",Uhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Ehe,(0,i._)("div",Fhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",$he,[(0,i._)("div",null,[Ahe,(0,i._)("div",Bhe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},Vhe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[Lhe,(0,i._)("div",Zhe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Rhe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,Whe)])])])])],32)])}var Ohe={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.gender=e.data.user.gender,this.email=e.data.user.email,this.password=e.data.user.password,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateAdmin(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/admin/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Admin updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating admin:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating admin:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Yhe=(0,_t.Z)(Ohe,[["render",Hhe]]);var Khe=Yhe;const Ghe={key:0,class:"spinner",style:{"font-size":"18px"}},Jhe={class:"intro-y flex items-center mt-8"},Qhe={key:0},Xhe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),ege=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),tge=[Xhe,ege],age=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),sge={key:1},rge={key:0},ige=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),lge={key:1},nge=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),oge={class:"intro-y box px-5 pt-5 mt-5"},cge={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},dge={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},uge={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},pge=["src"],mge={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},hge={class:"ml-5"},gge={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},fge={class:"text-slate-500"},wge={class:"text-slate-200 mt-1"},vge={class:"text-slate-200 mt-1"},_ge={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},yge=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),xge={class:"flex flex-col justify-center items-center lg:items-start mt-4"},bge={class:"truncate sm:whitespace-normal flex items-center"},kge=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),Dge={class:"truncate sm:whitespace-normal flex items-center mt-3"},Cge=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Pge={class:"truncate sm:whitespace-normal flex items-center mt-3"},Sge=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),zge={class:"truncate sm:whitespace-normal flex items-center mt-3"},Nge=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),Tge={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Mge={class:"font-medium text-center lg:text-left lg:mt-2"},Ige={class:"flex items-center justify-center lg:justify-start mt-2"},Uge={class:""},Ege={class:"ml-3 font-medium"},Fge={class:"ml-3 font-medium"},$ge={class:"flex items-center justify-center lg:justify-start mt-2"},Age={class:""},Bge={class:"ml-3 font-medium"},qge={class:"flex items-center justify-center lg:justify-start mt-2"},jge={class:""},Vge={class:"ml-3 font-medium"},Lge={key:0,class:"flex items-center justify-center lg:justify-start mt-2"},Zge={class:""},Rge={class:"ml-3 font-medium"},Wge={class:"flex items-center justify-center lg:justify-start mt-2"},Hge={class:""},Oge={class:"ml-3 font-medium"},Yge={class:"tab-content mt-5"},Kge={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Gge={class:"grid grid-cols-12 gap-6"},Jge={key:0,class:"intro-y box col-span-12 lg:col-span-6"},Qge=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Latest Transaction </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Xge=(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])],-1),efe=[Qge,Xge],tfe={key:1,class:"intro-y box col-span-12 lg:col-span-6"},afe=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),sfe={class:"p-5"},rfe={class:"tab-content"},ife={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},lfe={key:0,class:"intro-y"},nfe={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},ofe={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},cfe=["title","src"],dfe={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},ufe={class:"ml-4 mr-auto"},pfe={class:"font-medium"},mfe={class:"text-slate-500 text-xs mt-0.5"},hfe={class:"text-slate-500 text-xs mt-0.5"},gfe={key:1,class:"text-center text-gray-600 mt-4"},ffe={class:"intro-y box col-span-6 lg:col-span-12"},wfe={class:"flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"},vfe=(0,i._)("h2",{class:"font-medium text-base mr-auto"},"Uploads",-1),_fe=(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])],-1),yfe={key:0,"data-tw-toggle":"modal","data-tw-target":"#new-order-modal",class:"btn btn-outline-secondary hidden sm:flex"},xfe={key:0,class:"p-5"},bfe={class:"file"},kfe=["href"],Dfe={class:"ml-4"},Cfe=["href"],Pfe={class:"text-slate-500 text-xs mt-0.5"},Sfe={key:0,class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},zfe={class:"flex items-center text-danger",href:"javascript:;"},Nfe=["onClick"],Tfe=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),Mfe=[Tfe],Ife={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},Ufe=(0,i._)("a",{href:"#"},null,-1),Efe={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Ffe={class:"modal-dialog"},$fe={class:"modal-content"},Afe=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),Bfe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},qfe={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},jfe={class:"col-span-12"},Vfe=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),Lfe={class:"fallback"},Zfe={class:"modal-footer text-right"},Rfe=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function Wfe(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[r.loading?((0,i.wg)(),(0,i.iD)("div",Ghe)):(0,i.kq)("",!0),(0,i._)("div",Jhe,[r.loading?((0,i.wg)(),(0,i.iD)("div",Qhe,tge)):(0,i.kq)("",!0),age,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),"1"===r.role?((0,i.wg)(),(0,i.iD)("div",sge,[5===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",rge,[(0,i.Wm)(n,{to:`/updatecorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[ige])),_:1},8,["to"])])):(0,i.kq)("",!0),4===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",lge,[(0,i.Wm)(n,{to:`/updatecustomer/${this.$route.params.id}`},{default:(0,i.w5)((()=>[nge])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",oge,[(0,i._)("div",cge,[(0,i._)("div",dge,[(0,i._)("div",uge,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,pge)):((0,i.wg)(),(0,i.iD)("img",mge))]),(0,i._)("div",hge,[(0,i._)("div",gge,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",fge,(0,Ns.zw)(l.getRole(r.CustomerRole)),1),(0,i._)("div",wge,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",vge,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",_ge,[yge,(0,i._)("div",xge,[(0,i._)("div",bge,[kge,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",Dge,[Cge,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",Pge,[Sge,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",zge,[Nge,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",Tge,[(0,i._)("div",Mge," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",Ige,[(0,i._)("div",Uge,[(0,i.Uk)(" Gender: "),(0,i._)("span",Ege,(0,Ns.zw)(r.gender),1),(0,i.Uk)(" || DOB: "),(0,i._)("span",Fge,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",$ge,[(0,i._)("div",Age,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",Bge,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",qge,[(0,i._)("div",jge,[(0,i.Uk)(" Plan: "),(0,i._)("span",Vge,(0,Ns.zw)(r.plan),1)])]),r.agentFirstName?((0,i.wg)(),(0,i.iD)("div",Lge,[(0,i._)("div",Zge,[(0,i.Uk)(" Agent: "),(0,i._)("span",Rge,(0,Ns.zw)(r.agentFirstName)+" "+(0,Ns.zw)(r.agentLastName),1)])])):(0,i.kq)("",!0),(0,i._)("div",Wge,[(0,i._)("div",Hge,[(0,i.Uk)(" Manager: "),(0,i._)("span",Oge,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",Yge,[(0,i._)("div",Kge,[(0,i._)("div",Gge,["a"===r.role?((0,i.wg)(),(0,i.iD)("div",Jge,efe)):(0,i.kq)("",!0),4===r.CustomerRole||5===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",tfe,[afe,(0,i._)("div",sfe,[(0,i._)("div",rfe,[(0,i._)("div",ife,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",lfe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/dependentprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",nfe,[(0,i._)("div",ofe,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,cfe)):((0,i.wg)(),(0,i.iD)("img",dfe))]),(0,i._)("div",ufe,[(0,i._)("div",pfe,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",mfe,(0,Ns.zw)(a.relation),1),(0,i._)("div",hfe,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",gfe," Dependents no found. "))])])])])):(0,i.kq)("",!0),(0,i._)("div",ffe,[(0,i._)("div",wfe,[vfe,_fe,"1"===r.role||"2"===r.role?((0,i.wg)(),(0,i.iD)("button",yfe," Add files ")):(0,i.kq)("",!0)]),r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",xfe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",bfe,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,kfe)]),(0,i._)("div",Dfe,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,Cfe),(0,i._)("div",Pfe,(0,Ns.zw)(l.getFileSize(e)),1)]),1===r.role||2===r.role||3===r.role?((0,i.wg)(),(0,i.iD)("div",Sfe,[(0,i._)("a",zfe,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},Mfe,8,Nfe))])])):(0,i.kq)("",!0)])))),128))])):((0,i.wg)(),(0,i.iD)("div",Ife,[(0,i.Uk)(" No files available. Add customer documents "),Ufe]))])])])]),(0,i._)("div",Efe,[(0,i._)("div",Ffe,[(0,i._)("div",$fe,[Afe,r.loading?((0,i.wg)(),(0,i.iD)("div",Bfe)):(0,i.kq)("",!0),(0,i._)("div",qfe,[(0,i._)("div",jfe,[Vfe,(0,i._)("div",Lfe,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",Zfe,[Rfe,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var Hfe={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",CustomerRole:"",address:"",balancePlan:"",contact1:"",contact2:"",company:"",dob:"",email:"",gender:"",memberShipID:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",agentFirstName:"",agentLastName:"",id:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.manager=e.data.user.manager,this.managerFirstName=this.manager.firstName,this.managerLastName=this.manager.lastName,e.data.user.agent&&(this.agentFirstName=this.agent.firstName,this.agentLastName=this.agent.lastName),this.company=e.data.user.company,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.CustomerRole=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const Ofe=(0,_t.Z)(Hfe,[["render",Wfe]]);var Yfe=Ofe;const Kfe={key:0,class:"spinner",style:{"font-size":"18px"}},Gfe={class:"intro-y flex items-center mt-8"},Jfe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Employer Profile",-1),Qfe={key:0},Xfe={key:0},ewe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),twe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),awe={key:1},swe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),rwe={key:2},iwe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),lwe={class:"intro-y box px-5 pt-5 mt-5"},nwe={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},owe={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},cwe={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},dwe=["src"],uwe={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},pwe={class:"ml-5"},mwe={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},hwe={key:0,class:"font-medium"},gwe={class:"text-slate-500"},fwe={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},wwe=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),vwe={class:"flex flex-col justify-center items-center lg:items-start mt-4"},_we={class:"truncate sm:whitespace-normal flex items-center"},ywe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),xwe={class:"truncate sm:whitespace-normal flex items-center mt-3"},bwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-phone w-4 h-4 mr-2"},[(0,i._)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1),kwe={class:"truncate sm:whitespace-normal flex items-center mt-3"},Dwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-phone w-4 h-4 mr-2"},[(0,i._)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1),Cwe={class:"truncate sm:whitespace-normal flex items-center mt-3"},Pwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),Swe={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},zwe=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-2"}," About me ",-1),Nwe={class:"flex items-center justify-center lg:justify-start mt-2"},Twe={class:""},Mwe={class:"ml-3 font-medium"},Iwe={class:"flex items-center justify-center lg:justify-start mt-2"},Uwe={class:""},Ewe={class:"ml-3 font-medium"},Fwe={class:"flex items-center justify-center lg:justify-start mt-2"},$we={class:""},Awe={class:"ml-3 font-medium"},Bwe={class:"flex items-center justify-center lg:justify-start mt-2"},qwe={class:""},jwe={class:"ml-3 font-medium"},Vwe={key:0,class:"flex items-center justify-center lg:justify-start mt-2"},Lwe={key:0,class:""},Zwe={class:"ml-3 font-medium"};function Rwe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("div",Kfe)):(0,i.kq)("",!0),(0,i._)("div",Gfe,[Jfe,(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-secondary mt-5 mr-3",onClick:t[0]||(t[0]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")]),(0,i._)("div",null,["1"===l.role?((0,i.wg)(),(0,i.iD)("div",Qfe,[1===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Xfe,[(0,i.Wm)(o,{to:`/updateadmin/${this.$route.params.id}`},{default:(0,i.w5)((()=>[ewe])),_:1},8,["to"])])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(o,{to:`/updatemanager/${this.$route.params.id}`},{default:(0,i.w5)((()=>[twe])),_:1},8,["to"])],512),[[s.F8,2===l.CustomerRole]]),3===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",awe,[(0,i.Wm)(o,{to:`/updateeagent/${this.$route.params.id}`},{default:(0,i.w5)((()=>[swe])),_:1},8,["to"])])):(0,i.kq)("",!0),6===l.CustomerRole||9===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",rwe,[(0,i.Wm)(o,{to:`/updatepartneruser/${this.$route.params.id}`},{default:(0,i.w5)((()=>[iwe])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),(0,i._)("div",lwe,[(0,i._)("div",nwe,[(0,i._)("div",owe,[(0,i._)("div",cwe,[l.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:n.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,dwe)):((0,i.wg)(),(0,i.iD)("img",uwe))]),(0,i._)("div",pwe,[(0,i._)("div",mwe,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),6===l.role?((0,i.wg)(),(0,i.iD)("div",hwe,(0,Ns.zw)(l.profile),1)):(0,i.kq)("",!0),(0,i._)("div",gwe,(0,Ns.zw)(n.getRole(l.CustomerRole)),1),(0,i._)("div",{class:(0,Ns.C_)(["text-slate-100 mt-1",n.getStatusClass(l.status)])},(0,Ns.zw)(l.status),3)])]),(0,i._)("div",fwe,[wwe,(0,i._)("div",vwe,[(0,i._)("div",_we,[ywe,(0,i.Uk)(" "+(0,Ns.zw)(l.email),1)]),(0,i._)("div",xwe,[bwe,(0,i.Uk)(" "+(0,Ns.zw)(l.contact1),1)]),(0,i._)("div",kwe,[Dwe,(0,i.Uk)(" "+(0,Ns.zw)(l.contact2),1)]),(0,i._)("div",Cwe,[Pwe,(0,i.Uk)(" "+(0,Ns.zw)(l.address),1)])])]),(0,i._)("div",Swe,[zwe,(0,i._)("div",Nwe,[(0,i._)("div",Twe,[(0,i.Uk)(" Gender: "),(0,i._)("span",Mwe,(0,Ns.zw)(l.gender),1)])]),(0,i._)("div",Iwe,[(0,i._)("div",Uwe,[(0,i.Uk)(" DOB: "),(0,i._)("span",Ewe,(0,Ns.zw)(l.dob),1)])]),(0,i._)("div",Fwe,[(0,i._)("div",$we,[(0,i.Uk)(" Id Type: "),(0,i._)("span",Awe,(0,Ns.zw)(l.idType),1)])]),(0,i._)("div",Bwe,[(0,i._)("div",qwe,[(0,i.Uk)(" Id Number: "),(0,i._)("span",jwe,(0,Ns.zw)(l.idNumber),1)])]),3===l.role?((0,i.wg)(),(0,i.iD)("div",Vwe,[e.manager?((0,i.wg)(),(0,i.iD)("div",Lwe,[(0,i.Uk)(" Manager: "),(0,i._)("span",Zwe,(0,Ns.zw)(e.manager.firstName)+" "+(0,Ns.zw)(e.manager.lastName),1)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])])])}var Wwe={data(){return{errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],loading:!1,role:"",address:"",CustomerRole:"",managerFirstName:"",managerLastName:"",contact1:"",contact2:"",dob:"",email:"",gender:"",idNumber:"",idType:"",monthlyFee:"",relation:"",id:"",profile:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){const e=this.$route.params.id,t=wt.Z.get("token");try{const a=await r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}});if(!a.data.user)throw new Error("User data not found in the response.");{const e=a.data.user;this.firstName=e.firstName,this.lastName=e.lastName,this.contact1=e.contact1,this.contact2=e.contact2,this.dob=this.formatDate(a.data.user.dob),this.email=e.email,this.gender=e.gender,this.idNumber=e.idNumber,this.idType=e.idType,this.address=e.address,this.profile=e.profile,this.CustomerRole=a.data.user.role,a.data.user.avatar?this.avatar=`${a.data.user.avatar}`:this.avatar="",e.manager&&"object"===typeof e.manager&&(this.manager={id:e.manager._id,firstName:e.manager.firstName,lastName:e.manager.lastName}),this.status=a.data.user.status}}catch(a){console.error("Error retrieving user:",a),this.errorMessage="Error retrieving this user. Please try again."}},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e.status),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace(/\\/g,"/")}`:"../../../../dist/images/logow.png"}}};const Hwe=(0,_t.Z)(Wwe,[["render",Rwe]]);var Owe=Hwe;const Ywe={key:0,class:"spinner",style:{"font-size":"18px"}},Kwe={class:"intro-y flex items-center mt-8"},Gwe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),Jwe={key:0},Qwe={key:0},Xwe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),eve={key:1},tve=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),ave={class:"intro-y box px-5 pt-5 mt-5"},sve={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},rve={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},ive={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},lve=["src"],nve={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},ove={class:"ml-5"},cve={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},dve={class:"text-slate-500"},uve={class:"text-slate-200 mt-1"},pve={class:"text-slate-200 mt-1"},mve={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},hve=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),gve={class:"flex flex-col justify-center items-center lg:items-start mt-4"},fve={class:"truncate sm:whitespace-normal flex items-center"},wve=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),vve={class:"truncate sm:whitespace-normal flex items-center mt-3"},_ve=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),yve={class:"truncate sm:whitespace-normal flex items-center mt-3"},xve=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),bve={class:"truncate sm:whitespace-normal flex items-center mt-3"},kve=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),Dve={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Cve={class:"font-medium text-center lg:text-left lg:mt-2"},Pve={class:"flex items-center justify-center lg:justify-start mt-2"},Sve={class:""},zve={class:"ml-3 font-medium"},Nve={class:"flex items-center justify-center lg:justify-start mt-2"},Tve={class:""},Mve={class:"ml-3 font-medium"},Ive={class:"flex items-center justify-center lg:justify-start mt-2"},Uve={class:""},Eve={class:"ml-3 font-medium"},Fve={class:"flex items-center justify-center lg:justify-start mt-2"},$ve={class:""},Ave={class:"ml-3 font-medium"},Bve={class:"flex items-center justify-center lg:justify-start mt-2"},qve={class:""},jve={class:"ml-3 font-medium"},Vve={class:"tab-content mt-5"},Lve={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Zve={class:"grid grid-cols-12 gap-6"},Rve={key:0,class:"intro-y box col-span-12 lg:col-span-6"},Wve=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Latest Transaction </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Hve=(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])],-1),Ove=[Wve,Hve],Yve={key:1,class:"intro-y box col-span-12 lg:col-span-6"},Kve=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Gve={class:"p-5"},Jve={class:"tab-content"},Qve={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},Xve={key:0,class:"intro-y"},e_e={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},t_e={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},a_e=["title","src"],s_e={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},r_e={class:"ml-4 mr-auto"},i_e={class:"font-medium"},l_e={class:"text-slate-500 text-xs mt-0.5"},n_e={class:"text-slate-500 text-xs mt-0.5"},o_e={key:1,class:"text-center text-gray-600 mt-4"},c_e={class:"flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"},d_e=(0,i._)("h2",{class:"font-medium text-base mr-auto"},"Files",-1),u_e=(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])],-1),p_e={key:0,"data-tw-toggle":"modal","data-tw-target":"#new-order-modal",class:"btn btn-outline-secondary hidden sm:flex"},m_e={key:0,class:"p-5"},h_e={class:"file"},g_e=["href"],f_e={class:"ml-4"},w_e=["href"],v_e={class:"text-slate-500 text-xs mt-0.5"},__e={key:0,class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},y_e={class:"flex items-center text-danger",href:"javascript:;"},x_e=["onClick"],b_e=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),k_e=[b_e],D_e={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},C_e=(0,i._)("a",{href:"#"},null,-1),P_e={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},S_e={class:"modal-dialog"},z_e={class:"modal-content"},N_e=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),T_e={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},M_e={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},I_e={class:"col-span-12"},U_e=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),E_e={class:"fallback"},F_e={class:"modal-footer text-right"},$_e=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function A_e(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[r.loading?((0,i.wg)(),(0,i.iD)("div",Ywe)):(0,i.kq)("",!0),(0,i._)("div",Kwe,[Gwe,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),"1"===r.role?((0,i.wg)(),(0,i.iD)("div",Jwe,[7===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Qwe,[(0,i.Wm)(n,{to:`/updatependentcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Xwe])),_:1},8,["to"])])):(0,i.kq)("",!0),8===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",eve,[(0,i.Wm)(n,{to:`/updatedependentindividual/${this.$route.params.id}`},{default:(0,i.w5)((()=>[tve])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",ave,[(0,i._)("div",sve,[(0,i._)("div",rve,[(0,i._)("div",ive,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,lve)):((0,i.wg)(),(0,i.iD)("img",nve))]),(0,i._)("div",ove,[(0,i._)("div",cve,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",dve,(0,Ns.zw)(l.getRole(r.CustomerRole)),1),(0,i._)("div",uve,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",pve,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",mve,[hve,(0,i._)("div",gve,[(0,i._)("div",fve,[wve,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",vve,[_ve,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",yve,[xve,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",bve,[kve,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",Dve,[(0,i._)("div",Cve," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",Pve,[(0,i._)("div",Sve,[(0,i.Uk)(" Gender: "),(0,i._)("span",zve,(0,Ns.zw)(r.gender),1)])]),(0,i._)("div",Nve,[(0,i._)("div",Tve,[(0,i.Uk)(" DOB: "),(0,i._)("span",Mve,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",Ive,[(0,i._)("div",Uve,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",Eve,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",Fve,[(0,i._)("div",$ve,[(0,i.Uk)(" Plan: "),(0,i._)("span",Ave,(0,Ns.zw)(r.plan),1)])]),(0,i._)("div",Bve,[(0,i._)("div",qve,[(0,i.Uk)(" Manager: "),(0,i._)("span",jve,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",Vve,[(0,i._)("div",Lve,[(0,i._)("div",Zve,[r.condition?((0,i.wg)(),(0,i.iD)("div",Rve,Ove)):(0,i.kq)("",!0),4===r.role||5===r.role?((0,i.wg)(),(0,i.iD)("div",Yve,[Kve,(0,i._)("div",Gve,[(0,i._)("div",Jve,[(0,i._)("div",Qve,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",Xve,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/customerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",e_e,[(0,i._)("div",t_e,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,a_e)):((0,i.wg)(),(0,i.iD)("img",s_e))]),(0,i._)("div",r_e,[(0,i._)("div",i_e,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",l_e,(0,Ns.zw)(a.relation),1),(0,i._)("div",n_e,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",o_e," No members found. "))])])])])):(0,i.kq)("",!0),(0,i._)("div",{class:(0,Ns.C_)(l.getColumnSpanClass)},[(0,i._)("div",c_e,[d_e,u_e,"1"===r.role||"2"===r.role||"3"===r.role?((0,i.wg)(),(0,i.iD)("button",p_e," Add files ")):(0,i.kq)("",!0)]),r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",m_e,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",h_e,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,g_e)]),(0,i._)("div",f_e,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,w_e),(0,i._)("div",v_e,(0,Ns.zw)(l.getFileSize(e)),1)]),"1"===r.role||"2"===r.role||"3"===r.role?((0,i.wg)(),(0,i.iD)("div",__e,[(0,i._)("a",y_e,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},k_e,8,x_e))])])):(0,i.kq)("",!0)])))),128))])):((0,i.wg)(),(0,i.iD)("div",D_e,[(0,i.Uk)(" No files available. Add customer documents "),C_e]))],2)])])]),(0,i._)("div",P_e,[(0,i._)("div",S_e,[(0,i._)("div",z_e,[N_e,r.loading?((0,i.wg)(),(0,i.iD)("div",T_e)):(0,i.kq)("",!0),(0,i._)("div",M_e,[(0,i._)("div",I_e,[U_e,(0,i._)("div",E_e,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",F_e,[$_e,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var B_e={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",CustomerRole:"",address:"",balancePlan:"",memberShipID:"",contact1:"",contact2:"",dob:"",email:"",gender:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",id:"",enrolmentDate:"",status:"",condition:!1}},watch:{id(){this.getProfile()}},created(){this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{getColumnSpanClass(){const e=this.CustomerRole;return 4===e||5===e?"intro-y box col-span-12 lg:col-span-12":7===e||8===e?"intro-y box col-span-6 lg:col-span-6":"intro-y box lg:col-span-12"},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.managerFirstName=e.data.user.accountOwner.manager.firstName,this.managerLastName=e.data.user.accountOwner.manager.lastName,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.CustomerRole=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),$r().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,$r().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),$r().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),$r().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const q_e=(0,_t.Z)(B_e,[["render",A_e]]);var j_e=q_e;const V_e={class:"intro-y flex items-center mt-8"},L_e=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Manager",-1),Z_e={key:0},R_e=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),W_e=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),H_e=[R_e,W_e],O_e={class:"grid grid-cols-12 gap-6 mt-5"},Y_e={class:"intro-y col-span-12 lg:col-span-6"},K_e={class:"intro-y box p-5"},G_e={class:"grid grid-cols-2 gap-6 mt-3"},J_e=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Q_e={class:"input-group"},X_e=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),eye={class:"input-group"},tye={class:"grid grid-cols-3 gap-6 mt-3"},aye=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),sye={class:"input-group"},rye=(0,i._)("option",null,"ID",-1),iye=(0,i._)("option",null,"Drive Licence",-1),lye=(0,i._)("option",null,"Passport",-1),nye=(0,i._)("option",null,"Voters",-1),oye=(0,i._)("option",null,"...",-1),cye=[rye,iye,lye,nye,oye],dye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),uye={class:"input-group"},pye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),mye={class:"input-group"},hye={class:"grid grid-cols-2 gap-6 mt-3"},gye=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),fye={class:"input-group"},wye=(0,i._)("option",null,"male",-1),vye=(0,i._)("option",null,"female",-1),_ye=(0,i._)("option",null,"other",-1),yye=[wye,vye,_ye],xye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),bye={class:"input-group"},kye={class:"grid grid-cols-6 gap-6 mt-3"},Dye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Cye={class:"input-group"},Pye={class:"grid grid-cols-3 gap-6 mt-3"},Sye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),zye={class:"input-group"},Nye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Tye={class:"input-group"},Mye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Iye={class:"input-group"},Uye={class:"grid grid-cols-2 gap-6 mt-3"},Eye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Fye={class:"fallback mt-4"},$ye={class:"text-right mt-8"},Aye=["disabled"];function Bye(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",V_e,[L_e,l.loading?((0,i.wg)(),(0,i.iD)("div",Z_e,H_e)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[13]||(t[13]=(0,s.iM)(((...e)=>n.onCreateManager&&n.onCreateManager(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",O_e,[(0,i._)("div",Y_e,[(0,i._)("div",K_e,[(0,i._)("div",G_e,[(0,i._)("div",null,[J_e,(0,i._)("div",Q_e,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[X_e,(0,i._)("div",eye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",tye,[(0,i._)("div",null,[aye,(0,i._)("div",sye,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},cye,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[dye,(0,i._)("div",uye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[pye,(0,i._)("div",mye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",hye,[(0,i._)("div",null,[gye,(0,i._)("div",fye,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},yye,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[xye,(0,i._)("div",bye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",kye,[(0,i._)("div",null,[Dye,(0,i._)("div",Cye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",Pye,[(0,i._)("div",null,[Sye,(0,i._)("div",zye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Nye,(0,i._)("div",Tye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Mye,(0,i._)("div",Iye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Uye,[(0,i._)("div",null,[Eye,(0,i._)("div",Fye,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[11]||(t[11]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",$ye,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[12]||(t[12]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Aye)])])])])],32)])}var qye={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreateManager(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/manager/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Manager created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Manager created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating manager:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const jye=(0,_t.Z)(qye,[["render",Bye]]);var Vye=jye;const Lye={key:0,class:"shadow-md"},Zye=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Rye=[Zye],Wye=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Admin")],-1),Hye={class:"grid grid-cols-12 gap-6 mt-5"},Oye={class:"intro-y col-span-12 lg:col-span-6"},Yye={class:"intro-y box p-5"},Kye={class:"grid grid-cols-2 gap-6 mt-3"},Gye=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Jye={class:"input-group"},Qye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),Xye={class:"input-group"},exe={class:"grid grid-cols-3 gap-6 mt-3"},txe=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),axe={class:"input-group"},sxe=(0,i._)("option",null,"ID",-1),rxe=(0,i._)("option",null,"Drive Licence",-1),ixe=(0,i._)("option",null,"Passport",-1),lxe=(0,i._)("option",null,"Voters",-1),nxe=(0,i._)("option",null,"...",-1),oxe=[sxe,rxe,ixe,lxe,nxe],cxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),dxe={class:"input-group"},uxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),pxe={class:"input-group"},mxe={class:"grid grid-cols-2 gap-6 mt-3"},hxe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),gxe={class:"input-group"},fxe=(0,i._)("option",null,"male",-1),wxe=(0,i._)("option",null,"female",-1),vxe=(0,i._)("option",null,"other",-1),_xe=[fxe,wxe,vxe],yxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),xxe={class:"input-group"},bxe={class:"grid grid-cols-6 gap-6 mt-3"},kxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Dxe={class:"input-group"},Cxe={class:"grid grid-cols-3 gap-6 mt-3"},Pxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Sxe={class:"input-group"},zxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Nxe={class:"input-group"},Txe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Mxe={class:"input-group"},Ixe={class:"grid grid-cols-2 gap-6 mt-3"},Uxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),Exe={class:"input-group"},Fxe=(0,i._)("option",{value:"Active"},"Active",-1),$xe=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Axe=[Fxe,$xe],Bxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),qxe={class:"fallback mt-4"},jxe={class:"text-right mt-8"},Vxe=["disabled"];function Lxe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",Lye,Rye)):(0,i.kq)("",!0),Wye,(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdateManager&&n.onUpdateManager(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Hye,[(0,i._)("div",Oye,[(0,i._)("div",Yye,[(0,i._)("div",Kye,[(0,i._)("div",null,[Gye,(0,i._)("div",Jye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[Qye,(0,i._)("div",Xye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",exe,[(0,i._)("div",null,[txe,(0,i._)("div",axe,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},oxe,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[cxe,(0,i._)("div",dxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[uxe,(0,i._)("div",pxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",mxe,[(0,i._)("div",null,[hxe,(0,i._)("div",gxe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},_xe,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[yxe,(0,i._)("div",xxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",bxe,[(0,i._)("div",null,[kxe,(0,i._)("div",Dxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",Cxe,[(0,i._)("div",null,[Pxe,(0,i._)("div",Sxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[zxe,(0,i._)("div",Nxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Txe,(0,i._)("div",Mxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Ixe,[(0,i._)("div",null,[Uxe,(0,i._)("div",Exe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},Axe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[Bxe,(0,i._)("div",qxe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",jxe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.loading}," Update ",8,Vxe)])])])])],32)])}var Zxe={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateManager(){const e=this.$route.params.id,t=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/manager/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Manager updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;$r().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating manager:",e),setTimeout((()=>{}),3e3)}else $r().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating manager:",i.message);this.btnloading=!1}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Rxe=(0,_t.Z)(Zxe,[["render",Lxe]]);var Wxe=Rxe;const Hxe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Services",-1),Oxe={key:0,class:"shadow-md"},Yxe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Kxe=[Yxe],Gxe={class:"grid grid-cols-12 gap-6 mt-5"},Jxe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Qxe={class:"flex w-full sm:w-auto"},Xxe={class:"w-48 relative text-slate-500"},ebe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),tbe={class:"box"},abe={class:"flex items-start px-5 pt-5"},sbe={key:0,class:"absolute right-0 top-0 mr-5 mt-3 dropdown"},rbe=(0,i.uE)('<a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),ibe={class:"dropdown-menu w-40"},lbe={class:"dropdown-content"},nbe=(0,i._)("label",{class:"dropdown-item"}," Edit ",-1),obe={class:"text-center lg:text-left p-5 text-slate-500 text-xs mt-0.5"},cbe={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-5"},dbe={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-1"},ube={class:"w-full flex flex-col lg:flex-row items-left mt-3"},pbe={class:""},mbe={class:"text-slate-500 text-xs mt-0.5"},hbe={class:"text-slate-500 text-xs mt-0.5 text-success"},gbe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},fbe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),wbe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),vbe=[fbe,wbe],_be={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center mt-5"},ybe={class:"w-full sm:w-auto sm:mr-auto"},xbe={class:"pagination"},bbe={class:"page-item"},kbe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Dbe=[kbe],Cbe=["onClick"],Pbe={class:"page-item"},Sbe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),zbe=[Sbe],Nbe=(0,i._)("option",null,"10",-1),Tbe=(0,i._)("option",null,"25",-1),Mbe=(0,i._)("option",null,"35",-1),Ibe=(0,i._)("option",null,"50",-1),Ube=(0,i._)("option",null,"100",-1),Ebe=(0,i._)("option",null,"500",-1),Fbe=(0,i._)("option",null,"1000",-1),$be=[Nbe,Tbe,Mbe,Ibe,Ube,Ebe,Fbe];function Abe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Hxe,l.loading?((0,i.wg)(),(0,i.iD)("label",Oxe,Kxe)):(0,i.kq)("",!0),(0,i._)("div",Gxe,[(0,i._)("div",Jxe,[(0,i._)("div",Qxe,[(0,i._)("div",Xxe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),ebe])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myservices,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-6 lg:col-span-4",key:e._id},[(0,i._)("div",tbe,[(0,i._)("div",abe,[1===l.role?((0,i.wg)(),(0,i.iD)("div",sbe,[rbe,(0,i._)("div",ibe,[(0,i._)("div",lbe,[(0,i.Wm)(o,{to:`/updateservice/${e._id}`},{default:(0,i.w5)((()=>[nbe])),_:2},1032,["to"])])])])):(0,i.kq)("",!0)]),(0,i._)("div",obe,[(0,i._)("div",null,(0,Ns.zw)(e.serviceDescription),1),(0,i._)("div",cbe,(0,Ns.zw)(e.serviceName),1),(0,i._)("div",dbe,(0,Ns.zw)(e.serviceAreaOfCover),1),(0,i._)("div",ube,[(0,i._)("div",pbe,[(0,i._)("div",mbe,[(0,i.Uk)(" Service price: "),(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice)),1)]),(0,i._)("div",hbe,[(0,i.Uk)(" Remaining balance: "),(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice-e.remainingBalance)),1)])])])])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",gbe,vbe)):(0,i.kq)("",!0)]),(0,i._)("div",_be,[(0,i._)("nav",ybe,[(0,i._)("ul",xbe,[(0,i._)("li",bbe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},Dbe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Cbe)],2)))),128)),(0,i._)("li",Pbe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},zbe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},$be,544),[[s.bM,l.pageSize]])])])}var Bbe={data(){return{myservices:[],currentPage:1,totalPages:1,itemsPerPage:12,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize};this.searchTerm&&(t.serviceName=this.searchTerm);const a=await r.Z.get("/api/getmyservices",{headers:{token:e},params:t});a.data.success&&(this.myservices=a.data.planService),this.count=a.data.totalServices,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=localStorage.getItem("role");this.role="1"===e?1:0},mounted(){}};const qbe=(0,_t.Z)(Bbe,[["render",Abe]]);var jbe=qbe;const Vbe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),Lbe={key:0,class:"shadow-md"},Zbe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Rbe=[Zbe],Wbe={class:"grid grid-cols-12 gap-12 mt-5"},Hbe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Obe={class:"flex w-full sm:w-auto"},Ybe={class:"w-48 relative text-slate-500"},Kbe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Gbe={class:"ml-1"},Jbe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Qbe=[Jbe],Xbe={class:"hidden xl:block mx-auto text-slate-500"},eke=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),tke={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},ake={class:"table table-report -mt-2"},ske=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),rke={class:"w-40 !py-4"},ike={href:"#",class:"decoration-dotted whitespace-nowrap"},lke={class:"w-40"},nke={href:"#",class:"font-medium whitespace-nowrap"},oke={class:"text-center"},cke={key:0,class:"flex items-center justify-center whitespace-nowrap"},dke={key:1,class:"flex items-center justify-center whitespace-nowrap"},uke={class:"whitespace-nowrap"},pke={class:"whitespace-nowrap"},mke={class:"whitespace-nowrap"},hke={class:"w-40 !py-4"},gke={class:"table-report__action"},fke={class:"flex justify-center items-center"},wke=["onClick"],vke=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),_ke={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},yke=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),xke={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},bke=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),kke=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Dke=[bke,kke],Cke={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Pke={class:"w-full sm:w-auto sm:mr-auto"},Ske={class:"pagination"},zke={class:"page-item"},Nke=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Tke=[Nke],Mke=["onClick"],Ike={class:"page-item"},Uke=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Eke=[Uke],Fke=(0,i._)("option",null,"10",-1),$ke=(0,i._)("option",null,"25",-1),Ake=(0,i._)("option",null,"35",-1),Bke=(0,i._)("option",null,"50",-1),qke=(0,i._)("option",null,"100",-1),jke=(0,i._)("option",null,"500",-1),Vke=(0,i._)("option",null,"1000",-1),Lke=[Fke,$ke,Ake,Bke,qke,jke,Vke],Zke={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Rke={class:"modal-dialog"},Wke={class:"modal-content"},Hke={class:"modal-body p-0"},Oke={class:"p-5 text-center"},Yke=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Kke=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Gke={class:"text-slate-500 mt-2"},Jke=["href"],Qke=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Xke(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Vbe,l.loading?((0,i.wg)(),(0,i.iD)("label",Lbe,Rbe)):(0,i.kq)("",!0),(0,i._)("div",Wbe,[(0,i._)("div",Hbe,[(0,i._)("div",Obe,[(0,i._)("div",Ybe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Kbe])]),(0,i._)("div",Gbe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Qbe)]),(0,i._)("div",Xbe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),eke]),(0,i._)("div",tke,[(0,i._)("table",ake,[ske,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",rke,[(0,i._)("a",ike,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",lke,[(0,i._)("a",nke,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",oke,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",cke,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",dke,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",uke,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",pke,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",mke,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",hke,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",gke,[(0,i._)("div",fke,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[vke,(0,i.Uk)(" Files ")],8,wke),"Completed"===e.status?((0,i.wg)(),(0,i.iD)("a",_ke,[yke,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",xke,Dke)):(0,i.kq)("",!0),(0,i._)("div",Cke,[(0,i._)("nav",Pke,[(0,i._)("ul",Ske,[(0,i._)("li",zke,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Tke)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Mke)],2)))),128)),(0,i._)("li",Ike,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Eke)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Lke,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Zke,[(0,i._)("div",Rke,[(0,i._)("div",Wke,[(0,i._)("div",Hke,[(0,i._)("div",Oke,[Yke,Kke,(0,i._)("div",Gke,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Jke)])))),128))])])]),Qke])])])])])}var eDe={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`http://localhost:8000/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/logedusertransaction",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const tDe=(0,_t.Z)(eDe,[["render",Xke]]);var aDe=tDe;const sDe={key:0,class:"shadow-md"},rDe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),iDe=[rDe],lDe={class:"grid grid-cols-12 gap-6 mt-5"},nDe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},oDe={class:"flex w-full sm:w-auto"},cDe={class:"w-48 relative text-slate-500"},dDe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),uDe={class:"hidden xl:block mx-auto text-slate-500"},pDe=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),mDe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},hDe={class:"intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5"},gDe={class:"file box rounded-md px-5 pt-8 pb-5 px-3 sm:px-5 relative zoom-in"},fDe=(0,i._)("div",{class:"absolute left-0 top-0 mt-3 ml-3"},null,-1),wDe=["href"],vDe=["href"],_De=(0,i._)("div",{class:"text-slate-500 text-xs text-center mt-0.5"},null,-1),yDe={class:"absolute top-0 right-0 mr-2 mt-3 dropdown ml-auto"},xDe=["href"],bDe=(0,i._)("i",{"data-lucide":"more-vertical",class:"w-5 h-5 text-slate-500"},null,-1),kDe=[bDe],DDe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},CDe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),PDe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),SDe=[CDe,PDe],zDe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},NDe={class:"w-full sm:w-auto sm:mr-auto"},TDe={class:"pagination"},MDe={class:"page-item"},IDe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),UDe=[IDe],EDe=["onClick"],FDe={class:"page-item"},$De=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),ADe=[$De],BDe=(0,i._)("option",null,"10",-1),qDe=(0,i._)("option",null,"25",-1),jDe=(0,i._)("option",null,"35",-1),VDe=(0,i._)("option",null,"50",-1),LDe=(0,i._)("option",null,"100",-1),ZDe=(0,i._)("option",null,"500",-1),RDe=(0,i._)("option",null,"1000",-1),WDe=[BDe,qDe,jDe,VDe,LDe,ZDe,RDe];function HDe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",sDe,iDe)):(0,i.kq)("",!0),(0,i._)("div",lDe,[(0,i._)("div",nDe,[(0,i._)("div",oDe,[(0,i._)("div",cDe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),dDe])]),(0,i._)("div",uDe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),pDe]),(0,i._)("div",mDe,[(0,i._)("div",hDe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.fileTemplates,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e._id,class:"intro-y col-span-6 sm:col-span-4 md:col-span-3 2xl:col-span-2"},[(0,i._)("div",gDe,[fDe,(0,i._)("a",{href:n.getFilePath(e.fileTemplate),target:"_blank",class:"w-3/5 file__icon file__icon--empty-directory mx-auto"},null,8,wDe),(0,i._)("a",{href:n.getFilePath(e.fileTemplate),target:"_blank",class:"block font-medium mt-4 text-center truncate"},(0,Ns.zw)(e.description),9,vDe),_De,(0,i._)("div",yDe,[(0,i._)("a",{href:n.getFilePath(e.fileTemplate),class:"dropdown-toggle w-5 h-5 block","aria-expanded":"false","data-tw-toggle":"dropdown"},kDe,8,xDe)])])])))),128))])]),l.loading?((0,i.wg)(),(0,i.iD)("div",DDe,SDe)):(0,i.kq)("",!0),(0,i._)("div",zDe,[(0,i._)("nav",NDe,[(0,i._)("ul",TDe,[(0,i._)("li",MDe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},UDe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,EDe)],2)))),128)),(0,i._)("li",FDe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},ADe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},WDe,544),[[s.bM,l.pageSize]])])])])}var ODe={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",fileTemplates:""}},computed:{formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getFilePath(e){return`http://localhost:8000/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/active/filetemplate",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.fileTemplates=t.data.fileTemplates,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Completed"===e?"text-success":"Pending"===e?"text-pending":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const YDe=(0,_t.Z)(ODe,[["render",HDe]]);var KDe=YDe;const GDe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"View template file",-1),JDe={key:0},QDe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),XDe=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),eCe=[QDe,XDe],tCe={class:"grid grid-cols-12 gap-6 mt-5"},aCe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},sCe={class:"flex w-full sm:w-auto"},rCe={class:"w-48 relative text-slate-500"},iCe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),lCe={class:"hidden xl:block mx-auto text-slate-500"},nCe={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},oCe=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Add template ")],-1),cCe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},dCe={class:"table table-report -mt-2"},uCe=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"text-center whitespace-nowrap"},"File description"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Satus"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Date"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),pCe={class:"text-center"},mCe={class:"flex items-center justify-center whitespace-nowrap"},hCe={class:"text-center"},gCe={class:"text-center"},fCe={class:"flex items-center justify-center whitespace-nowrap"},wCe={class:"table-report__action"},vCe={class:"flex justify-center items-center"},_Ce={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},yCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),xCe={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},bCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),kCe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},DCe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),CCe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),PCe=[DCe,CCe],SCe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},zCe={class:"w-full sm:w-auto sm:mr-auto"},NCe={class:"pagination"},TCe={class:"page-item"},MCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),ICe=[MCe],UCe=["onClick"],ECe={class:"page-item"},FCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),$Ce=[FCe],ACe=(0,i._)("option",null,"10",-1),BCe=(0,i._)("option",null,"25",-1),qCe=(0,i._)("option",null,"35",-1),jCe=(0,i._)("option",null,"50",-1),VCe=(0,i._)("option",null,"100",-1),LCe=[ACe,BCe,qCe,jCe,VCe],ZCe=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function RCe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[GDe,l.loading?((0,i.wg)(),(0,i.iD)("div",JDe,eCe)):(0,i.kq)("",!0),(0,i._)("div",tCe,[(0,i._)("div",aCe,[(0,i._)("div",sCe,[(0,i._)("div",rCe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),iCe])]),(0,i._)("div",lCe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",nCe,[(0,i.Wm)(o,{to:"/createtemplatefile"},{default:(0,i.w5)((()=>[oCe])),_:1})])]),(0,i._)("div",cCe,[(0,i._)("table",dCe,[uCe,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.fileTemplates,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",pCe,[(0,i._)("div",mCe,(0,Ns.zw)(e.description),1)]),(0,i._)("td",hCe,[(0,i._)("div",{class:(0,Ns.C_)(["flex items-center justify-center whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",gCe,[(0,i._)("div",fCe,(0,Ns.zw)(n.formatDate(e.updatedAt)),1)]),(0,i._)("td",wCe,[(0,i._)("div",vCe,[(0,i._)("a",_Ce,[yCe,(0,i.Wm)(o,{to:`/updatetemplatefile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",xCe,[bCe,(0,i.Wm)(o,{to:`/viewpartneruser/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Delete")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",kCe,PCe)):(0,i.kq)("",!0),(0,i._)("div",SCe,[(0,i._)("nav",zCe,[(0,i._)("ul",NCe,[(0,i._)("li",TCe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},ICe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,UCe)],2)))),128)),(0,i._)("li",ECe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},$Ce)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},LCe,544),[[s.bM,l.pageSize]])])]),ZCe])}var WCe={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",fileTemplates:""}},computed:{formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/templates",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.fileTemplates=t.data.fileTemplates,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const HCe=(0,_t.Z)(WCe,[["render",RCe]]);var OCe=HCe;const YCe={class:"intro-y flex items-center mt-8"},KCe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Template File",-1),GCe={key:0},JCe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),QCe=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),XCe=[JCe,QCe],ePe={class:"grid grid-cols-12 gap-6 mt-5"},tPe={class:"intro-y col-span-12 lg:col-span-6"},aPe={class:"intro-y box p-5"},sPe={class:"grid grid-cols-6 gap-6 mt-3"},rPe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Description *",-1),iPe={class:"input-group"},lPe={class:"grid grid-cols-6 gap-6 mt-5"},nPe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select file",-1),oPe={class:"fallback mt-4"},cPe={class:"text-right mt-8"},dPe=["disabled"];function uPe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",YCe,[KCe,l.loading?((0,i.wg)(),(0,i.iD)("div",GCe,XCe)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>n.onCreateTemplateFile&&n.onCreateTemplateFile(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",ePe,[(0,i._)("div",tPe,[(0,i._)("div",aPe,[(0,i._)("div",sPe,[(0,i._)("div",null,[rPe,(0,i._)("div",iPe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.description=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.description]])])])]),(0,i._)("div",lPe,[(0,i._)("div",null,[nPe,(0,i._)("div",oPe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[1]||(t[1]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",cPe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,dPe)])])])])],32)])}var pPe={data(){return{description:"",fileTemplate:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0];this.fileTemplate=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/agent/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateTemplateFile(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["description","fileTemplate"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("description",this.description),a.append("fileTemplate",this.fileTemplate),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/filestemplate/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Template created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewtemplatefiles"),this.isSuccess=!0,console.log(s),this.$emit("templatecreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating template:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating template:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const mPe=(0,_t.Z)(pPe,[["render",uPe]]);var hPe=mPe;const gPe={class:"intro-y flex items-center mt-8"},fPe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Template File",-1),wPe={key:0},vPe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),_Pe=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),yPe=[vPe,_Pe],xPe={class:"grid grid-cols-12 gap-6 mt-5"},bPe={class:"intro-y col-span-12 lg:col-span-6"},kPe={class:"intro-y box p-5"},DPe={class:"grid grid-cols-6 gap-6 mt-3"},CPe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Description *",-1),PPe={class:"input-group"},SPe=(0,i._)("div",{class:"grid grid-cols-6 gap-6 mt-3"},null,-1),zPe={class:"grid grid-cols-6 gap-6 mt-5"},NPe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),TPe={class:"input-group"},MPe=(0,i._)("option",null,"Active",-1),IPe=(0,i._)("option",null,"Inactive",-1),UPe=[MPe,IPe],EPe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select file",-1),FPe={class:"fallback mt-4"},$Pe={class:"text-right mt-8"},APe=["disabled"];function BPe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",gPe,[fPe,l.loading?((0,i.wg)(),(0,i.iD)("div",wPe,yPe)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>n.onUpdateTemplateFile&&n.onUpdateTemplateFile(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",xPe,[(0,i._)("div",bPe,[(0,i._)("div",kPe,[(0,i._)("div",DPe,[(0,i._)("div",null,[CPe,(0,i._)("div",PPe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.description=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.description]])])])]),SPe,(0,i._)("div",zPe,[(0,i._)("div",null,[NPe,(0,i._)("div",TPe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},UPe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[EPe,(0,i._)("div",FPe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[2]||(t[2]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",$Pe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[3]||(t[3]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,APe)])])])])],32)])}var qPe={data(){return{description:"",status:"",fileTemplate:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},async getTemplate(){this.loading=!0;try{const e=wt.Z.get("token"),t=this.$route.params.templateId,a=await r.Z.get(`/api/single/template/${t}`,{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch plans");this.description=a.data.template.description,this.status=a.data.template.status,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.fileTemplate=t},async onUpdateTemplateFile(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["description","fileTemplate"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("description",this.description),a.append("fileTemplate",this.fileTemplate),a.append("status",this.status),this.btnloading=!0,this.loading=!0;const s=this.$route.params.templateId,i=await r.Z.put(`/api/update/template/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Template updated successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewtemplatefiles"),this.isSuccess=!0,console.log(i),this.$emit("templateupdated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error update template:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error update template:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getTemplate()}};const jPe=(0,_t.Z)(qPe,[["render",BPe]]);var VPe=jPe;const LPe=e=>((0,i.dD)("data-v-52642198"),e=e(),(0,i.Cn)(),e),ZPe={key:0,class:"shadow-md"},RPe=LPe((()=>(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1))),WPe=[RPe],HPe={class:"grid grid-cols-12 gap-6 mt-5"},OPe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},YPe={class:"flex w-full sm:w-auto"},KPe={class:"w-48 relative text-slate-500"},GPe=LPe((()=>(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1))),JPe={class:"ml-1"},QPe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw" data-v-52642198><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" data-v-52642198></path><path d="M3 3v5h5" data-v-52642198></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" data-v-52642198></path><path d="M16 16h5v5" data-v-52642198></path></svg>',1),XPe=[QPe],eSe={class:"hidden xl:block mx-auto text-slate-500"},tSe=LPe((()=>(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1))),aSe={class:"kanban-board"},sSe=["onDragenter","onDrop"],rSe=["onDragstart"],iSe={class:"kanban-card-container"},lSe={class:"intro-y col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3"},nSe={class:"box"},oSe={class:"p-5 flex flex-col items-start justify-start"},cSe={class:"text-slate-600 dark:text-slate-500 mt-5"},dSe={class:"flex flex-wrap items-center"},uSe={class:"flex flex-wrap items-center"},pSe=LPe((()=>(0,i._)("i",{"data-lucide":"layers",class:"w-4 h-4 mr-2"},null,-1))),mSe={class:"flex flex-wrap items-center"},hSe={class:"mt-2"},gSe=LPe((()=>(0,i._)("b",null,"Files:",-1))),fSe={class:"flex flex-wrap items-center"},wSe=["href"],vSe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink" data-v-52642198><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7" data-v-52642198></path><polyline points="14 2 14 8 20 8" data-v-52642198></polyline><path d="m10 18 3-3-3-3" data-v-52642198></path><path d="M4 18v-1a2 2 0 0 1 2-2h6" data-v-52642198></path></svg>',1),_Se=[vSe],ySe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},xSe={class:"w-full sm:w-auto sm:mr-auto"},bSe={class:"pagination"},kSe={class:"page-item"},DSe=LPe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1))),CSe=[DSe],PSe=["onClick"],SSe={class:"page-item"},zSe=LPe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1))),NSe=[zSe],TSe=LPe((()=>(0,i._)("option",null,"10",-1))),MSe=LPe((()=>(0,i._)("option",null,"25",-1))),ISe=LPe((()=>(0,i._)("option",null,"35",-1))),USe=LPe((()=>(0,i._)("option",null,"50",-1))),ESe=LPe((()=>(0,i._)("option",null,"100",-1))),FSe=LPe((()=>(0,i._)("option",null,"500",-1))),$Se=LPe((()=>(0,i._)("option",null,"1000",-1))),ASe=[TSe,MSe,ISe,USe,ESe,FSe,$Se];function BSe(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",ZPe,WPe)):(0,i.kq)("",!0),(0,i._)("div",HPe,[(0,i._)("div",OPe,[(0,i._)("div",YPe,[(0,i._)("div",KPe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),GPe])]),(0,i._)("div",JPe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},XPe)]),(0,i._)("div",eSe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),tSe])]),(0,i._)("div",aSe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.kanbanColumns,((a,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r,class:"kanban-column"},[(0,i._)("h2",null,(0,Ns.zw)(a),1),(0,i._)("div",{class:"kanban-cards overflow-y-auto",onDragenter:(0,s.iM)((e=>n.dragEnter(r)),["prevent"]),onDragover:t[6]||(t[6]=(0,s.iM)(((...t)=>e.dragOver&&e.dragOver(...t)),["prevent"])),onDrop:(0,s.iM)((e=>n.drop(r,e)),["prevent"]),ref_for:!0,ref:`kanbanColumn-${r}`},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredRequests(r),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t._id,draggable:"true",onDragstart:a=>n.dragStart(t,e.index,r,a)},[(0,i._)("div",iSe,[(0,i._)("div",lSe,[(0,i._)("div",nSe,[(0,i._)("div",oSe,[(0,i._)("div",cSe,[(0,i._)("div",dSe,[(0,i._)("strong",null,(0,Ns.zw)(t.title),1)]),(0,i._)("div",uSe,[pSe,(0,i.Uk)(" "+(0,Ns.zw)(t.comment),1)]),(0,i._)("div",mSe,[(0,i._)("strong",null,[(0,i.Uk)((0,Ns.zw)(t.customer.firstName)+" ",1),(0,i._)("strong",null,(0,Ns.zw)(t.customer.lastName),1)])]),(0,i._)("div",hSe,[gSe,(0,i._)("div",fSe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},_Se,8,wSe)])))),128))])])])])])])])],40,rSe)))),128))],40,sSe)])))),128))]),(0,i._)("div",ySe,[(0,i._)("nav",xSe,[(0,i._)("ul",bSe,[(0,i._)("li",kSe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},CSe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,PSe)],2)))),128)),(0,i._)("li",SSe,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},NSe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},ASe,544),[[s.bM,l.pageSize]])])])}var qSe={data(){return{currentPage:1,totalPages:1,itemsPerPage:10,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null,customerRequests:[],loading:!1,kanbanColumns:{Pending:"Pending",Received:"Received",Under_assessment:"Under assessment",canceled:"canceled",Under_approval:"Under approval",Done:"Done"},dragData:null,currentDropTarget:null}},created(){this.fetchData()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filteredRequests(){return e=>this.customerRequests.filter((t=>t.status===e))}},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},isActivePage(e){return e===this.currentPage},getFilePath(e){return`http://localhost:8000/${e}`},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/request/getall",{headers:{token:e},params:t});this.customerRequests=a.data.customerRequests,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count),console.log("customerRequests:",this.customerRequests)}catch(e){console.error(e)}finally{this.loading=!1}},dragStart(e,t,a,s){console.log("Dragging card:",e),this.dragData={request:e,column:a,event:s}},dragEnter(e){console.log("target column: ",e)},async drop(e,t){if(t.preventDefault(),!this.dragData)return;const{request:a,column:s}=this.dragData;let i;if(s===e){const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const r=this.customerRequests.filter((e=>e.status===s)),l=r.findIndex((e=>e._id===a._id));r.splice(i,1),r.splice(l,0,t),console.log("Move card within",e,"from",i,"to",l)}else try{const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const l=e,n=wt.Z.get("token");console.log("New status: ",l),console.log("Card id: ",t._id),await r.Z.put(`/request/status/${t._id}`,{status:l},{headers:{token:n,"Content-Type":"application/json"}}),t.status=l;const o=this.customerRequests.filter((e=>e.status===s));o.splice(i,1);const c=this.customerRequests.filter((e=>e.status===l));c.push(t),this.customerRequests=[...this.customerRequests]}catch(l){console.error("Error updating status:",l)}this.dragData=null,t.preventDefault()}}};const jSe=(0,_t.Z)(qSe,[["render",BSe],["__scopeId","data-v-52642198"]]);var VSe=jSe;const LSe={class:"intro-y flex items-center mt-8"},ZSe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Request",-1),RSe={key:0,class:"shadow-md"},WSe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),HSe=[WSe],OSe={class:"grid grid-cols-12 gap-6 mt-5"},YSe={class:"intro-y col-span-12 lg:col-span-6"},KSe={class:"intro-y box p-5"},GSe={class:"grid grid-cols-2 gap-6 mt-3"},JSe=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Agent",-1),QSe={class:"input-group"},XSe={class:"form-control"},eze=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Subject *",-1),tze={class:"input-group"},aze=["disabled"],sze=(0,i._)("option",null,"Add New Member/ Dependent",-1),rze=(0,i._)("option",null,"Surgery",-1),ize=[sze,rze],lze={class:"grid grid-cols-6 gap-6 mt-3"},nze=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Message",-1),oze={class:"input-group"},cze=["disabled"],dze={class:"grid grid-cols-2 gap-6 mt-5"},uze=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),pze={class:"fallback mt-4"},mze=["disabled"],hze={class:"text-right mt-8"},gze=["disabled"];function fze(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",LSe,[ZSe,l.loading?((0,i.wg)(),(0,i.iD)("label",RSe,HSe)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>n.onCreateRequest&&n.onCreateRequest(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",OSe,[(0,i._)("div",YSe,[(0,i._)("div",KSe,[(0,i._)("div",GSe,[(0,i._)("div",null,[JSe,(0,i._)("div",QSe,[(0,i._)("div",XSe,[(0,i._)("strong",null,(0,Ns.zw)(l.agentFirstName),1),(0,i.Uk)(" "+(0,Ns.zw)()+" ",1),(0,i._)("strong",null,(0,Ns.zw)(l.agentLastName),1)])])]),(0,i._)("div",null,[eze,(0,i._)("div",tze,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=e=>l.title=e),disabled:l.loading},ize,8,aze),[[s.bM,l.title]])])])]),(0,i._)("div",lze,[(0,i._)("div",null,[nze,(0,i._)("div",oze,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.comment=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"comment","aria-describedby":"input-group-1",disabled:l.loading},null,8,cze),[[s.nr,l.comment]])])])]),(0,i._)("div",dze,[(0,i._)("div",null,[uze,(0,i._)("div",pze,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e)),disabled:l.loading},null,40,mze)])])]),(0,i._)("div",hze,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[3]||(t[3]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.loading}," Create ",8,gze)])])])])],32)])}var wze={data(){return{agentFirstName:"",agentLastName:"",comment:"",title:"",serviceId:"",loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/me",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.user||"object"!==typeof t.data.user)throw new Error("Failed to fetch services");this.loading=!1,t.data.user.manager?(this.agentFirstName=t.data.user.manager.firstName,this.agentLastName=t.data.user.manager.lastName):t.data.user.accountOwner&&"object"===typeof t.data.user.accountOwner&&(this.agentFirstName=t.data.user.accountOwner.firstName,this.agentLastName=t.data.user.accountOwner.lastName)}catch(e){console.error("Error fetching services:",e),this.loading=!1}},async onCreateRequest(){const e=$r().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",$r().stopTimer),e.addEventListener("mouseleave",$r().resumeTimer)}}),t=wt.Z.get("token"),a=["title"];for(const r of a)if(""===this[r])return void $r().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("files[]",e)})),a.append("title",this.title),a.append("comment",this.comment),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/request/createnew",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Request created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewrequest"),this.isSuccess=!0,console.log(s),this.$emit("requestcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating request:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",$r().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating request:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const vze=(0,_t.Z)(wze,[["render",fze]]);var _ze=vze;function yze(e,t){return(0,i.wg)(),(0,i.iD)("div")}const xze={},bze=(0,_t.Z)(xze,[["render",yze]]);var kze=bze;const Dze=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Requests",-1),Cze={key:0,class:"shadow-md"},Pze=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Sze=[Pze],zze={class:"grid grid-cols-12 gap-6 mt-5"},Nze={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Tze={class:"flex w-full sm:w-auto"},Mze={class:"w-48 relative text-slate-500"},Ize=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Uze={class:"hidden xl:block mx-auto text-slate-500"},Eze={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},Fze=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Add new request ")],-1),$ze={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Aze={class:"table table-report -mt-2"},Bze=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Subject"),(0,i._)("th",{class:"whitespace-nowrap"},"Message"),(0,i._)("th",{class:"whitespace-nowrap"},"Files"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Date")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),qze={class:"w-40 !py-4"},jze={class:"whitespace-nowrap"},Vze={class:"whitespace-nowrap"},Lze={class:"flex items-center space-x-2"},Zze=["href"],Rze=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Wze=[Rze],Hze={class:"w-40 !py-4"},Oze={class:"whitespace-nowrap"},Yze={class:"table-report__action"},Kze={class:"flex justify-center items-center"},Gze={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Jze=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Qze={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Xze=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),eNe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),tNe=[Xze,eNe],aNe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},sNe={class:"w-full sm:w-auto sm:mr-auto"},rNe={class:"pagination"},iNe={class:"page-item"},lNe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),nNe=[lNe],oNe=["onClick"],cNe={class:"page-item"},dNe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),uNe=[dNe],pNe=(0,i._)("option",null,"10",-1),mNe=(0,i._)("option",null,"25",-1),hNe=(0,i._)("option",null,"35",-1),gNe=(0,i._)("option",null,"50",-1),fNe=(0,i._)("option",null,"100",-1),wNe=(0,i._)("option",null,"500",-1),vNe=(0,i._)("option",null,"1000",-1),_Ne=[pNe,mNe,hNe,gNe,fNe,wNe,vNe];function yNe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Dze,l.loading?((0,i.wg)(),(0,i.iD)("label",Cze,Sze)):(0,i.kq)("",!0),(0,i._)("div",zze,[(0,i._)("div",Nze,[(0,i._)("div",Tze,[(0,i._)("div",Mze,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Ize])]),(0,i._)("div",Uze," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",Eze,[(0,i.Wm)(o,{to:"/createrequest"},{default:(0,i.w5)((()=>[Fze])),_:1})])]),(0,i._)("div",$ze,[(0,i._)("table",Aze,[Bze,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",qze,(0,Ns.zw)(e.title),1),(0,i._)("td",jze,(0,Ns.zw)(e.comment),1),(0,i._)("td",Vze,[(0,i._)("div",Lze,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},Wze,8,Zze)])))),128))])]),(0,i._)("td",Hze,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",null,[(0,i._)("div",Oze,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",Yze,[(0,i._)("div",Kze,["Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Gze,[Jze,(0,i.Wm)(o,{to:`/requesthistory/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("history")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Qze,tNe)):(0,i.kq)("",!0),(0,i._)("div",aNe,[(0,i._)("nav",sNe,[(0,i._)("ul",rNe,[(0,i._)("li",iNe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},nNe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,oNe)],2)))),128)),(0,i._)("li",cNe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},uNe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},_Ne,544),[[s.bM,l.pageSize]])])])])}var xNe={data(){return{companyName:"",transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/request/get/logeduser/request",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=t.data.customerRequests,this.count=t.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Completed"===e?"text-success":"Pending"===e?"text-pending":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const bNe=(0,_t.Z)(xNe,[["render",yNe]]);var kNe=bNe;const DNe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Request history",-1),CNe={key:0,class:"shadow-md"},PNe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),SNe=[PNe],zNe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},NNe={class:"intro-x flex items-center h-10"},TNe={class:"ml-auto text-primary"},MNe={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},INe={class:"before:block before:absolute before:w-20 before:h-px before:bg-slate-200 before:dark:bg-darkmode-400 before:mt-5 before:ml-5"},UNe={class:"w-10 h-10 flex-none image-fit rounded-full overflow-hidden"},ENe=["title","src"],FNe={key:1,src:Kb,alt:"profilecustomer",class:"rounded-full"},$Ne={class:"box px-5 py-3 ml-4 flex-1 zoom-in"},ANe={class:"flex items-center"},BNe={class:"font-medium"},qNe={class:"text-xs text-slate-500 ml-auto"};function jNe(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[DNe,r.loading?((0,i.wg)(),(0,i.iD)("label",CNe,SNe)):(0,i.kq)("",!0),(0,i._)("div",zNe,[(0,i._)("div",NNe,[(0,i._)("div",TNe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back ")])]),(0,i._)("div",MNe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.transactions,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"intro-x relative flex items-center mb-3"},[(0,i._)("div",INe,[(0,i._)("div",UNe,[a.changedBy.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.changedBy.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,ENe)):((0,i.wg)(),(0,i.iD)("img",FNe))])]),(0,i._)("div",$Ne,[(0,i._)("div",ANe,[(0,i._)("div",BNe,(0,Ns.zw)(a.changedBy.firstName)+" "+(0,Ns.zw)(a.changedBy.lastName),1),(0,i._)("div",qNe,(0,Ns.zw)(l.formatDateWithTime(a.date)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])))),128))])])])}var VNe={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{goBack(){this.$router.go(-1)},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/request/get/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=a.data.customerRequest.statusHistory,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const LNe=(0,_t.Z)(VNe,[["render",jNe]]);var ZNe=LNe;const RNe=(0,i.uE)('<div class="intro-y flex items-center mt-8"><h2 class="text-lg font-medium mr-auto">FAQ</h2></div><div class="grid grid-cols-12 gap-6"><div class="intro-y col-span-12 lg:col-span-4 xl:col-span-3"><div class="box mt-5"><div class="p-5"><a class="flex items-center text-primary font-medium" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> About Our Products </a><a class="flex items-center mt-5" href="#"><i data-lucide="box" class="w-4 h-4 mr-2"></i> Related License </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Single Application License </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Multi Application License </a></div><div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400"><a class="flex items-center" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> Trem of Use </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Product Review </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Privacy Policy </a></div><div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400"><a class="flex items-center" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> About Our Products </a><a class="flex items-center mt-5" href="#"><i data-lucide="box" class="w-4 h-4 mr-2"></i> Related License </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Single Application License </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Multi Application License </a></div></div></div><div class="intro-y col-span-12 lg:col-span-8 xl:col-span-9"><div class="intro-y box lg:mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">About Our Products</h2></div><div id="faq-accordion-1" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-1" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-1" aria-expanded="true" aria-controls="faq-accordion-collapse-1"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-1" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-1" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-2" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-2" aria-expanded="false" aria-controls="faq-accordion-collapse-2"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-2" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-2" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-3" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-3" aria-expanded="false" aria-controls="faq-accordion-collapse-3"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-3" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-3" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-4" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-4" aria-expanded="false" aria-controls="faq-accordion-collapse-4"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-4" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-4" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div><div class="intro-y box mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">Related License</h2></div><div id="faq-accordion-2" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-5" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-5" aria-expanded="true" aria-controls="faq-accordion-collapse-5"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-5" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-5" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-6" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-6" aria-expanded="false" aria-controls="faq-accordion-collapse-6"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-6" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-6" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-7" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-7" aria-expanded="false" aria-controls="faq-accordion-collapse-7"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-7" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-7" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-8" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-8" aria-expanded="false" aria-controls="faq-accordion-collapse-8"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-8" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-8" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div><div class="intro-y box mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"> Single Application License </h2></div><div id="faq-accordion-3" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-9" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-9" aria-expanded="true" aria-controls="faq-accordion-collapse-9"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-9" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-9" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-10" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-10" aria-expanded="false" aria-controls="faq-accordion-collapse-10"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-10" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-10" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-11" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-11" aria-expanded="false" aria-controls="faq-accordion-collapse-11"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-11" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-11" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-12" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-12" aria-expanded="false" aria-controls="faq-accordion-collapse-12"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-12" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-12" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div></div></div>',2);function WNe(e,t){return RNe}const HNe={},ONe=(0,_t.Z)(HNe,[["render",WNe]]);var YNe=ONe,KNe=a.p+"img/error-illustration.e408b457.svg";const GNe=(0,i.uE)('<div class="error-page flex flex-col lg:flex-row items-center justify-center h-screen text-center lg:text-left"><div class="-intro-x lg:mr-20"><img alt="Midone - HTML Admin Template" class="h-48 lg:h-auto" src="'+KNe+'"></div><div class="text-white mt-10 lg:mt-0"><div class="intro-x text-8xl font-medium">404</div><div class="intro-x text-xl lg:text-3xl font-medium mt-5">Oops. This page has gone missing.</div><div class="intro-x text-lg mt-3">You may have mistyped the address or the page may have moved.</div><button class="intro-x btn py-3 px-4 text-white border-white dark:border-darkmode-400 dark:text-slate-200 mt-10">Back to Home</button></div></div>',1),JNe=[GNe];function QNe(e,t){return(0,i.wg)(),(0,i.iD)("div",null,JNe)}const XNe={},eTe=(0,_t.Z)(XNe,[["render",QNe]]);var tTe=eTe;const aTe=e=>((0,i.dD)("data-v-eff1a282"),e=e(),(0,i.Cn)(),e),sTe={class:"login"},rTe={class:"sm:px-10"},iTe={class:"block xl:grid grid-cols-2 gap-4"},lTe=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen" data-v-eff1a282><a href="#" class="-intro-x flex items-center pt-5" data-v-eff1a282><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'" data-v-eff1a282><span class="text-white text-lg ml-3" data-v-eff1a282> Mediplus </span></a><div class="my-auto" data-v-eff1a282><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'" data-v-eff1a282><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10" data-v-eff1a282><br data-v-eff1a282> Create a new password </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400" data-v-eff1a282></div></div></div>',1),nTe={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},oTe={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},cTe=aTe((()=>(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Create new password ",-1))),dTe=aTe((()=>(0,i._)("div",{class:"invalid-feedback"},null,-1))),uTe=aTe((()=>(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"},null,-1))),pTe={class:"intro-x mt-8"},mTe=aTe((()=>(0,i._)("div",{class:"invalid-feedback"},null,-1))),hTe=(0,i.uE)('<div class="intro-x mt-5 xl:mt-8 text-center xl:text-left" data-v-eff1a282><button class="btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top" type="submit" data-v-eff1a282> Create </button></div><div class="intro-x mt-10 xl:mt-24 text-slate-600 dark:text-slate-500 text-center xl:text-left" data-v-eff1a282> By signin up, you agree to our <a class="text-primary dark:text-slate-200" href="#" data-v-eff1a282>Terms and Conditions</a> &amp; <a class="text-primary dark:text-slate-200" href="#" data-v-eff1a282>Privacy Policy</a></div>',2);function gTe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",sTe,[(0,i._)("div",rTe,[(0,i._)("div",iTe,[lTe,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...t)=>e.onLogin&&e.onLogin(...t)),["prevent"]))},[(0,i._)("div",nTe,[(0,i._)("div",oTe,[cTe,dTe,uTe,(0,i._)("div",pTe,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.newPassword=e),class:"intro-x login__input form-control py-3 px-4 block",placeholder:"insert a new password"},null,512),[[s.nr,l.newPassword]]),(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.retrynewPassword=e),class:"intro-x login__input form-control py-3 px-4 block mt-4",placeholder:"insert password again"},null,512),[[s.nr,l.retrynewPassword]]),mTe]),hTe])])],32)])])])}var fTe={data(){return{newPassword:"",retrynewPassword:"",token:null}},methods:{resetPassword(){this.errors={};let e={newPassword:this.newPassword,retrynewPassword:this.retrynewPassword,token:this.$route.params.token};r.Z.post("/reset-password",e).then((e=>{200===e.status&&(this.$emit("loginSuccess"),this.$router.go("/"))})).catch((e=>{e.response&&e.response.data&&e.response.data.error&&(this.errors={email:[e.response.data.error]},console.log(this.errors))}))}}};const wTe=(0,_t.Z)(fTe,[["render",gTe],["__scopeId","data-v-eff1a282"]]);var vTe=wTe;const _Te={class:"login"},yTe={class:"sm:px-10"},xTe={class:"block xl:grid grid-cols-2 gap-4"},bTe=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen"><a href="#" class="-intro-x flex items-center pt-5"><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'"><span class="text-white text-lg ml-3"> Mediplus </span></a><div class="my-auto"><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'"><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10"><br> Recover your account. </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400"></div></div></div>',1),kTe={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},DTe={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},CTe=(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Forget password ",-1),PTe={key:0,class:"invalid-feedback"},STe=(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"}," Sign in to your account.. ",-1),zTe={class:"intro-x mt-8"},NTe={key:0,class:"invalid-feedback"},TTe={class:"intro-h mt-5 xl:mt-8 text-center xl:text-left"},MTe=(0,i._)("button",{class:"btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit"}," Recover ",-1),ITe=(0,i._)("button",{class:"btn btn-secondary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit"}," Login ",-1);function UTe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",_Te,[(0,i._)("div",yTe,[(0,i._)("div",xTe,[bTe,(0,i._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>n.onLogin&&n.onLogin(...e)),["prevent"]))},[(0,i._)("div",kTe,[(0,i._)("div",DTe,[CTe,l.errors.email?((0,i.wg)(),(0,i.iD)("div",PTe,(0,Ns.zw)(l.errors.email[0]),1)):(0,i.kq)("",!0),STe,(0,i._)("div",zTe,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block",{"is-invalid":l.errors.email}]),placeholder:"Email"},null,2),[[s.nr,l.email]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",NTe,(0,Ns.zw)(l.errors.password[0]),1)):(0,i.kq)("",!0)]),(0,i._)("div",TTe,[MTe,(0,i.Wm)(o,{to:"/login"},{default:(0,i.w5)((()=>[ITe])),_:1})])])])],32)])])])}var ETe={data(){return{email:"",errors:{}}},methods:{onLogin(){this.errors={};let e={email:this.email};r.Z.post("/forgot-password",e).then((e=>{200===e.status&&(localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role),this.$emit("Email sent"),$r().fire({icon:"success",title:"Password reset email sent...",text:"Check you email"})),this.email=""})).catch((e=>{e.response&&e.response.data&&e.response.data.error&&(console.log(e.response.data),$r().fire({icon:"error",title:"Oops...",text:e.response.data.error}))}))}},beforeRouteEnter(e,t,a){const s=localStorage.getItem("token");s?a({name:"Dashboard"}):a()}};const FTe=(0,_t.Z)(ETe,[["render",UTe]]);var $Te=FTe;const ATe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Transactions in progress",-1),BTe={key:0,class:"shadow-md"},qTe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),jTe=[qTe],VTe={class:"grid grid-cols-12 gap-6 mt-8"},LTe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ZTe={class:"flex w-full sm:w-auto"},RTe={class:"w-48 relative text-slate-500"},WTe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),HTe={class:"ml-1"},OTe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),YTe=[OTe],KTe={class:"hidden xl:block mx-auto text-slate-500"},GTe=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),JTe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},QTe={class:"table table-report -mt-2"},XTe=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),eMe={class:"w-40 !py-4"},tMe={class:"decoration-dotted whitespace-nowrap"},aMe={class:"w-40 !py-4"},sMe={key:0,class:"decoration-dotted whitespace-nowrap"},rMe={key:1,class:"decoration-dotted whitespace-nowrap"},iMe={class:"w-40 !py-4"},lMe={class:"decoration-dotted whitespace-nowrap"},nMe={class:"w-40"},oMe={class:"font-medium whitespace-nowrap"},cMe={class:"text-center"},dMe={key:0,class:"flex items-center justify-center whitespace-nowrap"},uMe={key:1,class:"flex items-center justify-center whitespace-nowrap"},pMe={class:"whitespace-nowrap"},mMe={class:"whitespace-nowrap"},hMe={class:"whitespace-nowrap"},gMe={class:"w-40 !py-4"},fMe={class:"table-report__action"},wMe={class:"flex justify-center items-center"},vMe=["onClick"],_Me=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),yMe={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},xMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),bMe={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},kMe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),DMe={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},CMe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),PMe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},SMe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),zMe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),NMe=[SMe,zMe],TMe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},MMe={class:"w-full sm:w-auto sm:mr-auto"},IMe={class:"pagination"},UMe={class:"page-item"},EMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),FMe=[EMe],$Me=["onClick"],AMe={class:"page-item"},BMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),qMe=[BMe],jMe=(0,i._)("option",null,"10",-1),VMe=(0,i._)("option",null,"25",-1),LMe=(0,i._)("option",null,"35",-1),ZMe=(0,i._)("option",null,"50",-1),RMe=(0,i._)("option",null,"100",-1),WMe=(0,i._)("option",null,"500",-1),HMe=(0,i._)("option",null,"1000",-1),OMe=[jMe,VMe,LMe,ZMe,RMe,WMe,HMe],YMe={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},KMe={class:"modal-dialog"},GMe={class:"modal-content"},JMe={class:"modal-body p-0"},QMe={class:"p-5 text-center"},XMe=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),eIe=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),tIe={class:"text-slate-500 mt-2"},aIe=["href"],sIe=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function rIe(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[ATe,l.loading?((0,i.wg)(),(0,i.iD)("label",BTe,jTe)):(0,i.kq)("",!0),(0,i._)("div",VTe,[(0,i._)("div",LTe,[(0,i._)("div",ZTe,[(0,i._)("div",RTe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),WTe])]),(0,i._)("div",HTe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},YTe)]),(0,i._)("div",KTe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),GTe]),(0,i._)("div",JTe,[(0,i._)("table",QTe,[XTe,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",eMe,[(0,i._)("a",tMe,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",aMe,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",sMe,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",rMe," Individual "))]),(0,i._)("td",iMe,[(0,i._)("a",lMe,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",nMe,[(0,i._)("a",oMe,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",cMe,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",dMe,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",uMe,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",pMe,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",mMe,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",hMe,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",gMe,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",fMe,[(0,i._)("div",wMe,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[_Me,(0,i.Uk)(" Files ")],8,vMe),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",yMe,[xMe,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",bMe,[kMe,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",DMe,[CMe,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",PMe,NMe)):(0,i.kq)("",!0),(0,i._)("div",TMe,[(0,i._)("nav",MMe,[(0,i._)("ul",IMe,[(0,i._)("li",UMe,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},FMe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,$Me)],2)))),128)),(0,i._)("li",AMe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},qMe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},OMe,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",YMe,[(0,i._)("div",KMe,[(0,i._)("div",GMe,[(0,i._)("div",JMe,[(0,i._)("div",QMe,[XMe,eIe,(0,i._)("div",tIe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,aIe)])))),128))])])]),sIe])])])])])}var iIe={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else $r().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/inprogress",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Cn.P6.table_to_book(e);(0,Cn.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Sn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const lIe=(0,_t.Z)(iIe,[["render",rIe]]);var nIe=lIe;const oIe=[{path:"/",component:nn,name:"Dashboard",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/managerdashboard",component:Lpe,name:"Manager Dashboard",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/partner",component:Dz,name:"Partner",meta:{requiresAuth:!0,roles:["6","11"]}},{path:"/viewplan",component:Tn,name:"View Plan",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/allcustomers",component:g8,name:"View All Customers",meta:{requiresAuth:!0,roles:["1"]}},{path:"/createplan",component:ao,name:"Create Plan",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updateplan/:id",component:$o,name:"Edit Plan",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewservices/:id",component:Mc,name:"View Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createservice/:id",component:od,name:"Create Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateservice/:id",component:Rd,name:"Edit Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/customertransactions",component:Im,name:"Customer Transactions",meta:{requiresAuth:!0,roles:["1"]}},{path:"/customertransactiondetail/:id",component:Nh,name:"Customer Transaction Detail",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/canceltransaction/:id",component:Tg,name:"Cancel Transaction",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionspending",component:aw,name:"Pending Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsaproved",component:Sv,name:"Aproved Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionscanceled",component:X_,name:"Canceled Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionscompleted",component:Dx,name:"Completed Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsrevoked",component:Yb,name:"Revoked Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsinprogress",component:nIe,name:"In Progress Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionhitory/:id",component:FL,name:"Transaction Hitory",meta:{requiresAuth:!0,roles:["6","9"]}},{path:"/viewcompanytransactions/:id",component:$G,name:"View Company Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/chat",component:eD,name:"Chat",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/adminchat",component:cC,name:"Admin Chat Page",meta:{requiresAuth:!0,roles:["1"]}},{path:"/event",component:gC,name:"Event",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/createpartner",component:WC,name:"Create Partner",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatepartner/:id",component:MP,name:"Update Partner",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewpartner",component:LS,name:"View Partner",meta:{requiresAuth:!0,roles:["1"]}},{path:"/createpartneruser/:id",component:ZT,name:"Create Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updatepartneruser/:id",component:OM,name:"Update Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewpartneruser/:id",component:VI,name:"View Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/searchcustomer",component:Dz,name:"Search Customer",meta:{requiresAuth:!0,roles:["6"]}},{path:"/hospital",component:lN,name:"Hospital Search Customer",meta:{requiresAuth:!0,roles:["6"]}},{path:"/farmacy",component:qN,name:"Farmacy Search Customer",meta:{requiresAuth:!0,roles:["9"]}},{path:"/createtransaction/:id",component:pU,name:"Create Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/hospitaltransaction/:id",component:$U,name:"Hospital Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/farmacytransaction/:id",component:dE,name:"farmacy Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/updatetransaction/:id",component:iF,name:"Update Transaction",meta:{requiresAuth:!0,roles:["1","2","6"]}},{path:"/updatehospitaltransaction/:id",component:n$,name:"Update Hospital Transaction",meta:{requiresAuth:!0,roles:["6"]}},{path:"/mytransactions",component:zA,name:"My Transactions",meta:{requiresAuth:!0,roles:["6"]}},{path:"/alltransactions",component:OB,name:"All Transactions",meta:{requiresAuth:!0,roles:["6"]}},{path:"/transactiondetails/:id",component:Aj,name:"Transaction Detail",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/transactioninvoice/:id",component:TV,name:"Transaction Invoice",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/createcompany",component:mZ,name:"Create Company",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updatecompany/:id",component:eR,name:"Update Company",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewcompany",component:cW,name:"View Company",meta:{requiresAuth:!0,roles:["1"]}},{path:"/companymembers/:id",component:yH,name:"View Company Members",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createcorporate/:id",component:UO,name:"Create Company Member",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createbulkcorporate/:id",component:XO,name:"Create Bulk Company Employers",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatecorporate/:id",component:uK,name:"Update Company Member",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/customerprofile/:id",component:Yfe,name:"Customer Profile",meta:{requiresAuth:!0,roles:["1","2","3","5","7","8"]}},{path:"/employerprofile/:id",component:Owe,name:"Employer Profile",meta:{requiresAuth:!0,roles:["1","2","3","6"]}},{path:"/dependentprofile/:id",component:j_e,name:"Dependent Profile",meta:{requiresAuth:!0,roles:["1","2","3","4","5","7","8"]}},{path:"/createdependentcorporate/:id",component:aQ,name:"Create Dependent Corporate",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createdependentindividual/:id",component:bX,name:"Create Dependent Individual",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatependentcorporate/:id",component:L0,name:"Update Dependent Corporate",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatedependentindividual/:id",component:n2,name:"Update Dependent Invididual",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createcustomer",component:_4,name:"Create Individual Customer",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewcustomer",component:a6,name:"View Individual Customer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewmycustomers",component:nse,name:"View My Individual Customer",meta:{requiresAuth:!0,roles:["2","3"]}},{path:"/updatecustomer/:id",component:Y5,name:"Update Individual Customer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createemployer/",component:_8,name:"Create Employer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateemployer/:id",component:k8,name:"Update Employer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/employermanagement/",component:I7,name:"Employer management",meta:{requiresAuth:!0,roles:["1"]}},{path:"/allmanagertransactions/",component:Koe,name:"All Manager Transactions",meta:{requiresAuth:!0,roles:["2"]}},{path:"/managerrequests/",component:Jce,name:"Manager Requests",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmyagents/",component:Xte,name:"View My Agents",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewindividualcustomer/",component:nse,name:"View My Invidividual Customer",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmanagercompanies/",component:hre,name:"View Manager Companies",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmyallcustomers/",component:yie,name:"View My All Customers",meta:{requiresAuth:!0,roles:["2"]}},{path:"/managerchatpage/",component:wle,name:"Manager Chat Page",meta:{requiresAuth:!0,roles:["2"]}},{path:"/createmyagent/",component:Qde,name:"Create My Agent",meta:{requiresAuth:!0,roles:["2"]}},{path:"/createagent/",component:$9,name:"Create Agent",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateeagent/:id",component:Hee,name:"Update Agent",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createadmin/",component:Zme,name:"Create Admin",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateadmin/:id",component:Khe,name:"Update Admin",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createmanager/",component:Vye,name:"Create Manager",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatemanager/:id",component:Wxe,name:"Update Manager",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/myservices",component:jbe,name:"My Services",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/usertransactions",component:aDe,name:"User Transactions",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/templatefiles",component:KDe,name:"Template Files",meta:{requiresAuth:!0,roles:["4","5","6","7","8"]}},{path:"/viewtemplatefiles",component:OCe,name:"View Template Files",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/createtemplatefile",component:hPe,name:"Create Template File",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/updatetemplatefile/:templateId",component:VPe,name:"Update Template File",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/viewrequestadmin",component:VSe,name:"View Customer Request",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewrequest",component:kNe,name:"View Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/createrequest",component:_ze,name:"Create Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/updaterequst",component:kze,name:"Update Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/requesthistory/:id",component:ZNe,name:"Request History",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/faq",component:YNe,name:"Faq",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/login",name:"Login",components:{default:qr,login:qr},meta:{requiresAuth:!1}},{path:"/signup",component:si},{path:"/:pathMatch(.*)*",name:"NotFound",component:tTe},{path:"/reset/:token",name:"Reset Token",component:vTe,meta:{requiresAuth:!1}},{path:"/forget-password",name:"Forget Password",component:$Te}],cIe=(0,wr.p7)({history:(0,wr.PO)(),routes:oIe});let dIe;function uIe(){clearTimeout(dIe),dIe=setTimeout((()=>{pIe(),window.location.replace("/login")}),9e5)}function pIe(){wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore")}async function mIe(e){try{const t=await r.Z.get("/api/check/verify-token/",{headers:{token:e}});return 200===t.status}catch(t){return wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore"),!1}}cIe.beforeEach(((e,t,a)=>{const s=wt.Z.get("token"),r=wt.Z.get("role");if(e.meta.requiresAuth&&!s||"false"===mIe(s)&&"Login"!==e.name)return pIe(),window.location.replace("/login"),a({path:"/login"});if("/"===e.path&&s){if("2"===r)return a({path:"/managerdashboard"});if("6"===r)return a({path:"/hospital"});if("9"===r)return a({path:"/farmacy"});if("4"===r||"5"===r||"6"===r||"8"===r)return a({path:"/usertransactions"})}if(e.meta.roles&&!e.meta.roles.includes(r))return a({name:"NotFound"});s&&uIe(),a()}));var hIe=cIe,gIe={},fIe={},wIe={async[ei](e,t){let a={firstName:"Mario",lastName:"Mario",gender:"male",relation:1,monthlyFee:"15487",memberShipID:"sddft4545re",idType:"ID",idNumber:"3454545656T",address:"Aeroporto",contact1:"849904322",contact2:"841585260",partnerLocation:"",userType:5,company:"649dd2ec9ed28e0d733bfb1a",plan:"649d27687ab4f8c23da44c4c",email:t.email,password:t.password};try{let e=await r.Z.post(`${r.Z.defaults.baseURL}/api/signup`,a);200===e.status&&console.log("")}catch(s){console.error(s)}}},vIe={namespaced:!0,state(){return{name:"State Hama"}},mutations:gIe,getters:fIe,actions:wIe};const _Ie=(0,Xr.MT)({modules:{auth:vIe}});var yIe=_Ie;function xIe(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div")}var bIe={data(){return{notifications:[]}},created(){}};const kIe=(0,_t.Z)(bIe,[["render",xIe]]);var DIe=kIe,CIe=a(7851),PIe=a(484);r.Z.defaults.baseURL="http://localhost:8000",r.Z.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&401===e.response.status){let t=e.response.data.returnMessage;wt.Z.set("logoutReason",t);const a=r.Z.get("/api/logout");a.data.success&&(wt.Z.remove("token"),hIe.push("/login"))}return Promise.reject(e)}));const SIe=(0,s.ri)(hr);SIe.use(fr()),SIe.use(hIe),SIe.use(yIe),SIe.component("notification-component",DIe);const zIe=(0,CIe.ZP)("ws://localhost:8000",{transports:["websocket","polling","flashsocket"]});SIe.config.globalProperties.$socket=zIe,SIe.config.globalProperties.$socketStatus="connecting",zIe.on("connect",(()=>{console.log("Socket connected"),SIe.config.globalProperties.$socketStatus="connected"})),zIe.on("disconnect",(()=>{console.log("Socket disconnected"),SIe.config.globalProperties.$socketStatus="disconnected"})),SIe.component("vue-flatpickr",PIe.Z),SIe.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,i){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],i=e[d][2];for(var n=!0,o=0;o<s.length;o++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(n=!1,i<l&&(l=i));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var i=Object.create(null);a.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var n=2&r&&s;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){l[e]=function(){return s[e]}}));return l["default"]=function(){return s},a.d(i,l),i}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{128:"edff9f7e",617:"aff632da"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-authentication:";a.l=function(s,r,i,l){if(e[s])e[s].push(r);else{var n,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+i){n=u;break}}n||(o=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+i),n.src=s),e[s]=[r];var p=function(t,a){n.onerror=n.onload=null,clearTimeout(m);var r=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),o&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,s){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var i=new Promise((function(a,s){r=e[t]=[a,s]}));s.push(r[2]=i);var l=a.p+a.u(t),n=new Error,o=function(s){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.src;n.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",n.name="ChunkLoadError",n.type=i,n.request=l,r[1](n)}};a.l(l,o,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,l=s[0],n=s[1],o=s[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(o)var d=o(a)}for(t&&t(s);c<l.length;c++)i=l[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkvue_authentication"]=self["webpackChunkvue_authentication"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3799)}));s=a.O(s)})();
//# sourceMappingURL=app.15365a4c.js.map