(function(){"use strict";var e={4090:function(e,t,a){a(7658);var s=a(9242),r=a(4161),i=a(3396);const l={key:0,class:"fullcontent"},n={class:"flex mt-[4.7rem] md:mt-0 overflow-hidden"},o={class:"content"},c={key:1};function d(e,t,a,s,r,d){const u=(0,i.up)("MobileMenu"),p=(0,i.up)("SideMenu"),m=(0,i.up)("TopBar"),h=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[d.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(u),(0,i._)("div",n,[(0,i.Wm)(p),(0,i._)("div",o,[(0,i.Wm)(m),!d.isAuthenticated||d.isLoginRoute||d.isResetRoute||d.isForgetRoute?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(h,{key:0}))])])])):((0,i.wg)(),(0,i.iD)("div",c,[d.isResetRoute||d.isForgetRoute?((0,i.wg)(),(0,i.j4)(h,{key:0})):d.isLoginRoute?((0,i.wg)(),(0,i.j4)(h,{key:1})):(0,i.kq)("",!0)]))])}a(2801);var u=a.p+"img/logo.71910c9a.png";const p={class:"mobile-menu md:hidden"},m=(0,i.uE)('<div class="mobile-menu-bar"><a href="#" class="flex mr-auto"><img alt="logo" class="w-6" src="'+u+'"></a><a href="javascript:;" class="mobile-menu-toggler"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-2 w-8 h-8 text-white transform -rotate-90"><line x1="18" x2="18" y1="20" y2="10"></line><line x1="12" x2="12" y1="20" y2="4"></line><line x1="6" x2="6" y1="20" y2="14"></line></svg></a></div>',1),h={class:"scrollable"},g=(0,i._)("a",{href:"javascript:;",class:"mobile-menu-toggler"},[(0,i._)("i",{"data-lucide":"x-circle",class:"w-8 h-8 text-white transform -rotate-90"})],-1),f={class:"scrollable__content py-2"},w={key:0},v=(0,i._)("a",{href:"javascript:;",class:"menu"},[(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"menu__title"},"Home")],-1),_=[v],y={key:1},x=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-candlestick-chart"},[(0,i._)("path",{d:"M9 5v4"}),(0,i._)("rect",{width:"4",height:"6",x:"7",y:"9",rx:"1"}),(0,i._)("path",{d:"M9 15v2"}),(0,i._)("path",{d:"M17 3v2"}),(0,i._)("rect",{width:"4",height:"8",x:"15",y:"5",rx:"1"}),(0,i._)("path",{d:"M17 13v3"}),(0,i._)("path",{d:"M3 3v18h18"})])],-1),b=(0,i._)("div",{class:"menu__title"},"Services",-1),k={key:2},D=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),C=(0,i._)("div",{class:"menu__title"},"My Transactions",-1),P={key:0},S=(0,i._)("a",{href:"javascript:;",class:"menu"},[(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"menu__title"},"Home")],-1),z=[S],N={key:0},T=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg></div><div class="menu__title"> Individual <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),M={class:""},I={key:0},U=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),E=(0,i._)("div",{class:"menu__title"},"Add customer",-1),F={key:1},$=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),A=(0,i._)("div",{class:"menu__title"},"List customer",-1),B={key:2},q=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),j=(0,i._)("div",{class:"menu__title"},"List customer",-1),V={key:1},L=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building-2"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></svg></div><div class="menu__title"> Companies <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Z={class:""},R={key:0},W=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),H=(0,i._)("div",{class:"menu__title"},"Add company",-1),O={key:1},Y=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),K=(0,i._)("div",{class:"menu__title"},"List companies",-1),G={key:2},J=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Q=(0,i._)("div",{class:"menu__title"},"List companies",-1),X={key:2},ee=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-handshake"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"></path><path d="m18 15-2-2"></path><path d="m15 18-2-2"></path></svg></div><div class="menu__title"> Partner <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),te={class:""},ae=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),se=(0,i._)("div",{class:"menu__title"},"Add partner",-1),re=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ie=(0,i._)("div",{class:"menu__title"},"List partner",-1),le={key:3},ne=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),oe=(0,i._)("div",{class:"menu__title"},"All Customers",-1),ce={key:4},de=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),ue=(0,i._)("div",{class:"menu__title"},"All Customers",-1),pe={key:5,class:"side-nav__devider my-6"},me={key:6},he=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gantt-chart-square"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 8h7"></path><path d="M8 12h6"></path><path d="M11 16h5"></path></svg></div><div class="menu__title"> Plan <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),ge={class:""},fe={key:0},we=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ve=(0,i._)("div",{class:"menu__title"},"Add plan",-1),_e={key:1},ye=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),xe=(0,i._)("div",{class:"menu__title"},"List plan",-1),be={key:7},ke=(0,i.uE)('<a href="javascript:;" class="menu"><div class="menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog-2"><circle cx="18" cy="15" r="3"></circle><circle cx="8" cy="9" r="4"></circle><path d="M10.5 13.5A6 6 0 0 0 2 19"></path><path d="m21.7 16.4-.9-.3"></path><path d="m15.2 13.9-.9-.3"></path><path d="m16.6 18.7.3-.9"></path><path d="m19.1 12.2.3-.9"></path><path d="m19.6 18.7-.4-1"></path><path d="m16.8 12.3-.4-1"></path><path d="m14.3 16.6 1-.4"></path><path d="m20.7 13.8 1-.4"></path></svg></div><div class="menu__title"> Employer <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),De={class:"Create Agent"},Ce={key:0},Pe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Se=(0,i._)("div",{class:"menu__title"},"Employer managment",-1),ze={key:1},Ne=(0,i._)("div",{class:"menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Te=(0,i._)("div",{class:"menu__title"},"My Agents",-1),Me={key:8},Ie=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Ue=(0,i._)("div",{class:"menu__title"},"Chat",-1),Ee={key:9},Fe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),$e=(0,i._)("div",{class:"menu__title"},"Chat",-1),Ae={key:10},Be=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),qe=(0,i._)("div",{class:"menu__title"},"Chat",-1),je={key:11},Ve=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Le=(0,i._)("div",{class:"menu__title"},"Transactions",-1),Ze={key:12},Re=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),We=(0,i._)("div",{class:"menu__title"},"Transactions",-1),He={key:13},Oe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-git-pull-request-closed"},[(0,i._)("circle",{cx:"18",cy:"18",r:"3"}),(0,i._)("circle",{cx:"6",cy:"6",r:"3"}),(0,i._)("path",{d:"M18 11.5V15"}),(0,i._)("path",{d:"m21 3-6 6"}),(0,i._)("path",{d:"m21 9-6-6"}),(0,i._)("line",{x1:"6",x2:"6",y1:"9",y2:"21"})])],-1),Ye=(0,i._)("div",{class:"menu__title"},"Requests",-1),Ke={key:14},Ge=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),Je=(0,i._)("div",{class:"menu__title"},"My Requests",-1),Qe={key:15},Xe=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),et=(0,i._)("div",{class:"menu__title"},"Requests",-1),tt={key:16},at={key:17},st=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),rt=(0,i._)("div",{class:"menu__title"},"My Transactions",-1),it={key:18},lt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),nt=(0,i._)("div",{class:"menu__title"},"All Transactions",-1),ot=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1),ct={key:19},dt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ut=(0,i._)("div",{class:"menu__title"},"Template Files",-1),pt={key:20},mt=(0,i._)("div",{class:"menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ht=(0,i._)("div",{class:"menu__title"},"Template Files",-1),gt=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1);function ft(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",p,[m,(0,i._)("div",h,[g,(0,i._)("ul",f,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[l.hasRoute("Dashboard")?((0,i.wg)(),(0,i.iD)("li",w,_)):(0,i.kq)("",!0),l.hasRoute("My Services")?((0,i.wg)(),(0,i.iD)("li",y,[(0,i.Wm)(n,{to:"/myservices",class:"menu"},{default:(0,i.w5)((()=>[x,b])),_:1})])):(0,i.kq)("",!0),l.hasRoute("User Transactions")?((0,i.wg)(),(0,i.iD)("li",k,[(0,i.Wm)(n,{to:"/usertransactions",class:"menu"},{default:(0,i.w5)((()=>[D,C])),_:1})])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(n,{to:"/hospital"},{default:(0,i.w5)((()=>[l.hasRoute("Partner")?((0,i.wg)(),(0,i.iD)("li",P,z)):(0,i.kq)("",!0)])),_:1}),l.hasRoute("View Individual Customer")?((0,i.wg)(),(0,i.iD)("li",N,[T,(0,i._)("ul",M,[l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",I,[(0,i.Wm)(n,{to:"/createcustomer",class:"menu"},{default:(0,i.w5)((()=>[U,E])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",F,[(0,i.Wm)(n,{to:"/viewcustomer",class:"menu"},{default:(0,i.w5)((()=>[$,A])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Individual Customer")?((0,i.wg)(),(0,i.iD)("li",B,[(0,i.Wm)(n,{to:"/viewmycustomers",class:"menu"},{default:(0,i.w5)((()=>[q,j])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Company Members")?((0,i.wg)(),(0,i.iD)("li",V,[L,(0,i._)("ul",Z,[l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",R,[(0,i.Wm)(n,{to:"/createcompany",class:"menu"},{default:(0,i.w5)((()=>[W,H])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",O,[(0,i.Wm)(n,{to:"/viewcompany",class:"menu"},{default:(0,i.w5)((()=>[Y,K])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Manager Companies")?((0,i.wg)(),(0,i.iD)("li",G,[(0,i.Wm)(n,{to:"/viewmanagercompanies",class:"menu"},{default:(0,i.w5)((()=>[J,Q])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Partner")?((0,i.wg)(),(0,i.iD)("li",X,[ee,(0,i._)("ul",te,[(0,i._)("li",null,[(0,i.Wm)(n,{to:"/createpartner",class:"menu"},{default:(0,i.w5)((()=>[ae,se])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(n,{to:"/viewpartner",class:"menu"},{default:(0,i.w5)((()=>[re,ie])),_:1})])])])):(0,i.kq)("",!0),l.hasRoute("View All Customers")?((0,i.wg)(),(0,i.iD)("li",le,[(0,i.Wm)(n,{to:"/allcustomers",class:"menu"},{default:(0,i.w5)((()=>[ne,oe])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My All Customers")?((0,i.wg)(),(0,i.iD)("li",ce,[(0,i.Wm)(n,{to:"/viewmyallcustomers",class:"menu"},{default:(0,i.w5)((()=>[de,ue])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",pe)):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",me,[he,(0,i._)("ul",ge,[l.hasRoute("Create Plan")?((0,i.wg)(),(0,i.iD)("li",fe,[(0,i.Wm)(n,{to:"/createplan",class:"menu"},{default:(0,i.w5)((()=>[we,ve])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",_e,[(0,i.Wm)(n,{to:"/viewplan",class:"menu"},{default:(0,i.w5)((()=>[ye,xe])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Create Employer")?((0,i.wg)(),(0,i.iD)("li",be,[ke,(0,i._)("ul",De,[l.hasRoute("Employer management")?((0,i.wg)(),(0,i.iD)("li",Ce,[(0,i.Wm)(n,{to:"/employermanagement",class:"menu"},{default:(0,i.w5)((()=>[Pe,Se])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Agents")?((0,i.wg)(),(0,i.iD)("li",ze,[(0,i.Wm)(n,{to:"/viewmyagents",class:"menu"},{default:(0,i.w5)((()=>[Ne,Te])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Chat")?((0,i.wg)(),(0,i.iD)("li",Me,[(0,i.Wm)(n,{to:"/chat",class:"menu"},{default:(0,i.w5)((()=>[Ie,Ue])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ee,[(0,i.Wm)(n,{to:"/managerchatpage",class:"menu"},{default:(0,i.w5)((()=>[Fe,$e])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Admin Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ae,[(0,i.Wm)(n,{to:"/adminchat",class:"menu"},{default:(0,i.w5)((()=>[Be,qe])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",je,[(0,i.Wm)(n,{to:"/customertransactions",class:"menu"},{default:(0,i.w5)((()=>[Ve,Le])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Manager Transactions")?((0,i.wg)(),(0,i.iD)("li",Ze,[(0,i.Wm)(n,{to:"/allmanagertransactions",class:"menu"},{default:(0,i.w5)((()=>[Re,We])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Customer Request")?((0,i.wg)(),(0,i.iD)("li",He,[(0,i.Wm)(n,{to:"/viewrequestadmin",class:"menu"},{default:(0,i.w5)((()=>[Oe,Ye])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Request")?((0,i.wg)(),(0,i.iD)("li",Ke,[(0,i.Wm)(n,{to:"/viewrequest",class:"menu"},{default:(0,i.w5)((()=>[Ge,Je])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Requests")?((0,i.wg)(),(0,i.iD)("li",Qe,[(0,i.Wm)(n,{to:"/managerrequests",class:"menu"},{default:(0,i.w5)((()=>[Xe,et])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",tt)):(0,i.kq)("",!0),l.hasRoute("My Transactions")?((0,i.wg)(),(0,i.iD)("li",at,[(0,i.Wm)(n,{to:"/mytransactions",class:"menu"},{default:(0,i.w5)((()=>[st,rt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Transactions")?((0,i.wg)(),(0,i.iD)("li",it,[(0,i.Wm)(n,{to:"/alltransactions",class:"menu"},{default:(0,i.w5)((()=>[lt,nt])),_:1})])):(0,i.kq)("",!0),ot,l.hasRoute("Template Files")?((0,i.wg)(),(0,i.iD)("li",ct,[(0,i.Wm)(n,{to:"/templatefiles",class:"menu"},{default:(0,i.w5)((()=>[dt,ut])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Template Files")?((0,i.wg)(),(0,i.iD)("li",pt,[(0,i.Wm)(n,{to:"/viewtemplatefiles",class:"menu"},{default:(0,i.w5)((()=>[mt,ht])),_:1})])):(0,i.kq)("",!0),gt])])])])}var wt=a(680),vt={computed:{filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t}}},_t=a(89);const yt=(0,_t.Z)(vt,[["render",ft]]);var xt=yt;const bt={class:"side-nav"},kt=(0,i._)("img",{alt:"logo",class:"w-6",src:u},null,-1),Dt=(0,i._)("span",{class:"hidden xl:block text-white text-lg ml-3"}," Mediplus ",-1),Ct=(0,i._)("div",{class:"side-nav__devider my-6"},null,-1),Pt={key:0},St=(0,i._)("a",{href:"javascript:;",class:"side-menu"},[(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"side-menu__title"},"Home")],-1),zt=[St],Nt={key:1},Tt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-candlestick-chart"},[(0,i._)("path",{d:"M9 5v4"}),(0,i._)("rect",{width:"4",height:"6",x:"7",y:"9",rx:"1"}),(0,i._)("path",{d:"M9 15v2"}),(0,i._)("path",{d:"M17 3v2"}),(0,i._)("rect",{width:"4",height:"8",x:"15",y:"5",rx:"1"}),(0,i._)("path",{d:"M17 13v3"}),(0,i._)("path",{d:"M3 3v18h18"})])],-1),Mt=(0,i._)("div",{class:"side-menu__title"},"Services",-1),It={key:2},Ut=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Et=(0,i._)("div",{class:"side-menu__title"},"My Transactions",-1),Ft={key:0},$t=(0,i._)("a",{href:"javascript:;",class:"side-menu"},[(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-home"},[(0,i._)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,i._)("polyline",{points:"9 22 9 12 15 12 15 22"})])]),(0,i._)("div",{class:"side-menu__title"},"Home")],-1),At=[$t],Bt={key:0},qt=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><circle cx="12" cy="8" r="5"></circle><path d="M20 21a8 8 0 1 0-16 0"></path></svg></div><div class="side-menu__title"> Individual <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),jt={class:""},Vt={key:0},Lt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Zt=(0,i._)("div",{class:"side-menu__title"},"Add customer",-1),Rt={key:1},Wt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Ht=(0,i._)("div",{class:"side-menu__title"},"List customer",-1),Ot={key:2},Yt=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Kt=(0,i._)("div",{class:"side-menu__title"},"List customer",-1),Gt={key:1},Jt=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-building-2"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></svg></div><div class="side-menu__title"> Companies <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Qt={class:""},Xt={key:0},ea=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ta=(0,i._)("div",{class:"side-menu__title"},"Add company",-1),aa={key:1},sa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ra=(0,i._)("div",{class:"side-menu__title"},"List companies",-1),ia={key:2},la=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),na=(0,i._)("div",{class:"side-menu__title"},"List companies",-1),oa={key:2},ca=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-handshake"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66"></path><path d="m18 15-2-2"></path><path d="m15 18-2-2"></path></svg></div><div class="side-menu__title"> Partner <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),da={class:""},ua=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),pa=(0,i._)("div",{class:"side-menu__title"},"Add partner",-1),ma=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),ha=(0,i._)("div",{class:"side-menu__title"},"List partner",-1),ga={key:3},fa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),wa=(0,i._)("div",{class:"side-menu__title"},"All Customers",-1),va={key:4},_a=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-users-2"},[(0,i._)("path",{d:"M14 19a6 6 0 0 0-12 0"}),(0,i._)("circle",{cx:"8",cy:"9",r:"4"}),(0,i._)("path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8"})])],-1),ya=(0,i._)("div",{class:"side-menu__title"},"All Customers",-1),xa={key:5,class:"side-nav__devider my-6"},ba={key:6},ka=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gantt-chart-square"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 8h7"></path><path d="M8 12h6"></path><path d="M11 16h5"></path></svg></div><div class="side-menu__title"> Plan <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Da={class:""},Ca={key:0},Pa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Sa=(0,i._)("div",{class:"side-menu__title"},"Add plan",-1),za={key:1},Na=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),Ta=(0,i._)("div",{class:"side-menu__title"},"List plan",-1),Ma={key:7},Ia=(0,i.uE)('<a href="javascript:;" class="side-menu"><div class="side-menu__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog-2"><circle cx="18" cy="15" r="3"></circle><circle cx="8" cy="9" r="4"></circle><path d="M10.5 13.5A6 6 0 0 0 2 19"></path><path d="m21.7 16.4-.9-.3"></path><path d="m15.2 13.9-.9-.3"></path><path d="m16.6 18.7.3-.9"></path><path d="m19.1 12.2.3-.9"></path><path d="m19.6 18.7-.4-1"></path><path d="m16.8 12.3-.4-1"></path><path d="m14.3 16.6 1-.4"></path><path d="m20.7 13.8 1-.4"></path></svg></div><div class="side-menu__title"> Employer <div class="side-menu__sub-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"></path></svg></div></div></a>',1),Ua={class:"Create Agent"},Ea={key:0},Fa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),$a=(0,i._)("div",{class:"side-menu__title"},"Employer managment",-1),Aa={key:1},Ba=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("i",{"data-lucide":"activity"})],-1),qa=(0,i._)("div",{class:"side-menu__title"},"My Agents",-1),ja={key:8},Va=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),La=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Za={key:9},Ra=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Wa=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Ha={key:10},Oa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-message-square"},[(0,i._)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})])],-1),Ya=(0,i._)("div",{class:"side-menu__title"},"Chat",-1),Ka={key:11},Ga=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),Ja=(0,i._)("div",{class:"side-menu__title"},"Transactions",-1),Qa={key:12},Xa=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),es=(0,i._)("div",{class:"side-menu__title"},"Transactions",-1),ts={key:13},as=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-git-pull-request-closed"},[(0,i._)("circle",{cx:"18",cy:"18",r:"3"}),(0,i._)("circle",{cx:"6",cy:"6",r:"3"}),(0,i._)("path",{d:"M18 11.5V15"}),(0,i._)("path",{d:"m21 3-6 6"}),(0,i._)("path",{d:"m21 9-6-6"}),(0,i._)("line",{x1:"6",x2:"6",y1:"9",y2:"21"})])],-1),ss=(0,i._)("div",{class:"side-menu__title"},"Requests",-1),rs={key:14},is=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),ls=(0,i._)("div",{class:"side-menu__title"},"My Requests",-1),ns={key:15},os=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-bar-chart"},[(0,i._)("path",{d:"M19 21V4H5v16m0-16h14l-4 4-4-4z"})])],-1),cs=(0,i._)("div",{class:"side-menu__title"},"Requests",-1),ds={key:16},us={key:17},ps=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),ms=(0,i._)("div",{class:"side-menu__title"},"My Transactions",-1),hs={key:18},gs=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-badge-cent"},[(0,i._)("path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"}),(0,i._)("path",{d:"M12 7v10"}),(0,i._)("path",{d:"M15.4 10a4 4 0 1 0 0 4"})])],-1),fs=(0,i._)("div",{class:"side-menu__title"},"All Transactions",-1),ws=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1),vs={key:19},_s=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ys=(0,i._)("div",{class:"side-menu__title"},"Template Files",-1),xs={key:20},bs=(0,i._)("div",{class:"side-menu__icon"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-file-archive"},[(0,i._)("path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2"}),(0,i._)("polyline",{points:"14 2 14 8 20 8"}),(0,i._)("circle",{cx:"10",cy:"20",r:"2"}),(0,i._)("path",{d:"M10 7V6"}),(0,i._)("path",{d:"M10 12v-1"}),(0,i._)("path",{d:"M10 18v-2"})])],-1),ks=(0,i._)("div",{class:"side-menu__title"},"Template Files",-1),Ds=(0,i._)("li",{class:"side-nav__devider my-6"},null,-1);function Cs(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",bt,[(0,i.Wm)(n,{to:"/",class:"intro-x flex items-center pl-5 pt-4 mt-3"},{default:(0,i.w5)((()=>[kt,Dt])),_:1}),Ct,(0,i._)("ul",null,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[l.hasRoute("Dashboard")?((0,i.wg)(),(0,i.iD)("li",Pt,zt)):(0,i.kq)("",!0),l.hasRoute("My Services")?((0,i.wg)(),(0,i.iD)("li",Nt,[(0,i.Wm)(n,{to:"/myservices",class:"side-menu"},{default:(0,i.w5)((()=>[Tt,Mt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("User Transactions")?((0,i.wg)(),(0,i.iD)("li",It,[(0,i.Wm)(n,{to:"/usertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Ut,Et])),_:1})])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(n,{to:"/hospital"},{default:(0,i.w5)((()=>[l.hasRoute("Partner")?((0,i.wg)(),(0,i.iD)("li",Ft,At)):(0,i.kq)("",!0)])),_:1}),l.hasRoute("View Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Bt,[qt,(0,i._)("ul",jt,[l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Vt,[(0,i.Wm)(n,{to:"/createcustomer",class:"side-menu"},{default:(0,i.w5)((()=>[Lt,Zt])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Rt,[(0,i.Wm)(n,{to:"/viewcustomer",class:"side-menu"},{default:(0,i.w5)((()=>[Wt,Ht])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Individual Customer")?((0,i.wg)(),(0,i.iD)("li",Ot,[(0,i.Wm)(n,{to:"/viewmycustomers",class:"side-menu"},{default:(0,i.w5)((()=>[Yt,Kt])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Company Members")?((0,i.wg)(),(0,i.iD)("li",Gt,[Jt,(0,i._)("ul",Qt,[l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",Xt,[(0,i.Wm)(n,{to:"/createcompany",class:"side-menu"},{default:(0,i.w5)((()=>[ea,ta])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Create Company")?((0,i.wg)(),(0,i.iD)("li",aa,[(0,i.Wm)(n,{to:"/viewcompany",class:"side-menu"},{default:(0,i.w5)((()=>[sa,ra])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Manager Companies")?((0,i.wg)(),(0,i.iD)("li",ia,[(0,i.Wm)(n,{to:"/viewmanagercompanies",class:"side-menu"},{default:(0,i.w5)((()=>[la,na])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("View Partner")?((0,i.wg)(),(0,i.iD)("li",oa,[ca,(0,i._)("ul",da,[(0,i._)("li",null,[(0,i.Wm)(n,{to:"/createpartner",class:"side-menu"},{default:(0,i.w5)((()=>[ua,pa])),_:1})]),(0,i._)("li",null,[(0,i.Wm)(n,{to:"/viewpartner",class:"side-menu"},{default:(0,i.w5)((()=>[ma,ha])),_:1})])])])):(0,i.kq)("",!0),l.hasRoute("View All Customers")?((0,i.wg)(),(0,i.iD)("li",ga,[(0,i.Wm)(n,{to:"/allcustomers",class:"side-menu"},{default:(0,i.w5)((()=>[fa,wa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My All Customers")?((0,i.wg)(),(0,i.iD)("li",va,[(0,i.Wm)(n,{to:"/viewmyallcustomers",class:"side-menu"},{default:(0,i.w5)((()=>[_a,ya])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",xa)):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",ba,[ka,(0,i._)("ul",Da,[l.hasRoute("Create Plan")?((0,i.wg)(),(0,i.iD)("li",Ca,[(0,i.Wm)(n,{to:"/createplan",class:"side-menu"},{default:(0,i.w5)((()=>[Pa,Sa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Plan")?((0,i.wg)(),(0,i.iD)("li",za,[(0,i.Wm)(n,{to:"/viewplan",class:"side-menu"},{default:(0,i.w5)((()=>[Na,Ta])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Create Employer")?((0,i.wg)(),(0,i.iD)("li",Ma,[Ia,(0,i._)("ul",Ua,[l.hasRoute("Employer management")?((0,i.wg)(),(0,i.iD)("li",Ea,[(0,i.Wm)(n,{to:"/employermanagement",class:"side-menu"},{default:(0,i.w5)((()=>[Fa,$a])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View My Agents")?((0,i.wg)(),(0,i.iD)("li",Aa,[(0,i.Wm)(n,{to:"/viewmyagents",class:"side-menu"},{default:(0,i.w5)((()=>[Ba,qa])),_:1})])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),l.hasRoute("Chat")?((0,i.wg)(),(0,i.iD)("li",ja,[(0,i.Wm)(n,{to:"/chat",class:"side-menu"},{default:(0,i.w5)((()=>[Va,La])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Chat Page")?((0,i.wg)(),(0,i.iD)("li",Za,[(0,i.Wm)(n,{to:"/managerchatpage",class:"side-menu"},{default:(0,i.w5)((()=>[Ra,Wa])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Admin Chat Page")?((0,i.wg)(),(0,i.iD)("li",Ha,[(0,i.Wm)(n,{to:"/adminchat",class:"side-menu"},{default:(0,i.w5)((()=>[Oa,Ya])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",Ka,[(0,i.Wm)(n,{to:"/customertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Ga,Ja])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Manager Transactions")?((0,i.wg)(),(0,i.iD)("li",Qa,[(0,i.Wm)(n,{to:"/allmanagertransactions",class:"side-menu"},{default:(0,i.w5)((()=>[Xa,es])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Customer Request")?((0,i.wg)(),(0,i.iD)("li",ts,[(0,i.Wm)(n,{to:"/viewrequestadmin",class:"side-menu"},{default:(0,i.w5)((()=>[as,ss])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Request")?((0,i.wg)(),(0,i.iD)("li",rs,[(0,i.Wm)(n,{to:"/viewrequest",class:"side-menu"},{default:(0,i.w5)((()=>[is,ls])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Manager Requests")?((0,i.wg)(),(0,i.iD)("li",ns,[(0,i.Wm)(n,{to:"/managerrequests",class:"side-menu"},{default:(0,i.w5)((()=>[os,cs])),_:1})])):(0,i.kq)("",!0),l.hasRoute("Customer Transactions")?((0,i.wg)(),(0,i.iD)("li",ds)):(0,i.kq)("",!0),l.hasRoute("My Transactions")?((0,i.wg)(),(0,i.iD)("li",us,[(0,i.Wm)(n,{to:"/mytransactions",class:"side-menu"},{default:(0,i.w5)((()=>[ps,ms])),_:1})])):(0,i.kq)("",!0),l.hasRoute("All Transactions")?((0,i.wg)(),(0,i.iD)("li",hs,[(0,i.Wm)(n,{to:"/alltransactions",class:"side-menu"},{default:(0,i.w5)((()=>[gs,fs])),_:1})])):(0,i.kq)("",!0),ws,l.hasRoute("Template Files")?((0,i.wg)(),(0,i.iD)("li",vs,[(0,i.Wm)(n,{to:"/templatefiles",class:"side-menu"},{default:(0,i.w5)((()=>[_s,ys])),_:1})])):(0,i.kq)("",!0),l.hasRoute("View Template Files")?((0,i.wg)(),(0,i.iD)("li",xs,[(0,i.Wm)(n,{to:"/viewtemplatefiles",class:"side-menu"},{default:(0,i.w5)((()=>[bs,ks])),_:1})])):(0,i.kq)("",!0),Ds])])])}var Ps={computed:{filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t}}};const Ss=(0,_t.Z)(Ps,[["render",Cs]]);var zs=Ss,Ns=a(7139),Ts=a.p+"img/logo.00c55a06.png";const Ms=e=>((0,i.dD)("data-v-1df3e0ee"),e=e(),(0,i.Cn)(),e),Is={class:"notification-container"},Us=Ms((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-alert-circle w-6 h-6 mr-2"},[(0,i._)("circle",{cx:"12",cy:"12",r:"10"}),(0,i._)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i._)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})],-1))),Es=Ms((()=>(0,i._)("button",{type:"button",class:"btn-close text-white","data-tw-dismiss":"alert","aria-label":"Close"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-x w-4 h-4"},[(0,i._)("path",{d:"M18 6 6 18"}),(0,i._)("path",{d:"m6 6 12 12"})])],-1))),Fs={key:0,class:"notification-container"},$s=Ms((()=>(0,i._)("i",{"data-lucide":"alert-triangle",class:"w-6 h-6 mr-2"},null,-1))),As={class:"notification-content"},Bs=Ms((()=>(0,i._)("button",{type:"button",class:"btn-close","data-tw-dismiss":"alert","aria-label":"Close"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-x"},[(0,i._)("path",{d:"M18 6 6 18"}),(0,i._)("path",{d:"m6 6 12 12"})])],-1))),qs={class:"top-bar -mx-4 px-4 md:mx-0 md:px-0"},js={"aria-label":"breadcrumb",class:"-intro-x mr-auto hidden sm:flex"},Vs={class:"breadcrumb"},Ls=Ms((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"#"},"Application")],-1))),Zs={class:"breadcrumb-item active","aria-current":"page"},Rs={class:"intro-x dropdown w-8 h-8"},Ws={class:"dropdown-toggle w-8 h-8 rounded-full overflow-hidden shadow-lg image-fit zoom-in",role:"button","aria-expanded":"false","data-tw-toggle":"dropdown"},Hs=["src"],Os={key:1,src:Ts,alt:"profilecustomer",class:"rounded-full"},Ys={class:"dropdown-menu w-56"},Ks={class:"dropdown-content bg-primary text-white"},Gs={class:"p-2"},Js={class:"font-medium"},Qs={class:"text-xs text-white/70 mt-0.5 dark:text-slate-500"},Xs=Ms((()=>(0,i._)("li",null,[(0,i._)("hr",{class:"dropdown-divider border-white/[0.08]"})],-1))),er={key:0},tr=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),ar={key:1},sr=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),rr={key:2},ir=Ms((()=>(0,i._)("a",{class:"dropdown-item hover:bg-white/5"},[(0,i._)("i",{"data-lucide":"user",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Profile ")],-1))),lr=Ms((()=>(0,i._)("li",null,[(0,i._)("hr",{class:"dropdown-divider border-white/[0.08]"})],-1))),nr=Ms((()=>(0,i._)("i",{"data-lucide":"toggle-right",class:"w-4 h-4 mr-2"},null,-1)));function or(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Is,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.notifications,(e=>((0,i.wg)(),(0,i.j4)(n,{key:e.id,class:"alert alert-primary alert-dismissible show flex items-center mb-2 notification",role:"alert",to:`/customertransactiondetail/${e.transactionId}`},{default:(0,i.w5)((()=>[Us,(0,i.Uk)(" "+(0,Ns.zw)(e.message)+" ",1),Es])),_:2},1032,["to"])))),128))]),r.notifications.length>0?((0,i.wg)(),(0,i.iD)("div",Fs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.reversedNotifications,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"alert alert-success alert-dismissible show flex items-center mb-2",role:"alert"},[$s,(0,i._)("div",As,(0,Ns.zw)(e),1),Bs])))),128))])):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i._)("div",qs,[(0,i._)("nav",js,[(0,i._)("ol",Vs,[Ls,(0,i._)("li",Zs,(0,Ns.zw)(l.currentRouteName),1)])]),(0,i._)("div",Rs,[(0,i._)("div",Ws,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,Hs)):((0,i.wg)(),(0,i.iD)("img",Os))]),(0,i._)("div",Ys,[(0,i._)("ul",Ks,[(0,i._)("li",Gs,[(0,i._)("div",Js,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",Qs,(0,Ns.zw)(l.getRole(r.role)),1)]),Xs,1===r.role||2===r.role||3===r.role||6===r.role?((0,i.wg)(),(0,i.iD)("li",er,[(0,i.Wm)(n,{to:`/employerprofile/${r.userID}`},{default:(0,i.w5)((()=>[tr])),_:1},8,["to"])])):(0,i.kq)("",!0),4===r.role||5===r.role?((0,i.wg)(),(0,i.iD)("li",ar,[(0,i.Wm)(n,{to:`/customerprofile/${r.userID}`},{default:(0,i.w5)((()=>[sr])),_:1},8,["to"])])):(0,i.kq)("",!0),7===r.role||8===r.role?((0,i.wg)(),(0,i.iD)("li",rr,[(0,i.Wm)(n,{to:`/dependentprofile/${r.userID}`},{default:(0,i.w5)((()=>[ir])),_:1},8,["to"])])):(0,i.kq)("",!0),lr,(0,i._)("li",null,[(0,i._)("a",{href:"#",class:"dropdown-item hover:bg-white/5",onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e))},[nr,(0,i.Uk)(" Logout ")])])])])])])])],64)}var cr={data(){return{avatar:null,routeName:null,firstName:"",lastName:"",role:"",ogv:null,userID:"",notifications:[],showNotificationsDropdown:!1}},computed:{reversedNotifications(){return this.notifications.slice().reverse()},currentRouteName(){return this.$route.name},filteredRoutes(){try{const e=wt.Z.get("token"),t=wt.Z.get("role"),a=this.$router.options.routes,s=a.filter((a=>!(a.meta&&a.meta.requiresAuth&&!e)&&!(a.meta&&a.meta.roles&&!a.meta.roles.includes(t))));return s}catch(e){return console.error("Error in filteredRoutes:",e),[]}}},methods:{getProfile(){const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{const t=e.data.user;this.firstName=t.firstName,this.lastName=t.lastName,this.idType=t.idType,this.idNumber=t.idNumber,this.avatar=t.avatar,this.dob=this.formatDate(t.dob),this.gender=t.gender,this.role=t.role,this.password=t.password,this.email=t.email,this.address=t.address,this.contact1=t.contact1,this.contact2=t.contact2,this.userID=t._id,this.status=t.status})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},async logout(){wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore"),this.$router.go("/login")},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace(/\\/g,"/")}`:`${r.Z.defaults.baseURL}/path/to/default/image/logow.png`},hasRoute(e){const t=this.filteredRoutes.some((t=>t.name===e));return t},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":4===e||5===e?"Customer":6===e?"Partner":7===e||8===e?"Dependent":""}},created(){this.getProfile(),this.$socket.on("notification",(e=>{console.log("Received notification:",e),this.notifications.push(e)}));const e=new EventSource("https://localhost/api/notifications");e.addEventListener("message",(e=>{const t=JSON.parse(e.data);this.notifications.push(t)}))},mounted(){const e=wt.Z.get("token");r.Z.get("/me",{headers:{token:e,withCredentials:!0}}).then((e=>{const t=e.data;if(t.success){const e=t.user;this.response=e,this.userID=e._id,this.$socket.emit("user-online",this.userID)}else console.error("Failed to retrieve user profile")})).catch((e=>{console.error("Error:",e)}))}};const dr=(0,_t.Z)(cr,[["render",or],["__scopeId","data-v-1df3e0ee"]]);var ur=dr,pr={name:"App",components:{TopBar:ur,SideMenu:zs,MobileMenu:xt},computed:{isAuthenticated(){const e=wt.Z.get("token");return!!e&&this.isTokenValid(e)},isLoginRoute(){return"Login"===this.$route.name},isResetRoute(){return"Reset Token"===this.$route.name},isForgetRoute(){return"Forget Password"===this.$route.name}},methods:{isTokenValid(e){if(!e)return!1;try{const t=JSON.parse(atob(e.split(".")[1])),a=t?.exp,s=Math.floor(Date.now()/1e3);return s<a}catch(t){return console.error("Invalid token format"),!1}}}};const mr=(0,_t.Z)(pr,[["render",d]]);var hr=mr,gr=a(5269),fr=a.n(gr),wr=a(2483),vr=a.p+"img/illustration2.d014bc52.svg";const _r={class:"login"},yr={class:"sm:px-10"},xr={class:"block xl:grid grid-cols-2 gap-4"},br=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen"><a href="#" class="-intro-x flex items-center pt-5"><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'"><span class="text-white text-lg ml-3"> Mediplus </span></a><div class="my-auto"><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'"><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10"><br> Sign in to your account. </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400"></div></div></div>',1),kr={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},Dr={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},Cr=(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Sign In ",-1),Pr={key:0,class:"spinner",style:{"font-size":"18px"}},Sr=(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"}," Sign in to your account.. ",-1),zr={class:"intro-x mt-8"},Nr={key:0,class:"invalid-feedback"},Tr={class:"intro-x flex text-slate-600 dark:text-slate-500 text-xs sm:text-sm mt-4"},Mr=(0,i._)("div",{class:"flex items-center mr-auto"},null,-1),Ir={class:"intro-x mt-5 xl:mt-8 text-center xl:text-left"},Ur=["disabled"],Er=(0,i._)("div",{class:"intro-x mt-10 xl:mt-24 text-slate-600 dark:text-slate-500 text-center xl:text-left"},[(0,i.Uk)(" By signin up, you agree to our "),(0,i._)("a",{class:"text-primary dark:text-slate-200",href:"#"},"Terms and Conditions"),(0,i.Uk)(" & "),(0,i._)("a",{class:"text-primary dark:text-slate-200",href:"#"},"Privacy Policy")],-1);function Fr(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",_r,[(0,i._)("div",yr,[(0,i._)("div",xr,[br,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>n.onLogin&&n.onLogin(...e)),["prevent"]))},[(0,i._)("div",kr,[(0,i._)("div",Dr,[Cr,l.loading?((0,i.wg)(),(0,i.iD)("div",Pr)):(0,i.kq)("",!0),Sr,(0,i._)("div",zr,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block",{"is-invalid":l.errors.email}]),placeholder:"Email"},null,2),[[s.nr,l.email]]),(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block mt-4",{"is-invalid":l.errors.password}]),placeholder:"Password"},null,2),[[s.nr,l.password]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",Nr,(0,Ns.zw)(l.errors.password[0]),1)):(0,i.kq)("",!0)]),(0,i._)("div",Tr,[Mr,(0,i.Wm)(o,{to:"/forget-password"},{default:(0,i.w5)((()=>[(0,i.Uk)("Forgot Password?")])),_:1})]),(0,i._)("div",Ir,[(0,i._)("button",{class:"btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit",disabled:l.btnLoading}," Login ",8,Ur)]),Er])])],32)])])])}var $r=a(5147),Ar=a.n($r),Br={data(){return{email:"",password:"",btnLoading:!1,loading:!1,errors:{}}},methods:{async onLogin(){if(this.email&&this.password)try{this.loading=!0,this.btnLoading=!0;const e={email:this.email,password:this.password},t=await r.Z.post("/api/signin",e);200===t.status&&(wt.Z.set("token",t.data.token,{expires:7}),wt.Z.set("role",t.data.role,{expires:7}),this.$emit("loginSuccess"),this.$router.go("/"))}catch(e){e.response&&e.response.data&&e.response.data.error?(this.errors={email:[e.response.data.error]},console.log(this.errors),Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${this.errors.email}`,timer:3e3,showConfirmButton:!1,position:"top-end"})):Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again later."})}finally{this.loading=!1,this.btnLoading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Both email and password are mandatory.",timer:3e3,showConfirmButton:!1,position:"top-end"})}},beforeRouteEnter(e,t,a){const s=wt.Z.get("token");s?a({name:"Dashboard"}):a()}};const qr=(0,_t.Z)(Br,[["render",Fr]]);var jr=qr;const Vr={class:"row"},Lr={class:"col-md-6 offset-md-3"},Zr=(0,i._)("div",null,[(0,i._)("h3",null,"Signup"),(0,i._)("hr")],-1),Rr={class:"form-group"},Wr=(0,i._)("label",{for:"inputEmail"},"Email",-1),Hr={key:0,class:"error"},Or={class:"form-group"},Yr=(0,i._)("label",{for:"inputPassword"},"Password",-1),Kr={key:0,class:"error"},Gr=(0,i._)("button",{type:"submit",class:"btn btn-primary"},"Signup",-1);function Jr(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",Vr,[(0,i._)("div",Lr,[Zr,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)((e=>n.onSignup()),["prevent"]))},[(0,i._)("div",Rr,[Wr,(0,i.wy)((0,i._)("input",{type:"email",class:"form-control",id:"inputEmail",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e)},null,512),[[s.nr,l.email,void 0,{trim:!0}]]),l.errors.email?((0,i.wg)(),(0,i.iD)("div",Hr,(0,Ns.zw)(l.errors.email),1)):(0,i.kq)("",!0)]),(0,i._)("div",Or,[Yr,(0,i.wy)((0,i._)("input",{type:"password",class:"form-control",id:"inputPassword",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e)},null,512),[[s.nr,l.password,void 0,{trim:!0}]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",Kr,(0,Ns.zw)(l.errors.password),1)):(0,i.kq)("",!0)]),Gr],32)])])}class Qr{static checkEmail(e){const t=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)}static minLength(e,t){return e.length>=t}}class Xr{constructor(e,t,a){this.email=e,this.password=t,this.firstName=a}checkValidations(){const e={};return Qr.checkEmail(this.email)||(e.email="Invalid Email"),Qr.minLength(this.password,6)||(e.password="Password should be at least 6 characters long"),e}}var ei=a(65);const ti="[actions]  signup user";var ai={data(){return{email:"",password:"",errors:{}}},methods:{...(0,ei.nv)("auth",{signup:ti}),onSignup(){console.log("Ola");let e=new Xr(this.email,this.password);if(this.errors=e.checkValidations(),"email"in this.errors||"password"in this.errors)return!1;this.signup({email:this.email,password:this.password})}}};const si=(0,_t.Z)(ai,[["render",Jr]]);var ri=si;const ii={class:"grid grid-cols-12 gap-6"},li={class:"col-span-12 2xl:col-span-9"},ni={class:"grid grid-cols-12 gap-6"},oi={class:"col-span-12 mt-8"},ci=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Dashboard")],-1),di={class:"grid grid-cols-12 gap-6 mt-5"},ui={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},pi={class:"report-box zoom-in"},mi={class:"box p-5"},hi={class:"text-3xl font-medium leading-8 mt-6"},gi={key:0},fi={key:1},wi=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),vi=[wi],_i=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Customers",-1),yi={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},xi={class:"report-box zoom-in"},bi={class:"box p-5"},ki={class:"text-3xl font-medium leading-8 mt-6"},Di={key:0},Ci={key:1},Pi=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Si=[Pi],zi=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Companies",-1),Ni={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Ti={class:"report-box zoom-in"},Mi={class:"box p-5"},Ii={class:"text-3xl font-medium leading-8 mt-6"},Ui={key:0},Ei={key:1},Fi=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$i=[Fi],Ai=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Partners",-1),Bi={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},qi={class:"report-box zoom-in"},ji={class:"box p-5"},Vi={class:"text-3xl font-medium leading-8 mt-6"},Li={key:0},Zi={key:1},Ri=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Wi=[Ri],Hi=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Transactions ",-1),Oi={class:"col-span-12 lg:col-span-6 mt-8"},Yi=(0,i._)("div",{class:"intro-y block sm:flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Sales Report")],-1),Ki={class:"intro-y box p-5 mt-12 sm:mt-5"},Gi={class:"flex flex-col md:flex-row md:items-center"},Ji={class:"flex"},Qi={class:"text-primary dark:text-slate-300 text-lg xl:text-xl font-medium"},Xi=(0,i._)("div",{class:"mt-0.5 text-slate-500"},"This Month",-1),el=(0,i._)("div",{class:"w-px h-12 border border-r border-dashed border-slate-200 dark:border-darkmode-300 mx-4 xl:mx-5"},null,-1),tl={class:"text-slate-500 text-lg xl:text-xl font-medium"},al=(0,i._)("div",{class:"mt-0.5 text-slate-500"},"Last Month",-1),sl={class:"report-chart"},rl={class:"h-[275px]"},il={key:0,ref:"myChart",class:"mt-6 -mb-6"},ll={class:"col-span-12 sm:col-span-12 lg:col-span-6 mt-8"},nl=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Must Used Services ")],-1),ol={class:"intro-y box p-5 mt-12 sm:mt-5"},cl={class:"flex flex-col md:flex-row md:items-center justify-center"},dl={class:"h-[275px]"},ul={key:0,ref:"myChart2"},pl={class:"col-span-12 xl:col-span-4 mt-6"},ml=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Customer Requests ")],-1),hl={class:"mt-5"},gl={key:0,class:"intro-y"},fl=(0,i._)("div",{class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},[(0,i._)("img",{alt:"Midone - HTML Admin Template",src:""})],-1),wl={class:"ml-4 mr-auto"},vl={class:"font-medium"},_l={class:"text-slate-500 text-xs mt-0.5"},yl={key:1},xl=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),bl=[xl],kl=(0,i._)("a",{href:"#",class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),Dl={class:"col-span-12 2xl:col-span-3"},Cl={class:"2xl:border-l -mb-10 pb-10"},Pl={class:"2xl:pl-6 grid grid-cols-12 gap-x-6 2xl:gap-x-0 gap-y-6"},Sl={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3 2xl:mt-8"},zl=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Recent Pending Transactions ")],-1),Nl={class:"mt-5"},Tl={key:0},Ml={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Il={class:"ml mr-auto"},Ul={class:"font-medium"},El={class:"text-slate-500 text-xs mt-0.5"},Fl={class:"text-primary truncate"},$l={key:1},Al=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Bl=[Al],ql=(0,i._)("a",{href:"/customertransactions",class:"intro-x w-full block text-center rounded-md py-3 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),jl={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},Vl=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Last Transactions "),(0,i._)("a",{href:"#",class:"ml-auto text-primary truncate"},"Show More")],-1),Ll={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},Zl={key:0},Rl={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Wl={class:"ml mr-auto"},Hl={class:"font-medium"},Ol={class:"text-slate-500 text-xs mt-0.5"},Yl={class:"text-success"},Kl={key:1},Gl=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Jl=[Gl],Ql={class:"col-span-12 md:col-span-6 xl:col-span-12 xl:col-start-1 xl:row-start-1 2xl:col-start-auto 2xl:row-start-auto mt-3"},Xl=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-auto"}," New messages ")],-1),en={key:0},tn={class:"box zoom-in"},an={class:"tiny-slider",id:"important-notes"},sn={class:"p-5"},rn={class:"text-base font-medium truncate"},ln={class:"text-slate-400 mt-1"},nn={class:"text-slate-500 text-justify mt-1"},on={key:1},cn=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),dn=[cn];function un(e,t,a,s,r,l){const n=(0,i.up)("notification-component"),o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n),(0,i._)("div",ii,[(0,i._)("div",li,[(0,i._)("div",ni,[(0,i._)("div",oi,[ci,(0,i._)("div",di,[(0,i._)("div",ui,[(0,i.Wm)(o,{to:"/allcustomers"},{default:(0,i.w5)((()=>[(0,i._)("div",pi,[(0,i._)("div",mi,[(0,i._)("div",hi,[r.totalCustomers?((0,i.wg)(),(0,i.iD)("label",gi,(0,Ns.zw)(r.totalCustomers),1)):((0,i.wg)(),(0,i.iD)("label",fi,vi))]),_i])])])),_:1})]),(0,i._)("div",yi,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[(0,i._)("div",xi,[(0,i._)("div",bi,[(0,i._)("div",ki,[r.totalCompanies?((0,i.wg)(),(0,i.iD)("label",Di,(0,Ns.zw)(r.totalCompanies),1)):((0,i.wg)(),(0,i.iD)("label",Ci,Si))]),zi])])])),_:1})]),(0,i._)("div",Ni,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[(0,i._)("div",Ti,[(0,i._)("div",Mi,[(0,i._)("div",Ii,[r.totalPartners?((0,i.wg)(),(0,i.iD)("label",Ui,(0,Ns.zw)(r.totalPartners),1)):((0,i.wg)(),(0,i.iD)("label",Ei,$i))]),Ai])])])),_:1})]),(0,i._)("div",Bi,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[(0,i._)("div",qi,[(0,i._)("div",ji,[(0,i._)("div",Vi,[r.totalTransactions?((0,i.wg)(),(0,i.iD)("label",Li,(0,Ns.zw)(r.totalTransactions),1)):((0,i.wg)(),(0,i.iD)("label",Zi,Wi))]),Hi])])])),_:1})])])]),(0,i._)("div",Oi,[Yi,(0,i._)("div",Ki,[(0,i._)("div",Gi,[(0,i._)("div",Ji,[(0,i._)("div",null,[(0,i._)("div",Qi,(0,Ns.zw)(l.formatCurrency(this.currentMonthRevenue)),1),Xi]),el,(0,i._)("div",null,[(0,i._)("div",tl,(0,Ns.zw)(l.formatCurrency(r.lastMonthRevenue)),1),al])])]),(0,i._)("div",sl,[(0,i._)("div",rl,[r.canvasExists?((0,i.wg)(),(0,i.iD)("canvas",il,null,512)):(0,i.kq)("",!0)])])])]),(0,i._)("div",ll,[nl,(0,i._)("div",ol,[(0,i._)("div",cl,[(0,i._)("div",dl,[r.canvasExists?((0,i.wg)(),(0,i.iD)("canvas",ul,null,512)):(0,i.kq)("",!0)])])])]),(0,i._)("div",pl,[ml,(0,i._)("div",hl,[r.recentRequests.length>0?((0,i.wg)(),(0,i.iD)("div",gl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentRequests,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"box px-4 py-4 mb-3 flex items-center zoom-in"},[fl,(0,i._)("div",wl,[(0,i._)("div",vl,(0,Ns.zw)(e.title),1),(0,i._)("div",_l,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["text-black cursor-pointer font-medium",l.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)])))),128))])):((0,i.wg)(),(0,i.iD)("div",yl,bl)),kl])])])]),(0,i._)("div",Dl,[(0,i._)("div",Cl,[(0,i._)("div",Pl,[(0,i._)("div",Sl,[zl,(0,i._)("div",Nl,[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",Tl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentPendingTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",Ml,[(0,i._)("div",Il,[(0,i._)("div",Ul,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",El,(0,Ns.zw)(e.createdAt),1)]),(0,i._)("div",Fl,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",$l,Bl)),ql])]),(0,i._)("div",jl,[Vl,(0,i._)("div",Ll,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",Zl,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",Rl,[(0,i._)("div",Wl,[(0,i._)("div",Hl,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",Ol,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",Yl,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Kl,Jl))])),_:1})])]),(0,i._)("div",Ql,[Xl,r.recentMessages.length>0?((0,i.wg)(),(0,i.iD)("div",en,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentMessages,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mt-5 intro-x"},[(0,i._)("div",tn,[(0,i._)("div",an,[(0,i._)("div",sn,[(0,i._)("div",rn,(0,Ns.zw)(e.senderName),1),(0,i._)("div",ln,(0,Ns.zw)(l.formatDateWithTime(e.timestamp)),1),(0,i._)("div",nn,(0,Ns.zw)(e.text),1)])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",on,dn))])])])])])])}var pn=a(6580),mn={data(){return{response:null,userID:"",totalCustomers:"",totalIndivCustomers:"",totalCorpCustomers:"",totalTransactions:"",totalPendingTransactions:"",totalMessages:"",totalCompanies:"",totalPartners:"",totalServices:"",totalRequests:"",recentTransactions:[],recentPendingTransactions:[],recentMessages:[],recentRequests:[],currentMonthRevenue:"",lastMonthRevenue:"",dailyTransactionAmounts:"",servicePopularity:"",chartInstance:null,chartInstance2:null,canvasExists:!1}},created(){this.getDashboardData(),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e)})),setInterval((()=>{this.getDashboardData()}),12e4)},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`},async getDashboardData(){const e=wt.Z.get("token");await r.Z.get("/api/dashboard/getdata",{headers:{token:e}}).then((e=>{const t=e.data;this.totalCustomers=t.totalCustomers,this.totalIndivCustomers=t.totalIndivCustomers,this.totalCorpCustomers=t.totalCorpCustomers,this.totalTransactions=t.totalTransactions,this.totalPendingTransactions=t.totalPendingTransactions,this.totalMessages=t.totalMessages,this.totalCompanies=t.totalCompanies,this.totalPartners=t.totalPartners,this.totalServices=t.totalServices,this.totalRequests=t.totalRequests,this.recentTransactions=t.recentTransactions,this.recentPendingTransactions=t.recentPendingTransactions,this.recentMessages=t.recentMessages,this.recentRequests=t.recentRequests,this.currentMonthRevenue=t.currentMonthRevenue,this.lastMonthRevenue=t.lastMonthRevenue,this.dailyTransactionAmounts=t.dailyTransactionAmounts,this.servicePopularity=t.servicePopularity;const a=t.dailyTransactionStats,s=Object.keys(a),r=s.map((e=>a[e].amount));this.chartInstance&&this.chartInstance.destroy(),this.chartInstance2&&this.chartInstance2.destroy(),this.$refs.myChart&&this.$refs.myChart2||console.error("Canvas elements are not available."),this.canvasExists=!0;const i=this.$refs.myChart.getContext("2d");this.chartInstance=new pn.ZP(i,{type:"bar",data:{labels:s,datasets:[{label:"Daily Transactions",data:r,borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}});const l=this.servicePopularity.map((e=>({label:e.serviceName,data:[e.count]}))),n=["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],o=this.$refs.myChart2.getContext("2d");this.chartInstance2=new pn.ZP(o,{type:"doughnut",data:{labels:l.map((e=>e.label)),datasets:[{label:"Service Popularity",data:l.map((e=>e.data[0])),backgroundColor:n,borderWidth:1}]},plugins:{legend:{position:"top",responsive:!0,maintainAspectRatio:!1,padding:10},tooltip:{callbacks:{label:function(e){const t=l[e.dataIndex].label,a=l[e.dataIndex].data;return`${t}: ${a}`}}}}})})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))}},mounted(){console.log("myChart:",this.$refs.myChart),console.log("myChart2:",this.$refs.myChart2),this.$nextTick((()=>{this.getDashboardData()}))},beforeUnmount(){this.chartInstance&&this.chartInstance.destroy(),this.chartInstance2&&this.chartInstance2.destroy()}};const hn=(0,_t.Z)(mn,[["render",un]]);var gn=hn;const fn=(0,i._)("h2",{class:"intro-y text-2xl font-medium mt-10 text-center mr-auto"}," Best Price & Services ",-1),wn=(0,i._)("div",{class:"intro-y flex items-center mt-8"},null,-1),vn={class:"flex flex-wrap justify-center mt-1 space-x-4 gap-4"},_n=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"block w-12 h-12 text-primary mx-auto lucide lucide-credit-card"},[(0,i._)("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),(0,i._)("line",{x1:"2",x2:"22",y1:"10",y2:"10"})],-1),yn={class:"text-xl font-medium text-center mt-5"},xn=(0,i._)("p",{class:"text-center mt-5",style:{"font-size":"1.25rem"}},"Description",-1),bn={class:"text-slate-600 dark:text-slate-500 text-center mt-3",style:{"font-size":"1.05rem"}},kn=(0,i._)("p",{class:"text-center mt-5",style:{"font-size":"1.25rem"}},"Area Of Cover",-1),Dn={class:"text-slate-500 px-10 text-center mx-auto mt-3",style:{"font-size":"1.05rem"}},Cn={class:"flex justify-center mt-3"},Pn={class:"relative text-2xl font-semibold mt-8 mx-auto"},Sn=(0,i._)("span",{class:"absolute text-2xl top-0 left-0 -ml-4"},null,-1),zn={key:0},Nn=(0,i._)("button",{type:"button",class:"btn btn-rounded-primary py-3 px-4 block mx-auto mt-8"}," Services ",-1),Tn={key:1,class:"flex justify-center mt-1"},Mn=(0,i._)("button",{type:"button",class:"btn btn-rounded-secondary py-3 px-4 block mx-auto mt-8"}," Edit ",-1);function In(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[fn,wn,(0,i._)("div",vn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.allplans,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y box w-1/5 h-96 px-5 py-16",key:e._id},[_n,(0,i._)("p",{class:(0,Ns.C_)(["text-center mt-5",l.getStatusClass(e.status)])},[(0,i._)("b",null,(0,Ns.zw)(e.status),1)],2),(0,i._)("div",yn,(0,Ns.zw)(e.planName),1),xn,(0,i._)("p",bn,[(0,i._)("span",null,(0,Ns.zw)(e.planDescription),1)]),kn,(0,i._)("div",Dn,(0,Ns.zw)(e.areaOfCover),1),(0,i._)("div",Cn,[(0,i._)("div",Pn,[Sn,(0,i.Uk)(" "+(0,Ns.zw)(l.formatCurrency(e.planPrice)),1)])]),"Inactive"!==e.status?((0,i.wg)(),(0,i.iD)("div",zn,[(0,i.Wm)(n,{to:`/viewservices/${e._id}`},{default:(0,i.w5)((()=>[Nn])),_:2},1032,["to"])])):(0,i.kq)("",!0),1===r.role?((0,i.wg)(),(0,i.iD)("div",Tn,[(0,i.Wm)(n,{to:`/updateplan/${e._id}`},{default:(0,i.w5)((()=>[Mn])),_:2},1032,["to"])])):(0,i.kq)("",!0)])))),128))])])}var Un=a(7092),En=a(8577),Fn=a.n(En),$n={data(){return{allplans:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allplans",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allplans=t.data.plan,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=wt.Z.get("role");this.role="1"===e?1:0}};const An=(0,_t.Z)($n,[["render",In]]);var Bn=An;const qn={class:"intro-y flex items-center mt-8"},jn=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create plan",-1),Vn={key:0},Ln=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Zn=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Rn=[Ln,Zn],Wn={class:"grid grid-cols-12 gap-6 mt-5"},Hn={class:"intro-y col-span-12 lg:col-span-6"},On={class:"intro-y box p-5"},Yn={class:"grid grid-cols-2 gap-6 mt-3"},Kn=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name *",-1),Gn={class:"input-group"},Jn=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Qn={class:"input-group"},Xn={class:"grid grid-cols-6 gap-6 mt-3"},eo=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Area of cover *",-1),to={class:"input-group"},ao={class:"grid grid-cols-6 gap-6 mt-3"},so=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),ro={class:"input-group"},io={class:"text-right mt-8"},lo=["disabled"];function no(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",qn,[jn,l.loading?((0,i.wg)(),(0,i.iD)("div",Vn,Rn)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>n.onCreatePlan&&n.onCreatePlan(...e)),["prevent"]))},[(0,i._)("div",Wn,[(0,i._)("div",Hn,[(0,i._)("div",On,[(0,i._)("div",Yn,[(0,i._)("div",null,[Kn,(0,i._)("div",Gn,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.planName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planName]])])]),(0,i._)("div",null,[Jn,(0,i._)("div",Qn,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.planPrice=e),id:"crud-form-5",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planPrice]])])])]),(0,i._)("div",Xn,[(0,i._)("div",null,[eo,(0,i._)("div",to,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.areaOfCover=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.areaOfCover]])])])]),(0,i._)("div",ao,[(0,i._)("div",null,[so,(0,i._)("div",ro,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.planDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planDescription]])])])]),(0,i._)("div",io,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[4]||(t[4]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,lo)])])])])],32)])}var oo={data(){return{planName:"",planPrice:"",planDescription:"",areaOfCover:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreatePlan(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["planName","planPrice","planDescription","areaOfCover"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("planName",this.planName),a.append("planPrice",this.planPrice),a.append("planDescription",this.planDescription),a.append("areaOfCover",this.areaOfCover),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/plan/create",a,{headers:{token:t,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Plan created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("Plan created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const co=(0,_t.Z)(oo,[["render",no]]);var uo=co;const po={class:"intro-y flex items-center mt-8"},mo=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create plan",-1),ho={key:0},go=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),fo=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),wo=[go,fo],vo={class:"grid grid-cols-12 gap-6 mt-5"},_o={class:"intro-y col-span-12 lg:col-span-6"},yo={class:"intro-y box p-5"},xo={class:"grid grid-cols-2 gap-6 mt-3"},bo=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name *",-1),ko={class:"input-group"},Do=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Co={class:"input-group"},Po={class:"grid grid-cols-6 gap-6 mt-3"},So=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Area of cover *",-1),zo={class:"input-group"},No={class:"grid grid-cols-6 gap-6 mt-3"},To=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),Mo={class:"input-group"},Io=(0,i._)("label",{for:"crud-form-18",class:"form-label mt-3"},"Status",-1),Uo={class:"grid grid-cols-3 gap-6"},Eo={class:"input-group"},Fo=(0,i._)("option",{value:"Active"},"Active",-1),$o=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Ao=[Fo,$o],Bo={class:""},qo={class:"text-right mt-8"},jo=["disabled"];function Vo(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",po,[mo,l.loading?((0,i.wg)(),(0,i.iD)("div",ho,wo)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onUpdatePlan&&n.onUpdatePlan(...e)),["prevent"]))},[(0,i._)("div",vo,[(0,i._)("div",_o,[(0,i._)("div",yo,[(0,i._)("div",xo,[(0,i._)("div",null,[bo,(0,i._)("div",ko,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.planName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planName]])])]),(0,i._)("div",null,[Do,(0,i._)("div",Co,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.planPrice=e),id:"crud-form-5",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planPrice]])])])]),(0,i._)("div",Po,[(0,i._)("div",null,[So,(0,i._)("div",zo,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.areaOfCover=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.areaOfCover]])])])]),(0,i._)("div",No,[(0,i._)("div",null,[To,(0,i._)("div",Mo,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.planDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.planDescription]])])])]),Io,(0,i._)("div",Uo,[(0,i._)("div",Eo,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.status=e),class:"form-control","aria-label":"Default select example"},Ao,512),[[s.bM,l.status]])])]),(0,i._)("div",Bo,[(0,i._)("div",qo,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,jo)])])])])])],32)])}var Lo={data(){return{planName:"",planPrice:"",planDescription:"",areaOfCover:"",status:"",plans:[],btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.fetchData(),this.getPlans()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){try{const e=await r.Z.get("/api/allplans");if(!e.data.success)throw new Error("Failed to fetch plans");this.plans=e.data.plan}catch(e){console.error("Error fetching plans:",e)}},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}`,{headers:{token:t}});this.planName=a.data.plan.planName,this.planPrice=a.data.plan.planPrice,this.planDescription=a.data.plan.planDescription,this.areaOfCover=a.data.plan.areaOfCover,this.status=a.data.plan.status}catch(e){console.error(e)}finally{this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePlan(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["planName","planPrice","planDescription","areaOfCover","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("planName",this.planName),a.append("planPrice",this.planPrice),a.append("planDescription",this.planDescription),a.append("areaOfCover",this.areaOfCover),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/plan/update/${e}`,a,{headers:{token:s,"Content-Type":"application/json"}});t.fire({icon:"success",title:"Success!",text:"Plan updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("Updated successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating plan:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating plan:",i.message);this.btnloading=!1}}}};const Zo=(0,_t.Z)(Lo,[["render",Vo]]);var Ro=Zo;const Wo=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Services",-1),Ho={key:0,class:"shadow-md"},Oo=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Yo=[Oo],Ko={class:"grid grid-cols-12 gap-6 mt-5"},Go={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Jo={class:"flex w-full sm:w-auto"},Qo={class:"w-48 relative text-slate-500"},Xo=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),ec=(0,i._)("div",{class:"hidden xl:block mx-auto text-slate-500"},null,-1),tc={key:0,class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},ac=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)("Add service ")],-1),sc={class:"box"},rc={class:"flex items-start px-5 pt-5"},ic={class:"w-full flex flex-col lg:flex-row items-left"},lc={class:"font-medium"},nc={class:"text-slate-500 text-xs mt-0.5"},oc={key:0,class:"absolute right-0 top-0 mr-5 mt-3 dropdown"},cc=(0,i.uE)('<a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),dc={class:"dropdown-menu w-40"},uc={class:"dropdown-content"},pc=(0,i._)("label",{class:"dropdown-item"}," Edit ",-1),mc={class:"text-center lg:text-left p-5 text-slate-500 text-xs mt-0.5"},hc={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-5"},gc={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-1"},fc={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},wc=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),vc=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),_c=[wc,vc],yc={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},xc={class:"w-full sm:w-auto sm:mr-auto"},bc={class:"pagination"},kc={class:"page-item"},Dc=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Cc=[Dc],Pc=["onClick"],Sc={class:"page-item"},zc=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Nc=[zc],Tc=(0,i._)("option",null,"10",-1),Mc=(0,i._)("option",null,"25",-1),Ic=(0,i._)("option",null,"35",-1),Uc=(0,i._)("option",null,"50",-1),Ec=(0,i._)("option",null,"100",-1),Fc=[Tc,Mc,Ic,Uc,Ec];function $c(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Wo,l.loading?((0,i.wg)(),(0,i.iD)("label",Ho,Yo)):(0,i.kq)("",!0),(0,i._)("div",Ko,[(0,i._)("div",Go,[(0,i._)("div",Jo,[(0,i._)("div",Qo,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Xo])]),ec,1===l.role?((0,i.wg)(),(0,i.iD)("div",tc,[(0,i.Wm)(o,{to:`/createservice/${this.$route.params.id}`},{default:(0,i.w5)((()=>[ac])),_:1},8,["to"])])):(0,i.kq)("",!0)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-6 lg:col-span-4",key:e._id},[(0,i._)("div",sc,[(0,i._)("div",rc,[(0,i._)("div",ic,[(0,i._)("div",{class:(0,Ns.C_)(["lg:ml-4 text-left lg:text-left mt-3 lg:mt-0",n.getStatusClass(e.status)])},[(0,i._)("label",lc,(0,Ns.zw)(e.status),1),(0,i._)("div",nc,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice)),1)])],2)]),1===l.role?((0,i.wg)(),(0,i.iD)("div",oc,[cc,(0,i._)("div",dc,[(0,i._)("div",uc,[(0,i.Wm)(o,{to:`/updateservice/${e._id}`},{default:(0,i.w5)((()=>[pc])),_:2},1032,["to"])])])])):(0,i.kq)("",!0)]),(0,i._)("div",mc,[(0,i._)("div",null,(0,Ns.zw)(e.serviceDescription),1),(0,i._)("div",hc,(0,Ns.zw)(e.serviceName),1),(0,i._)("div",gc,(0,Ns.zw)(e.serviceAreaOfCover),1)])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",fc,_c)):(0,i.kq)("",!0),(0,i._)("div",yc,[(0,i._)("nav",xc,[(0,i._)("ul",bc,[(0,i._)("li",kc,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},Cc)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Pc)],2)))),128)),(0,i._)("li",Sc,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},Nc)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Fc,544),[[s.bM,l.pageSize]])])])])}var Ac={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:15,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}/?pageSize=9/`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=a.data.plan.planService,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=wt.Z.get("role");this.role="1"===e?1:0},mounted(){this.allPartners=Array.from(this.allPartners),console.log("allPartners:",this.allPartners)}};const Bc=(0,_t.Z)(Ac,[["render",$c]]);var qc=Bc;const jc={class:"intro-y flex items-center mt-8"},Vc={class:"text-lg font-medium mr-auto"},Lc={key:0},Zc=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Rc=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Wc=[Zc,Rc],Hc={class:"grid grid-cols-12 gap-6 mt-5"},Oc={class:"intro-y col-span-12 lg:col-span-6"},Yc={class:"intro-y box p-5"},Kc={class:"grid grid-cols-2 gap-6 mt-3"},Gc=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Area of cover *",-1),Jc={class:"input-group"},Qc=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Access *",-1),Xc={class:"input-group"},ed={class:"grid grid-cols-2 gap-6 mt-3"},td=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),ad={class:"input-group"},sd=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Need authorization *",-1),rd={class:"input-group"},id=(0,i._)("option",{selected:""},"no",-1),ld=(0,i._)("option",null,"yes",-1),nd=[id,ld],od={class:"grid grid-cols-6 gap-6 mt-3"},cd=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),dd={class:"input-group"},ud={class:"text-right mt-8"},pd=["disabled"];function md(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",jc,[(0,i._)("h2",Vc,"Create service for "+(0,Ns.zw)(l.planName)+" || "+(0,Ns.zw)(n.formatCurrency(l.planPrice)),1),l.loading?((0,i.wg)(),(0,i.iD)("div",Lc,Wc)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"]))},[(0,i._)("div",Hc,[(0,i._)("div",Oc,[(0,i._)("div",Yc,[(0,i._)("div",Kc,[(0,i._)("div",null,[Gc,(0,i._)("div",Jc,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceAreaOfCover=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceAreaOfCover]])])]),(0,i._)("div",null,[Qc,(0,i._)("div",Xc,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.serviceName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"access","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceName]])])])]),(0,i._)("div",ed,[(0,i._)("div",null,[td,(0,i._)("div",ad,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.servicePrice=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.servicePrice]])])]),(0,i._)("div",null,[sd,(0,i._)("div",rd,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.preAuthorization=e)},nd,512),[[s.bM,l.preAuthorization]])])])]),(0,i._)("div",od,[(0,i._)("div",null,[cd,(0,i._)("div",dd,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceDescription]])])])]),(0,i._)("div",ud,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,pd)])])])])],32)])}var hd={data(){return{serviceName:"",servicePrice:"",serviceDescription:"",serviceAreaOfCover:"",preAuthorization:"",planName:"",planPrice:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/plan/${e}`,{headers:{token:t}});this.planName=a.data.plan.planName,this.planPrice=a.data.plan.planPrice}catch(e){console.error(e)}finally{this.loading=!1}},async onCreateIndivitualCustomer(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["serviceName","servicePrice","serviceDescription","serviceAreaOfCover","preAuthorization"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("serviceName",this.serviceName),a.append("servicePrice",this.servicePrice),a.append("serviceDescription",this.serviceDescription),a.append("serviceAreaOfCover",this.serviceAreaOfCover),a.append("preAuthorization",this.preAuthorization),a.append("planId",this.$route.params.id),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/service/createservice",a,{headers:{token:t,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Service created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetchData()}};const gd=(0,_t.Z)(hd,[["render",md]]);var fd=gd;const wd={key:0,class:"spinner",style:{"font-size":"18px"}},vd=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update service")],-1),_d={class:"grid grid-cols-12 gap-6 mt-5"},yd={class:"intro-y col-span-12 lg:col-span-6"},xd={class:"intro-y box p-5"},bd={class:"grid grid-cols-2 gap-6 mt-3"},kd=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Area of cover *",-1),Dd={class:"input-group"},Cd=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Access *",-1),Pd={class:"input-group"},Sd={class:"grid grid-cols-2 gap-6 mt-3"},zd=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Price *",-1),Nd={class:"input-group"},Td=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Need authorization *",-1),Md={class:"input-group"},Id=(0,i._)("option",{selected:""},"no",-1),Ud=(0,i._)("option",null,"yes",-1),Ed=[Id,Ud],Fd={class:"grid grid-cols-6 gap-6 mt-3"},$d=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Description *",-1),Ad={class:"input-group"},Bd=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Status",-1),qd={class:"input-group"},jd=(0,i._)("option",{value:"Active"},"Active",-1),Vd=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Ld=[jd,Vd],Zd={class:"text-right mt-8"},Rd=["disabled"];function Wd(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("div",wd)):(0,i.kq)("",!0),vd,(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>n.onUpdateService&&n.onUpdateService(...e)),["prevent"]))},[(0,i._)("div",_d,[(0,i._)("div",yd,[(0,i._)("div",xd,[(0,i._)("div",bd,[(0,i._)("div",null,[kd,(0,i._)("div",Dd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceAreaOfCover=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"area of cover","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceAreaOfCover]])])]),(0,i._)("div",null,[Cd,(0,i._)("div",Pd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.serviceName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"access","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceName]])])])]),(0,i._)("div",Sd,[(0,i._)("div",null,[zd,(0,i._)("div",Nd,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.servicePrice=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"price","aria-describedby":"input-group-1"},null,512),[[s.nr,l.servicePrice]])])]),(0,i._)("div",null,[Td,(0,i._)("div",Md,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.preAuthorization=e)},Ed,512),[[s.bM,l.preAuthorization]])])])]),(0,i._)("div",Fd,[(0,i._)("div",null,[$d,(0,i._)("div",Ad,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.serviceDescription]])])])]),(0,i._)("div",null,[Bd,(0,i._)("div",qd,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.status=e),class:"form-control","aria-label":"Default select example"},Ld,512),[[s.bM,l.status]])])]),(0,i._)("div",Zd,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,Rd)])])])])],32)])}var Hd={data(){return{serviceName:"",servicePrice:"",serviceDescription:"",serviceAreaOfCover:"",preAuthorization:"",planId:"",status:"",plans:[],btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.axios=r.Z,this.fetchData(),this.getPlans()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){try{const e=wt.Z.get("token"),t=await r.Z.get("/api/allplans",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan}catch(e){console.error("Error fetching plans:",e)}},async fetchData(){try{this.loading=!0,this.btnloading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/service/${e}`,{headers:{token:t}});this.serviceName=a.data.service.serviceName,this.servicePrice=a.data.service.servicePrice,this.serviceDescription=a.data.service.serviceDescription,this.serviceAreaOfCover=a.data.service.serviceAreaOfCover,this.preAuthorization=a.data.service.preAuthorization,this.status=a.data.service.status}catch(e){console.error(e)}finally{this.loading=!1,this.btnloading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateService(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["serviceName","servicePrice","serviceDescription","serviceAreaOfCover","preAuthorization","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("serviceName",this.serviceName),a.append("servicePrice",this.servicePrice),a.append("serviceDescription",this.serviceDescription),a.append("serviceAreaOfCover",this.serviceAreaOfCover),a.append("preAuthorization",this.preAuthorization),a.append("status",this.status),a.append("planId",this.planId),this.btnloading=!0;const i=await r.Z.put(`/api/service/update/${e}`,a,{headers:{token:s,"Content-Type":"application/json"}});t.fire({icon:"success",title:"Success!",text:"Service updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("Updated successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating service:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating service:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}}}};const Od=(0,_t.Z)(Hd,[["render",Wd]]);var Yd=Od;const Kd=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"All Transactions",-1),Gd={class:"grid grid-cols-12 gap-6 mt-5"},Jd={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Qd={class:"report-box zoom-in"},Xd={class:"box p-5"},eu={key:0,class:"flex text-xl"},tu={class:"text-3xl font-medium leading-8 mt-6"},au={key:0},su={key:1},ru=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),iu=[ru],lu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"In progress",-1),nu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},ou={class:"report-box zoom-in"},cu={class:"box p-5"},du={key:0,class:"flex text-xl"},uu={class:"text-3xl font-medium leading-8 mt-6"},pu={key:0},mu={key:1},hu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),gu=[hu],fu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Pending for approval ",-1),wu={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},vu={class:"report-box zoom-in"},_u={class:"box p-5"},yu={key:0,class:"flex text-xl"},xu={class:"text-3xl font-medium leading-8 mt-6"},bu={key:0},ku={key:1},Du=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Cu=[Du],Pu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Aproved",-1),Su={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},zu={class:"report-box zoom-in"},Nu={class:"box p-5"},Tu={key:0,class:"flex text-xl"},Mu={class:"text-3xl font-medium leading-8 mt-6"},Iu={key:0},Uu={key:1},Eu=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Fu=[Eu],$u=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Completed",-1),Au={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Bu={class:"report-box zoom-in"},qu={class:"box p-5"},ju={key:0,class:"flex text-xl"},Vu={class:"text-3xl font-medium leading-8 mt-6"},Lu={key:0},Zu={key:1},Ru=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Wu=[Ru],Hu=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Canceled",-1),Ou={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Yu={class:"report-box zoom-in"},Ku={class:"box p-5"},Gu={key:0,class:"flex text-xl"},Ju={class:"text-3xl font-medium leading-8 mt-6"},Qu={key:0},Xu={key:1},ep=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),tp=[ep],ap=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Revoked",-1),sp={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},rp={class:"report-box zoom-in"},ip={class:"box p-5"},lp={key:0,class:"flex text-xl"},np={class:"text-2xl font-medium leading-8 mt-6"},op={key:0},cp={key:1},dp=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),up=[dp],pp=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Average Approval Time ",-1),mp={key:0,class:"shadow-md"},hp=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),gp=[hp],fp={class:"grid grid-cols-12 gap-6 mt-8"},wp={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},vp={class:"flex w-full sm:w-auto"},_p={class:"w-48 relative text-slate-500"},yp=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),xp={class:"ml-1"},bp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),kp=[bp],Dp={class:"hidden xl:block mx-auto text-slate-500"},Cp=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Pp={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Sp={class:"table table-report -mt-2"},zp=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Np={class:"w-40 !py-4"},Tp={class:"decoration-dotted whitespace-nowrap"},Mp={class:"w-40 !py-4"},Ip={key:0,class:"decoration-dotted whitespace-nowrap"},Up={key:1,class:"decoration-dotted whitespace-nowrap"},Ep={class:"w-40 !py-4"},Fp={class:"decoration-dotted whitespace-nowrap"},$p={class:"w-40"},Ap={class:"font-medium whitespace-nowrap"},Bp={class:"text-center"},qp={key:0,class:"flex items-center justify-center whitespace-nowrap"},jp={key:1,class:"flex items-center justify-center whitespace-nowrap"},Vp={class:"whitespace-nowrap"},Lp={class:"whitespace-nowrap"},Zp={class:"whitespace-nowrap"},Rp={class:"w-40 !py-4"},Wp={class:"table-report__action"},Hp={class:"flex justify-center items-center"},Op=["onClick"],Yp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Kp={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Gp=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),Jp={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},Qp=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Xp={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},em=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),tm={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},am=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),sm=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),rm=[am,sm],im={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},lm={class:"w-full sm:w-auto sm:mr-auto"},nm={class:"pagination"},om={class:"page-item"},cm=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),dm=[cm],um=["onClick"],pm={class:"page-item"},mm=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),hm=[mm],gm=(0,i._)("option",null,"10",-1),fm=(0,i._)("option",null,"25",-1),wm=(0,i._)("option",null,"35",-1),vm=(0,i._)("option",null,"50",-1),_m=(0,i._)("option",null,"100",-1),ym=(0,i._)("option",null,"500",-1),xm=(0,i._)("option",null,"1000",-1),bm=[gm,fm,wm,vm,_m,ym,xm],km={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Dm={class:"modal-dialog"},Cm={class:"modal-content"},Pm={class:"modal-body p-0"},Sm={class:"p-5 text-center"},zm=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Nm=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Tm={class:"text-slate-500 mt-2"},Mm=["href"],Im=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Um(e,t,a,r,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[Kd,(0,i._)("div",Gd,[(0,i._)("div",Jd,[(0,i.Wm)(o,{to:"/transactionsinprogress"},{default:(0,i.w5)((()=>[(0,i._)("div",Qd,[(0,i._)("div",Xd,[l.inprogress?((0,i.wg)(),(0,i.iD)("div",eu,(0,Ns.zw)(n.formatCurrency(l.inprogress)),1)):(0,i.kq)("",!0),(0,i._)("div",tu,[l.inprogressCount?((0,i.wg)(),(0,i.iD)("label",au,(0,Ns.zw)(n.formatNumber(l.inprogressCount)),1)):((0,i.wg)(),(0,i.iD)("label",su,iu))]),lu])])])),_:1})]),(0,i._)("div",nu,[(0,i.Wm)(o,{to:"/transactionspending"},{default:(0,i.w5)((()=>[(0,i._)("div",ou,[(0,i._)("div",cu,[l.pending?((0,i.wg)(),(0,i.iD)("div",du,(0,Ns.zw)(n.formatCurrency(l.pending)),1)):(0,i.kq)("",!0),(0,i._)("div",uu,[l.pending?((0,i.wg)(),(0,i.iD)("label",pu,(0,Ns.zw)(n.formatNumber(l.pendingCount)),1)):((0,i.wg)(),(0,i.iD)("label",mu,gu))]),fu])])])),_:1})]),(0,i._)("div",wu,[(0,i.Wm)(o,{to:"/transactionsaproved"},{default:(0,i.w5)((()=>[(0,i._)("div",vu,[(0,i._)("div",_u,[l.aproved?((0,i.wg)(),(0,i.iD)("div",yu,(0,Ns.zw)(n.formatCurrency(l.aproved)),1)):(0,i.kq)("",!0),(0,i._)("div",xu,[l.revoked?((0,i.wg)(),(0,i.iD)("label",bu,(0,Ns.zw)(n.formatNumber(l.aprovedCount)),1)):((0,i.wg)(),(0,i.iD)("label",ku,Cu))]),Pu])])])),_:1})]),(0,i._)("div",Su,[(0,i.Wm)(o,{to:"/transactionscompleted"},{default:(0,i.w5)((()=>[(0,i._)("div",zu,[(0,i._)("div",Nu,[l.completed?((0,i.wg)(),(0,i.iD)("div",Tu,(0,Ns.zw)(n.formatCurrency(l.completed)),1)):(0,i.kq)("",!0),(0,i._)("div",Mu,[l.completed?((0,i.wg)(),(0,i.iD)("label",Iu,(0,Ns.zw)(n.formatNumber(l.completedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Uu,Fu))]),$u])])])),_:1})]),(0,i._)("div",Au,[(0,i.Wm)(o,{to:"/transactionscanceled"},{default:(0,i.w5)((()=>[(0,i._)("div",Bu,[(0,i._)("div",qu,[l.completed?((0,i.wg)(),(0,i.iD)("div",ju,(0,Ns.zw)(n.formatCurrency(l.canceled)),1)):(0,i.kq)("",!0),(0,i._)("div",Vu,[l.completed?((0,i.wg)(),(0,i.iD)("label",Lu,(0,Ns.zw)(n.formatNumber(l.canceledCount)),1)):((0,i.wg)(),(0,i.iD)("label",Zu,Wu))]),Hu])])])),_:1})]),(0,i._)("div",Ou,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",Yu,[(0,i._)("div",Ku,[l.revoked?((0,i.wg)(),(0,i.iD)("div",Gu,(0,Ns.zw)(n.formatCurrency(l.revoked)),1)):(0,i.kq)("",!0),(0,i._)("div",Ju,[l.revoked?((0,i.wg)(),(0,i.iD)("label",Qu,(0,Ns.zw)(n.formatNumber(l.revokedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Xu,tp))]),ap])])])),_:1})]),(0,i._)("div",sp,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",rp,[(0,i._)("div",ip,[l.averageApprovalTime?((0,i.wg)(),(0,i.iD)("div",lp)):(0,i.kq)("",!0),(0,i._)("div",np,[l.revoked?((0,i.wg)(),(0,i.iD)("label",op,(0,Ns.zw)(n.formattedAverageApprovalTime),1)):((0,i.wg)(),(0,i.iD)("label",cp,up))]),pp])])])),_:1})])]),l.loading?((0,i.wg)(),(0,i.iD)("label",mp,gp)):(0,i.kq)("",!0),(0,i._)("div",fp,[(0,i._)("div",wp,[(0,i._)("div",vp,[(0,i._)("div",_p,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),yp])]),(0,i._)("div",xp,[(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},kp)]),(0,i._)("div",Dp," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Cp]),(0,i._)("div",Pp,[(0,i._)("table",Sp,[zp,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Np,[(0,i._)("a",Tp,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Mp,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Ip,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Up," Individual "))]),(0,i._)("td",Ep,[(0,i._)("a",Fp,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",$p,[(0,i._)("a",Ap,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Bp,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",qp,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",jp,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Vp,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Lp,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",Zp,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",Rp,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",Wp,[(0,i._)("div",Hp,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[Yp,(0,i.Uk)(" Files ")],8,Op),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Kp,[Gp,(0,i.Wm)(o,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Jp,[Qp,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Xp,[em,(0,i.Wm)(o,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",tm,rm)):(0,i.kq)("",!0),(0,i._)("div",im,[(0,i._)("nav",lm,[(0,i._)("ul",nm,[(0,i._)("li",om,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},dm)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,um)],2)))),128)),(0,i._)("li",pm,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},hm)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},bm,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",km,[(0,i._)("div",Dm,[(0,i._)("div",Cm,[(0,i._)("div",Pm,[(0,i._)("div",Sm,[zm,Nm,(0,i._)("div",Tm,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Mm)])))),128))])])]),Im])])])])])}var Em={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/getall",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardTotals(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/total/transactionsbystatus",{headers:{token:e}});if(t){const e=t.data.statusCounts;this.inprogress=e["In progress"].totalAmount,this.revoked=e.Revoked.totalAmount,this.aproved=e.Aproved.totalAmount,this.pending=e.Pending.totalAmount,this.completed=e.Completed.totalAmount,this.canceled=e.Canceled.totalAmount,this.inprogressCount=e["In progress"].count,this.revokedCount=e.Revoked.count,this.aprovedCount=e.Aproved.count,this.pendingCount=e.Pending.count,this.completedCount=e.Completed.count,this.canceledCount=e.Canceled.count}else this.inprogress=0,this.revoked=0,this.aproved=0,this.pending=0,this.completed=0,this.canceled=0,this.inprogressCount=0,this.revokedCount=0,this.aprovedCount=0,this.pendingCount=0,this.completedCount=0,this.canceledCount=0}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardAVT(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/averageapprovaltime",{headers:{token:e}}),a=t.data;this.averageApprovalTime=a.averageApprovalTime}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData(),this.fetchDashboardTotals(),this.fetchDashboardAVT()}};const Fm=(0,_t.Z)(Em,[["render",Um]]);var $m=Fm;const Am={class:"intro-y flex items-center mt-8"},Bm=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Aprove our Revoke Transaction",-1),qm={key:0,class:"shadow-md"},jm=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Vm=[jm],Lm={class:"grid grid-cols-12 gap-6 mt-5"},Zm={class:"intro-y col-span-12 lg:col-span-6"},Rm={class:"intro-y box p-5"},Wm={class:"grid grid-cols-2 gap-6 mt-3"},Hm=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name:",-1),Om=(0,i._)("div",{class:"mt-2"},null,-1),Ym={for:"",class:"form-control"},Km=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Date:",-1),Gm=(0,i._)("div",{class:"mt-2"},null,-1),Jm={for:"",class:"form-control"},Qm={class:"grid grid-cols-2 gap-6 mt-3"},Xm=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Partner:",-1),eh=(0,i._)("div",{class:"mt-2"},null,-1),th={for:"",class:"form-control"},ah=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Amount:",-1),sh=(0,i._)("div",{class:"mt-2"},null,-1),rh={for:"",class:"form-control"},ih={class:"grid grid-cols-2 gap-6 mt-3"},lh=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service:",-1),nh=(0,i._)("div",{class:"mt-2"},null,-1),oh={for:"",class:"form-control"},ch=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Area of Cover:",-1),dh=(0,i._)("div",{class:"mt-2"},null,-1),uh={for:"",class:"form-control"},ph={class:"grid grid-cols-6 gap-12 mt-3"},mh=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Service Description",-1),hh=(0,i._)("div",{class:"mt-1"},null,-1),gh={class:"input-group"},fh=(0,i._)("div",{class:"mt-4"},null,-1),wh={class:"intro-y box col-span-12 lg:col-span-12"},vh=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="">Documents</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),_h={key:0,class:"p-5"},yh={class:"file"},xh=["href"],bh={class:"ml-4"},kh=["href"],Dh={class:"text-slate-500 text-xs mt-0.5"},Ch={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},Ph=(0,i._)("a",{href:"#"},null,-1),Sh={class:"text-right mt-8"},zh=["disabled"],Nh=["disabled"];function Th(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Am,[Bm,l.loading?((0,i.wg)(),(0,i.iD)("label",qm,Vm)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"])),enctype:"multipart/form-data","data-single":"true"},[(0,i._)("div",Lm,[(0,i._)("div",Zm,[(0,i._)("div",Rm,[(0,i._)("div",Wm,[(0,i._)("div",null,[Hm,Om,(0,i._)("label",Ym,[(0,i._)("strong",null,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1)])]),(0,i._)("div",null,[Km,Gm,(0,i._)("label",Jm,[(0,i._)("strong",null,(0,Ns.zw)(l.updatedAt),1)])])]),(0,i._)("div",Qm,[(0,i._)("div",null,[Xm,eh,(0,i._)("label",th,[(0,i._)("strong",null,(0,Ns.zw)(l.partnerName),1)])]),(0,i._)("div",null,[ah,sh,(0,i._)("label",rh,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(l.amount)),1)])])]),(0,i._)("div",ih,[(0,i._)("div",null,[lh,nh,(0,i._)("label",oh,[(0,i._)("strong",null,(0,Ns.zw)(l.service),1)])]),(0,i._)("div",null,[ch,dh,(0,i._)("label",uh,[(0,i._)("strong",null,(0,Ns.zw)(l.serviceAreaOfCover),1)])])]),(0,i._)("div",ph,[(0,i._)("div",null,[mh,hh,(0,i._)("div",gh,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.serviceDescription]])])])]),fh,(0,i._)("div",wh,[vh,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",_h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",yh,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,xh)]),(0,i._)("div",bh,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,kh),(0,i._)("div",Dh,(0,Ns.zw)(n.getFileSize(e)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Ch,[(0,i.Uk)(" No files available. Add customer documents "),Ph]))]),(0,i._)("div",Sh,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[1]||(t[1]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{onClick:t[2]||(t[2]=e=>n.aprove()),type:"submit",class:"btn btn-success text-white w-24 mr-1",disabled:l.btnloading}," Aprove ",8,zh),(0,i._)("button",{onClick:t[3]||(t[3]=e=>n.revoke()),type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Revoke ",8,Nh)])])])])],32)])}var Mh={data(){return{plan:"",errorMessage:"",loading:!1,btnloading:!1,transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",multipleFiles:[],startDate:"",endDate:"",selectedDate:null,status:""}},created(){this.getProfile()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filesArray(){const e=this.user.multipleFiles;return e.split(",")}},methods:{async aprove(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.put(`api/aprove/transaction/${t}`,{},{headers:{token:e}});Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} aproved`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(a)}catch(a){this.btnloading=!1,this.loading=!1,Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${a.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error aproving invoice:",a)}},async revoke(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.put(`api/revoke/transaction/${t}`,{},{headers:{token:e}});Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} revoked`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(a)}catch(a){this.btnloading=!1,this.loading=!1,Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${a.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error revoking invoice:",a)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){this.btnloading=!0,this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.amount=t.amount,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.partnerName=t.user.partnerUser.partnerName,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""}}};const Ih=(0,_t.Z)(Mh,[["render",Th]]);var Uh=Ih;const Eh={class:"intro-y flex items-center mt-8"},Fh=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},[(0,i.Uk)(" Cancel Transaction || "),(0,i._)("span",{class:"text-sm font-medium mr-auto"},"The amount will be returned to the customer's account.")],-1),$h={key:0},Ah=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Bh=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),qh=[Ah,Bh],jh={class:"grid grid-cols-12 gap-6 mt-5"},Vh={class:"intro-y col-span-12 lg:col-span-6"},Lh={class:"intro-y box p-5"},Zh={class:"grid grid-cols-2 gap-6 mt-3"},Rh=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Name:",-1),Wh=(0,i._)("div",{class:"mt-2"},null,-1),Hh={for:"",class:"form-control"},Oh=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Date:",-1),Yh=(0,i._)("div",{class:"mt-2"},null,-1),Kh={for:"",class:"form-control"},Gh={class:"grid grid-cols-2 gap-6 mt-3"},Jh=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-2"},"Partner:",-1),Qh=(0,i._)("div",{class:"mt-2"},null,-1),Xh={for:"",class:"form-control"},eg=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Amount:",-1),tg=(0,i._)("div",{class:"mt-2"},null,-1),ag={for:"",class:"form-control"},sg={class:"grid grid-cols-2 gap-6 mt-3"},rg=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service:",-1),ig=(0,i._)("div",{class:"mt-2"},null,-1),lg={for:"",class:"form-control"},ng=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Area of Cover:",-1),og=(0,i._)("div",{class:"mt-2"},null,-1),cg={for:"",class:"form-control"},dg={class:"grid grid-cols-6 gap-12 mt-3"},ug=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Service Description",-1),pg=(0,i._)("div",{class:"mt-1"},null,-1),mg={class:"input-group"},hg=(0,i._)("div",{class:"mt-4"},null,-1),gg={class:"intro-y box col-span-12 lg:col-span-12"},fg=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="">Documents</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),wg={key:0,class:"p-5"},vg={class:"file"},_g=["href"],yg={class:"ml-4"},xg=["href"],bg={class:"text-slate-500 text-xs mt-0.5"},kg={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},Dg=(0,i._)("a",{href:"#"},null,-1),Cg={class:"grid grid-cols-6 gap-12 mt-5"},Pg=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Cancelation reason",-1),Sg=(0,i._)("div",{class:"mt-2"},null,-1),zg={class:"input-group"},Ng={class:"text-right mt-8"},Tg=["disabled"];function Mg(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Eh,[Fh,l.loading?((0,i.wg)(),(0,i.iD)("div",$h,qh)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)((()=>{}),["prevent"])),enctype:"multipart/form-data","data-single":"true"},[(0,i._)("div",jh,[(0,i._)("div",Vh,[(0,i._)("div",Lh,[(0,i._)("div",Zh,[(0,i._)("div",null,[Rh,Wh,(0,i._)("label",Hh,[(0,i._)("strong",null,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1)])]),(0,i._)("div",null,[Oh,Yh,(0,i._)("label",Kh,[(0,i._)("strong",null,(0,Ns.zw)(l.updatedAt),1)])])]),(0,i._)("div",Gh,[(0,i._)("div",null,[Jh,Qh,(0,i._)("label",Xh,[(0,i._)("strong",null,(0,Ns.zw)(l.partnerName),1)])]),(0,i._)("div",null,[eg,tg,(0,i._)("label",ag,[(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(l.amount)),1)])])]),(0,i._)("div",sg,[(0,i._)("div",null,[rg,ig,(0,i._)("label",lg,[(0,i._)("strong",null,(0,Ns.zw)(l.service),1)])]),(0,i._)("div",null,[ng,og,(0,i._)("label",cg,[(0,i._)("strong",null,(0,Ns.zw)(l.serviceAreaOfCover),1)])])]),(0,i._)("div",dg,[(0,i._)("div",null,[ug,pg,(0,i._)("div",mg,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceDescription=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"description","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.serviceDescription]])])])]),hg,(0,i._)("div",gg,[fg,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",wg,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",vg,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,_g)]),(0,i._)("div",yg,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,xg),(0,i._)("div",bg,(0,Ns.zw)(n.getFileSize(e)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",kg,[(0,i.Uk)(" No files available. Add customer documents "),Dg]))]),(0,i._)("div",Cg,[(0,i._)("div",null,[Pg,Sg,(0,i._)("div",zg,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.cancelReason=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"insert cancelation reason here","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.cancelReason]])])])]),(0,i._)("div",Ng,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Back "),(0,i._)("button",{onClick:t[3]||(t[3]=e=>n.cancel()),type:"submit",class:"btn btn-primary",disabled:l.btnloading}," Cancel transaction ",8,Tg)])])])])],32)])}var Ig={data(){return{plan:"",errorMessage:"",loading:!1,btnloading:!1,transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",multipleFiles:[],cancelReason:"",status:""}},created(){this.getProfile()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filesArray(){const e=this.user.multipleFiles;return e.split(",")}},methods:{async cancel(){const e=new FormData;e.append("cancelReason",this.cancelReason),this.loading=!0,this.btnloading=!0;const t=wt.Z.get("token"),a=this.$route.params.id;try{const s=await r.Z.put(`/cancel/transaction/${a}`,e,{headers:{token:t,"Content-Type":"application/json"}});Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`Invoice ${this.invoiceNumber} canceled`,timer:3e3,showConfirmButton:!1,position:"top-end"}),this.btnloading=!1,this.loading=!1,this.$router.push("/customertransactions"),this.isSuccess=!0,console.log(s)}catch(s){this.btnloading=!1,this.loading=!1,Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${s.response.data.error}`,timer:5e3,showConfirmButton:!1,position:"top-end"}),this.$router.push("/customertransactions"),console.error("Error canceling invoice:",s)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){this.btnloading=!0,this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.amount=t.amount,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.partnerName=t.user.partnerUser.partnerName,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""}}};const Ug=(0,_t.Z)(Ig,[["render",Mg]]);var Eg=Ug;const Fg=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Pending Transactions",-1),$g={key:0,class:"shadow-md"},Ag=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Bg=[Ag],qg={class:"grid grid-cols-12 gap-6 mt-8"},jg={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Vg={class:"flex w-full sm:w-auto"},Lg={class:"w-48 relative text-slate-500"},Zg=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Rg={class:"ml-1"},Wg=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Hg=[Wg],Og={class:"hidden xl:block mx-auto text-slate-500"},Yg=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Kg={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Gg={class:"table table-report -mt-2"},Jg=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Qg={class:"w-40 !py-4"},Xg={class:"decoration-dotted whitespace-nowrap"},ef={class:"w-40 !py-4"},tf={key:0,class:"decoration-dotted whitespace-nowrap"},af={key:1,class:"decoration-dotted whitespace-nowrap"},sf={class:"w-40 !py-4"},rf={class:"decoration-dotted whitespace-nowrap"},lf={class:"w-40"},nf={class:"font-medium whitespace-nowrap"},of={class:"text-center"},cf={key:0,class:"flex items-center justify-center whitespace-nowrap"},df={key:1,class:"flex items-center justify-center whitespace-nowrap"},uf={class:"whitespace-nowrap"},pf={class:"whitespace-nowrap"},mf={class:"whitespace-nowrap"},hf={class:"w-40 !py-4"},gf={class:"table-report__action"},ff={class:"flex justify-center items-center"},wf=["onClick"],vf=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),_f={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},yf=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),xf={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},bf=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),kf={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Df=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Cf={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Pf=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Sf=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),zf=[Pf,Sf],Nf={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Tf={class:"w-full sm:w-auto sm:mr-auto"},Mf={class:"pagination"},If={class:"page-item"},Uf=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Ef=[Uf],Ff=["onClick"],$f={class:"page-item"},Af=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Bf=[Af],qf=(0,i._)("option",null,"10",-1),jf=(0,i._)("option",null,"25",-1),Vf=(0,i._)("option",null,"35",-1),Lf=(0,i._)("option",null,"50",-1),Zf=(0,i._)("option",null,"100",-1),Rf=(0,i._)("option",null,"500",-1),Wf=(0,i._)("option",null,"1000",-1),Hf=[qf,jf,Vf,Lf,Zf,Rf,Wf],Of={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Yf={class:"modal-dialog"},Kf={class:"modal-content"},Gf={class:"modal-body p-0"},Jf={class:"p-5 text-center"},Qf=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Xf=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),ew={class:"text-slate-500 mt-2"},tw=["href"],aw=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function sw(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Fg,l.loading?((0,i.wg)(),(0,i.iD)("label",$g,Bg)):(0,i.kq)("",!0),(0,i._)("div",qg,[(0,i._)("div",jg,[(0,i._)("div",Vg,[(0,i._)("div",Lg,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Zg])]),(0,i._)("div",Rg,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Hg)]),(0,i._)("div",Og," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Yg]),(0,i._)("div",Kg,[(0,i._)("table",Gg,[Jg,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Qg,[(0,i._)("a",Xg,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",ef,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",tf,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",af," Individual "))]),(0,i._)("td",sf,[(0,i._)("a",rf,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",lf,[(0,i._)("a",nf,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",of,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",cf,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",df,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",uf,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",pf,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",mf,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",hf,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",gf,[(0,i._)("div",ff,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[vf,(0,i.Uk)(" Files ")],8,wf),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",_f,[yf,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",xf,[bf,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",kf,[Df,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Cf,zf)):(0,i.kq)("",!0),(0,i._)("div",Nf,[(0,i._)("nav",Tf,[(0,i._)("ul",Mf,[(0,i._)("li",If,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Ef)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Ff)],2)))),128)),(0,i._)("li",$f,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Bf)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Hf,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Of,[(0,i._)("div",Yf,[(0,i._)("div",Kf,[(0,i._)("div",Gf,[(0,i._)("div",Jf,[Qf,Xf,(0,i._)("div",ew,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,tw)])))),128))])])]),aw])])])])])}var rw={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/pending",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const iw=(0,_t.Z)(rw,[["render",sw]]);var lw=iw;const nw=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Aproved Transactions",-1),ow={key:0,class:"shadow-md"},cw=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),dw=[cw],uw={class:"grid grid-cols-12 gap-6 mt-8"},pw={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},mw={class:"flex w-full sm:w-auto"},hw={class:"w-48 relative text-slate-500"},gw=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),fw={class:"ml-1"},ww=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),vw=[ww],_w={class:"hidden xl:block mx-auto text-slate-500"},yw=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),xw={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},bw={class:"table table-report -mt-2"},kw=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Dw={class:"w-40 !py-4"},Cw={class:"decoration-dotted whitespace-nowrap"},Pw={class:"w-40 !py-4"},Sw={key:0,class:"decoration-dotted whitespace-nowrap"},zw={key:1,class:"decoration-dotted whitespace-nowrap"},Nw={class:"w-40 !py-4"},Tw={class:"decoration-dotted whitespace-nowrap"},Mw={class:"w-40"},Iw={class:"font-medium whitespace-nowrap"},Uw={class:"text-center"},Ew={key:0,class:"flex items-center justify-center whitespace-nowrap"},Fw={key:1,class:"flex items-center justify-center whitespace-nowrap"},$w={class:"whitespace-nowrap"},Aw={class:"whitespace-nowrap"},Bw={class:"whitespace-nowrap"},qw={class:"w-40 !py-4"},jw={class:"table-report__action"},Vw={class:"flex justify-center items-center"},Lw=["onClick"],Zw=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Rw={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ww=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),Hw={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ow=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Yw={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Kw=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Gw={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Jw=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Qw=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Xw=[Jw,Qw],ev={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},tv={class:"w-full sm:w-auto sm:mr-auto"},av={class:"pagination"},sv={class:"page-item"},rv=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),iv=[rv],lv=["onClick"],nv={class:"page-item"},ov=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),cv=[ov],dv=(0,i._)("option",null,"10",-1),uv=(0,i._)("option",null,"25",-1),pv=(0,i._)("option",null,"35",-1),mv=(0,i._)("option",null,"50",-1),hv=(0,i._)("option",null,"100",-1),gv=(0,i._)("option",null,"500",-1),fv=(0,i._)("option",null,"1000",-1),wv=[dv,uv,pv,mv,hv,gv,fv],vv={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},_v={class:"modal-dialog"},yv={class:"modal-content"},xv={class:"modal-body p-0"},bv={class:"p-5 text-center"},kv=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Dv=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Cv={class:"text-slate-500 mt-2"},Pv=["href"],Sv=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function zv(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[nw,l.loading?((0,i.wg)(),(0,i.iD)("label",ow,dw)):(0,i.kq)("",!0),(0,i._)("div",uw,[(0,i._)("div",pw,[(0,i._)("div",mw,[(0,i._)("div",hw,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),gw])]),(0,i._)("div",fw,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},vw)]),(0,i._)("div",_w," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),yw]),(0,i._)("div",xw,[(0,i._)("table",bw,[kw,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Dw,[(0,i._)("a",Cw,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Pw,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Sw,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",zw," Individual "))]),(0,i._)("td",Nw,[(0,i._)("a",Tw,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Mw,[(0,i._)("a",Iw,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Uw,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Ew,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",Fw,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",$w,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Aw,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",Bw,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",qw,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",jw,[(0,i._)("div",Vw,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[Zw,(0,i.Uk)(" Files ")],8,Lw),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Rw,[Ww,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Hw,[Ow,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Yw,[Kw,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Gw,Xw)):(0,i.kq)("",!0),(0,i._)("div",ev,[(0,i._)("nav",tv,[(0,i._)("ul",av,[(0,i._)("li",sv,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},iv)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,lv)],2)))),128)),(0,i._)("li",nv,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},cv)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},wv,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",vv,[(0,i._)("div",_v,[(0,i._)("div",yv,[(0,i._)("div",xv,[(0,i._)("div",bv,[kv,Dv,(0,i._)("div",Cv,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Pv)])))),128))])])]),Sv])])])])])}var Nv={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/aproved",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Tv=(0,_t.Z)(Nv,[["render",zv]]);var Mv=Tv;const Iv=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Canceled Transactions",-1),Uv={key:0,class:"shadow-md"},Ev=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Fv=[Ev],$v={class:"grid grid-cols-12 gap-6 mt-8"},Av={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Bv={class:"flex w-full sm:w-auto"},qv={class:"w-48 relative text-slate-500"},jv=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Vv={class:"ml-1"},Lv=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Zv=[Lv],Rv={class:"hidden xl:block mx-auto text-slate-500"},Wv=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Hv={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Ov={class:"table table-report -mt-2"},Yv=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"whitespace-nowrap"},"Reason"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Kv={class:"w-40 !py-4"},Gv={class:"decoration-dotted whitespace-nowrap"},Jv={class:"w-40 !py-4"},Qv={key:0,class:"decoration-dotted whitespace-nowrap"},Xv={key:1,class:"decoration-dotted whitespace-nowrap"},e_={class:"w-40 !py-4"},t_={class:"decoration-dotted whitespace-nowrap"},a_={class:"w-40"},s_={class:"font-medium whitespace-nowrap"},r_={class:"text-center"},i_={key:0,class:"flex items-center justify-center whitespace-nowrap"},l_={key:1,class:"flex items-center justify-center whitespace-nowrap"},n_={class:"whitespace-nowrap"},o_={class:"whitespace-nowrap"},c_={class:"whitespace-nowrap"},d_={class:"whitespace-nowrap"},u_={class:"w-40 !py-4"},p_={class:"table-report__action"},m_={class:"flex justify-center items-center"},h_=["onClick"],g_=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),f_={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},w_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),v_={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},__=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),y_={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},x_=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),b_={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},k_=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),D_=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),C_=[k_,D_],P_={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},S_={class:"w-full sm:w-auto sm:mr-auto"},z_={class:"pagination"},N_={class:"page-item"},T_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),M_=[T_],I_=["onClick"],U_={class:"page-item"},E_=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),F_=[E_],$_=(0,i._)("option",null,"10",-1),A_=(0,i._)("option",null,"25",-1),B_=(0,i._)("option",null,"35",-1),q_=(0,i._)("option",null,"50",-1),j_=(0,i._)("option",null,"100",-1),V_=(0,i._)("option",null,"500",-1),L_=(0,i._)("option",null,"1000",-1),Z_=[$_,A_,B_,q_,j_,V_,L_],R_={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},W_={class:"modal-dialog"},H_={class:"modal-content"},O_={class:"modal-body p-0"},Y_={class:"p-5 text-center"},K_=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),G_=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),J_={class:"text-slate-500 mt-2"},Q_=["href"],X_=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function ey(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Iv,l.loading?((0,i.wg)(),(0,i.iD)("label",Uv,Fv)):(0,i.kq)("",!0),(0,i._)("div",$v,[(0,i._)("div",Av,[(0,i._)("div",Bv,[(0,i._)("div",qv,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),jv])]),(0,i._)("div",Vv,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Zv)]),(0,i._)("div",Rv," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Wv]),(0,i._)("div",Hv,[(0,i._)("table",Ov,[Yv,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Kv,[(0,i._)("a",Gv,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Jv,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Qv,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Xv," Individual "))]),(0,i._)("td",e_,[(0,i._)("a",t_,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",a_,[(0,i._)("a",s_,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",r_,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",i_,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",l_,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",n_,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",o_,(0,Ns.zw)(e.cancelReason),1)]),(0,i._)("td",null,[(0,i._)("div",c_,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",d_,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",u_,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",p_,[(0,i._)("div",m_,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[g_,(0,i.Uk)(" Files ")],8,h_),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",f_,[w_,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",v_,[__,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",y_,[x_,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",b_,C_)):(0,i.kq)("",!0),(0,i._)("div",P_,[(0,i._)("nav",S_,[(0,i._)("ul",z_,[(0,i._)("li",N_,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},M_)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,I_)],2)))),128)),(0,i._)("li",U_,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},F_)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Z_,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",R_,[(0,i._)("div",W_,[(0,i._)("div",H_,[(0,i._)("div",O_,[(0,i._)("div",Y_,[K_,G_,(0,i._)("div",J_,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Q_)])))),128))])])]),X_])])])])])}var ty={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/canceled",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const ay=(0,_t.Z)(ty,[["render",ey]]);var sy=ay;const ry=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Completed Transactions",-1),iy={key:0,class:"shadow-md"},ly=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),ny=[ly],oy={class:"grid grid-cols-12 gap-6 mt-8"},cy={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},dy={class:"flex w-full sm:w-auto"},uy={class:"w-48 relative text-slate-500"},py=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),my={class:"ml-1"},hy=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),gy=[hy],fy={class:"hidden xl:block mx-auto text-slate-500"},wy=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),vy={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},_y={class:"table table-report -mt-2"},yy=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),xy={class:"w-40 !py-4"},by={class:"decoration-dotted whitespace-nowrap"},ky={class:"w-40 !py-4"},Dy={key:0,class:"decoration-dotted whitespace-nowrap"},Cy={key:1,class:"decoration-dotted whitespace-nowrap"},Py={class:"w-40 !py-4"},Sy={class:"decoration-dotted whitespace-nowrap"},zy={class:"w-40"},Ny={class:"font-medium whitespace-nowrap"},Ty={class:"text-center"},My={key:0,class:"flex items-center justify-center whitespace-nowrap"},Iy={key:1,class:"flex items-center justify-center whitespace-nowrap"},Uy={class:"whitespace-nowrap"},Ey={class:"whitespace-nowrap"},Fy={class:"whitespace-nowrap"},$y={class:"w-40 !py-4"},Ay={class:"table-report__action"},By={class:"flex justify-center items-center"},qy=["onClick"],jy=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Vy={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ly=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),Zy={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},Ry=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),Wy={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},Hy=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),Oy={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Yy=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Ky=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Gy=[Yy,Ky],Jy={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Qy={class:"w-full sm:w-auto sm:mr-auto"},Xy={class:"pagination"},ex={class:"page-item"},tx=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),ax=[tx],sx=["onClick"],rx={class:"page-item"},ix=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),lx=[ix],nx=(0,i._)("option",null,"10",-1),ox=(0,i._)("option",null,"25",-1),cx=(0,i._)("option",null,"35",-1),dx=(0,i._)("option",null,"50",-1),ux=(0,i._)("option",null,"100",-1),px=(0,i._)("option",null,"500",-1),mx=(0,i._)("option",null,"1000",-1),hx=[nx,ox,cx,dx,ux,px,mx],gx={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},fx={class:"modal-dialog"},wx={class:"modal-content"},vx={class:"modal-body p-0"},_x={class:"p-5 text-center"},yx=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),xx=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),bx={class:"text-slate-500 mt-2"},kx=["href"],Dx=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Cx(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[ry,l.loading?((0,i.wg)(),(0,i.iD)("label",iy,ny)):(0,i.kq)("",!0),(0,i._)("div",oy,[(0,i._)("div",cy,[(0,i._)("div",dy,[(0,i._)("div",uy,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),py])]),(0,i._)("div",my,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},gy)]),(0,i._)("div",fy," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),wy]),(0,i._)("div",vy,[(0,i._)("table",_y,[yy,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",xy,[(0,i._)("a",by,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",ky,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Dy,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Cy," Individual "))]),(0,i._)("td",Py,[(0,i._)("a",Sy,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",zy,[(0,i._)("a",Ny,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Ty,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",My,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",Iy,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Uy,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Ey,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",Fy,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",$y,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",Ay,[(0,i._)("div",By,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[jy,(0,i.Uk)(" Files ")],8,qy),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Vy,[Ly,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Zy,[Ry,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Wy,[Hy,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Oy,Gy)):(0,i.kq)("",!0),(0,i._)("div",Jy,[(0,i._)("nav",Qy,[(0,i._)("ul",Xy,[(0,i._)("li",ex,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},ax)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,sx)],2)))),128)),(0,i._)("li",rx,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},lx)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},hx,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",gx,[(0,i._)("div",fx,[(0,i._)("div",wx,[(0,i._)("div",vx,[(0,i._)("div",_x,[yx,xx,(0,i._)("div",bx,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,kx)])))),128))])])]),Dx])])])])])}var Px={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/completed",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Sx=(0,_t.Z)(Px,[["render",Cx]]);var zx=Sx;const Nx=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Revoked Transactions",-1),Tx={key:0,class:"shadow-md"},Mx=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ix=[Mx],Ux={class:"grid grid-cols-12 gap-6 mt-8"},Ex={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Fx={class:"flex w-full sm:w-auto"},$x={class:"w-48 relative text-slate-500"},Ax=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Bx={class:"ml-1"},qx=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),jx=[qx],Vx={class:"hidden xl:block mx-auto text-slate-500"},Lx=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Zx={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Rx={class:"table table-report -mt-2"},Wx=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Hx={class:"w-40 !py-4"},Ox={class:"decoration-dotted whitespace-nowrap"},Yx={class:"w-40 !py-4"},Kx={key:0,class:"decoration-dotted whitespace-nowrap"},Gx={key:1,class:"decoration-dotted whitespace-nowrap"},Jx={class:"w-40 !py-4"},Qx={class:"decoration-dotted whitespace-nowrap"},Xx={class:"w-40"},eb={class:"font-medium whitespace-nowrap"},tb={class:"text-center"},ab={class:"flex items-center justify-center whitespace-nowrap"},sb={class:"whitespace-nowrap"},rb={class:"whitespace-nowrap"},ib={class:"whitespace-nowrap"},lb={class:"w-40 !py-4"},nb={class:"table-report__action"},ob={class:"flex justify-center items-center"},cb=["onClick"],db=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),ub={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},pb=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),mb={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},hb=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),gb={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},fb=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),wb={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},vb=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),_b=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),yb=[vb,_b],xb={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},bb={class:"w-full sm:w-auto sm:mr-auto"},kb={class:"pagination"},Db={class:"page-item"},Cb=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Pb=[Cb],Sb=["onClick"],zb={class:"page-item"},Nb=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Tb=[Nb],Mb=(0,i._)("option",null,"10",-1),Ib=(0,i._)("option",null,"25",-1),Ub=(0,i._)("option",null,"35",-1),Eb=(0,i._)("option",null,"50",-1),Fb=(0,i._)("option",null,"100",-1),$b=(0,i._)("option",null,"500",-1),Ab=(0,i._)("option",null,"1000",-1),Bb=[Mb,Ib,Ub,Eb,Fb,$b,Ab],qb={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},jb={class:"modal-dialog"},Vb={class:"modal-content"},Lb={class:"modal-body p-0"},Zb={class:"p-5 text-center"},Rb=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Wb=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Hb={class:"text-slate-500 mt-2"},Ob=["href"],Yb=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Kb(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Nx,l.loading?((0,i.wg)(),(0,i.iD)("label",Tx,Ix)):(0,i.kq)("",!0),(0,i._)("div",Ux,[(0,i._)("div",Ex,[(0,i._)("div",Fx,[(0,i._)("div",$x,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Ax])]),(0,i._)("div",Bx,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},jx)]),(0,i._)("div",Vx," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Lx]),(0,i._)("div",Zx,[(0,i._)("table",Rx,[Wx,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Hx,[(0,i._)("a",Ox,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Yx,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Kx,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Gx," Individual "))]),(0,i._)("td",Jx,[(0,i._)("a",Qx,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",Xx,[(0,i._)("a",eb,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",tb,[(0,i._)("div",ab,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1)]),(0,i._)("td",null,[(0,i._)("div",sb,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",rb,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",ib,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",lb,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",nb,[(0,i._)("div",ob,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[db,(0,i.Uk)(" Files ")],8,cb),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",ub,[pb,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",mb,[hb,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",gb,[fb,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",wb,yb)):(0,i.kq)("",!0),(0,i._)("div",xb,[(0,i._)("nav",bb,[(0,i._)("ul",kb,[(0,i._)("li",Db,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},Pb)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Sb)],2)))),128)),(0,i._)("li",zb,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Tb)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Bb,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",qb,[(0,i._)("div",jb,[(0,i._)("div",Vb,[(0,i._)("div",Lb,[(0,i._)("div",Zb,[Rb,Wb,(0,i._)("div",Hb,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Ob)])))),128))])])]),Yb])])])])])}var Gb={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/revoked",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Jb=(0,_t.Z)(Gb,[["render",Kb]]);var Qb=Jb,Xb=a.p+"img/logow.71910c9a.png";const ek=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),tk={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},ak={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},sk=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),rk={class:"tab-content"},ik={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},lk={key:0},nk={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},ok={class:"w-12 h-12 flex-none image-fit mr-1"},ck=["title","src"],dk={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},uk={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},pk={class:"ml-2 overflow-hidden"},mk={class:"flex items-center"},hk={href:"javascript:;",class:"font-medium"},gk={class:"w-full truncate text-slate-500 mt-0.5"},fk={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},wk={class:"w-12 h-12 flex-none image-fit mr-1"},vk=["title","src"],_k={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},yk={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},xk={class:"ml-2 overflow-hidden"},bk={class:"flex items-center"},kk={href:"javascript:;",class:"font-medium"},Dk={class:"w-full truncate text-slate-500 mt-0.5"},Ck={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},Pk={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},Sk={class:"chat__box box"},zk={class:"h-full flex flex-col"},Nk={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},Tk={class:"flex items-center"},Mk={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},Ik=["title","src"],Uk={class:"ml-3 mr-auto"},Ek={class:"font-medium text-base"},Fk=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),$k={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},Ak={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},Bk=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-vertical",class:"w-4 h-4"})])],-1),qk={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},jk={class:"mt-1 text-xs text-white text-opacity-80"},Vk={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},Lk=["title","src"],Zk={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Rk={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},Wk={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},Hk=["title","src"],Ok={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Yk={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},Kk={class:"mt-1 text-xs text-slate-500"},Gk={key:0,class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},Jk=(0,i.uE)('<div class="flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"><div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div><div class="w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"><i data-lucide="paperclip" class="w-full h-full"></i><input type="file" class="w-full h-full top-0 left-0 absolute opacity-0"></div></div>',1),Qk=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),Xk=[Qk],eD=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey, Charlize Theron!</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function tD(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[ek,(0,i._)("div",tk,[(0,i._)("div",ak,[sk,(0,i._)("div",rk,[(0,i._)("div",ik,[null!==l.manager||null!==l.agent?((0,i.wg)(),(0,i.iD)("div",lk,[(0,i._)("div",nk,[null!==l.manager?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[2]||(t[2]=e=>n.selectChat(l.manager)),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",ok,[l.manager.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.manager.avatarUploadDate?"Uploaded at "+l.manager.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${l.manager.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,ck)):((0,i.wg)(),(0,i.iD)("img",dk)),l.manager.isOnline?((0,i.wg)(),(0,i.iD)("div",uk)):(0,i.kq)("",!0)]),(0,i._)("div",pk,[(0,i._)("div",mk,[(0,i._)("a",hk,(0,Ns.zw)(l.manager.firstName)+" "+(0,Ns.zw)(l.manager.lastName),1)]),(0,i._)("div",gk,(0,Ns.zw)(l.manager.email),1)]),l.manager.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",fk,(0,Ns.zw)(l.manager.unreadCount),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),null!==l.agent?((0,i.wg)(),(0,i.iD)("div",{key:1,onClick:t[5]||(t[5]=e=>n.selectChat(l.agent)),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",wk,[l.agent.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.agent.avatarUploadDate?"Uploaded at "+l.agent.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${l.agent.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,vk)):((0,i.wg)(),(0,i.iD)("img",_k)),l.agent.isOnline?((0,i.wg)(),(0,i.iD)("div",yk)):(0,i.kq)("",!0)]),(0,i._)("div",xk,[(0,i._)("div",bk,[(0,i._)("a",kk,(0,Ns.zw)(l.agent.firstName)+" "+(0,Ns.zw)(l.agent.lastName),1)]),(0,i._)("div",Dk,(0,Ns.zw)(l.agent.email),1)]),l.agent.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",Ck,(0,Ns.zw)(l.agent.unreadCount),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])])]),(0,i._)("div",Pk,[(0,i._)("div",Sk,[(0,i._)("div",zk,[(0,i._)("div",Nk,[(0,i._)("div",Tk,[(0,i._)("div",Mk,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${l.avatarCustomer}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Ik)):(0,i.kq)("",!0)]),(0,i._)("div",Uk,[(0,i._)("div",Ek,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),Fk])])]),(0,i._)("div",$k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",Ak,[Bk,(0,i._)("div",qk,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",jk,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",Vk,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[8]||(t[8]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[9]||(t[9]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Lk)):((0,i.wg)(),(0,i.iD)("img",Zk))])])):((0,i.wg)(),(0,i.iD)("div",Rk,[(0,i._)("div",Wk,[a.senderId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[10]||(t[10]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[11]||(t[11]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Hk)):((0,i.wg)(),(0,i.iD)("img",Ok))]),(0,i._)("div",Yk,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",Kk,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",Gk,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[12]||(t[12]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),Jk,(0,i._)("a",{href:"javascript:;",onClick:t[13]||(t[13]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},Xk)])):(0,i.kq)("",!0)]),eD])])])])}var aD={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,manager:null,agent:null,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null}},computed:{axiosBaseUrl(){return r.Z.defaults.baseURL}},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){const t=e.senderId._id===this.profileId;return t},getProfile(){this.loading=!0;const e=wt.Z.get("token");this.axios.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1;const t=e.data.user;this.profileId=e.data.user._id,t?(this.profileId=t._id,this.manager=t.manager,t.agent&&(this.agent=t.agent)):this.errorMessage="No user data found."})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving user:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");this.axios.get("/api/allusers",{headers:{token:e}}).then((e=>{this.users=e.data.users})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await this.axios.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""!==this.newMessage.trim()){const t={text:this.newMessage,senderId:this.profileId,receiverId:this.receiverUser},a=wt.Z.get("token");try{await this.axios.post("/api/chat/message",t,{headers:{token:a}}),t.receiverId===this.selectedChat._id?this.messages.push({...t,senderId:this.selectedChat}):this.messages.push(t),this.newMessage="",this.$socket.emit("chat message",t),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(t.receiverId),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const sD=(0,_t.Z)(aD,[["render",tD]]);var rD=sD;const iD=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),lD={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},nD={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},oD=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),cD={class:"tab-content"},dD={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},uD={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},pD={key:0,class:"shadow-md"},mD=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),hD=[mD],gD=["onClick"],fD={class:"w-12 h-12 flex-none image-fit mr-1"},wD=["title","src"],vD={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},_D={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},yD={class:"ml-2 overflow-hidden"},xD={class:"flex items-center"},bD={href:"javascript:;",class:"font-medium"},kD={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},DD={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},CD={class:"chat__box box"},PD={class:"h-full flex flex-col"},SD={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},zD={class:"flex items-center"},ND={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},TD=["title","src"],MD={class:"ml-3 mr-auto"},ID={class:"font-medium text-base"},UD=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),ED={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},FD={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},$D=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"})],-1),AD={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},BD={key:0},qD=["href"],jD={key:1},VD=["title","src"],LD={class:"mt-1 text-xs text-white text-opacity-80"},ZD={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},RD=["title","src"],WD={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},HD={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},OD={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},YD=["title","src"],KD={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},GD={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},JD=["title","src"],QD={key:1},XD=["href"],eC={key:2},tC={class:"mt-1 text-xs text-slate-500"},aC={key:0,enctype:"multipart/form-data","data-single":"true",action:"/file-upload",class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},sC={class:"flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"},rC=(0,i.uE)('<div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div>',1),iC={class:"w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"},lC=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-paperclip"},[(0,i._)("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})],-1),nC=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),oC=[nC],cC=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey,</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function dC(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[iD,(0,i._)("div",lD,[(0,i._)("div",nD,[oD,(0,i._)("div",cD,[(0,i._)("div",dD,[(0,i._)("div",uD,[l.loading?((0,i.wg)(),(0,i.iD)("label",pD,hD)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.users,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,onClick:e=>n.selectChat(a),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",fD,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,wD)):((0,i.wg)(),(0,i.iD)("img",vD)),a.isOnline?((0,i.wg)(),(0,i.iD)("div",_D)):(0,i.kq)("",!0)]),(0,i._)("div",yD,[(0,i._)("div",xD,[(0,i._)("a",bD,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)])]),a.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",kD,(0,Ns.zw)(a.unreadCount),1)):(0,i.kq)("",!0)],8,gD)))),128))])])])]),(0,i._)("div",DD,[(0,i._)("div",CD,[(0,i._)("div",PD,[(0,i._)("div",SD,[(0,i._)("div",zD,[(0,i._)("div",ND,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${l.avatarCustomer}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,TD)):(0,i.kq)("",!0)]),(0,i._)("div",MD,[(0,i._)("div",ID,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),UD])])]),(0,i._)("div",ED,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",FD,[$D,(0,i._)("div",AD,[n.isFile(a.senderAvatar)?((0,i.wg)(),(0,i.iD)("div",BD,[(0,i._)("a",{href:`${e.axios.defaults.baseURL}/${a.senderAvatar}`,target:"_blank",rel:"noopener noreferrer"},(0,Ns.zw)(n.getFileName(a.senderAvatar)),9,qD)])):((0,i.wg)(),(0,i.iD)("div",jD,[a.senderAvatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Sender's Avatar",src:`${e.axios.defaults.baseURL}/${a.senderAvatar}`,onError:t[4]||(t[4]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[5]||(t[5]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,VD)):(0,i.kq)("",!0)])),(0,i.Uk)(" "+(0,Ns.zw)(a.text)+" ",1),(0,i._)("div",LD,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",ZD,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.senderId.avatar}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,RD)):((0,i.wg)(),(0,i.iD)("img",WD))])])):((0,i.wg)(),(0,i.iD)("div",HD,[(0,i._)("div",OD,[a.receiverId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.senderId.avatar}`,onError:t[8]||(t[8]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[9]||(t[9]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,YD)):((0,i.wg)(),(0,i.iD)("img",KD))]),(0,i._)("div",GD,[a.receiverAvatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Receiver's Avatar",src:`http://localhost:8000/${a.receiverAvatar}`,onError:t[10]||(t[10]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[11]||(t[11]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,JD)):(0,i.kq)("",!0),n.isFile(a.text)?((0,i.wg)(),(0,i.iD)("div",QD,[(0,i._)("a",{href:a.text,target:"_blank",rel:"noopener noreferrer"},(0,Ns.zw)(n.getFileName(a.text)),9,XD)])):((0,i.wg)(),(0,i.iD)("div",eC,(0,Ns.zw)(a.text),1)),(0,i._)("div",tC,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",aC,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[12]||(t[12]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),(0,i._)("div",sC,[rC,(0,i._)("div",iC,[lC,(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[13]||(t[13]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"w-full h-full top-0 left-0 absolute opacity-0"},null,544)])]),(0,i._)("a",{href:"javascript:;",onClick:t[14]||(t[14]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},oC)])):(0,i.kq)("",!0)]),cC])])])])}var uC={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",senderAvatar:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null,loadingSelect:!1,loading:!1}},mounted(){this.fetchChatMessages()},watch(){this.receiverUser=this.profileId,this.fetchChatMessages()},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("ENTROU"),console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{isFile(e){return/\.(pdf|xlsx)$/i.test(e)},getFileName(e){const t=e.split("/");return t[t.length-1]},onFileChange(e){const t=e.target.files[0];this.senderAvatar=t},incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){return!(!e.senderId||!e.senderId.avatar||e.senderId._id!==this.profileId)},getProfile(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1,this.profileId=e.data.user._id,console.log(this.profileId)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/allusers",{headers:{token:e}}).then((e=>{this.users=e.data.users,this.loading=!1})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.loadingSelect=!0,this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.loadingSelect=!1,this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""===this.newMessage.trim()&&!this.senderAvatar||""===this.newMessage.trim()&&!this.senderAvatar){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});e.fire({icon:"success",title:"Success!",text:"Cannot send empty message",timer:3e3})}else{const t=new FormData;t.append("text",this.newMessage),t.append("senderId",this.profileId),t.append("receiverId",this.receiverUser),t.append("senderAvatar",this.senderAvatar),console.log("senderID",this.profileId);const a=wt.Z.get("token");try{await r.Z.post("/api/chat/message",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});const e={text:this.newMessage,senderId:this.profileId};this.senderAvatar="",e.isCurrentUser=!0,this.messages.push(e),this.newMessage="",this.$socket.emit("chat message",e),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(this.receiverUser),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const pC=(0,_t.Z)(uC,[["render",dC]]);var mC=pC;const hC=(0,i.uE)('<div class="intro-y flex flex-col sm:flex-row items-center mt-8"><h2 class="text-lg font-medium mr-auto">Calendar</h2><div class="w-full sm:w-auto flex mt-4 sm:mt-0"><button class="btn btn-primary shadow-md mr-2">Print Schedule</button><div class="dropdown ml-auto sm:ml-0"><button class="dropdown-toggle btn px-2 box" aria-expanded="false" data-tw-toggle="dropdown"><span class="w-5 h-5 flex items-center justify-center"><i class="w-4 h-4" data-lucide="plus"></i></span></button><div class="dropdown-menu w-40"><ul class="dropdown-content"><li><a href="#" class="dropdown-item"><i data-lucide="share-2" class="w-4 h-4 mr-2"></i> Share </a></li><li><a href="#" class="dropdown-item"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Settings </a></li></ul></div></div></div></div><div class="grid grid-cols-12 gap-5 mt-5"><div class="col-span-12 xl:col-span-4 2xl:col-span-3"><div class="box p-5 intro-y"><button type="button" class="btn btn-primary w-full mt-2"><i class="w-4 h-4 mr-2" data-lucide="edit-3"></i> Add New Schedule </button><div class="border-t border-b border-slate-200/60 dark:border-darkmode-400 mt-6 mb-5 py-3" id="calendar-events"><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">VueJS Amsterdam</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">2</span> Days <span class="mx-1">•</span> 10:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-warning rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">Vue Fes Japan 2019</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">3</span> Days <span class="mx-1">•</span> 07:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="relative"><div class="event p-3 -mx-3 cursor-pointer transition duration-300 ease-in-out hover:bg-slate-100 dark:hover:bg-darkmode-400 rounded-md flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><div class="pr-10"><div class="event__title truncate">Laracon 2021</div><div class="text-slate-500 text-xs mt-0.5"><span class="event__days">4</span> Days <span class="mx-1">•</span> 11:00 AM </div></div></div><a class="flex items-center absolute top-0 bottom-0 my-auto right-0" href="#"><i data-lucide="edit" class="w-4 h-4 text-slate-500"></i></a></div><div class="text-slate-500 p-3 text-center hidden" id="calendar-no-events"> No events yet </div></div><div class="form-check form-switch flex"><label class="form-check-label" for="checkbox-events">Remove after drop</label><input class="show-code form-check-input ml-auto" type="checkbox" id="checkbox-events"></div></div><div class="box p-5 intro-y mt-5"><div class="flex"><i data-lucide="chevron-left" class="w-5 h-5 text-slate-500"></i><div class="font-medium text-base mx-auto">April</div><i data-lucide="chevron-right" class="w-5 h-5 text-slate-500"></i></div><div class="grid grid-cols-7 gap-4 mt-5 text-center"><div class="font-medium">Su</div><div class="font-medium">Mo</div><div class="font-medium">Tu</div><div class="font-medium">We</div><div class="font-medium">Th</div><div class="font-medium">Fr</div><div class="font-medium">Sa</div><div class="py-0.5 rounded relative text-slate-500">29</div><div class="py-0.5 rounded relative text-slate-500">30</div><div class="py-0.5 rounded relative text-slate-500">31</div><div class="py-0.5 rounded relative">1</div><div class="py-0.5 rounded relative">2</div><div class="py-0.5 rounded relative">3</div><div class="py-0.5 rounded relative">4</div><div class="py-0.5 rounded relative">5</div><div class="py-0.5 bg-success/20 dark:bg-success/30 rounded relative"> 6 </div><div class="py-0.5 rounded relative">7</div><div class="py-0.5 bg-primary text-white rounded relative">8</div><div class="py-0.5 rounded relative">9</div><div class="py-0.5 rounded relative">10</div><div class="py-0.5 rounded relative">11</div><div class="py-0.5 rounded relative">12</div><div class="py-0.5 rounded relative">13</div><div class="py-0.5 rounded relative">14</div><div class="py-0.5 rounded relative">15</div><div class="py-0.5 rounded relative">16</div><div class="py-0.5 rounded relative">17</div><div class="py-0.5 rounded relative">18</div><div class="py-0.5 rounded relative">19</div><div class="py-0.5 rounded relative">20</div><div class="py-0.5 rounded relative">21</div><div class="py-0.5 rounded relative">22</div><div class="py-0.5 bg-pending/20 dark:bg-pending/30 rounded relative"> 23 </div><div class="py-0.5 rounded relative">24</div><div class="py-0.5 rounded relative">25</div><div class="py-0.5 rounded relative">26</div><div class="py-0.5 bg-primary/10 dark:bg-primary/50 rounded relative"> 27 </div><div class="py-0.5 rounded relative">28</div><div class="py-0.5 rounded relative">29</div><div class="py-0.5 rounded relative">30</div><div class="py-0.5 rounded relative text-slate-500">1</div><div class="py-0.5 rounded relative text-slate-500">2</div><div class="py-0.5 rounded relative text-slate-500">3</div><div class="py-0.5 rounded relative text-slate-500">4</div><div class="py-0.5 rounded relative text-slate-500">5</div><div class="py-0.5 rounded relative text-slate-500">6</div><div class="py-0.5 rounded relative text-slate-500">7</div><div class="py-0.5 rounded relative text-slate-500">8</div><div class="py-0.5 rounded relative text-slate-500">9</div></div><div class="border-t border-slate-200/60 dark:border-darkmode-400 pt-5 mt-5"><div class="flex items-center"><div class="w-2 h-2 bg-pending rounded-full mr-3"></div><span class="truncate">Independence Day</span><div class="h-px flex-1 border border-r border-dashed border-slate-200 mx-3 xl:hidden"></div><span class="font-medium xl:ml-auto">23th</span></div><div class="flex items-center mt-4"><div class="w-2 h-2 bg-primary rounded-full mr-3"></div><span class="truncate">Memorial Day</span><div class="h-px flex-1 border border-r border-dashed border-slate-200 mx-3 xl:hidden"></div><span class="font-medium xl:ml-auto">10th</span></div></div></div></div><div class="col-span-12 xl:col-span-8 2xl:col-span-9"><div class="box p-5"><div class="full-calendar" id="calendar"></div></div></div></div>',2),gC=[hC];function fC(e,t){return(0,i.wg)(),(0,i.iD)("div",null,gC)}const wC={},vC=(0,_t.Z)(wC,[["render",fC]]);var _C=vC;const yC=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create a Partner")],-1),xC={class:"grid grid-cols-12 gap-6 mt-5"},bC={class:"intro-y col-span-12 lg:col-span-6"},kC={class:"intro-y box p-5"},DC=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Partner Name *",-1),CC={class:"mt-3"},PC=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Location *",-1),SC={class:"input-group"},zC={class:"mt-3"},NC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Business *",-1),TC={class:"input-group"},MC={class:"mt-3"},IC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),UC={class:"input-group"},EC={class:"grid grid-cols-3 gap-6 mt-3"},FC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),$C={class:"input-group"},AC=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),BC={class:"input-group"},qC=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),jC={class:"input-group"},VC=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),LC={class:"fallback"},ZC={class:"text-right mt-5"},RC=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),WC=["disabled"];function HC(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[yC,(0,i._)("form",{onSubmit:t[8]||(t[8]=(0,s.iM)(((...e)=>n.onCreatePartner&&n.onCreatePartner(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",xC,[(0,i._)("div",bC,[(0,i._)("div",kC,[(0,i._)("div",null,[DC,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.partnerName=e),id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name"},null,512),[[s.nr,l.partnerName]])]),(0,i._)("div",CC,[PC,(0,i._)("div",SC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.partnerLocation=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"location","aria-describedby":"input-group-1"},null,512),[[s.nr,l.partnerLocation]])])]),(0,i._)("div",zC,[NC,(0,i._)("div",TC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.partnerBusiness=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"business","aria-describedby":"input-group-2"},null,512),[[s.nr,l.partnerBusiness]])])]),(0,i._)("div",MC,[IC,(0,i._)("div",UC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-2"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",EC,[(0,i._)("div",null,[FC,(0,i._)("div",$C,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[AC,(0,i._)("div",BC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e),type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[qC,(0,i._)("div",jC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e),type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",null,[VC,(0,i._)("div",LC,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",ZC,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[RC])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,WC)])])])])],32)])}var OC={data(){return{partnerName:"",partnerLocation:"",partnerBusiness:"",contact1:"",contact2:"",enrolmentDate:"",email:"",avatar:null,monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreatePartner(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=["partnerName","partnerLocation","partnerBusiness","contact1","contact2","enrolmentDate","email","avatar"];for(const s of t)if(""===this[s])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${s} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const t=new FormData;t.append("partnerName",this.partnerName),t.append("partnerLocation",this.partnerLocation),t.append("partnerBusiness",this.partnerBusiness),t.append("contact1",this.contact1),t.append("contact2",this.contact2),t.append("enrolmentDate",this.enrolmentDate),t.append("email",this.email),t.append("avatar",this.avatar),this.btnloading=!0;const a=wt.Z.get("token"),s=await r.Z.post("/api/partner/create",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Partner created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewpartner"),this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("created successfully")}catch(a){if(a.response&&a.response.data&&a.response.data.error){const e=a.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error creating partner:",e)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error creating partner:",a.message);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const YC=(0,_t.Z)(OC,[["render",HC]]);var KC=YC;const GC={class:"intro-y flex items-center mt-8"},JC=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create a Partner",-1),QC={key:0},XC=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),eP=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),tP=[XC,eP],aP={class:"grid grid-cols-12 gap-6 mt-5"},sP={class:"intro-y col-span-12 lg:col-span-6"},rP={class:"intro-y box p-5"},iP=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Partner Name *",-1),lP={class:"mt-3"},nP=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Location *",-1),oP={class:"input-group"},cP={class:"mt-3"},dP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Business *",-1),uP={class:"input-group"},pP={class:"mt-3"},mP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),hP={class:"input-group"},gP={class:"grid grid-cols-3 gap-6 mt-3"},fP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),wP={class:"input-group"},vP=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),_P={class:"input-group"},yP=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),xP={class:"input-group"},bP=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),kP={class:"fallback"},DP=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),CP={class:"grid grid-cols-2 gap-6 mt-1"},PP=(0,i._)("option",{value:"Active"},"Active",-1),SP=(0,i._)("option",{value:"Inactive"},"Inactive",-1),zP=[PP,SP],NP={class:"text-right mt-5"},TP=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),MP=["disabled"];function IP(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",GC,[JC,l.loading?((0,i.wg)(),(0,i.iD)("div",QC,tP)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[9]||(t[9]=(0,s.iM)(((...e)=>n.onUpdatePartner&&n.onUpdatePartner(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",aP,[(0,i._)("div",sP,[(0,i._)("div",rP,[(0,i._)("div",null,[iP,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.partnerName=e),id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name"},null,512),[[s.nr,l.partnerName]])]),(0,i._)("div",lP,[nP,(0,i._)("div",oP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.partnerLocation=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"location","aria-describedby":"input-group-1"},null,512),[[s.nr,l.partnerLocation]])])]),(0,i._)("div",cP,[dP,(0,i._)("div",uP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.partnerBusiness=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"business","aria-describedby":"input-group-2"},null,512),[[s.nr,l.partnerBusiness]])])]),(0,i._)("div",pP,[mP,(0,i._)("div",hP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-2"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",gP,[(0,i._)("div",null,[fP,(0,i._)("div",wP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[vP,(0,i._)("div",_P,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e),type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[yP,(0,i._)("div",xP,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e),type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",null,[bP,(0,i._)("div",kP,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),DP,(0,i._)("div",CP,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},zP,512),[[s.bM,l.status]])]),(0,i._)("div",NP,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[TP])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,MP)])])])])],32)])}var UP={data(){return{partnerName:"",partnerLocation:"",partnerBusiness:"",contact1:"",contact2:"",enrolmentDate:"",email:"",avatar:null,monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){console.log("response 1");const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/partner/${e}`,{headers:{token:t}}).then((e=>{this.partnerName=e.data.partner.partnerName,this.partnerLocation=e.data.partner.partnerLocation,this.partnerBusiness=e.data.partner.partnerBusiness,this.contact1=e.data.partner.contact1,this.contact2=e.data.partner.contact2,this.enrolmentDate=this.formatDate(e.data.partner.enrolmentDate),this.enrolmentDate=this.formatDate(e.data.partner.enrolmentDate),this.email=e.data.partner.email,this.status=e.data.partner.status})).catch((e=>{this.errorMessage="Error retrieving this partner. Please try again.",console.error("Error retrieving partner:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePartner(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["partnerName","partnerLocation","partnerBusiness","contact1","contact2","enrolmentDate","email","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("partnerName",this.partnerName),a.append("partnerLocation",this.partnerLocation),a.append("partnerBusiness",this.partnerBusiness),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("enrolmentDate",this.enrolmentDate),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/partner/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Partner update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating partner:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating partner:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const EP=(0,_t.Z)(UP,[["render",IP]]);var FP=EP;const $P={key:0,class:"shadow-md"},AP=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),BP=[AP],qP=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Partner",-1),jP={class:"grid grid-cols-12 gap-6 mt-5"},VP={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},LP={class:"flex w-full sm:w-auto"},ZP={class:"w-48 relative text-slate-500"},RP=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),WP={class:"hidden xl:block mx-auto text-slate-500"},HP=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),OP={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},YP={class:"table table-report -mt-2"},KP=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner name"),(0,i._)("th",{class:"whitespace-nowrap"},"Location"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Business"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),GP={class:"w-40 !py-4"},JP={class:"w-10 h-10 image-fit zoom-in"},QP=["title","src"],XP={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},eS={class:"w-40 !py-4"},tS={href:"#",class:"decoration-dotted whitespace-nowrap"},aS={class:"w-40"},sS={href:"#",class:"font-medium whitespace-nowrap"},rS={class:"text-center"},iS={class:"flex items-center justify-center whitespace-nowrap"},lS={class:"w-40"},nS={class:"font-medium whitespace-nowrap"},oS={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},cS={class:"text-center"},dS={class:"flex items-center justify-center whitespace-nowrap"},uS=["href"],pS={class:"w-40 !py-4"},mS={class:"table-report__action"},hS={class:"flex justify-center items-center"},gS={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},fS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),wS={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},vS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),_S={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},yS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),xS={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},bS=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),kS=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),DS=[bS,kS],CS={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},PS={class:"w-full sm:w-auto sm:mr-auto"},SS={class:"pagination"},zS={class:"page-item"},NS=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),TS=[NS],MS=["onClick"],IS={class:"page-item"},US=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),ES=[US],FS=(0,i._)("option",null,"10",-1),$S=(0,i._)("option",null,"25",-1),AS=(0,i._)("option",null,"35",-1),BS=(0,i._)("option",null,"50",-1),qS=(0,i._)("option",null,"100",-1),jS=[FS,$S,AS,BS,qS],VS=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function LS(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",$P,BP)):(0,i.kq)("",!0),qP,(0,i._)("div",jP,[(0,i._)("div",VP,[(0,i._)("div",LP,[(0,i._)("div",ZP,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),RP])]),(0,i._)("div",WP," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),HP]),(0,i._)("div",OP,[(0,i._)("table",YP,[KP,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",GP,[(0,i._)("div",JP,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,QP)):((0,i.wg)(),(0,i.iD)("img",XP))])]),(0,i._)("td",eS,[(0,i._)("label",tS,(0,Ns.zw)(a.partnerName),1)]),(0,i._)("td",aS,[(0,i._)("label",sS,(0,Ns.zw)(a.partnerLocation),1)]),(0,i._)("td",rS,[(0,i._)("div",iS,(0,Ns.zw)(a.partnerBusiness),1)]),(0,i._)("td",lS,[(0,i._)("label",nS,(0,Ns.zw)(a.contact1),1),(0,i._)("div",oS,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",cS,[(0,i._)("div",dS,[(0,i._)("a",{href:"mailto:"+a.email},(0,Ns.zw)(a.email),9,uS)])]),(0,i._)("td",pS,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",mS,[(0,i._)("div",hS,[(0,i._)("a",gS,[fS,(0,i.Wm)(o,{to:`/updatepartner/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",wS,[vS,(0,i.Wm)(o,{to:`/viewpartneruser/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",_S,[yS,(0,i.Wm)(o,{to:`/viewpartneruser/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",xS,DS)):(0,i.kq)("",!0),(0,i._)("div",CS,[(0,i._)("nav",PS,[(0,i._)("ul",SS,[(0,i._)("li",zS,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},TS)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,MS)],2)))),128)),(0,i._)("li",IS,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},ES)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},jS,544),[[s.bM,l.pageSize]])])]),VS])}var ZS={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allpartner",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=t.data.partner,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.axios=r.Z,this.fetchData()}};const RS=(0,_t.Z)(ZS,[["render",LS]]);var WS=RS;const HS={class:""},OS={class:"intro-y col-span-12 flex flex-wrap sm:flex-nowrap items-center mt-2"},YS={class:"w-full sm:w-auto mt-3 sm:mt-0 sm:ml-auto md:ml-0 ml-2"},KS={class:"w-56 relative text-slate-500 ml-2"},GS={key:0},JS=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),QS=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),XS=[JS,QS],ez={key:0,class:"intro-y box px-5 pt-5 mt-5"},tz={class:""},az=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),sz={class:"p-5"},rz={class:"relative flex items-center"},iz={class:"w-12 h-12 flex-none image-fit"},lz=["src"],nz={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},oz={class:"ml-4 mr-auto"},cz={href:"#",class:"font-medium"},dz={class:"text-slate-500 mr-5 sm:mr-5"},uz={class:"font-medium text-slate-600 dark:text-slate-500"},pz=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),mz={class:"w-12 h-12 flex-none image-fit"},hz=["title","src"],gz={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},fz={class:"ml-4 mr-auto"},wz={href:"#",class:"font-medium"},vz={class:"text-slate-500 mr-5 sm:mr-5"},_z=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),yz={class:"row mt-3"},xz={class:"col-md-12 bg-light text-right"};function bz(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",HS,[(0,i._)("div",OS,[(0,i._)("div",YS,[(0,i._)("div",KS,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-56 box pr-10",placeholder:"Insert MembershipID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md ml-2",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search "),l.loading?((0,i.wg)(),(0,i.iD)("div",GS,XS)):(0,i.kq)("",!0)]),this.userData?((0,i.wg)(),(0,i.iD)("div",ez,[(0,i._)("div",tz,[az,(0,i._)("div",sz,[(0,i._)("div",rz,[(0,i._)("div",iz,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,lz)):((0,i.wg)(),(0,i.iD)("img",nz))]),(0,i._)("div",oz,[(0,i._)("a",cz,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",dz,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1)+" * "+(0,Ns.zw)(this.userData.relation)+" * "+(0,Ns.zw)(this.userData.email),1)]),(0,i._)("div",uz,[(0,i.Wm)(o,{to:`/createtransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[pz])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex items-center mt-5"},[(0,i._)("div",mz,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,hz)):((0,i.wg)(),(0,i.iD)("img",gz))]),(0,i._)("div",fz,[(0,i._)("a",wz,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",vz,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1)+" * "+(0,Ns.zw)(a.relation)+" * "+(0,Ns.zw)(a.email),1)]),(0,i.Wm)(o,{to:`/createtransaction/${a._id}`},{default:(0,i.w5)((()=>[_z])),_:2},1032,["to"])])))),128)),(0,i._)("div",yz,[(0,i._)("div",xz,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-5 mt-3 mb-3",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var kz=a(2492),Dz=a.n(kz),Cz={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void Dz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(console.log("User not found:",s.error),Dz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),Dz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),Dz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const Pz=(0,_t.Z)(Cz,[["render",bz]]);var Sz=Pz;const zz={class:""},Nz={class:"intro-y col-span-12 flex flex-wrap items-center mt-2 space-x-2"},Tz={class:"w-full sm:w-auto flex items-center"},Mz={class:"relative text-slate-500"},Iz={key:0,class:"shadow-md"},Uz=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ez=[Uz],Fz={key:1,class:"intro-y box px-5 pt-5 mt-5"},$z={class:""},Az=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),Bz={class:"p-5"},qz={class:"flex flex-col md:flex-row items-center"},jz={class:"w-12 h-12 flex-none image-fit"},Vz=["src"],Lz={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Zz={class:"ml-4 md:ml-0 md:mr-auto text-center md:text-left"},Rz={href:"#",class:"font-medium"},Wz={class:"text-slate-500 mt-1"},Hz={class:"md:ml-auto md:mr-0 mt-3 md:mt-0 font-medium text-slate-300 dark:text-slate-200 text-center"},Oz=(0,i._)("button",{class:"btn btn-outline-primary w-24 inline-block mr-1 mb-2"}," History ",-1),Yz=(0,i._)("button",{class:"btn btn-primary shadow-md ml-1 md:ml-5 mt-3 md:mt-0"}," Process transaction ",-1),Kz={class:"w-12 h-12 flex-none image-fit"},Gz=["title","src"],Jz={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Qz={class:"ml-4 md:ml-0 md:mr-auto text-center md:text-left"},Xz={href:"#",class:"font-medium"},eN={class:"text-slate-500 mt-1"},tN={class:"md:ml-auto md:mr-0 mt-3 md:mt-0 font-medium text-slate-300 dark:text-slate-200 text-center"},aN=(0,i._)("button",{class:"btn btn-outline-primary w-24 inline-block mr-1 mb-2"}," History ",-1),sN=(0,i._)("button",{class:"btn btn-primary shadow-md ml-1 md:ml-5 mt-3 md:mt-0"}," Process transaction ",-1),rN={class:"row mt-3"},iN={class:"col-md-12 bg-light text-center md:text-right"};function lN(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",zz,[(0,i._)("div",Nz,[(0,i._)("div",Tz,[(0,i._)("div",Mz,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-full sm:w-56 pr-10",placeholder:"Insert Membership ID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 right-0 cursor-pointer","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md flex-shrink-0 ml-3 mt-3 md:mt-0 mx-auto",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search ")]),l.loading?((0,i.wg)(),(0,i.iD)("label",Iz,Ez)):(0,i.kq)("",!0),this.userData?((0,i.wg)(),(0,i.iD)("div",Fz,[(0,i._)("div",$z,[Az,(0,i._)("div",Bz,[(0,i._)("div",qz,[(0,i._)("div",jz,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,Vz)):((0,i.wg)(),(0,i.iD)("img",Lz))]),(0,i._)("div",Zz,[(0,i._)("a",Rz,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",Wz,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1),1)]),(0,i._)("div",Hz,[(0,i.Wm)(o,{to:`/transactionhitory/${this.userData._id}`},{default:(0,i.w5)((()=>[Oz])),_:1},8,["to"]),(0,i.Wm)(o,{to:`/hospitaltransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[Yz])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex flex-col md:flex-row items-center mt-5"},[(0,i._)("div",Kz,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Gz)):((0,i.wg)(),(0,i.iD)("img",Jz))]),(0,i._)("div",Qz,[(0,i._)("a",Xz,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",eN,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1),1)]),(0,i._)("div",tN,[(0,i.Wm)(o,{to:`/transactionhitory/${a._id}`},{default:(0,i.w5)((()=>[aN])),_:2},1032,["to"]),(0,i.Wm)(o,{to:`/hospitaltransaction/${a._id}`},{default:(0,i.w5)((()=>[sN])),_:2},1032,["to"])])])))),128)),(0,i._)("div",rN,[(0,i._)("div",iN,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-1 md:ml-5 mt-3 md:mt-0",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var nN={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},created(){this.axios=r.Z},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null,this.memberShipID=""},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void Dz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(this.loading=!1,console.log("User not found:",s.error),Dz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),Dz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.loading=!1,this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),Dz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const oN=(0,_t.Z)(nN,[["render",lN]]);var cN=oN;const dN={class:""},uN={class:"intro-y col-span-12 flex flex-wrap sm:flex-nowrap items-center mt-2"},pN={class:"w-full sm:w-auto mt-3 sm:mt-0 sm:ml-auto md:ml-0 ml-2"},mN={class:"w-56 relative text-slate-500 ml-2"},hN={key:0,class:"shadow-md"},gN=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),fN=[gN],wN={key:1,class:"intro-y box px-5 pt-5 mt-5"},vN={class:""},_N=(0,i.uE)('<div class=""><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a><div class="dropdown-menu w-40"></div></div></div>',1),yN={class:"p-5"},xN={class:"relative flex items-center"},bN={class:"w-12 h-12 flex-none image-fit"},kN=["src"],DN={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},CN={class:"ml-4 mr-auto"},PN={href:"#",class:"font-medium"},SN={class:"text-slate-500 mr-5 sm:mr-5"},zN={class:"font-medium text-slate-600 dark:text-slate-500"},NN=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),TN={class:"w-12 h-12 flex-none image-fit"},MN=["title","src"],IN={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},UN={class:"ml-4 mr-auto"},EN={href:"#",class:"font-medium"},FN={class:"text-slate-500 mr-5 sm:mr-5"},$N=(0,i._)("button",{class:"btn btn-primary shadow-md ml-5 mt-3 mb-3"}," Proccess transaction ",-1),AN={class:"row mt-3"},BN={class:"col-md-12 bg-light text-right"};function qN(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",dN,[(0,i._)("div",uN,[(0,i._)("div",pN,[(0,i._)("div",mN,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.memberShipID=e),type:"text",class:"form-control w-56 box pr-10",placeholder:"Insert MembershipID..."},null,512),[[s.nr,l.memberShipID]]),(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search",onClick:t[1]||(t[1]=(...e)=>n.searchUser&&n.searchUser(...e))})])]),(0,i._)("button",{class:"btn btn-primary shadow-md ml-2",onClick:t[2]||(t[2]=(...e)=>n.searchUser&&n.searchUser(...e))}," Search ")]),l.loading?((0,i.wg)(),(0,i.iD)("label",hN,fN)):(0,i.kq)("",!0),this.userData?((0,i.wg)(),(0,i.iD)("div",wN,[(0,i._)("div",vN,[_N,(0,i._)("div",yN,[(0,i._)("div",xN,[(0,i._)("div",bN,[l.userData.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:`${e.axios.defaults.baseURL}/${l.userData.avatar}`,alt:"profilecustomer",class:"rounded-full"},null,8,kN)):((0,i.wg)(),(0,i.iD)("img",DN))]),(0,i._)("div",CN,[(0,i._)("a",PN,(0,Ns.zw)(this.userData.firstName)+" "+(0,Ns.zw)(this.userData.lastName),1),(0,i._)("div",SN,(0,Ns.zw)(this.userData.memberShipID)+" * "+(0,Ns.zw)(this.userData.contact1)+" * "+(0,Ns.zw)(this.userData.relation)+" * "+(0,Ns.zw)(this.userData.email),1)]),(0,i._)("div",zN,[(0,i.Wm)(o,{to:`/farmacytransaction/${this.userData._id}`},{default:(0,i.w5)((()=>[NN])),_:1},8,["to"])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"relative flex items-center mt-5"},[(0,i._)("div",TN,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[3]||(t[3]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[4]||(t[4]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,MN)):((0,i.wg)(),(0,i.iD)("img",IN))]),(0,i._)("div",UN,[(0,i._)("a",EN,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",FN,(0,Ns.zw)(a.memberShipID)+" * "+(0,Ns.zw)(a.contact1)+" * "+(0,Ns.zw)(a.relation)+" * "+(0,Ns.zw)(a.email),1)]),(0,i.Wm)(o,{to:`/farmacytransaction/${a._id}`},{default:(0,i.w5)((()=>[$N])),_:2},1032,["to"])])))),128)),(0,i._)("div",AN,[(0,i._)("div",BN,[(0,i._)("button",{class:"btn btn-secondary shadow-md ml-5 mt-3 mb-3",onClick:t[5]||(t[5]=(...e)=>n.cancel&&n.cancel(...e))}," Cancel ")])])])])])):(0,i.kq)("",!0)])])}var jN={data(){return{memberShipID:"",userData:null,avatar:"",loading:null,myMembers:[]}},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},cancel(){this.userData=null,this.memberShipID=""},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async searchUser(){try{this.loading=!0;const e=wt.Z.get("token"),t=this.memberShipID;if(!t)return void Dz().fire({icon:"warning",title:"Empty Input",text:"Please provide a valid membership ID."});const a=await r.Z.get(`/api/membershipid?memberShipID=${t}`,{headers:{"Content-Type":"application/json",token:e}}),s=a.data;this.myMembers=s.thisuser.myMembers,200===a.status?(this.loading=!1,this.userData=s.thisuser):404===a.status?(this.loading=!1,console.log("User not found:",s.error),Dz().fire({icon:"error",title:"User Not Found",text:"The user with the given membership ID was not found."})):(console.log("Unexpected error:",s.error),Dz().fire({icon:"error",title:"Error",text:"An error occurred while searching for the user."}))}catch(e){console.error("Error in searchUser:",e.response.data.error),this.userData=null,"Not authorized: Invalid token"===e.response.data.error&&this.$router.push("/login"),Dz().fire({icon:"info",title:"Error",text:`${e.response.data.error}.`})}},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const VN=(0,_t.Z)(jN,[["render",qN]]);var LN=VN;const ZN={class:"intro-y flex items-center mt-8"},RN={class:"text-lg font-medium mr-auto"},WN={key:0},HN=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),ON=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),YN=[HN,ON],KN={class:"grid grid-cols-12 gap-6 mt-5"},GN={class:"intro-y col-span-12 lg:col-span-6"},JN={class:"intro-y box p-5"},QN={class:"grid grid-cols-2 gap-6 mt-3"},XN=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),eT={class:"input-group"},tT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),aT={class:"input-group"},sT={class:"grid grid-cols-3 gap-6 mt-3"},rT=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),iT={class:"input-group"},lT=(0,i._)("option",null,"ID",-1),nT=(0,i._)("option",null,"Drive Licence",-1),oT=(0,i._)("option",null,"Passport",-1),cT=(0,i._)("option",null,"Voters",-1),dT=(0,i._)("option",null,"...",-1),uT=[lT,nT,oT,cT,dT],pT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),mT={class:"input-group"},hT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),gT={class:"input-group"},fT={class:"grid grid-cols-2 gap-6 mt-3"},wT=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),vT={class:"input-group"},_T=(0,i._)("option",null,"male",-1),yT=(0,i._)("option",null,"female",-1),xT=(0,i._)("option",null,"other",-1),bT=[_T,yT,xT],kT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),DT={class:"input-group"},CT={class:"mt-3"},PT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),ST={class:"input-group"},zT={class:"mt-3"},NT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Profile *",-1),TT={class:"input-group"},MT={class:"grid grid-cols-3 gap-6 mt-3"},IT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),UT={class:"input-group"},ET=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),FT={class:"input-group"},$T=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),AT={class:"input-group"},BT={class:"grid grid-cols-2 gap-6 mt-3"},qT=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),jT={class:"fallback mt-4"},VT={class:"text-right mt-8"},LT=["disabled"];function ZT(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ZN,[(0,i._)("h2",RN," Create user for "+(0,Ns.zw)(l.partnerName),1),l.loading?((0,i.wg)(),(0,i.iD)("div",WN,YN)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",KN,[(0,i._)("div",GN,[(0,i._)("div",JN,[(0,i._)("div",QN,[(0,i._)("div",null,[XN,(0,i._)("div",eT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[tT,(0,i._)("div",aT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",sT,[(0,i._)("div",null,[rT,(0,i._)("div",iT,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},uT,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[pT,(0,i._)("div",mT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[hT,(0,i._)("div",gT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",fT,[(0,i._)("div",null,[wT,(0,i._)("div",vT,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},bT,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[kT,(0,i._)("div",DT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",CT,[PT,(0,i._)("div",ST,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",zT,[NT,(0,i._)("div",TT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.profile=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"profile","aria-describedby":"input-group-1"},null,512),[[s.nr,l.profile]])])]),(0,i._)("div",MT,[(0,i._)("div",null,[IT,(0,i._)("div",UT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[ET,(0,i._)("div",FT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-14",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[$T,(0,i._)("div",AT,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-15",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",BT,[(0,i._)("div",null,[qT,(0,i._)("div",jT,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",VT,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,LT)])])])])],32)])}var RT={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",profile:"",contact1:"",contact2:"",partnerName:"",manager:"",password:"",avatar:null,plans:[],partners:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPartner(){this.loading=!0;const e=wt.Z.get("token"),t=this.$route.params.id;try{const a=await r.Z.get(`/api/partner/${t}`,{headers:{token:e}});if(!a.data.success)throw new Error("Failed to fetch plans");this.partnerName=a.data.partner.partnerName,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateIndivitualCustomer(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","profile","contact1"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("profile",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("id",this.$route.params.id),a.append("password",this.password),this.loading=!0;const s=await r.Z.post("/api/user/partneruser/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});this.loading=!1,e.fire({icon:"success",title:"Success!",text:"Partner user created successfully",timer:3e3}),this.$router.go(-1),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){this.loading=!1,s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message))}}},created(){this.getPartner()}};const WT=(0,_t.Z)(RT,[["render",ZT]]);var HT=WT;const OT={class:"intro-y flex items-center mt-8"},YT=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Individual Customer",-1),KT={key:0},GT=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),JT=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),QT=[GT,JT],XT={class:"grid grid-cols-12 gap-6 mt-5"},eM={class:"intro-y col-span-12 lg:col-span-6"},tM={class:"intro-y box p-5"},aM={class:"grid grid-cols-2 gap-6 mt-3"},sM=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),rM={class:"input-group"},iM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),lM={class:"input-group"},nM={class:"grid grid-cols-3 gap-6 mt-3"},oM=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),cM={class:"input-group"},dM=(0,i._)("option",null,"ID",-1),uM=(0,i._)("option",null,"Drive Licence",-1),pM=(0,i._)("option",null,"Passport",-1),mM=(0,i._)("option",null,"Voters",-1),hM=(0,i._)("option",null,"...",-1),gM=[dM,uM,pM,mM,hM],fM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),wM={class:"input-group"},vM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),_M={class:"input-group"},yM={class:"grid grid-cols-2 gap-6 mt-3"},xM=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),bM={class:"input-group"},kM=(0,i._)("option",null,"male",-1),DM=(0,i._)("option",null,"female",-1),CM=(0,i._)("option",null,"other",-1),PM=[kM,DM,CM],SM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),zM={class:"input-group"},NM={class:"mt-3"},TM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),MM={class:"input-group"},IM={class:"mt-3"},UM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Profile *",-1),EM={class:"input-group"},FM={class:"grid grid-cols-3 gap-6 mt-3"},$M=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),AM={class:"input-group"},BM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),qM={class:"input-group"},jM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),VM={class:"input-group"},LM={class:"grid grid-cols-2 gap-6 mt-3"},ZM=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),RM={class:"fallback mt-4"},WM={class:"text-right mt-8"},HM=["disabled"];function OM(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",OT,[YT,l.loading?((0,i.wg)(),(0,i.iD)("div",KT,QT)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdatePartnerUser&&n.onUpdatePartnerUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",XT,[(0,i._)("div",eM,[(0,i._)("div",tM,[(0,i._)("div",aM,[(0,i._)("div",null,[sM,(0,i._)("div",rM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[iM,(0,i._)("div",lM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",nM,[(0,i._)("div",null,[oM,(0,i._)("div",cM,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},gM,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[fM,(0,i._)("div",wM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[vM,(0,i._)("div",_M,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",yM,[(0,i._)("div",null,[xM,(0,i._)("div",bM,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},PM,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[SM,(0,i._)("div",zM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",NM,[TM,(0,i._)("div",MM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-18",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",IM,[UM,(0,i._)("div",EM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.profile=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"profile","aria-describedby":"input-group-1"},null,512),[[s.nr,l.profile]])])]),(0,i._)("div",FM,[(0,i._)("div",null,[$M,(0,i._)("div",AM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[BM,(0,i._)("div",qM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[jM,(0,i._)("div",VM,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",LM,[(0,i._)("div",null,[ZM,(0,i._)("div",RM,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",WM,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,HM)])])])])],32)])}var YM={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",profile:"",email:"",address:"",contact1:"",contact2:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.password=e.data.user.password,this.profile=e.data.user.profile,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdatePartnerUser(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","profile","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("profile",this.profile),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/partneruser/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Partner user updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating partner:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating partner:",i.message);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const KM=(0,_t.Z)(YM,[["render",OM]]);var GM=KM;const JM={key:0,class:"shadow-md"},QM=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),XM=[QM],eI=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Partner users",-1),tI={class:"grid grid-cols-12 gap-6 mt-5"},aI={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},sI={class:"flex w-full sm:w-auto"},rI={class:"w-48 relative text-slate-500"},iI=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),lI=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])])])])])],-1),nI={class:"hidden xl:block mx-auto text-slate-500"},oI={class:"box"},cI={class:"flex flex-col lg:flex-row items-center p-5"},dI={class:"w-24 h-24 lg:w-12 lg:h-12 image-fit lg:mr-1"},uI=["title","src"],pI={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},mI={class:"lg:ml-2 lg:mr-auto text-center lg:text-left mt-3 lg:mt-0"},hI={href:"#",class:"font-medium"},gI={class:"text-slate-500 text-xs mt-0.5 mb-1"},fI={class:"flex mt-4 lg:mt-0"},wI={class:"text btn-secondary py-1 px-2 mr-2"},vI=(0,i._)("button",{class:"btn btn-outline-secondary py-1 px-2"}," Profile ",-1),_I={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},yI=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),xI=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),bI=[yI,xI],kI={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},DI={class:"w-full sm:w-auto sm:mr-auto"},CI={class:"pagination"},PI={class:"page-item"},SI=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),zI=[SI],NI=["onClick"],TI={class:"page-item"},MI=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),II=[MI],UI=(0,i._)("option",null,"10",-1),EI=(0,i._)("option",null,"25",-1),FI=(0,i._)("option",null,"35",-1),$I=(0,i._)("option",null,"50",-1),AI=(0,i._)("option",null,"100",-1),BI=[UI,EI,FI,$I,AI],qI=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function jI(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",JM,XM)):(0,i.kq)("",!0),eI,(0,i._)("div",tI,[(0,i._)("div",aI,[(0,i._)("div",sI,[(0,i._)("div",rI,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),iI])]),(0,i.Wm)(o,{to:`/createpartneruser/${this.$route.params.id}`},{default:(0,i.w5)((()=>[lI])),_:1},8,["to"]),(0,i._)("div",nI," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allPartners,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-4",key:a._id},[(0,i._)("div",oI,[(0,i._)("div",cI,[(0,i._)("div",dI,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,uI)):((0,i.wg)(),(0,i.iD)("img",pI))]),(0,i._)("div",mI,[(0,i._)("a",hI,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",gI,(0,Ns.zw)(a.profile),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("div",fI,[(0,i._)("label",wI,(0,Ns.zw)(a.contact2),1),(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[vI])),_:2},1032,["to"])])])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",_I,bI)):(0,i.kq)("",!0),(0,i._)("div",kI,[(0,i._)("nav",DI,[(0,i._)("ul",CI,[(0,i._)("li",PI,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},zI)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,NI)],2)))),128)),(0,i._)("li",TI,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},II)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},BI,544),[[s.bM,l.pageSize]])])]),qI])}var VI={data(){return{allPartners:[],currentPage:1,totalPages:1,itemsPerPage:15,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/user/usersbypartner/${e}/?pageSize=15/`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allPartners=a.data.allUsers,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const LI=(0,_t.Z)(VI,[["render",jI]]);var ZI=LI;const RI={class:"intro-y flex items-center mt-8"},WI=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),HI={key:0},OI=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),YI=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),KI=[OI,YI],GI={class:"grid grid-cols-12 gap-6 mt-5"},JI={class:"intro-y col-span-12 lg:col-span-6"},QI={class:"intro-y box p-5"},XI={class:"grid grid-cols-2 gap-6 mt-3"},eU=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),tU={class:"input-group"},aU=["value"],sU=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),rU={class:"input-group"},iU={class:"grid grid-cols-2 gap-6 mt-5"},lU=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),nU={class:"fallback mt-4"},oU={class:"mt-5"},cU={class:"text-right mt-8"},dU=["disabled"];function uU(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",RI,[WI,l.loading?((0,i.wg)(),(0,i.iD)("div",HI,KI)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",GI,[(0,i._)("div",JI,[(0,i._)("div",QI,[(0,i._)("div",XI,[(0,i._)("div",null,[eU,(0,i._)("div",tU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,aU)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[sU,(0,i._)("div",rU,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",iU,[(0,i._)("div",null,[lU,(0,i._)("div",nU,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",oU,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",cU,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,dU)])])])])],32)])}var pU={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1,customerCompany:""}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.planId=a.data.user.plan[0]._id,console.log("Company: ",a.data.user.company),this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),a.append("customerName",this.customerName),a.append("customerCompany",this.customerCompany),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/ctransation/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const mU=(0,_t.Z)(pU,[["render",uU]]);var hU=mU;const gU={class:"intro-y flex items-center mt-8"},fU=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),wU={class:"grid grid-cols-12 gap-6 mt-5"},vU={class:"intro-y col-span-12 lg:col-span-6"},_U={key:0,class:"shadow-md"},yU=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),xU=[yU],bU={class:"intro-y box p-5"},kU={class:"grid grid-cols-2 gap-6 mt-3"},DU=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),CU={class:"input-group"},PU=["value"],SU=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),zU={class:"input-group"},NU={class:"grid grid-cols-2 gap-6 mt-5"},TU=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),MU={class:"fallback mt-4"},IU={class:"mt-5"},UU={class:"text-right mt-8"},EU=["disabled"];function FU(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",gU,[fU,(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",wU,[(0,i._)("div",vU,[l.loading?((0,i.wg)(),(0,i.iD)("label",_U,xU)):(0,i.kq)("",!0),(0,i._)("div",bU,[(0,i._)("div",kU,[(0,i._)("div",null,[DU,(0,i._)("div",CU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,PU)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[SU,(0,i._)("div",zU,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",NU,[(0,i._)("div",null,[TU,(0,i._)("div",MU,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",IU,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",UU,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,EU)])])])])],32)])}var $U={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1,customerCompany:"",customerName:""}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.customerName=a.data.user.firstName+" "+a.data.user.lastName,this.planId=a.data.user.plan[0]._id,a.data.user&&a.data.user.company?this.customerCompany=a.data.user.company:this.customerCompany,this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("customerName",this.customerName),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),a.append("customerCompany",this.customerCompany),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/hospitaltrasaction/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("transactioncreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.axios=r.Z,this.fetch()}};const AU=(0,_t.Z)($U,[["render",FU]]);var BU=AU;const qU={class:"intro-y flex items-center mt-8"},jU=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),VU={key:0},LU=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),ZU=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),RU=[LU,ZU],WU={class:"grid grid-cols-12 gap-6 mt-5"},HU={class:"intro-y col-span-12 lg:col-span-6"},OU={key:0,class:"shadow-md"},YU=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),KU=[YU],GU={class:"intro-y box p-5"},JU={class:"grid grid-cols-2 gap-6 mt-3"},QU=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),XU={class:"input-group"},eE=["value"],tE=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),aE={class:"input-group"},sE={class:"grid grid-cols-2 gap-6 mt-5"},rE=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),iE={class:"fallback mt-4"},lE={class:"mt-5"},nE={class:"text-right mt-8"},oE=["disabled"];function cE(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",qU,[jU,l.loading?((0,i.wg)(),(0,i.iD)("div",VU,RU)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>n.onCreateTransaction&&n.onCreateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",WU,[(0,i._)("div",HU,[l.loading?((0,i.wg)(),(0,i.iD)("label",OU,KU)):(0,i.kq)("",!0),(0,i._)("div",GU,[(0,i._)("div",JU,[(0,i._)("div",null,[QU,(0,i._)("div",XU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,eE)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[tE,(0,i._)("div",aE,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",sE,[(0,i._)("div",null,[rE,(0,i._)("div",iE,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",lE,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",nE,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[5]||(t[5]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Create ",8,oE)])])])])],32)])}var dE={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",serviceId:"",plans:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/user/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");this.plans=a.data.user.plan[0].planService,this.planId=a.data.user.plan[0]._id,this.loading=!1}catch(t){console.error("Error fetching services:",t),this.loading=!1}},async onCreateTransaction(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("multipleFiles[]",e)})),a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/farmacytrasaction/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const uE=(0,_t.Z)(dE,[["render",cE]]);var pE=uE;const mE={class:"intro-y flex items-center mt-8"},hE=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Transactions",-1),gE={key:0},fE=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),wE=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),vE=[fE,wE],_E={class:"grid grid-cols-12 gap-6 mt-5"},yE={class:"intro-y col-span-12 lg:col-span-6"},xE={class:"intro-y box p-5"},bE=(0,i._)("div",{class:"grid grid-cols-2 gap-6 mb-5 mt-3"},[(0,i._)("div"),(0,i._)("div")],-1),kE={class:"grid grid-cols-2 gap-6 mt-3"},DE=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),CE={class:"input-group"},PE=["value"],SE=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),zE={class:"input-group"},NE={class:"mt-5"},TE={class:"text-right mt-8"},ME=["disabled"],IE={class:"intro-y box col-span-6 lg:col-span-12"},UE=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"></h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),EE={key:0,class:"p-5"},FE={class:"file"},$E=["href"],AE={class:"ml-4"},BE=["href"],qE={class:"text-slate-500 text-xs mt-0.5"},jE={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},VE={class:"flex items-center text-danger",href:"javascript:;"},LE=["onClick"],ZE=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),RE=[ZE],WE={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},HE=(0,i._)("a",{href:"#"},null,-1),OE={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},YE={class:"modal-dialog"},KE={class:"modal-content"},GE=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),JE={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},QE={class:"modal-body grid grid-cols-6 gap-4 gap-y-3"},XE={class:"col-span-12"},eF=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),tF={class:"fallback"},aF={class:"modal-footer text-right"},sF=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function rF(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",mE,[hE,l.loading?((0,i.wg)(),(0,i.iD)("div",gE,vE)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>n.onUpdateTransaction&&n.onUpdateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",_E,[(0,i._)("div",yE,[(0,i._)("div",xE,[bE,(0,i._)("div",kE,[(0,i._)("div",null,[DE,(0,i._)("div",CE,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,PE)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[SE,(0,i._)("div",zE,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",NE,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",TE,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[4]||(t[4]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,ME)])])])])],32),(0,i._)("div",IE,[UE,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",EE,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",FE,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,$E)]),(0,i._)("div",AE,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,BE),(0,i._)("div",qE,(0,Ns.zw)(n.getFileSize(e)),1)]),(0,i._)("div",jE,[(0,i._)("a",VE,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>n.deleteFile(e)},RE,8,LE))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",WE,[(0,i.Uk)(" No files available. Add customer documents "),HE]))]),(0,i._)("div",OE,[(0,i._)("div",YE,[(0,i._)("div",KE,[GE,l.loading?((0,i.wg)(),(0,i.iD)("div",JE)):(0,i.kq)("",!0),(0,i._)("div",QE,[(0,i._)("div",XE,[eF,(0,i._)("div",tF,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[6]||(t[6]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",aF,[sF,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[7]||(t[7]=(...e)=>n.uploadFiles&&n.uploadFiles(...e))}," Upload ")])])])])])}var iF={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",firstName:"",lastName:"",serviceId:"",plans:[],multipleFiles:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");{const e=a.data.transaction;this.amount=e.amount,this.serviceId=e.serviceIds[0]._id,this.plans=e.planId.planService,e.multipleFiles?this.multipleFiles=e.multipleFiles.split(","):this.multipleFiles=[],this.loading=!1}}catch(t){console.error("Error fetching services:",t),this.loading=!1}},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/transaction/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.fetch(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("transaction/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},async onUpdateTransaction(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["amount"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("amount",this.amount),a.append("serviceId",this.serviceId),a.append("customerId",this.customerId=this.$route.params.id),a.append("planId",this.planId),a.append("paymentMethod",this.paymentMethod),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.put(`/api/update/transaction/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Transaction created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage})):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const lF=(0,_t.Z)(iF,[["render",rF]]);var nF=lF;const oF=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Transactions")],-1),cF={key:0,class:"shadow-md"},dF=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),uF=[dF],pF={class:"grid grid-cols-12 gap-6 mt-5"},mF={class:"intro-y col-span-12 lg:col-span-6"},hF={class:"intro-y box p-5"},gF=(0,i._)("div",{class:"grid grid-cols-2 gap-6 mb-5 mt-3"},[(0,i._)("div"),(0,i._)("div")],-1),fF={class:"grid grid-cols-2 gap-6 mt-3"},wF=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Service *",-1),vF={class:"input-group"},_F=["value"],yF=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Amount*",-1),xF={class:"input-group"},bF={class:"grid grid-cols-2 gap-6 mt-5"},kF=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Current status",-1),DF={class:"input-group"},CF=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Update status",-1),PF={class:"input-group"},SF=(0,i._)("option",{value:"In progress"},"In progress",-1),zF=(0,i._)("option",{value:"Completed"},"Completed",-1),NF=[SF,zF],TF={class:"mt-5"},MF={class:"text-right mt-8"},IF=["disabled"],UF={class:"grid grid-cols-12 gap-6 mt-5"},EF={class:"intro-y box col-span-6 lg:col-span-6"},FF=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"></h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),$F={key:0,class:"p-5"},AF={class:"file"},BF=["href"],qF={class:"ml-4"},jF=["href"],VF={class:"text-slate-500 text-xs mt-0.5"},LF={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},ZF={class:"flex items-center text-danger",href:"javascript:;"},RF=["onClick"],WF=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),HF=[WF],OF={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},YF=(0,i._)("a",{href:"#"},null,-1),KF={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},GF={class:"modal-dialog"},JF={class:"modal-content"},QF=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),XF={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},e$={class:"modal-body grid grid-cols-6 gap-4 gap-y-3"},t$={class:"col-span-12"},a$=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),s$={class:"fallback"},r$={class:"modal-footer text-right"},i$=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function l$(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[oF,l.loading?((0,i.wg)(),(0,i.iD)("label",cF,uF)):(0,i.kq)("",!0),(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>n.onUpdateTransaction&&n.onUpdateTransaction(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",pF,[(0,i._)("div",mF,[(0,i._)("div",hF,[gF,(0,i._)("div",fF,[(0,i._)("div",null,[wF,(0,i._)("div",vF,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.serviceId=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example",disabled:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.serviceName),9,_F)))),128))],512),[[s.bM,l.serviceId]])])]),(0,i._)("div",null,[yF,(0,i._)("div",xF,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),id:"crud-form-21",type:"number",min:"1",step:"0.01",class:"form-control mt-2 sm:mr-2",placeholder:"amount","aria-describedby":"input-group-1"},null,512),[[s.nr,l.amount]])])])]),(0,i._)("div",bF,[(0,i._)("div",null,[kF,(0,i._)("div",DF,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.transactionStatus=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2","aria-describedby":"input-group-1",disabled:""},null,512),[[s.nr,l.transactionStatus]])])]),(0,i._)("div",null,[CF,(0,i._)("div",PF,[(0,i.wy)((0,i._)("select",{class:"form-select mt-2 sm:mr-2","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=e=>l.transactionStatus=e)},NF,512),[[s.bM,l.transactionStatus]])])])]),(0,i._)("div",TF,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.planId=e),desabled:"",hidden:""},null,512),[[s.nr,l.planId]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.paymentMethod=e),disabled:"",hidden:""},null,512),[[s.nr,l.paymentMethod]])]),(0,i._)("div",MF,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,IF)])])])])],32),(0,i._)("div",UF,[(0,i._)("div",EF,[FF,l.multipleFiles&&l.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",$F,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",AF,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,BF)]),(0,i._)("div",qF,[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,jF),(0,i._)("div",VF,(0,Ns.zw)(n.getFileSize(e)),1)]),(0,i._)("div",LF,[(0,i._)("a",ZF,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>n.deleteFile(e)},HF,8,RF))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",OF,[(0,i.Uk)(" No files available. Add customer documents "),YF]))])]),(0,i._)("div",KF,[(0,i._)("div",GF,[(0,i._)("div",JF,[QF,l.loading?((0,i.wg)(),(0,i.iD)("div",XF)):(0,i.kq)("",!0),(0,i._)("div",e$,[(0,i._)("div",t$,[a$,(0,i._)("div",s$,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",onChange:t[8]||(t[8]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",r$,[i$,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[9]||(t[9]=(...e)=>n.uploadFiles&&n.uploadFiles(...e))}," Upload ")])])])])])}var n$={data(){return{planId:"",paymentMethod:"monthly fee",amount:"",firstName:"",lastName:"",serviceId:"",updateStatus:"",transactionStatus:"",plans:[],multipleFiles:[],loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){const e=this.$route.params.id;this.loading=!0;try{const t=wt.Z.get("token"),a=await r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch services");{const e=a.data.transaction;this.planId=e.planId._id,this.transactionStatus=e.transactionStatus,this.customerId=e.customerId._id,this.amount=e.amount,this.serviceId=e.serviceIds[0]._id,this.plans=e.planId.planService,e.multipleFiles?this.multipleFiles=e.multipleFiles.split(","):this.multipleFiles=[],this.loading=!1}}catch(t){console.error("Error fetching services:",t),this.loading=!1}},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/transaction/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.fetch(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/transaction/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},async onUpdateTransaction(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});if(""===this.transactionStatus)e.fire({icon:"warning",title:"warning!",text:"Please update status to 'In Progress' our 'Completed'",timer:3e3});else{const a=wt.Z.get("token"),s=["amount"];for(const e of s)if(""===this[e])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${e} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const t=new FormData;t.append("amount",this.amount),t.append("serviceId",this.serviceId),t.append("customerId",this.customerId),t.append("transactionStatus",this.transactionStatus),t.append("planId",this.planId),t.append("paymentMethod",this.paymentMethod),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.put(`/api/update/transaction/${s}`,t,{headers:{token:a,"Content-Type":"application/json"}});e.fire({icon:"success",title:"Success!",text:"Transaction updated successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/mytransactions"),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(t){t.response&&t.response.data&&t.response.data.error?(this.errorMessage=t.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage})):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",t.message)),this.btnloading=!1,this.loading=!1}}}},created(){this.fetch()}};const o$=(0,_t.Z)(n$,[["render",l$]]);var c$=o$;const d$=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),u$={key:0,class:"shadow-md"},p$=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),m$=[p$],h$={class:"grid grid-cols-12 gap-12 mt-5"},g$={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},f$={class:"flex w-full sm:w-auto"},w$={class:"w-48 relative text-slate-500"},v$=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),_$={class:"ml-1"},y$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),x$=[y$],b$={class:"hidden xl:block mx-auto text-slate-500"},k$=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),D$={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible mt-8"},C$={class:"table table-report -mt-2"},P$=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),S$={class:"w-40 !py-4"},z$={class:"decoration-dotted whitespace-nowrap"},N$={class:"w-40 !py-4"},T$={key:0,class:"decoration-dotted whitespace-nowrap"},M$={key:1,class:"decoration-dotted whitespace-nowrap"},I$={class:"w-40"},U$={class:"font-medium whitespace-nowrap"},E$={class:"text-center"},F$={key:0,class:"flex items-center justify-center whitespace-nowrap"},$$={key:1,class:"flex items-center justify-center whitespace-nowrap"},A$={class:"whitespace-nowrap"},B$={class:"whitespace-nowrap"},q$={class:"whitespace-nowrap"},j$={class:"w-40 !py-4"},V$={class:"table-report__action"},L$={class:"flex justify-center items-center"},Z$=["onClick"],R$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),W$={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},H$=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),O$={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Y$=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),K$={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},G$=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),J$=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Q$=[G$,J$],X$={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},eA={class:"w-full sm:w-auto sm:mr-auto"},tA={class:"pagination"},aA={class:"page-item"},sA=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),rA=[sA],iA=["onClick"],lA={class:"page-item"},nA=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),oA=[nA],cA=(0,i._)("option",null,"10",-1),dA=(0,i._)("option",null,"25",-1),uA=(0,i._)("option",null,"35",-1),pA=(0,i._)("option",null,"50",-1),mA=(0,i._)("option",null,"100",-1),hA=(0,i._)("option",null,"500",-1),gA=(0,i._)("option",null,"1000",-1),fA=[cA,dA,uA,pA,mA,hA,gA],wA={id:"files-modal",class:"modal mt",tabindex:"-1","aria-hidden":"true"},vA={class:"modal-dialog"},_A={class:"modal-content"},yA={class:"modal-body p-0"},xA={class:"p-5 text-center"},bA=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),kA=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),DA={class:"text-slate-500 mt-2"},CA=["href"],PA=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function SA(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[d$,l.loading?((0,i.wg)(),(0,i.iD)("label",u$,m$)):(0,i.kq)("",!0),(0,i._)("div",h$,[(0,i._)("div",g$,[(0,i._)("div",f$,[(0,i._)("div",w$,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...t)=>e.applyFilter&&e.applyFilter(...t))},null,544),[[s.nr,l.searchTerm]]),v$])]),(0,i._)("div",_$,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},x$)]),(0,i._)("div",b$," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),k$]),(0,i._)("div",D$,[(0,i._)("table",C$,[P$,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",S$,[(0,i._)("a",z$,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",N$,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",T$,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",M$," Individual "))]),(0,i._)("td",I$,[(0,i._)("a",U$,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",E$,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",F$,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",$$,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",A$,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",B$,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",q$,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",j$,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",V$,[(0,i._)("div",L$,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[R$,(0,i.Uk)(" Files ")],8,Z$),"Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",W$,[H$,(0,i.Wm)(c,{to:`/updatehospitaltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",O$,[Y$,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",K$,Q$)):(0,i.kq)("",!0),(0,i._)("div",X$,[(0,i._)("nav",eA,[(0,i._)("ul",tA,[(0,i._)("li",aA,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},rA)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,iA)],2)))),128)),(0,i._)("li",lA,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},oA)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},fA,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",wA,[(0,i._)("div",vA,[(0,i._)("div",_A,[(0,i._)("div",yA,[(0,i._)("div",xA,[bA,kA,(0,i._)("div",DA,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,CA)])))),128))])])]),PA])])])])])}var zA={data(){return{companyName:"",transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/mytransaction",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const NA=(0,_t.Z)(zA,[["render",SA]]);var TA=NA;const MA=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Transactions",-1),IA={key:0,class:"shadow-md"},UA=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),EA=[UA],FA={class:"grid grid-cols-12 gap-12 mt-5"},$A={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},AA={class:"flex w-full sm:w-auto"},BA={class:"w-48 relative text-slate-500"},qA=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),jA={class:"ml-1"},VA=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),LA=[VA],ZA={class:"hidden xl:block mx-auto text-slate-500"},RA=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),WA={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},HA={class:"table table-report -mt-2"},OA=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),YA={class:"w-40 !py-4"},KA={href:"#",class:"decoration-dotted whitespace-nowrap"},GA={class:"w-40 !py-4"},JA={key:0,class:"decoration-dotted whitespace-nowrap"},QA={key:1,class:"decoration-dotted whitespace-nowrap"},XA={class:"w-40"},eB={href:"#",class:"font-medium whitespace-nowrap"},tB={class:"text-center"},aB={key:0,class:"flex items-center justify-center whitespace-nowrap"},sB={key:1,class:"flex items-center justify-center whitespace-nowrap"},rB={class:"whitespace-nowrap"},iB={class:"whitespace-nowrap"},lB={class:"whitespace-nowrap"},nB={class:"w-40 !py-4"},oB={class:"table-report__action"},cB={class:"flex justify-center items-center"},dB=["onClick"],uB=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),pB={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},mB=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),hB={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},gB=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),fB=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),wB=[gB,fB],vB={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},_B={class:"w-full sm:w-auto sm:mr-auto"},yB={class:"pagination"},xB={class:"page-item"},bB=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),kB=[bB],DB=["onClick"],CB={class:"page-item"},PB=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),SB=[PB],zB=(0,i._)("option",null,"10",-1),NB=(0,i._)("option",null,"25",-1),TB=(0,i._)("option",null,"35",-1),MB=(0,i._)("option",null,"50",-1),IB=(0,i._)("option",null,"100",-1),UB=(0,i._)("option",null,"500",-1),EB=(0,i._)("option",null,"1000",-1),FB=[zB,NB,TB,MB,IB,UB,EB],$B={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},AB={class:"modal-dialog"},BB={class:"modal-content"},qB={class:"modal-body p-0"},jB={class:"p-5 text-center"},VB=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),LB=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),ZB={class:"text-slate-500 mt-2"},RB=["href"],WB=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function HB(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[MA,l.loading?((0,i.wg)(),(0,i.iD)("label",IA,EA)):(0,i.kq)("",!0),(0,i._)("div",FA,[(0,i._)("div",$A,[(0,i._)("div",AA,[(0,i._)("div",BA,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),qA])]),(0,i._)("div",jA,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},LA)]),(0,i._)("div",ZA," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),RA]),(0,i._)("div",WA,[(0,i._)("table",HA,[OA,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allTransactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",YA,[(0,i._)("a",KA,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",GA,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",JA,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",QA," Individual "))]),(0,i._)("td",XA,[(0,i._)("a",eB,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",tB,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",aB,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",sB,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",rB,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",iB,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",lB,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",nB,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",oB,[(0,i._)("div",cB,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[uB,(0,i.Uk)(" Files ")],8,dB),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",pB,[mB,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",hB,wB)):(0,i.kq)("",!0),(0,i._)("div",vB,[(0,i._)("nav",_B,[(0,i._)("ul",yB,[(0,i._)("li",xB,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},kB)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,DB)],2)))),128)),(0,i._)("li",CB,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},SB)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},FB,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",$B,[(0,i._)("div",AB,[(0,i._)("div",BB,[(0,i._)("div",qB,[(0,i._)("div",jB,[VB,LB,(0,i._)("div",ZB,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,RB)])))),128))])])]),WB])])])])])}var OB={data(){return{allTransactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/allcompanytransactions",{headers:{token:e},params:t});this.allTransactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const YB=(0,_t.Z)(OB,[["render",HB]]);var KB=YB;const GB={class:"intro-y flex items-center mt-8"},JB={key:0},QB=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),XB=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),eq=[QB,XB],tq=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),aq={key:1},sq=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),rq={key:2},iq=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),lq={class:"intro-y box px-5 pt-5 mt-5"},nq={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},oq={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},cq={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},dq=["src"],uq={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},pq={class:"ml-5"},mq={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},hq={class:"text-slate-500"},gq={class:"text-slate-200 mt-1"},fq={class:"text-slate-200 mt-1"},wq={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},vq=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),_q={class:"flex flex-col justify-center items-center lg:items-start mt-4"},yq={class:"truncate sm:whitespace-normal flex items-center"},xq=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),bq={class:"truncate sm:whitespace-normal flex items-center mt-3"},kq=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Dq={class:"truncate sm:whitespace-normal flex items-center mt-3"},Cq=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Pq={class:"truncate sm:whitespace-normal flex items-center mt-3"},Sq=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),zq={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Nq={class:"font-medium text-center lg:text-left lg:mt-2"},Tq={class:"flex items-center justify-center lg:justify-start mt-2"},Mq={class:""},Iq={class:"ml-3 font-medium"},Uq={class:"flex items-center justify-center lg:justify-start mt-2"},Eq={class:""},Fq={class:"ml-3 font-medium"},$q={class:"flex items-center justify-center lg:justify-start mt-2"},Aq={class:""},Bq={class:"ml-3 font-medium"},qq={class:"flex items-center justify-center lg:justify-start mt-2"},jq={class:""},Vq={class:"ml-3 font-medium"},Lq={class:"flex items-center justify-center lg:justify-start mt-2"},Zq={class:""},Rq={class:"ml-3 font-medium"},Wq={class:"tab-content mt-5"},Hq={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Oq={class:"grid grid-cols-12 gap-6"},Yq=(0,i._)("div",{class:"intro-y box col-span-12 lg:col-span-6"},[(0,i._)("div",{class:"flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"},[(0,i._)("h2",{class:"font-medium text-base mr-auto mt-3 mb-3"}," Latest Transaction "),(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])])]),(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])])],-1),Kq={class:"intro-y box col-span-12 lg:col-span-6"},Gq=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Jq={class:"p-5"},Qq={class:"tab-content"},Xq={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},ej={key:0,class:"intro-y"},tj={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},aj={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},sj=["title","src"],rj={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},ij={class:"ml-4 mr-auto"},lj={class:"font-medium"},nj={class:"text-slate-500 text-xs mt-0.5"},oj={class:"text-slate-500 text-xs mt-0.5"},cj={key:1,class:"text-center text-gray-600 mt-4"},dj={class:"intro-y box col-span-12 lg:col-span-12"},uj=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">Uploads</h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div><button data-tw-toggle="modal" data-tw-target="#new-order-modal" class="btn btn-outline-secondary hidden sm:flex"> Add files </button></div>',1),pj={key:0,class:"p-5"},mj={class:"file"},hj=["href"],gj={class:"ml-4"},fj=["href"],wj={class:"text-slate-500 text-xs mt-0.5"},vj={class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},_j={class:"flex items-center text-danger",href:"javascript:;"},yj=["onClick"],xj=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),bj=[xj],kj={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},Dj=(0,i._)("a",{href:"#"},null,-1),Cj={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Pj={class:"modal-dialog"},Sj={class:"modal-content"},zj=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),Nj={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Tj={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Mj={class:"col-span-12"},Ij=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),Uj={class:"fallback"},Ej={class:"modal-footer text-right"},Fj=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function $j(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",GB,[r.loading?((0,i.wg)(),(0,i.iD)("div",JB,eq)):(0,i.kq)("",!0),tq,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Cancel "),4===r.role?((0,i.wg)(),(0,i.iD)("div",aq,[(0,i.Wm)(n,{to:`/updatecorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[sq])),_:1},8,["to"])])):(0,i.kq)("",!0),4!==r.role?((0,i.wg)(),(0,i.iD)("div",rq,[(0,i.Wm)(n,{to:`/updatecustomer/${this.$route.params.id}`},{default:(0,i.w5)((()=>[iq])),_:1},8,["to"])])):(0,i.kq)("",!0)]),(0,i._)("div",lq,[(0,i._)("div",nq,[(0,i._)("div",oq,[(0,i._)("div",cq,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,dq)):((0,i.wg)(),(0,i.iD)("img",uq))]),(0,i._)("div",pq,[(0,i._)("div",mq,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",hq,(0,Ns.zw)(l.getRole(r.role)),1),(0,i._)("div",gq,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",fq,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",wq,[vq,(0,i._)("div",_q,[(0,i._)("div",yq,[xq,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",bq,[kq,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",Dq,[Cq,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",Pq,[Sq,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",zq,[(0,i._)("div",Nq," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",Tq,[(0,i._)("div",Mq,[(0,i.Uk)(" Gender: "),(0,i._)("span",Iq,(0,Ns.zw)(r.gender),1)])]),(0,i._)("div",Uq,[(0,i._)("div",Eq,[(0,i.Uk)(" DOB: "),(0,i._)("span",Fq,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",$q,[(0,i._)("div",Aq,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",Bq,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",qq,[(0,i._)("div",jq,[(0,i.Uk)(" Plan: "),(0,i._)("span",Vq,(0,Ns.zw)(r.plan),1)])]),(0,i._)("div",Lq,[(0,i._)("div",Zq,[(0,i.Uk)(" Manager: "),(0,i._)("span",Rq,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",Wq,[(0,i._)("div",Hq,[(0,i._)("div",Oq,[Yq,(0,i._)("div",Kq,[Gq,(0,i._)("div",Jq,[(0,i._)("div",Qq,[(0,i._)("div",Xq,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",ej,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/dependentprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",tj,[(0,i._)("div",aj,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,sj)):((0,i.wg)(),(0,i.iD)("img",rj))]),(0,i._)("div",ij,[(0,i._)("div",lj,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",nj,(0,Ns.zw)(a.relation),1),(0,i._)("div",oj,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",cj," No members found. "))])])])]),(0,i._)("div",dj,[uj,r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",pj,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",mj,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,hj)]),(0,i._)("div",gj,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,fj),(0,i._)("div",wj,(0,Ns.zw)(l.getFileSize(e)),1)]),(0,i._)("div",vj,[(0,i._)("a",_j,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},bj,8,yj))])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",kj,[(0,i.Uk)(" No files available. Add customer documents "),Dj]))])])])]),(0,i._)("div",Cj,[(0,i._)("div",Pj,[(0,i._)("div",Sj,[zj,r.loading?((0,i.wg)(),(0,i.iD)("div",Nj)):(0,i.kq)("",!0),(0,i._)("div",Tj,[(0,i._)("div",Mj,[Ij,(0,i._)("div",Uj,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",Ej,[Fj,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var Aj={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",address:"",balancePlan:"",contact1:"",contact2:"",company:"",dob:"",email:"",gender:"",memberShipID:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",id:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.getProfile()},computed:{},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.manager=e.data.user.manager,this.managerFirstName=this.manager.firstName,this.managerLastName=this.manager.lastName,this.company=e.data.user.company,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.role=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../dist/images/logow.png"}}};const Bj=(0,_t.Z)(Aj,[["render",$j]]);var qj=Bj;const jj={class:"intro-y flex items-center mt-8"},Vj={key:0},Lj=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Zj=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Rj=[Lj,Zj],Wj=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Invoice",-1),Hj={id:"print-content",class:"intro-y box overflow-hidden mt-5"},Oj={class:"border-b border-slate-200/60 dark:border-darkmode-400 text-center sm:text-left"},Yj={class:"px-5 py-10 sm:px-20 sm:py-20"},Kj=(0,i._)("div",{class:"text-primary font-semibold text-3xl"},"INVOICE",-1),Gj={class:"mt-2"},Jj={class:"font-medium"},Qj={class:"mt-1"},Xj={class:"flex flex-col lg:flex-row px-5 sm:px-20 pt-10 pb-10 sm:pb-20"},eV=(0,i._)("div",{class:"text-base text-slate-500"},"Client Details",-1),tV={class:"text-lg font-medium text-primary mt-2"},aV={class:"mt-1"},sV={class:"mt-1"},rV={class:"mt-1"},iV=(0,i._)("div",{class:"mt-1"},null,-1),lV={class:"lg:text-right mt-10 lg:mt-0 lg:ml-auto"},nV=(0,i._)("div",{class:"text-base text-slate-500"},"Payment to",-1),oV={class:"text-lg font-medium text-primary mt-2"},cV={class:"mt-1"},dV={class:"mt-1"},uV={class:"px-5 sm:px-16 py-10 sm:py-20"},pV={class:"overflow-x-auto"},mV={class:"table"},hV=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"border-b-2 dark:border-darkmode-400 whitespace-nowrap"}," Service ")])],-1),gV={class:"border-b dark:border-darkmode-400"},fV={class:"font-medium whitespace-nowrap"},wV={class:"text-slate-500 text-sm mt-0.5 whitespace-nowrap"},vV={class:"text-slate-500 text-sm mt-0.5 whitespace-nowrap"},_V={class:"px-5 sm:px-20 pb-10 sm:pb-20 flex flex-col-reverse sm:flex-row"},yV={class:"text-center sm:text-left mt-10 sm:mt-0"},xV=(0,i._)("div",{class:"text-base text-slate-500"},"Processed by",-1),bV={class:"text-lg text-primary font-medium mt-2"},kV={class:"mt-1"},DV=(0,i._)("div",{class:"mt-1"},null,-1),CV={class:"text-center sm:text-right sm:ml-auto"},PV=(0,i._)("div",{class:"text-base text-slate-500"},"Amount",-1),SV={class:"text-xl text-primary font-medium mt-2"},zV=(0,i._)("div",{class:"mt-1"},"Taxes included",-1);function NV(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",jj,[e.loading?((0,i.wg)(),(0,i.iD)("div",Vj,Rj)):(0,i.kq)("",!0),Wj,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-primary mt-5",onClick:t[1]||(t[1]=(...e)=>l.DonloadInvoice&&l.DonloadInvoice(...e))}," Download ")])]),(0,i._)("div",Hj,[(0,i._)("div",Oj,[(0,i._)("div",Yj,[Kj,(0,i._)("div",Gj,[(0,i.Uk)(" Receipt: "),(0,i._)("span",Jj,(0,Ns.zw)(r.invoiceNumber),1)]),(0,i._)("div",Qj,(0,Ns.zw)(r.updatedAt),1)]),(0,i._)("div",Xj,[(0,i._)("div",null,[eV,(0,i._)("div",tV,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",aV,(0,Ns.zw)(r.email),1),(0,i._)("div",sV,(0,Ns.zw)(r.address),1),(0,i._)("div",rV,(0,Ns.zw)(r.contact1)+" , "+(0,Ns.zw)(r.contact2),1),iV]),(0,i._)("div",lV,[nV,(0,i._)("div",oV,(0,Ns.zw)(r.partnerName),1),(0,i._)("div",cV,(0,Ns.zw)(r.partnerEmail),1),(0,i._)("div",dV,(0,Ns.zw)(r.partnerContact1)+" , "+(0,Ns.zw)(r.partnerContact2),1)])])]),(0,i._)("div",uV,[(0,i._)("div",pV,[(0,i._)("table",mV,[hV,(0,i._)("tbody",null,[(0,i._)("tr",null,[(0,i._)("td",gV,[(0,i._)("div",fV,(0,Ns.zw)(r.service),1),(0,i._)("div",wV,(0,Ns.zw)(r.serviceAreaOfCover),1),(0,i._)("div",vV,(0,Ns.zw)(r.serviceDescription),1)])])])])])]),(0,i._)("div",_V,[(0,i._)("div",yV,[xV,(0,i._)("div",bV,(0,Ns.zw)(r.agentPartnerFirstName)+" "+(0,Ns.zw)(r.agentPartnerLastName),1),(0,i._)("div",kV,(0,Ns.zw)(r.agentPartnerContact1)+" , "+(0,Ns.zw)(r.agentPartnerContact2),1),DV]),(0,i._)("div",CV,[PV,(0,i._)("div",SV,(0,Ns.zw)(l.formatCurrency(r.amount)),1),zV])])])])}a(6229),a(7330),a(2062);var TV={data(){return{plan:"",errorMessage:"",transactions:"",firstName:"",lastName:"",invoiceNumber:"",transactionStatus:"",email:"",amount:"",contact1:"",contact2:"",updatedAt:"",address:"",service:"",serviceAreaOfCover:"",serviceDescription:"",agentPartnerFirstName:"",agentPartnerLastName:"",agentPartnerContact1:"",agentPartnerContact2:"",partnerName:"",partnerEmail:"",partnerContact1:"",partnerContact2:"",status:""}},watch:{id(){this.getProfile()}},created(){this.getProfile()},computed:{},methods:{async DonloadInvoice(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");try{const a=await r.Z.get(`/api/get/customerinvoice/${e}`,{headers:{token:t},responseType:"blob"});if(this.loading=!1,"application/json"===a.data.type){const e=new FileReader;e.onload=e=>{const t=JSON.parse(e.target.result);this.errorMessage=t.error,console.error("Error retrieving plan:",this.errorMessage)},e.readAsText(a.data)}else{const t=new Blob([a.data],{type:"application/pdf"}),s=window.URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`invoice_${e}.pdf`,r.click(),window.URL.revokeObjectURL(s)}}catch(a){this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",a)}},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/ctransation/get/transaction/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1;const t=e.data.transaction;this.firstName=t.customerId.firstName,this.lastName=t.customerId.lastName,this.invoiceNumber=t.invoiceNumber,this.transactionStatus=t.transactionStatus,this.email=t.customerId.email,this.amount=t.amount,this.contact1=t.customerId.contact1,this.contact2=t.customerId.contact2,this.address=t.customerId.address,this.updatedAt=this.formatDate(t.updatedAt),this.service=t.serviceIds[0].serviceName,this.serviceAreaOfCover=t.serviceIds[0].serviceAreaOfCover,this.serviceDescription=t.serviceIds[0].serviceDescription,this.agentPartnerFirstName=t.user.firstName,this.agentPartnerLastName=t.user.lastName,this.agentPartnerContact1=t.user.contact1,this.agentPartnerContact2=t.user.contact2,this.partnerName=t.user.partnerUser.partnerName,this.partnerEmail=t.user.partnerUser.email,this.partnerContact1=t.user.partnerUser.contact1,this.partnerContact2=t.user.partnerUser.contact2,t.multipleFiles?this.multipleFiles=t.multipleFiles.split(","):this.multipleFiles=[]})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const MV=(0,_t.Z)(TV,[["render",NV]]);var IV=MV;const UV=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),EV={key:0,class:"shadow-md"},FV=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$V=[FV],AV={class:"grid grid-cols-12 gap-6 mt-5"},BV={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},qV={class:"flex w-full sm:w-auto"},jV={class:"w-48 relative text-slate-500"},VV=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),LV={class:"hidden xl:block mx-auto text-slate-500"},ZV=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),RV={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},WV={class:"table table-report -mt-2"},HV=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Date")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),OV={class:"w-40 !py-4"},YV={class:"decoration-dotted whitespace-nowrap"},KV={class:"w-40 !py-4"},GV={key:0,class:"decoration-dotted whitespace-nowrap"},JV={key:1,class:"decoration-dotted whitespace-nowrap"},QV={class:"w-40"},XV={class:"font-medium whitespace-nowrap"},eL={class:"text-center"},tL={class:"flex items-center justify-center whitespace-nowrap"},aL={class:"whitespace-nowrap"},sL={class:"whitespace-nowrap"},rL={class:"w-40 !py-4"},iL={class:"table-report__action"},lL={class:"flex justify-center items-center"},nL={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},oL=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),cL={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},dL=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),uL={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},pL=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),mL=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),hL=[pL,mL],gL={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},fL={class:"w-full sm:w-auto sm:mr-auto"},wL={class:"pagination"},vL={class:"page-item"},_L=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),yL=[_L],xL=["onClick"],bL={class:"page-item"},kL=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),DL=[kL],CL=(0,i._)("option",null,"10",-1),PL=(0,i._)("option",null,"25",-1),SL=(0,i._)("option",null,"35",-1),zL=(0,i._)("option",null,"50",-1),NL=(0,i._)("option",null,"100",-1),TL=(0,i._)("option",null,"500",-1),ML=(0,i._)("option",null,"1000",-1),IL=[CL,PL,SL,zL,NL,TL,ML],UL=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function EL(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[UV,l.loading?((0,i.wg)(),(0,i.iD)("label",EV,$V)):(0,i.kq)("",!0),(0,i._)("div",AV,[(0,i._)("div",BV,[(0,i._)("div",qV,[(0,i._)("div",jV,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),VV])]),(0,i._)("div",LV," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),ZV]),(0,i._)("div",RV,[(0,i._)("table",WV,[HV,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",OV,[(0,i._)("a",YV,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",KV,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",GV,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",JV,"Individual"))]),(0,i._)("td",QV,[(0,i._)("a",XV,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",eL,[(0,i._)("div",tL,(0,Ns.zw)(n.formatCurrency(e.amount)),1)]),(0,i._)("td",null,[(0,i._)("div",aL,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",sL,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",rL,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",iL,[(0,i._)("div",lL,["Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",nL,[oL,(0,i.Wm)(o,{to:`/updatehospitaltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",cL,[dL,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",uL,hL)):(0,i.kq)("",!0),(0,i._)("div",gL,[(0,i._)("nav",fL,[(0,i._)("ul",wL,[(0,i._)("li",vL,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},yL)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,xL)],2)))),128)),(0,i._)("li",bL,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},DL)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},IL,544),[[s.bM,l.pageSize]])])]),UL])}var FL={data(){return{companyName:"",transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/gettransactionshistory/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const $L=(0,_t.Z)(FL,[["render",EL]]);var AL=$L;const BL=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Company")],-1),qL={class:"grid grid-cols-12 gap-6 mt-5"},jL={class:"intro-y col-span-12 lg:col-span-6"},VL={class:"intro-y box p-5"},LL=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Company Name *",-1),ZL={class:"mt-3"},RL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Brand *",-1),WL={class:"input-group"},HL={class:"mt-3"},OL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Company Manager",-1),YL={class:"input-group"},KL={class:"mt-3"},GL=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email *",-1),JL={class:"input-group"},QL={class:"mt-3"},XL=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Account Manager *",-1),eZ={class:"input-group"},tZ=["value"],aZ={class:"mt-3"},sZ=(0,i._)("label",{class:"form-label"},"Contacts *",-1),rZ={class:"sm:grid grid-cols-3 gap-2"},iZ={class:"input-group"},lZ={class:"input-group mt-2 sm:mt-0"},nZ=(0,i._)("label",{for:"pos-form-1",class:"form-label mt-3"},"Select Avatar",-1),oZ={class:"fallback"},cZ={class:"text-right mt-5"},dZ=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),uZ=["disabled"];function pZ(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[BL,(0,i._)("form",{onSubmit:t[8]||(t[8]=(0,s.iM)(((...e)=>n.onCreateCompany&&n.onCreateCompany(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",qL,[(0,i._)("div",jL,[(0,i._)("div",VL,[(0,i._)("div",null,[LL,(0,i.wy)((0,i._)("input",{id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyName=e)},null,512),[[s.nr,l.companyName]])]),(0,i._)("div",ZL,[RL,(0,i._)("div",WL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"brand","aria-describedby":"input-group-1","onUpdate:modelValue":t[1]||(t[1]=e=>l.brand=e)},null,512),[[s.nr,l.brand]])])]),(0,i._)("div",HL,[OL,(0,i._)("div",YL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"manager","aria-describedby":"input-group-1","onUpdate:modelValue":t[2]||(t[2]=e=>l.accountManager=e)},null,512),[[s.nr,l.accountManager]])])]),(0,i._)("div",KL,[GL,(0,i._)("div",JL,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1","onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e)},null,512),[[s.nr,l.email]])])]),(0,i._)("div",QL,[XL,(0,i._)("div",eZ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.manager=e),class:"form-control","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,tZ)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",aZ,[sZ,(0,i._)("div",rZ,[(0,i._)("div",iZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3","onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e)},null,512),[[s.nr,l.contact1]])]),(0,i._)("div",lZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4","onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e)},null,512),[[s.nr,l.contact2]])])])]),nZ,(0,i._)("div",oZ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)]),(0,i._)("div",cZ,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[dZ])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,uZ)])])])])],32)])}var mZ={data(){return{companyName:"",brand:"",accountManager:"",contact1:"",contact2:"",email:"",managers:[],manager:"",avatar:null,btnloading:!1}},created(){this.getMagers()},methods:{async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateCompany(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=["companyName","brand","accountManager","email","contact1","manager"],a=wt.Z.get("token");for(const r of t)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const t=new FormData;t.append("companyName",this.companyName),t.append("brand",this.brand),t.append("accountManager",this.accountManager),t.append("email",this.email),t.append("contact1",this.contact1),t.append("contact2",this.contact2),t.append("avatar",this.avatar),t.append("manager",this.manager),this.btnloading=!0;const s=await r.Z.post("/api/company/create",t,{headers:{token:a,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Company created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcompany"),this.isSuccess=!0,console.log(s),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error creating company:",e),setTimeout((()=>{window.location.reload()}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error creating company:",s.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const hZ=(0,_t.Z)(mZ,[["render",pZ]]);var gZ=hZ;const fZ={class:"intro-y flex items-center mt-8"},wZ=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Company",-1),vZ={key:0},_Z=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),yZ=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),xZ=[_Z,yZ],bZ={class:"grid grid-cols-12 gap-6 mt-5"},kZ={class:"intro-y col-span-12 lg:col-span-6"},DZ={class:"intro-y box p-5"},CZ=(0,i._)("label",{for:"crud-form-1",class:"form-label"},"Company Name",-1),PZ={class:"mt-3"},SZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Brand",-1),zZ={class:"input-group"},NZ={class:"mt-3"},TZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Account Manager",-1),MZ={class:"input-group"},IZ={class:"mt-3"},UZ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),EZ={class:"input-group"},FZ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),$Z={class:"input-group"},AZ=["value"],BZ={class:"mt-3"},qZ=(0,i._)("label",{class:"form-label"},"Contacts",-1),jZ={class:"sm:grid grid-cols-3 gap-2"},VZ={class:"input-group"},LZ={class:"input-group mt-2 sm:mt-0"},ZZ=(0,i._)("label",{for:"pos-form-1",class:"form-label mt-3"},"Select Avatar",-1),RZ={class:"fallback"},WZ=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),HZ={class:"grid grid-cols-2 gap-6 mt-1"},OZ=(0,i._)("option",{value:"Active"},"Active",-1),YZ=(0,i._)("option",{value:"Inactive"},"Inactive",-1),KZ=[OZ,YZ],GZ={class:"text-right mt-5"},JZ=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ",-1),QZ=["disabled"];function XZ(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",fZ,[wZ,l.loading?((0,i.wg)(),(0,i.iD)("div",vZ,xZ)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[9]||(t[9]=(0,s.iM)(((...e)=>n.onUpdateCompany&&n.onUpdateCompany(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",bZ,[(0,i._)("div",kZ,[(0,i._)("div",DZ,[(0,i._)("div",null,[CZ,(0,i.wy)((0,i._)("input",{id:"crud-form-1",type:"text",class:"form-control w-full",placeholder:"name","onUpdate:modelValue":t[0]||(t[0]=e=>l.companyName=e)},null,512),[[s.nr,l.companyName]])]),(0,i._)("div",PZ,[SZ,(0,i._)("div",zZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"brand","aria-describedby":"input-group-1","onUpdate:modelValue":t[1]||(t[1]=e=>l.brand=e)},null,512),[[s.nr,l.brand]])])]),(0,i._)("div",NZ,[TZ,(0,i._)("div",MZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"manager","aria-describedby":"input-group-1","onUpdate:modelValue":t[2]||(t[2]=e=>l.accountManager=e)},null,512),[[s.nr,l.accountManager]])])]),(0,i._)("div",IZ,[UZ,(0,i._)("div",EZ,[(0,i.wy)((0,i._)("input",{id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1","onUpdate:modelValue":t[3]||(t[3]=e=>l.email=e)},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[FZ,(0,i._)("div",$Z,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" "+(0,Ns.zw)(e.contact1),9,AZ)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",BZ,[qZ,(0,i._)("div",jZ,[(0,i._)("div",VZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 1","aria-describedby":"input-group-3","onUpdate:modelValue":t[5]||(t[5]=e=>l.contact1=e)},null,512),[[s.nr,l.contact1]])]),(0,i._)("div",LZ,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",placeholder:"contact 2","aria-describedby":"input-group-4","onUpdate:modelValue":t[6]||(t[6]=e=>l.contact2=e)},null,512),[[s.nr,l.contact2]])])])]),ZZ,(0,i._)("div",RZ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[7]||(t[7]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)]),WZ,(0,i._)("div",HZ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},KZ,512),[[s.bM,l.status]])]),(0,i._)("div",GZ,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[JZ])),_:1}),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,QZ)])])])])],32)])}var eR={data(){return{companyName:"",brand:"",accountManager:"",contact1:"",contact2:"",email:"",avatar:null,manager:"",managers:[],status:"",btnloading:!1,loading:!1}},watch:{id(){this.getCompany()}},created(){this.getCompany(),this.getMagers()},methods:{async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getCompany(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/company/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.companyName=e.data.company.companyName,this.brand=e.data.company.brand,this.accountManager=e.data.company.accountManager,this.contact1=e.data.company.contact1,this.contact2=e.data.company.contact2,this.email=e.data.company.email,this.manager=e.data.company.manager,this.status=e.data.company.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateCompany(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["companyName","brand","accountManager","manager","email","contact1","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("companyName",this.companyName),a.append("brand",this.brand),a.append("accountManager",this.accountManager),a.append("manager",this.manager),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0,this.loading=!0;const i=await r.Z.put(`/api/company/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Company update successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewcompany"),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,this.loading=!1,setTimeout((()=>{window.location.reload()}),3e3),console.error("Error updating company:",e)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message);this.btnloading=!1,this.loading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const tR=(0,_t.Z)(eR,[["render",XZ]]);var aR=tR;const sR={key:0,class:"shadow-md"},rR=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),iR=[rR],lR=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Company",-1),nR={class:"grid grid-cols-12 gap-6 mt-5"},oR={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},cR={class:"flex w-full sm:w-auto"},dR={class:"w-48 relative text-slate-500"},uR=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),pR={class:"hidden xl:block mx-auto text-slate-500"},mR={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},hR={class:"table table-report -mt-2"},gR=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Company name"),(0,i._)("th",{class:"whitespace-nowrap"},"Brand"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Company Manager"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Account Manager"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),fR={class:"w-40 !py-4"},wR={class:"w-10 h-10 image-fit zoom-in"},vR=["title","src"],_R={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},yR={class:"w-40 !py-4"},xR={href:"#",class:"decoration-dotted whitespace-nowrap"},bR={class:"w-40"},kR={href:"#",class:"font-medium whitespace-nowrap"},DR={class:"text-center"},CR={class:"flex items-center justify-center whitespace-nowrap"},PR={class:"w-40"},SR={href:"#",class:"font-medium whitespace-nowrap"},zR={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},NR={class:"text-center"},TR={key:0,class:"flex items-center justify-center whitespace-nowrap"},MR={class:"w-40 !py-4"},IR={class:"table-report__action"},UR={class:"flex justify-center items-center"},ER={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},FR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),$R={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},AR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),BR={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},qR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),jR={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},VR=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),LR=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),ZR=[VR,LR],RR={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},WR={class:"w-full sm:w-auto sm:mr-auto"},HR={class:"pagination"},OR={class:"page-item"},YR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),KR=[YR],GR=["onClick"],JR={class:"page-item"},QR=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),XR=[QR],eW=(0,i._)("option",null,"10",-1),tW=(0,i._)("option",null,"25",-1),aW=(0,i._)("option",null,"35",-1),sW=(0,i._)("option",null,"50",-1),rW=(0,i._)("option",null,"100",-1),iW=[eW,tW,aW,sW,rW],lW=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function nW(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",sR,iR)):(0,i.kq)("",!0),lR,(0,i._)("div",nR,[(0,i._)("div",oR,[(0,i._)("div",cR,[(0,i._)("div",dR,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),uR])]),(0,i._)("div",pR," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",mR,[(0,i._)("table",hR,[gR,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allCompanies,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",fR,[(0,i._)("div",wR,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,vR)):((0,i.wg)(),(0,i.iD)("img",_R))])]),(0,i._)("td",yR,[(0,i._)("a",xR,(0,Ns.zw)(a.companyName),1)]),(0,i._)("td",bR,[(0,i._)("a",kR,(0,Ns.zw)(a.brand),1)]),(0,i._)("td",DR,[(0,i._)("div",CR,(0,Ns.zw)(a.accountManager),1)]),(0,i._)("td",PR,[(0,i._)("a",SR,(0,Ns.zw)(a.contact1),1),(0,i._)("div",zR,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",NR,[a.manager?((0,i.wg)(),(0,i.iD)("div",TR,(0,Ns.zw)(a.manager.firstName)+" "+(0,Ns.zw)(a.manager.lastName),1)):(0,i.kq)("",!0)]),(0,i._)("td",MR,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",IR,[(0,i._)("div",UR,[(0,i._)("a",ER,[FR,(0,i.Wm)(o,{to:`/updatecompany/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",$R,[AR,(0,i.Wm)(o,{to:`/companymembers/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",BR,[qR,(0,i.Wm)(o,{to:`/viewcompanytransactions/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",jR,ZR)):(0,i.kq)("",!0),(0,i._)("div",RR,[(0,i._)("nav",WR,[(0,i._)("ul",HR,[(0,i._)("li",OR,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},KR)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,GR)],2)))),128)),(0,i._)("li",JR,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},XR)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},iW,544),[[s.bM,l.pageSize]])])]),lW])}var oW={data(){return{allCompanies:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allcompany",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allCompanies=t.data.companies,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.axios=r.Z,this.fetchData()}};const cW=(0,_t.Z)(oW,[["render",nW]]);var dW=cW;const uW={key:0,class:"shadow-md"},pW=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),mW=[pW],hW=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),gW={class:"grid grid-cols-12 gap-6 mt-5"},fW={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},wW={class:"flex w-full sm:w-auto"},vW={class:"w-48 relative text-slate-500"},_W=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),yW=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])])])])])],-1),xW=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center ml-2"},[(0,i._)("div",{class:"w-full sm:w-auto flex mt-4 sm:mt-0"},[(0,i._)("div",{class:"dropdown ml-auto sm:ml-0"},[(0,i._)("button",{class:"dropdown-toggle btn px-2 box","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("span",{class:"w-5 h-5 flex items-center justify-center"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-plus w-4 h-4"},[(0,i._)("path",{d:"M5 12h14"}),(0,i._)("path",{d:"M12 5v14"})])]),(0,i.Uk)(" Add Bulk ")])])])],-1),bW={class:"hidden xl:block mx-auto text-slate-500"},kW={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},DW={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},CW={class:"table table-report -mt-2"},PW=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contact"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Gender"),(0,i._)("th",{class:"whitespace-nowrap"},"Monthlyfee"),(0,i._)("th",{class:"whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Membership ID"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),SW={class:"w-40 !py-4"},zW={href:"javascript:;",class:"decoration-dotted whitespace-nowrap"},NW={class:"w-40"},TW={href:"#",class:"font-medium whitespace-nowrap"},MW={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},IW={class:"text-center"},UW={class:"flex items-center justify-center whitespace-nowrap"},EW={class:"w-40 text-right"},FW={class:"pr-16"},$W={class:"whitespace-nowrap"},AW={class:"whitespace-nowrap"},BW={class:"w-40"},qW={key:0},jW={href:"javascript:;",class:"font-medium whitespace-nowrap"},VW={key:1},LW={class:"table-report__action"},ZW={class:"flex justify-center items-center"},RW={key:0,a:"",class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},WW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),HW={key:1,a:"",class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},OW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),YW={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5 ml-5",href:"javascript:;"},KW=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),GW={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},JW=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),QW=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),XW=[JW,QW],eH={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},tH={class:"w-full sm:w-auto sm:mr-auto"},aH={class:"pagination"},sH={class:"page-item"},rH=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),iH=[rH],lH=["onClick"],nH={class:"page-item"},oH=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),cH=[oH],dH=(0,i._)("option",null,"10",-1),uH=(0,i._)("option",null,"25",-1),pH=(0,i._)("option",null,"35",-1),mH=(0,i._)("option",null,"50",-1),hH=(0,i._)("option",null,"100",-1),gH=[dH,uH,pH,mH,hH],fH=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function wH(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",uW,mW)):(0,i.kq)("",!0),hW,(0,i._)("div",gW,[(0,i._)("div",fW,[(0,i._)("div",wW,[(0,i._)("div",vW,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),_W])]),(0,i.Wm)(o,{to:`/createcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[yW])),_:1},8,["to"]),(0,i.Wm)(o,{to:`/createbulkcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[xW])),_:1},8,["to"]),(0,i._)("div",bW," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",kW,[(0,i._)("button",{class:"btn btn-secondary shadow-md mr-2",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")])]),(0,i._)("div",DW,[(0,i._)("table",CW,[PW,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.companymembers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",SW,[(0,i._)("a",zW,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",NW,[(0,i._)("a",TW,(0,Ns.zw)(e.contact1),1),(0,i._)("div",MW,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",IW,[(0,i._)("div",UW,(0,Ns.zw)(e.gender),1)]),(0,i._)("td",EW,[(0,i._)("div",FW,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",null,[(0,i._)("div",$W,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[(0,i._)("div",AW,(0,Ns.zw)(e.memberShipID),1)]),(0,i._)("td",BW,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",qW,[(0,i._)("a",jW,(0,Ns.zw)(e.plan[0].planName),1)])):((0,i.wg)(),(0,i.iD)("div",VW,"No Plan add"))]),(0,i._)("td",null,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",LW,[(0,i._)("div",ZW,[7===e.userType?((0,i.wg)(),(0,i.iD)("a",RW,[WW,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),4===e.userType?((0,i.wg)(),(0,i.iD)("a",HW,[OW,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),4===e.userType?((0,i.wg)(),(0,i.iD)("a",YW,[KW,(0,i.Wm)(o,{to:`/createdependentcorporate/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependent")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",GW,XW)):(0,i.kq)("",!0),(0,i._)("div",eH,[(0,i._)("nav",tH,[(0,i._)("ul",aH,[(0,i._)("li",sH,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.previousPage&&n.previousPage(...e))},iH)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,lH)],2)))),128)),(0,i._)("li",nH,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.nextPage&&n.nextPage(...e))},cH)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[5]||(t[5]=e=>l.pageSize=e),onChange:t[6]||(t[6]=(...t)=>e.changePageSize&&e.changePageSize(...t))},gH,544),[[s.bM,l.pageSize]])])]),fH])}var vH={data(){return{companymembers:[],currentPage:1,totalPages:1,itemsPerPage:10,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",pageSize:10,count:0,loading:!1}},computed:{},methods:{goBack(){this.$router.go(-1)},isActivePage(e){return e===this.currentPage},applyFilter(){this.currentPage=1,this.getCompanyUsers()},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},async getCompanyUsers(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/allcompanyuser/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.companymembers=a.data.allUsers,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.fetchData())},previousPage(){this.currentPage>1&&this.goToPage(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.goToPage(this.currentPage+1)},updatePerPage(){this.currentPage=1,this.getCompanyUsers()},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"Company_Members.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactinos_list.pdf"}).from(t).save()}),500)}},created(){this.getCompanyUsers()}};const _H=(0,_t.Z)(vH,[["render",wH]]);var yH=_H;const xH={key:0,class:"shadow-md"},bH=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),kH=[bH],DH={class:"intro-y flex items-center mt-8"},CH={class:"text-lg font-medium mr-auto"},PH={class:"grid grid-cols-12 gap-6 mt-5"},SH={class:"intro-y col-span-12 lg:col-span-6"},zH={class:"intro-y box p-5"},NH={class:"grid grid-cols-2 gap-6 mt-3"},TH=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),MH={class:"input-group"},IH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),UH={class:"input-group"},EH={class:"grid grid-cols-3 gap-6 mt-3"},FH=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),$H={class:"input-group"},AH=(0,i._)("option",null,"ID",-1),BH=(0,i._)("option",null,"Drive Licence",-1),qH=(0,i._)("option",null,"Passport",-1),jH=(0,i._)("option",null,"Voters",-1),VH=(0,i._)("option",null,"...",-1),LH=[AH,BH,qH,jH,VH],ZH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),RH={class:"input-group"},WH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),HH={class:"input-group"},OH={class:"grid grid-cols-3 gap-6 mt-3"},YH=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),KH={class:"input-group"},GH=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),JH={class:"input-group"},QH=(0,i._)("option",null,"male",-1),XH=(0,i._)("option",null,"female",-1),eO=(0,i._)("option",null,"other",-1),tO=[QH,XH,eO],aO=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),sO={class:"input-group"},rO={class:"grid grid-cols-2 gap-6 mt-3"},iO=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),lO={class:"input-group"},nO=["value"],oO=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),cO={class:"input-group"},dO={class:"grid grid-cols-2 gap-6 mt-3"},uO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),pO={class:"input-group"},mO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),hO={class:"input-group"},gO={class:"grid grid-cols-3 gap-6 mt-3"},fO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),wO={class:"input-group"},vO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),_O={class:"input-group"},yO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),xO={class:"input-group"},bO={class:"grid grid-cols-2 gap-6 mt-3"},kO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),DO={class:"input-group"},CO=["value"],PO=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),SO={class:"fallback mt-4"},zO={class:"text-right mt-8"},NO=["disabled"];function TO(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",xH,kH)):(0,i.kq)("",!0),(0,i._)("div",DH,[(0,i._)("h2",CH," Add Customer on "+(0,Ns.zw)(l.company)+" account ",1)]),(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onCreateCorporateCustomer&&n.onCreateCorporateCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",PH,[(0,i._)("div",SH,[(0,i._)("div",zH,[(0,i._)("div",NH,[(0,i._)("div",null,[TH,(0,i._)("div",MH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[IH,(0,i._)("div",UH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",EH,[(0,i._)("div",null,[FH,(0,i._)("div",$H,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},LH,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[ZH,(0,i._)("div",RH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[WH,(0,i._)("div",HH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",OH,[(0,i._)("div",null,[YH,(0,i._)("div",KH,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[GH,(0,i._)("div",JH,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},tO,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[aO,(0,i._)("div",sO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",rO,[(0,i._)("div",null,[iO,(0,i._)("div",lO,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,nO)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[oO,(0,i._)("div",cO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",dO,[(0,i._)("div",null,[uO,(0,i._)("div",pO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[mO,(0,i._)("div",hO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",gO,[(0,i._)("div",null,[fO,(0,i._)("div",wO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[vO,(0,i._)("div",_O,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[yO,(0,i._)("div",xO,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",bO,[(0,i._)("div",null,[kO,(0,i._)("div",DO,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,CO)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[PO,(0,i._)("div",SO,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",zO,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,NO)])])])])],32)])}var MO={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",manager:"",password:"",avatar:null,plans:[],managers:[],company:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/agent/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async getCompany(){const e=this.$route.params.id;this.loading=!0;const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/company/${e}`,{headers:{token:t}});if(!a.data.success)throw new Error("Failed to fetch plans");this.company=a.data.company.companyName,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateCorporateCustomer(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","manager","company"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.post(`/api/user/corporate/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customer created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){const e=this.$route.params.id;e||window.location.reload(),this.getCompany(),this.getPlans(),this.getMagers()}};const IO=(0,_t.Z)(MO,[["render",TO]]);var UO=IO;const EO={key:0,class:"shadow-md"},FO=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$O=[FO],AO={class:"intro-y flex items-center mt-8"},BO={class:"text-lg font-medium mr-auto"},qO={class:"grid grid-cols-12 gap-6 mt-5"},jO={class:"intro-y col-span-12 lg:col-span-6"},VO={class:"intro-y box p-5"},LO={class:"grid grid-cols-1 gap-6 mt-3"},ZO=(0,i.uE)('<label for="crud-form-4" class="form-label">Select file to create customers</label><div class="mt-8 mb-2"><p><span>Rules: </span></p><p class="mt-2"><span>1. Dates must be in the format yyyy/mm/dd</span></p><p class="mt-2"><span>2. Contact must be in numeric format, unique, and begin with the prefix +258</span></p><p class="mt-2"><span>3. Please use a valid and unique email address</span></p><p class="mt-2"><span>4. Membership IDs must be unique</span></p><p class="mt-2"><span>5. There should be no empty rows or columns</span></p><p class="mt-2"><span>6. After uploading the file, please review the fields before submitting</span></p></div>',2),RO={class:"fallback mt-8"},WO={class:"text-right mt-8"},HO=["disabled"],OO=(0,i._)("div",{class:"grid grid-cols-12 gap-12 mt-5"},[(0,i._)("div",{class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},[(0,i._)("div",{class:"table-wrapper"},[(0,i._)("table",{class:"table table-report -mt-2",id:"csvDataTable"},[(0,i._)("thead",null,[(0,i._)("tr")]),(0,i._)("tbody",null,[(0,i._)("tr")])])])])],-1);function YO(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",EO,$O)):(0,i.kq)("",!0),(0,i._)("div",AO,[(0,i._)("h2",BO," Add Bulk Customers on "+(0,Ns.zw)(l.company)+" account ",1)]),(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>n.onCreateBulkCorporateCustomer&&n.onCreateBulkCorporateCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",qO,[(0,i._)("div",jO,[(0,i._)("div",VO,[(0,i._)("div",LO,[(0,i._)("div",null,[ZO,(0,i._)("div",RO,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".csv",name:"csvFile",onChange:t[0]||(t[0]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",WO,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[1]||(t[1]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,HO)])])])])],32),OO])}var KO=a(6026),GO=a.n(KO),JO={data(){return{csvContent:"",manager:"",company:"",loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0],a=new FileReader;a.onload=e=>{const t=e.target.result;console.log("CSV File Content:",t),this.csvContent=t,this.displayCSVData(t)},a.readAsText(t)},displayCSVData(e){const t=GO().parse(e,{header:!0}).data,a=Object.keys(t[0]),s=document.getElementById("csvDataTable");s.innerHTML="<thead></thead><tbody></tbody>";const r=s.querySelector("thead"),i=document.createElement("tr");a.forEach((e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)})),r.appendChild(i);const l=s.querySelector("tbody");t.forEach((e=>{const t=document.createElement("tr");a.forEach((a=>{const s=document.createElement("td");s.textContent=e[a],t.appendChild(s)})),l.appendChild(t)}))},async getCompany(){const e=this.$route.params.id;this.loading=!0;const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/company/${e}`,{headers:{token:t}});if(!a.data.success)throw new Error("Failed to fetch plans");this.company=a.data.company.companyName,this.manager=a.data.company.manager,this.loading=!1}catch(a){console.error("Error fetching plans:",a),this.loading=!1}},async onCreateBulkCorporateCustomer(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["csvFile","manager"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("csvContent",this.csvContent),a.append("manager",this.manager),this.btnloading=!0,this.loading=!0;const s=this.$route.params.id,i=await r.Z.post(`/api/user/bulk/corporatebulk/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customers created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){const e=this.$route.params.id;e||window.location.reload(),this.getCompany()}};const QO=(0,_t.Z)(JO,[["render",YO]]);var XO=QO;const eY={key:0,class:"shadow-md"},tY=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),aY=[tY],sY=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update corporate customer")],-1),rY={class:"grid grid-cols-12 gap-6 mt-5"},iY={class:"intro-y col-span-12 lg:col-span-6"},lY={class:"intro-y box p-5"},nY={class:"grid grid-cols-2 gap-6 mt-3"},oY=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),cY={class:"input-group"},dY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),uY={class:"input-group"},pY={class:"grid grid-cols-3 gap-6 mt-3"},mY=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),hY={class:"input-group"},gY=(0,i._)("option",null,"ID",-1),fY=(0,i._)("option",null,"Drive Licence",-1),wY=(0,i._)("option",null,"Passport",-1),vY=(0,i._)("option",null,"Voters",-1),_Y=(0,i._)("option",null,"...",-1),yY=[gY,fY,wY,vY,_Y],xY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),bY={class:"input-group"},kY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),DY={class:"input-group"},CY={class:"grid grid-cols-3 gap-6 mt-3"},PY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),SY={class:"input-group"},zY=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),NY={class:"input-group"},TY=(0,i._)("option",null,"male",-1),MY=(0,i._)("option",null,"female",-1),IY=(0,i._)("option",null,"other",-1),UY=[TY,MY,IY],EY=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),FY={class:"input-group"},$Y={class:"grid grid-cols-2 gap-6 mt-3"},AY=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),BY={class:"input-group"},qY=["value"],jY=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),VY={class:"input-group"},LY={class:"grid grid-cols-2 gap-6 mt-3"},ZY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),RY={class:"input-group"},WY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),HY={class:"input-group"},OY={class:"grid grid-cols-3 gap-6 mt-3"},YY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),KY={class:"input-group"},GY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),JY={class:"input-group"},QY=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),XY={class:"input-group"},eK={class:"grid grid-cols-2 gap-6 mt-3"},tK=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),aK={class:"input-group"},sK=["value"],rK=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),iK={class:"fallback mt-4"},lK={class:"text-right mt-8"},nK=["disabled"];function oK(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",eY,aY)):(0,i.kq)("",!0),sY,(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onUpdateCorporate&&n.onUpdateCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",rY,[(0,i._)("div",iY,[(0,i._)("div",lY,[(0,i._)("div",nY,[(0,i._)("div",null,[oY,(0,i._)("div",cY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[dY,(0,i._)("div",uY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",pY,[(0,i._)("div",null,[mY,(0,i._)("div",hY,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},yY,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[xY,(0,i._)("div",bY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[kY,(0,i._)("div",DY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",CY,[(0,i._)("div",null,[PY,(0,i._)("div",SY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[zY,(0,i._)("div",NY,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},UY,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[EY,(0,i._)("div",FY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",$Y,[(0,i._)("div",null,[AY,(0,i._)("div",BY,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,qY)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[jY,(0,i._)("div",VY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",LY,[(0,i._)("div",null,[ZY,(0,i._)("div",RY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[WY,(0,i._)("div",HY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",OY,[(0,i._)("div",null,[YY,(0,i._)("div",KY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[GY,(0,i._)("div",JY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[QY,(0,i._)("div",XY,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",eK,[(0,i._)("div",null,[tK,(0,i._)("div",aK,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,sK)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[rK,(0,i._)("div",iK,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",lK,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,nK)])])])])],32)])}var cK={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){const e=this.$route.params.id;e||window.location("/"),this.getUser(),this.getPlans(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){this.loading=!0,this.btnloading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1,this.btnloading=!1}},async getMagers(){this.loading=!0,this.btnloading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1,this.btnloading=!1}},getUser(){this.btnloading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.plan[0]._id,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateCorporate(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/corporate/edit/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const dK=(0,_t.Z)(cK,[["render",oK]]);var uK=dK;const pK={key:0,class:"shadow-md"},mK=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),hK=[mK],gK=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),fK={class:"grid grid-cols-12 gap-6 mt-5"},wK={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},vK={class:"flex w-full sm:w-auto"},_K={class:"w-48 relative text-slate-500"},yK=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),xK={class:"ml-1"},bK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),kK=[bK],DK={class:"hidden xl:block mx-auto text-slate-500"},CK={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},PK={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},SK={class:"table table-report -mt-2"},zK=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),NK={class:"w-40 !py-4"},TK={href:"#",class:"decoration-dotted whitespace-nowrap"},MK={class:"w-40 !py-4"},IK={key:0,class:"decoration-dotted whitespace-nowrap"},UK={key:1,class:"decoration-dotted whitespace-nowrap"},EK={class:"w-40 !py-4"},FK={class:"decoration-dotted whitespace-nowrap"},$K={class:"w-40"},AK={href:"#",class:"font-medium whitespace-nowrap"},BK={class:"text-center"},qK={key:0,class:"flex items-center justify-center whitespace-nowrap"},jK={key:1,class:"flex items-center justify-center whitespace-nowrap"},VK={class:"whitespace-nowrap"},LK={class:"whitespace-nowrap"},ZK={class:"whitespace-nowrap"},RK={class:"w-40 !py-4"},WK={class:"table-report__action"},HK={class:"flex justify-center items-center"},OK=["onClick"],YK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),KK={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},GK=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),JK={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},QK=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),XK={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},eG=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),tG={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},aG=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),sG=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),rG=[aG,sG],iG={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},lG={class:"w-full sm:w-auto sm:mr-auto"},nG={class:"pagination"},oG={class:"page-item"},cG=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),dG=[cG],uG=["onClick"],pG={class:"page-item"},mG=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),hG=[mG],gG=(0,i._)("option",null,"10",-1),fG=(0,i._)("option",null,"25",-1),wG=(0,i._)("option",null,"35",-1),vG=(0,i._)("option",null,"50",-1),_G=(0,i._)("option",null,"100",-1),yG=(0,i._)("option",null,"500",-1),xG=(0,i._)("option",null,"1000",-1),bG=[gG,fG,wG,vG,_G,yG,xG],kG={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},DG={class:"modal-dialog"},CG={class:"modal-content"},PG={class:"modal-body p-0"},SG={class:"p-5 text-center"},zG=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),NG=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),TG={class:"text-slate-500 mt-2"},MG=["href"],IG=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function UG(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",pK,hK)):(0,i.kq)("",!0),gK,(0,i._)("div",fK,[(0,i._)("div",wK,[(0,i._)("div",vK,[(0,i._)("div",_K,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),yK])]),(0,i._)("div",xK,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},kK)]),(0,i._)("div",DK," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",CK,[(0,i._)("button",{class:"btn btn-secondary shadow-md mr-2",onClick:t[6]||(t[6]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")])]),(0,i._)("div",PK,[(0,i._)("table",SK,[zK,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",NK,[(0,i._)("a",TK,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",MK,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",IK,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",UK," Individual "))]),(0,i._)("td",EK,[(0,i._)("a",FK,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",$K,[(0,i._)("a",AK,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",BK,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",qK,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",jK,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",VK,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",LK,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",ZK,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",RK,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",WK,[(0,i._)("div",HK,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[YK,(0,i.Uk)(" Files ")],8,OK),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",KK,[GK,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),(0,i._)("a",JK,[QK,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])]),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",XK,[eG,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",tG,rG)):(0,i.kq)("",!0),(0,i._)("div",iG,[(0,i._)("nav",lG,[(0,i._)("ul",nG,[(0,i._)("li",oG,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},dG)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,uG)],2)))),128)),(0,i._)("li",pG,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},hG)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},bG,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",kG,[(0,i._)("div",DG,[(0,i._)("div",CG,[(0,i._)("div",PG,[(0,i._)("div",SG,[zG,NG,(0,i._)("div",TG,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,MG)])))),128))])])]),IG])])])])])}var EG={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`http://localhost:8000/${e}`},goBack(){this.$router.go(-1)},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(a.startDate=this.startDate,a.endDate=this.endDate);const s=await r.Z.get(`/api/companytransactions/get/${e}`,{headers:{token:t},params:a});this.transactions=s.data.transactions,this.count=s.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"Company_Transactions.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"Company_Transactions.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const FG=(0,_t.Z)(EG,[["render",UG]]);var $G=FG;const AG={key:0,class:"shadow-md"},BG=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),qG=[BG],jG={class:"intro-y flex items-center mt-8"},VG={class:"text-lg font-medium mr-auto"},LG={class:"grid grid-cols-12 gap-6 mt-5"},ZG={class:"intro-y col-span-12 lg:col-span-6"},RG={class:"intro-y box p-5"},WG={class:"grid grid-cols-2 gap-6 mt-3"},HG=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),OG={class:"input-group"},YG=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),KG={class:"input-group"},GG={class:"grid grid-cols-3 gap-6 mt-3"},JG=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),QG={class:"input-group"},XG=(0,i._)("option",null,"ID",-1),eJ=(0,i._)("option",null,"Drive Licence",-1),tJ=(0,i._)("option",null,"Passport",-1),aJ=(0,i._)("option",null,"Voters",-1),sJ=(0,i._)("option",null,"...",-1),rJ=[XG,eJ,tJ,aJ,sJ],iJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),lJ={class:"input-group"},nJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),oJ={class:"input-group"},cJ={class:"grid grid-cols-3 gap-6 mt-3"},dJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),uJ={class:"input-group"},pJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),mJ={class:"input-group"},hJ=(0,i._)("option",null,"male",-1),gJ=(0,i._)("option",null,"female",-1),fJ=(0,i._)("option",null,"Other",-1),wJ=[hJ,gJ,fJ],vJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),_J={class:"input-group"},yJ=(0,i._)("option",null,"Wife",-1),xJ=(0,i._)("option",null,"Son",-1),bJ=(0,i._)("option",null,"Daughter",-1),kJ=(0,i._)("option",null,"Mother",-1),DJ=(0,i._)("option",null,"Father",-1),CJ=[yJ,xJ,bJ,kJ,DJ],PJ={class:"grid grid-cols-2 gap-6 mt-3"},SJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),zJ={class:"input-group"},NJ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),TJ={class:"input-group"},MJ={class:"grid grid-cols-3 gap-6 mt-3"},IJ={class:"mt-3"},UJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),EJ={class:"input-group"},FJ={class:"mt-3"},$J=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),AJ={class:"input-group"},BJ={class:"mt-3"},qJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),jJ={class:"input-group"},VJ={class:"grid grid-cols-2 gap-6 mt-3"},LJ={class:"mt-3"},ZJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),RJ={class:"input-group"},WJ={class:"mt-3"},HJ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),OJ={class:"input-group"},YJ=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),KJ={class:"fallback"},GJ={class:"mt-4"},JJ={class:"text-right mt-8"},QJ=["disabled"];function XJ(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",AG,qG)):(0,i.kq)("",!0),(0,i._)("div",jG,[(0,i._)("h2",VG," Create Dependente for "+(0,Ns.zw)(l.memberFirstName)+" "+(0,Ns.zw)(l.memberLastName),1)]),(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onCreateDependent&&n.onCreateDependent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",LG,[(0,i._)("div",ZG,[(0,i._)("div",RG,[(0,i._)("div",WG,[(0,i._)("div",null,[HG,(0,i._)("div",OG,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[YG,(0,i._)("div",KG,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",GG,[(0,i._)("div",null,[JG,(0,i._)("div",QG,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},rJ,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[iJ,(0,i._)("div",lJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[nJ,(0,i._)("div",oJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",cJ,[(0,i._)("div",null,[dJ,(0,i._)("div",uJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[pJ,(0,i._)("div",mJ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},wJ,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[vJ,(0,i._)("div",_J,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},CJ,512),[[s.bM,l.relation]])])])]),(0,i._)("div",PJ,[(0,i._)("div",null,[SJ,(0,i._)("div",zJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[NJ,(0,i._)("div",TJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",MJ,[(0,i._)("div",IJ,[UJ,(0,i._)("div",EJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",FJ,[$J,(0,i._)("div",AJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",BJ,[qJ,(0,i._)("div",jJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",VJ,[(0,i._)("div",LJ,[ZJ,(0,i._)("div",RJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",WJ,[HJ,(0,i._)("div",OJ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[YJ,(0,i._)("div",KJ,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",GJ,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>l.company=e),disabled:"",hidden:""},null,512),[[s.nr,l.company]])]),(0,i._)("div",JJ,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,QJ)])])])])],32)])}var eQ={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",gender:"",relation:"",email:"",memberShipID:"",address:"",contact1:"",contact2:"",plan:"",password:"",avatar:null,memberFirstName:"",memberLastName:"",company:"",monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){this.btnloading=!0,this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`api/user/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1,this.plan=e.data.user.plan[0]._id,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status,this.memberFirstName=e.data.user.firstName,this.memberLastName=e.data.user.lastName,this.company=e.data.user.company})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateDependent(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","company","relation","avatar","status"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("company",this.company),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),a.append("id",e),this.btnloading=!0;const s=wt.Z.get("token"),i=await r.Z.post("/api/user/corporatedependent/create",a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcustomer"),this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",s.message);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const tQ=(0,_t.Z)(eQ,[["render",XJ]]);var aQ=tQ;const sQ={key:0,class:"shadow-md"},rQ=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),iQ=[rQ],lQ={class:"intro-y flex items-center mt-8"},nQ={class:"text-lg font-medium mr-auto"},oQ={class:"grid grid-cols-12 gap-6 mt-5"},cQ={class:"intro-y col-span-12 lg:col-span-6"},dQ={class:"intro-y box p-5"},uQ={class:"grid grid-cols-2 gap-6 mt-3"},pQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),mQ={class:"input-group"},hQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),gQ={class:"input-group"},fQ={class:"grid grid-cols-3 gap-6 mt-3"},wQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),vQ={class:"input-group"},_Q=(0,i._)("option",null,"ID",-1),yQ=(0,i._)("option",null,"Drive Licence",-1),xQ=(0,i._)("option",null,"Passport",-1),bQ=(0,i._)("option",null,"Voters",-1),kQ=(0,i._)("option",null,"...",-1),DQ=[_Q,yQ,xQ,bQ,kQ],CQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),PQ={class:"input-group"},SQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),zQ={class:"input-group"},NQ={class:"grid grid-cols-3 gap-6 mt-3"},TQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),MQ={class:"input-group"},IQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),UQ={class:"input-group"},EQ=(0,i._)("option",null,"male",-1),FQ=(0,i._)("option",null,"female",-1),$Q=(0,i._)("option",null,"Other",-1),AQ=[EQ,FQ,$Q],BQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),qQ={class:"input-group"},jQ=(0,i._)("option",null,"Wife",-1),VQ=(0,i._)("option",null,"Son",-1),LQ=(0,i._)("option",null,"Daughter",-1),ZQ=(0,i._)("option",null,"Mother",-1),RQ=(0,i._)("option",null,"Father",-1),WQ=[jQ,VQ,LQ,ZQ,RQ],HQ={class:"grid grid-cols-2 gap-6 mt-3"},OQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),YQ={class:"input-group"},KQ=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),GQ={class:"input-group"},JQ={class:"grid grid-cols-3 gap-6 mt-3"},QQ={class:"mt-3"},XQ=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),eX={class:"input-group"},tX={class:"mt-3"},aX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),sX={class:"input-group"},rX={class:"mt-3"},iX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),lX={class:"input-group"},nX={class:"grid grid-cols-2 gap-6 mt-3"},oX={class:"mt-3"},cX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),dX={class:"input-group"},uX={class:"mt-3"},pX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),mX={class:"input-group"},hX=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),gX={class:"fallback"},fX={class:"mt-4"},wX={class:"text-right mt-8"},vX=["disabled"];function _X(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",sQ,iQ)):(0,i.kq)("",!0),(0,i._)("div",lQ,[(0,i._)("h2",nQ," Create Dependente for "+(0,Ns.zw)(l.memberFirstName)+" "+(0,Ns.zw)(l.memberLastName),1)]),(0,i._)("form",{onSubmit:t[19]||(t[19]=(0,s.iM)(((...e)=>n.onCreateDependent&&n.onCreateDependent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",oQ,[(0,i._)("div",cQ,[(0,i._)("div",dQ,[(0,i._)("div",uQ,[(0,i._)("div",null,[pQ,(0,i._)("div",mQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[hQ,(0,i._)("div",gQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",fQ,[(0,i._)("div",null,[wQ,(0,i._)("div",vQ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},DQ,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[CQ,(0,i._)("div",PQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[SQ,(0,i._)("div",zQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",NQ,[(0,i._)("div",null,[TQ,(0,i._)("div",MQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[IQ,(0,i._)("div",UQ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},AQ,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[BQ,(0,i._)("div",qQ,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},WQ,512),[[s.bM,l.relation]])])])]),(0,i._)("div",HQ,[(0,i._)("div",null,[OQ,(0,i._)("div",YQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[KQ,(0,i._)("div",GQ,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",JQ,[(0,i._)("div",QQ,[XQ,(0,i._)("div",eX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",tX,[aX,(0,i._)("div",sX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",rX,[iX,(0,i._)("div",lX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",nX,[(0,i._)("div",oX,[cX,(0,i._)("div",dX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",uX,[pX,(0,i._)("div",mX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[hX,(0,i._)("div",gX,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",fX,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]])]),(0,i._)("div",wX,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[18]||(t[18]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,vX)])])])])],32)])}var yX={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",gender:"",relation:"",email:"",memberShipID:"",address:"",contact1:"",contact2:"",plan:"",password:"",avatar:null,memberFirstName:"",memberLastName:"",monthlyFee:"",manager:"",formattedDob:"",formattedEnrolment:"",status:"",btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){this.loading=!0,this.btnloading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.btnloading=!1,this.loading=!1,this.plan=e.data.user.plan[0]._id,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status,this.memberFirstName=e.data.user.firstName,this.memberLastName=e.data.user.lastName})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onCreateDependent(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","company","relation","avatar","status"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("company",this.company),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),a.append("id",e),this.btnloading=!0;const s=wt.Z.get("token"),i=await r.Z.post("/api/user/individualdependent/create",a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent created successfully",timer:3e3}),this.btnloading=!1,this.$router.push("/viewcustomer"),this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("created successfully")}catch(s){if(s.response&&s.response.data&&s.response.data.error){const e=s.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",s.message);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const xX=(0,_t.Z)(yX,[["render",_X]]);var bX=xX;const kX=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"}," Update Dependent ")],-1),DX={class:"grid grid-cols-12 gap-6 mt-5"},CX={class:"intro-y col-span-12 lg:col-span-6"},PX={class:"intro-y box p-5"},SX={class:"grid grid-cols-2 gap-6 mt-3"},zX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),NX={class:"input-group"},TX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),MX={class:"input-group"},IX={class:"grid grid-cols-3 gap-6 mt-3"},UX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),EX={class:"input-group"},FX=(0,i._)("option",null,"ID",-1),$X=(0,i._)("option",null,"Drive Licence",-1),AX=(0,i._)("option",null,"Passport",-1),BX=(0,i._)("option",null,"Voters",-1),qX=(0,i._)("option",null,"...",-1),jX=[FX,$X,AX,BX,qX],VX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number",-1),LX={class:"input-group"},ZX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB",-1),RX={class:"input-group"},WX={class:"grid grid-cols-3 gap-6 mt-3"},HX=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date",-1),OX={class:"input-group"},YX=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Gender",-1),KX={class:"input-group"},GX=(0,i._)("option",null,"male",-1),JX=(0,i._)("option",null,"female",-1),QX=(0,i._)("option",null,"Other",-1),XX=[GX,JX,QX],e0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),t0={class:"input-group"},a0=(0,i._)("option",null,"Wife",-1),s0=(0,i._)("option",null,"Son",-1),r0=(0,i._)("option",null,"Daughter",-1),i0=(0,i._)("option",null,"Mother",-1),l0=(0,i._)("option",null,"Father",-1),n0=[a0,s0,r0,i0,l0],o0={class:"grid grid-cols-2 gap-6 mt-3"},c0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Email",-1),d0={class:"input-group"},u0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),p0={class:"input-group"},m0={class:"grid grid-cols-3 gap-6 mt-3"},h0={class:"mt-3"},g0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),f0={class:"input-group"},w0={class:"mt-3"},v0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),_0={class:"input-group"},y0={class:"mt-3"},x0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),b0={class:"input-group"},k0={class:"grid grid-cols-2 gap-6 mt-3"},D0={class:"mt-3"},C0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Address",-1),P0={class:"input-group"},S0={class:"mt-3"},z0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),N0={class:"input-group"},T0=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),M0={class:"fallback"},I0={class:"mt-4"},U0=(0,i._)("label",{hidden:""},"monthly fee",-1),E0=(0,i._)("label",{hidden:""},"manager",-1),F0=(0,i._)("label",{hidden:""},"plan",-1),$0=(0,i._)("label",{hidden:""},"company",-1),A0={class:"text-right mt-8"},B0=["disabled"];function q0(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[kX,(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onUpdateDependentCorporate&&n.onUpdateDependentCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",DX,[(0,i._)("div",CX,[(0,i._)("div",PX,[(0,i._)("div",SX,[(0,i._)("div",null,[zX,(0,i._)("div",NX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[TX,(0,i._)("div",MX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-4",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",IX,[(0,i._)("div",null,[UX,(0,i._)("div",EX,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},jX,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[VX,(0,i._)("div",LX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-4",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[ZX,(0,i._)("div",RX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",WX,[(0,i._)("div",null,[HX,(0,i._)("div",OX,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-4",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[YX,(0,i._)("div",KX,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},XX,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[e0,(0,i._)("div",t0,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},n0,512),[[s.bM,l.relation]])])])]),(0,i._)("div",o0,[(0,i._)("div",null,[c0,(0,i._)("div",d0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[u0,(0,i._)("div",p0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",m0,[(0,i._)("div",h0,[g0,(0,i._)("div",f0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",w0,[v0,(0,i._)("div",_0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",y0,[x0,(0,i._)("div",b0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",k0,[(0,i._)("div",D0,[C0,(0,i._)("div",P0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-3",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",S0,[z0,(0,i._)("div",N0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-3",type:"password",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[T0,(0,i._)("div",M0,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",I0,[U0,E0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),F0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]]),$0,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=t=>e.company=t),disabled:"",hidden:""},null,512),[[s.nr,e.company]])]),(0,i._)("div",A0,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,B0)])])])])],32)])}var j0={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",memberLastName:"",memberFirstName:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.manager=e.data.user.accountOwner.manager._id,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.company=e.data.user.company,this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.accountOwner.plan[0],this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateDependentCorporate(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("company",this.company),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/corporatedependent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating dependent:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating dependent:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const V0=(0,_t.Z)(j0,[["render",q0]]);var L0=V0;const Z0=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"}," Update Dependent ")],-1),R0={class:"grid grid-cols-12 gap-6 mt-5"},W0={class:"intro-y col-span-12 lg:col-span-6"},H0={class:"intro-y box p-5"},O0={class:"grid grid-cols-2 gap-6 mt-3"},Y0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"First name",-1),K0={class:"input-group"},G0=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name",-1),J0={class:"input-group"},Q0={class:"grid grid-cols-3 gap-6 mt-3"},X0=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"ID Type",-1),e1={class:"input-group"},t1=(0,i._)("option",null,"ID",-1),a1=(0,i._)("option",null,"Drive Licence",-1),s1=(0,i._)("option",null,"Passport",-1),r1=(0,i._)("option",null,"Voters",-1),i1=(0,i._)("option",null,"...",-1),l1=[t1,a1,s1,r1,i1],n1=(0,i._)("label",{for:"crud-form-16",class:"form-label"},"ID Number",-1),o1={class:"input-group"},c1=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"DOB",-1),d1={class:"input-group"},u1={class:"grid grid-cols-3 gap-6 mt-3"},p1=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Enrolment date",-1),m1={class:"input-group"},h1=(0,i._)("label",{for:"crud-form-9",class:"form-label"},"Gender",-1),g1={class:"input-group"},f1=(0,i._)("option",null,"male",-1),w1=(0,i._)("option",null,"female",-1),v1=(0,i._)("option",null,"Other",-1),_1=[f1,w1,v1],y1=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Relation",-1),x1={class:"input-group"},b1=(0,i._)("option",null,"Wife",-1),k1=(0,i._)("option",null,"Son",-1),D1=(0,i._)("option",null,"Daughter",-1),C1=(0,i._)("option",null,"Mother",-1),P1=(0,i._)("option",null,"Father",-1),S1=[b1,k1,D1,C1,P1],z1={class:"grid grid-cols-2 gap-6 mt-3"},N1=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"Email",-1),T1={class:"input-group"},M1=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"MemberShip ID",-1),I1={class:"input-group"},U1={class:"grid grid-cols-3 gap-6 mt-3"},E1={class:"mt-3"},F1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Monthly fee",-1),$1={class:"input-group"},A1={class:"mt-3"},B1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 1 *",-1),q1={class:"input-group"},j1={class:"mt-3"},V1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Contact 2 *",-1),L1={class:"input-group"},Z1={class:"grid grid-cols-2 gap-6 mt-3"},R1={class:"mt-3"},W1=(0,i._)("label",{for:"crud-form-12",class:"form-label"},"Address",-1),H1={class:"input-group"},O1={class:"mt-3"},Y1=(0,i._)("label",{for:"crud-form-3",class:"form-label"},"Password",-1),K1={class:"input-group"},G1=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-4"},"Select Avatar",-1),J1={class:"fallback"},Q1={class:"mt-4"},X1=(0,i._)("label",{hidden:""},"monthly fee",-1),e2=(0,i._)("label",{hidden:""},"manager",-1),t2=(0,i._)("label",{hidden:""},"plan",-1),a2={class:"text-right mt-8"},s2=["disabled"];function r2(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[Z0,(0,i._)("form",{onSubmit:t[19]||(t[19]=(0,s.iM)(((...e)=>n.onUpdateDependentCorporate&&n.onUpdateDependentCorporate(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",R0,[(0,i._)("div",W0,[(0,i._)("div",H0,[(0,i._)("div",O0,[(0,i._)("div",null,[Y0,(0,i._)("div",K0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-14",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[G0,(0,i._)("div",J0,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-15",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",Q0,[(0,i._)("div",null,[X0,(0,i._)("div",e1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},l1,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[n1,(0,i._)("div",o1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-16",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"id number","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[c1,(0,i._)("div",d1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-17",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",u1,[(0,i._)("div",null,[p1,(0,i._)("div",m1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-18",type:"date",class:"form-control mt-2 sm:mr-2",placeholder:"enrolment date","aria-describedby":"input-group-1",required:""},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[h1,(0,i._)("div",g1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},_1,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[y1,(0,i._)("div",x1,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e),class:"form-select mt-2 sm:mr-2","aria-label":"Default select example"},S1,512),[[s.bM,l.relation]])])])]),(0,i._)("div",z1,[(0,i._)("div",null,[N1,(0,i._)("div",T1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.email=e),id:"crud-form-19",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[M1,(0,i._)("div",I1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"membership id","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",U1,[(0,i._)("div",E1,[F1,(0,i._)("div",$1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.monthlyFee=e),id:"crud-form-11",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])]),(0,i._)("div",A1,[B1,(0,i._)("div",q1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.contact1=e),id:"crud-form-6",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",j1,[V1,(0,i._)("div",L1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact2=e),id:"crud-form-3",type:"number",class:"form-control",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])])]),(0,i._)("div",Z1,[(0,i._)("div",R1,[W1,(0,i._)("div",H1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.address=e),id:"crud-form-7",type:"text",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",O1,[Y1,(0,i._)("div",K1,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-8",type:"password",class:"form-control",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",null,[G1,(0,i._)("div",J1,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[15]||(t[15]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])]),(0,i._)("div",Q1,[X1,e2,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),disabled:"",hidden:""},null,512),[[s.nr,l.manager]]),t2,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>l.plan=e),disabled:"",hidden:""},null,512),[[s.nr,l.plan]])]),(0,i._)("div",a2,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[18]||(t[18]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,s2)])])])])],32)])}var i2={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",memberLastName:"",memberFirstName:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.manager=e.data.user.accountOwner.manager._id,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.accountOwner.plan[0],this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateDependentCorporate(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/individualdependent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Dependent update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating dependent:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating dependent:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const l2=(0,_t.Z)(i2,[["render",r2]]);var n2=l2;const o2={key:0,class:"shadow-md"},c2=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),d2=[c2],u2=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Individual Customer")],-1),p2={class:"grid grid-cols-12 gap-6 mt-5"},m2={class:"intro-y col-span-12 lg:col-span-6"},h2={class:"intro-y box p-5"},g2={class:"grid grid-cols-2 gap-6 mt-3"},f2=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),w2={class:"input-group"},v2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),_2={class:"input-group"},y2={class:"grid grid-cols-3 gap-6 mt-3"},x2=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),b2={class:"input-group"},k2=(0,i._)("option",null,"ID",-1),D2=(0,i._)("option",null,"Drive Licence",-1),C2=(0,i._)("option",null,"Passport",-1),P2=(0,i._)("option",null,"Voters",-1),S2=(0,i._)("option",null,"...",-1),z2=[k2,D2,C2,P2,S2],N2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),T2={class:"input-group"},M2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),I2={class:"input-group"},U2={class:"grid grid-cols-3 gap-6 mt-3"},E2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),F2={class:"input-group"},$2=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),A2={class:"input-group"},B2=(0,i._)("option",null,"male",-1),q2=(0,i._)("option",null,"female",-1),j2=(0,i._)("option",null,"other",-1),V2=[B2,q2,j2],L2=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee *",-1),Z2={class:"input-group"},R2={class:"grid grid-cols-2 gap-6 mt-3"},W2=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),H2={class:"input-group"},O2=["value"],Y2=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),K2={class:"input-group"},G2={class:"grid grid-cols-2 gap-6 mt-3"},J2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Q2={class:"input-group"},X2=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),e4={class:"input-group"},t4={class:"grid grid-cols-3 gap-6 mt-3"},a4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),s4={class:"input-group"},r4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),i4={class:"input-group"},l4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),n4={class:"input-group"},o4={class:"grid grid-cols-2 gap-6 mt-3"},c4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),d4={class:"input-group"},u4=["value"],p4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),m4={class:"fallback mt-4"},h4={class:"text-right mt-8"},g4=["disabled"];function f4(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",o2,d2)):(0,i.kq)("",!0),u2,(0,i._)("form",{onSubmit:t[18]||(t[18]=(0,s.iM)(((...e)=>n.onCreateIndivitualCustomer&&n.onCreateIndivitualCustomer(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",p2,[(0,i._)("div",m2,[(0,i._)("div",h2,[(0,i._)("div",g2,[(0,i._)("div",null,[f2,(0,i._)("div",w2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[v2,(0,i._)("div",_2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",y2,[(0,i._)("div",null,[x2,(0,i._)("div",b2,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},z2,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[N2,(0,i._)("div",T2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[M2,(0,i._)("div",I2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",U2,[(0,i._)("div",null,[E2,(0,i._)("div",F2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[$2,(0,i._)("div",A2,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},V2,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[L2,(0,i._)("div",Z2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",min:"1",step:"0.01",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])]),(0,i._)("div",R2,[(0,i._)("div",null,[W2,(0,i._)("div",H2,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,O2)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[Y2,(0,i._)("div",K2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",G2,[(0,i._)("div",null,[J2,(0,i._)("div",Q2,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[X2,(0,i._)("div",e4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",t4,[(0,i._)("div",null,[a4,(0,i._)("div",s4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[r4,(0,i._)("div",i4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[l4,(0,i._)("div",n4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",o4,[(0,i._)("div",null,[c4,(0,i._)("div",d4,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,u4)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[p4,(0,i._)("div",m4,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png",onChange:t[16]||(t[16]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",h4,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[17]||(t[17]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,g4)])])])])],32)])}var w4={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",avatar:null,plans:[],managers:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.btnloading=!0,this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.btnloading=!1,this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateIndivitualCustomer(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","manager"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/invididual/create/customer",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Customer created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewcustomer"),this.isSuccess=!0,console.log(s),this.$emit("postcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getPlans(),this.getMagers()}};const v4=(0,_t.Z)(w4,[["render",f4]]);var _4=v4;const y4={class:"intro-y flex items-center mt-8"},x4=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Individual Customer",-1),b4={key:0},k4=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),D4=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),C4=[k4,D4],P4={class:"grid grid-cols-12 gap-6 mt-5"},S4={class:"intro-y col-span-12 lg:col-span-6"},z4={class:"intro-y box p-5"},N4={class:"grid grid-cols-2 gap-6 mt-3"},T4=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),M4={class:"input-group"},I4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),U4={class:"input-group"},E4={class:"grid grid-cols-3 gap-6 mt-3"},F4=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),$4={class:"input-group"},A4=(0,i._)("option",null,"ID",-1),B4=(0,i._)("option",null,"Drive Licence",-1),q4=(0,i._)("option",null,"Passport",-1),j4=(0,i._)("option",null,"Voters",-1),V4=(0,i._)("option",null,"...",-1),L4=[A4,B4,q4,j4,V4],Z4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),R4={class:"input-group"},W4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),H4={class:"input-group"},O4={class:"grid grid-cols-3 gap-6 mt-3"},Y4=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Enrolment date *",-1),K4={class:"input-group"},G4=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),J4={class:"input-group"},Q4=(0,i._)("option",null,"male",-1),X4=(0,i._)("option",null,"female",-1),e5=(0,i._)("option",null,"other",-1),t5=[Q4,X4,e5],a5={key:0},s5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Relation",-1),r5={class:"input-group"},i5=(0,i._)("option",null,"Wife",-1),l5=(0,i._)("option",null,"Son",-1),n5=(0,i._)("option",null,"Daughter",-1),o5=(0,i._)("option",null,"Mother",-1),c5=(0,i._)("option",null,"Father",-1),d5=[i5,l5,n5,o5,c5],u5={key:1},p5=(0,i._)("label",{for:"crud-form-20",class:"form-label"},"Monthly fee",-1),m5={class:"input-group"},h5={class:"grid grid-cols-2 gap-6 mt-3"},g5=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Plan *",-1),f5={class:"input-group"},w5=["value"],v5=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"MemberShip ID *",-1),_5={class:"input-group"},y5={class:"grid grid-cols-2 gap-6 mt-3"},x5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),b5={class:"input-group"},k5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),D5={class:"input-group"},C5={class:"grid grid-cols-3 gap-6 mt-3"},P5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),S5={class:"input-group"},z5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),N5={class:"input-group"},T5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),M5={class:"input-group"},I5={class:"grid grid-cols-2 gap-6 mt-3"},U5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),E5={class:"input-group"},F5=["value"],$5=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),A5={class:"fallback mt-4"},B5=(0,i._)("label",{for:"crud-form-4",class:"form-label mt-3"},[(0,i._)("strong",null,"Status")],-1),q5={class:"grid grid-cols-2 gap-6 mt-1"},j5=(0,i._)("option",{value:"Active"},"Active",-1),V5=(0,i._)("option",{value:"Inactive"},"Inactive",-1),L5=[j5,V5],Z5={class:"text-right mt-8"},R5=["disabled"];function W5(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",y4,[x4,l.loading?((0,i.wg)(),(0,i.iD)("div",b4,C4)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[20]||(t[20]=(0,s.iM)(((...e)=>n.onUpdateUser&&n.onUpdateUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",P4,[(0,i._)("div",S4,[(0,i._)("div",z4,[(0,i._)("div",N4,[(0,i._)("div",null,[T4,(0,i._)("div",M4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[I4,(0,i._)("div",U4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",E4,[(0,i._)("div",null,[F4,(0,i._)("div",$4,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},L4,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[Z4,(0,i._)("div",R4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[W4,(0,i._)("div",H4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",O4,[(0,i._)("div",null,[Y4,(0,i._)("div",K4,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.enrolmentDate=e),id:"crud-form-7",type:"date",class:"form-control",placeholder:"enrolment date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.enrolmentDate]])])]),(0,i._)("div",null,[G4,(0,i._)("div",J4,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},t5,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,["Main"!==l.relation?((0,i.wg)(),(0,i.iD)("div",a5,[s5,(0,i._)("div",r5,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[7]||(t[7]=e=>l.relation=e)},d5,512),[[s.bM,l.relation]])])])):(0,i.kq)("",!0),"Main"===l.relation?((0,i.wg)(),(0,i.iD)("div",u5,[p5,(0,i._)("div",m5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.monthlyFee=e),id:"crud-form-20",type:"number",class:"form-control",placeholder:"monthly fee","aria-describedby":"input-group-1"},null,512),[[s.nr,l.monthlyFee]])])])):(0,i.kq)("",!0)])]),(0,i._)("div",h5,[(0,i._)("div",null,[g5,(0,i._)("div",f5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.plan=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.plans,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.planName)+" - "+(0,Ns.zw)(n.formatCurrency(e.planPrice)),9,w5)))),128))],512),[[s.bM,l.plan]])])]),(0,i._)("div",null,[v5,(0,i._)("div",_5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.memberShipID=e),id:"crud-form-21",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"memberShipID","aria-describedby":"input-group-1"},null,512),[[s.nr,l.memberShipID]])])])]),(0,i._)("div",y5,[(0,i._)("div",null,[x5,(0,i._)("div",b5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])]),(0,i._)("div",null,[k5,(0,i._)("div",D5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",C5,[(0,i._)("div",null,[P5,(0,i._)("div",S5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[z5,(0,i._)("div",N5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[T5,(0,i._)("div",M5,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",I5,[(0,i._)("div",null,[U5,(0,i._)("div",E5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>l.manager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" "+(0,Ns.zw)(e.contact1),9,F5)))),128))],512),[[s.bM,l.manager]])])]),(0,i._)("div",null,[$5,(0,i._)("div",A5,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[17]||(t[17]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),B5,(0,i._)("div",q5,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[18]||(t[18]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},L5,512),[[s.bM,l.status]])]),(0,i._)("div",Z5,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[19]||(t[19]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,R5)])])])])],32)])}var H5={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",enrolmentDate:"",memberShipID:"",gender:"",monthlyFee:"",plan:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser(),this.getPlans(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getPlans(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/active/allplans",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error("Failed to fetch plans");this.plans=t.data.plan,this.loading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.memberShipID=e.data.user.memberShipID,this.gender=e.data.user.gender,this.monthlyFee=e.data.user.monthlyFee,this.plan=e.data.user.plan[0]._id,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.relation=e.data.user.relation,this.manager=e.data.user.manager._id,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateUser(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["companyName","firstName","lastName","idType","idNumber","dob","enrolmentDate","memberShipID","gender","monthlyFee","plan","email","address","contact1","contact2","manager","relation","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("enrolmentDate",this.enrolmentDate),a.append("memberShipID",this.memberShipID),a.append("gender",this.gender),a.append("monthlyFee",this.monthlyFee),a.append("plan",this.plan),a.append("address",this.address),a.append("relation",this.relation),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("manager",this.manager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/invididual/edit/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const O5=(0,_t.Z)(H5,[["render",W5]]);var Y5=O5;const K5={key:0,class:"shadow-md"},G5=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),J5=[G5],Q5=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Customers",-1),X5={class:"grid grid-cols-12 gap-6 mt-5"},e3={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},t3={class:"flex w-full sm:w-auto"},a3={class:"w-48 relative text-slate-500"},s3=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),r3={class:"hidden xl:block mx-auto text-slate-500"},i3=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),l3={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},n3={class:"table table-report -mt-2"},o3=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),c3={class:"w-40 !py-4"},d3={href:"#",class:"decoration-dotted whitespace-nowrap"},u3={class:"w-40"},p3={href:"#",class:"font-medium whitespace-nowrap"},m3={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},h3={class:"text-center"},g3={class:"flex items-center justify-center whitespace-nowrap"},f3={key:0,class:"whitespace-nowrap"},w3={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},v3={class:"w-40 text-right"},_3={class:"pr-16"},y3={class:"w-40 !py-4"},x3={class:"table-report__action"},b3={class:"flex justify-center items-center"},k3={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},D3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),C3={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},P3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),S3={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},z3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),N3={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},T3=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),M3=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),I3=[T3,M3],U3={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},E3={class:"w-full sm:w-auto sm:mr-auto"},F3={class:"pagination"},$3={class:"page-item"},A3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),B3=[A3],q3=["onClick"],j3={class:"page-item"},V3=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),L3=[V3],Z3=(0,i._)("option",null,"10",-1),R3=(0,i._)("option",null,"25",-1),W3=(0,i._)("option",null,"35",-1),H3=(0,i._)("option",null,"50",-1),O3=(0,i._)("option",null,"100",-1),Y3=(0,i._)("option",null,"500",-1),K3=(0,i._)("option",null,"1000",-1),G3=[Z3,R3,W3,H3,O3,Y3,K3],J3=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function Q3(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",K5,J5)):(0,i.kq)("",!0),Q5,(0,i._)("div",X5,[(0,i._)("div",e3,[(0,i._)("div",t3,[(0,i._)("div",a3,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),s3])]),(0,i._)("div",r3," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),i3]),(0,i._)("div",l3,[(0,i._)("table",n3,[o3,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",c3,[(0,i._)("a",d3,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",u3,[(0,i._)("a",p3,(0,Ns.zw)(e.contact1),1),(0,i._)("div",m3,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",h3,[(0,i._)("div",g3,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",f3,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",w3,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",v3,[(0,i._)("div",_3,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",y3,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",x3,[(0,i._)("div",b3,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",k3,[D3,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",C3,[P3,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",S3,[z3,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",N3,I3)):(0,i.kq)("",!0),(0,i._)("div",U3,[(0,i._)("nav",E3,[(0,i._)("ul",F3,[(0,i._)("li",$3,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},B3)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,q3)],2)))),128)),(0,i._)("li",j3,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},L3)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},G3,544),[[s.bM,l.pageSize]])])]),J3])}var X3={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/invididual/allindividualuser",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const e6=(0,_t.Z)(X3,[["render",Q3]]);var t6=e6;const a6={key:0,class:"shadow-md"},s6=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),r6=[s6],i6=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Customers",-1),l6={class:"grid grid-cols-12 gap-6 mt-5"},n6={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},o6={class:"flex w-full sm:w-auto"},c6={class:"w-48 relative text-slate-500"},d6=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),u6={class:"ml-1"},p6=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),m6=[p6],h6={class:"hidden xl:block mx-auto text-slate-500"},g6=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),f6={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},w6={class:"table table-report -mt-2"},v6=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),_6={class:"w-40 !py-4"},y6={href:"#",class:"decoration-dotted whitespace-nowrap"},x6={class:"w-40 !py-4"},b6={key:0,class:"decoration-dotted whitespace-nowrap"},k6={key:1,class:"decoration-dotted whitespace-nowrap"},D6={class:"w-40"},C6={href:"#",class:"font-medium whitespace-nowrap"},P6={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},S6={class:"text-center"},z6={class:"flex items-center justify-center whitespace-nowrap"},N6={key:0,class:"whitespace-nowrap"},T6={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},M6={class:"w-40 text-right"},I6={class:"pr-16"},U6={class:"w-40 !py-4"},E6={class:"table-report__action"},F6={class:"flex justify-center items-center"},$6={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},A6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),B6={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},q6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),j6={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},V6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),L6={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Z6=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),R6=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),W6=[Z6,R6],H6={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},O6={class:"w-full sm:w-auto sm:mr-auto"},Y6={class:"pagination"},K6={class:"page-item"},G6=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),J6=[G6],Q6=["onClick"],X6={class:"page-item"},e8=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),t8=[e8],a8=(0,i._)("option",null,"10",-1),s8=(0,i._)("option",null,"25",-1),r8=(0,i._)("option",null,"35",-1),i8=(0,i._)("option",null,"50",-1),l8=(0,i._)("option",null,"100",-1),n8=(0,i._)("option",null,"500",-1),o8=(0,i._)("option",null,"1000",-1),c8=[a8,s8,r8,i8,l8,n8,o8],d8=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function u8(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",a6,r6)):(0,i.kq)("",!0),i6,(0,i._)("div",l6,[(0,i._)("div",n6,[(0,i._)("div",o6,[(0,i._)("div",c6,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),d6])]),(0,i._)("div",u6,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},m6)]),(0,i._)("div",h6," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),g6]),(0,i._)("div",f6,[(0,i._)("table",w6,[v6,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",_6,[(0,i._)("a",y6,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",x6,[e.company&&void 0!==e.company?((0,i.wg)(),(0,i.iD)("div",b6,(0,Ns.zw)(e.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",k6," Individual "))]),(0,i._)("td",D6,[(0,i._)("a",C6,(0,Ns.zw)(e.contact1),1),(0,i._)("div",P6,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",S6,[(0,i._)("div",z6,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",N6,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",T6,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",M6,[(0,i._)("div",I6,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",U6,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",E6,[(0,i._)("div",F6,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",$6,[A6,(0,i.Wm)(c,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",B6,[q6,(0,i.Wm)(c,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",j6,[V6,(0,i.Wm)(c,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",L6,W6)):(0,i.kq)("",!0),(0,i._)("div",H6,[(0,i._)("nav",O6,[(0,i._)("ul",Y6,[(0,i._)("li",K6,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},J6)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Q6)],2)))),128)),(0,i._)("li",X6,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},t8)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},c8,544),[[s.bM,l.pageSize]])])]),d8])}var p8={data(){return{exportExcel:!1,indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/allcustomers",{headers:{token:e},params:t});this.indivUsers=a.data.users,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const m8=(0,_t.Z)(p8,[["render",u8]]);var h8=m8;function g8(e,t){return(0,i.wg)(),(0,i.iD)("div",null,"hama")}const f8={},w8=(0,_t.Z)(f8,[["render",g8]]);var v8=w8;function _8(e,t){return(0,i.wg)(),(0,i.iD)("div")}const y8={},x8=(0,_t.Z)(y8,[["render",_8]]);var b8=x8;const k8={key:0,class:"shadow-md"},D8=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),C8=[D8],P8=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),S8={class:"flex justify-center"},z8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Admin"}," Create Admin ",-1),N8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Line Manager"}," Create Manager ",-1),T8=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Agent"}," Create Agent ",-1),M8={class:"grid grid-cols-12 gap-6 mt-5"},I8={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},U8={class:"flex w-full sm:w-auto"},E8={class:"w-48 relative text-slate-500"},F8=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),$8={class:"hidden xl:block mx-auto text-slate-500"},A8={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},B8={class:"table table-report -mt-2"},q8=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Avatar"),(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"UserType"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),j8={class:"text-center"},V8={class:"w-10 h-10 image-fit zoom-in"},L8=["title","src"],Z8={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},R8={class:"w-40 !py-4"},W8={class:"decoration-dotted whitespace-nowrap"},H8={class:"w-40"},O8={class:"decoration-dotted whitespace-nowrap"},Y8={class:"w-40 text-center"},K8={class:"font-medium whitespace-nowrap"},G8={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},J8={class:"w-40 text-center"},Q8={class:"decoration-dotted whitespace-nowrap"},X8={class:"w-40 text-center !py-4"},e7={class:"table-report__action"},t7={class:"flex justify-center items-center"},a7={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},s7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),r7={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},i7=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),l7=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),n7=[i7,l7],o7={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},c7={class:"w-full sm:w-auto sm:mr-auto"},d7={class:"pagination"},u7={class:"page-item"},p7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),m7=[p7],h7=["onClick"],g7={class:"page-item"},f7=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),w7=[f7],v7=(0,i._)("option",null,"10",-1),_7=(0,i._)("option",null,"25",-1),y7=(0,i._)("option",null,"35",-1),x7=(0,i._)("option",null,"50",-1),b7=(0,i._)("option",null,"100",-1),k7=(0,i._)("option",null,"500",-1),D7=(0,i._)("option",null,"1000",-1),C7=[v7,_7,y7,x7,b7,k7,D7],P7=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function S7(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",k8,C8)):(0,i.kq)("",!0),P8,(0,i._)("div",S8,[(0,i.Wm)(o,{to:"/createadmin"},{default:(0,i.w5)((()=>[z8])),_:1}),(0,i.Wm)(o,{to:"/createmanager"},{default:(0,i.w5)((()=>[N8])),_:1}),(0,i.Wm)(o,{to:"/createagent"},{default:(0,i.w5)((()=>[T8])),_:1})]),(0,i._)("div",M8,[(0,i._)("div",I8,[(0,i._)("div",U8,[(0,i._)("div",E8,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),F8])]),(0,i._)("div",$8," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",A8,[(0,i._)("table",B8,[q8,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",j8,[(0,i._)("div",V8,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,L8)):((0,i.wg)(),(0,i.iD)("img",Z8))])]),(0,i._)("td",R8,[(0,i._)("a",W8,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)]),(0,i._)("td",H8,[(0,i._)("a",O8,(0,Ns.zw)(a.email),1)]),(0,i._)("td",Y8,[(0,i._)("a",K8,(0,Ns.zw)(a.contact1),1),(0,i._)("div",G8,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",J8,[(0,i._)("div",Q8,(0,Ns.zw)(n.getRole(a.role)),1)]),(0,i._)("td",X8,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",e7,[(0,i._)("div",t7,[(0,i._)("a",a7,[s7,(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",r7,n7)):(0,i.kq)("",!0),(0,i._)("div",o7,[(0,i._)("nav",c7,[(0,i._)("ul",d7,[(0,i._)("li",u7,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},m7)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,h7)],2)))),128)),(0,i._)("li",g7,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},w7)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},C7,544),[[s.bM,l.pageSize]])])]),P7])}var z7={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/employer/get",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.axios=r.Z,this.fetchData()}};const N7=(0,_t.Z)(z7,[["render",S7]]);var T7=N7;const M7={class:"intro-y flex items-center mt-8"},I7=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),U7={key:0},E7=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),F7=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),$7=[E7,F7],A7={class:"grid grid-cols-12 gap-6 mt-5"},B7={class:"intro-y col-span-12 lg:col-span-6"},q7={class:"intro-y box p-5"},j7={class:"grid grid-cols-2 gap-6 mt-3"},V7=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),L7={class:"input-group"},Z7=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),R7={class:"input-group"},W7={class:"grid grid-cols-3 gap-6 mt-3"},H7=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),O7={class:"input-group"},Y7=(0,i._)("option",null,"ID",-1),K7=(0,i._)("option",null,"Drive Licence",-1),G7=(0,i._)("option",null,"Passport",-1),J7=(0,i._)("option",null,"Voters",-1),Q7=(0,i._)("option",null,"...",-1),X7=[Y7,K7,G7,J7,Q7],e9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),t9={class:"input-group"},a9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),s9={class:"input-group"},r9={class:"grid grid-cols-2 gap-6 mt-3"},i9=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),l9={class:"input-group"},n9=(0,i._)("option",null,"male",-1),o9=(0,i._)("option",null,"female",-1),c9=(0,i._)("option",null,"other",-1),d9=[n9,o9,c9],u9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),p9={class:"input-group"},m9={class:"grid grid-cols-2 gap-6 mt-3"},h9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),g9={class:"input-group"},f9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Line Manager *",-1),w9={class:"input-group"},v9=["value"],_9={class:"grid grid-cols-3 gap-6 mt-3"},y9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 1 *",-1),x9={class:"input-group"},b9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),k9={class:"input-group"},D9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),C9={class:"input-group"},P9={class:"grid grid-cols-2 gap-6 mt-3"},S9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),z9={class:"fallback mt-4"},N9={class:"text-right mt-8"},T9=["disabled"];function M9(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",M7,[I7,l.loading?((0,i.wg)(),(0,i.iD)("div",U7,$7)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",A7,[(0,i._)("div",B7,[(0,i._)("div",q7,[(0,i._)("div",j7,[(0,i._)("div",null,[V7,(0,i._)("div",L7,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[Z7,(0,i._)("div",R7,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",W7,[(0,i._)("div",null,[H7,(0,i._)("div",O7,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},X7,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[e9,(0,i._)("div",t9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[a9,(0,i._)("div",s9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",r9,[(0,i._)("div",null,[i9,(0,i._)("div",l9,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},d9,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[u9,(0,i._)("div",p9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",m9,[(0,i._)("div",null,[h9,(0,i._)("div",g9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[f9,(0,i._)("div",w9,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.lineManager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,v9)))),128))],512),[[s.bM,l.lineManager]])])])]),(0,i._)("div",_9,[(0,i._)("div",null,[y9,(0,i._)("div",x9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[b9,(0,i._)("div",k9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[D9,(0,i._)("div",C9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",P9,[(0,i._)("div",null,[S9,(0,i._)("div",z9,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",N9,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,T9)])])])])],32)])}var I9={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",lineManager:"",password:"",avatar:null,managers:[],loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,console.log(t.data.employer),this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateAgent(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","lineManager"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/agent/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Agent created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Agent created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getMagers()}};const U9=(0,_t.Z)(I9,[["render",M9]]);var E9=U9;const F9={class:"intro-y flex items-center mt-8"},$9=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),A9={key:0},B9=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),q9=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),j9=[B9,q9],V9={class:"grid grid-cols-12 gap-6 mt-5"},L9={class:"intro-y col-span-12 lg:col-span-6"},Z9={class:"intro-y box p-5"},R9={class:"grid grid-cols-2 gap-6 mt-3"},W9=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),H9={class:"input-group"},O9=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),Y9={class:"input-group"},K9={class:"grid grid-cols-3 gap-6 mt-3"},G9=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),J9={class:"input-group"},Q9=(0,i._)("option",null,"ID",-1),X9=(0,i._)("option",null,"Drive Licence",-1),eee=(0,i._)("option",null,"Passport",-1),tee=(0,i._)("option",null,"Voters",-1),aee=(0,i._)("option",null,"...",-1),see=[Q9,X9,eee,tee,aee],ree=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),iee={class:"input-group"},lee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),nee={class:"input-group"},oee={class:"grid grid-cols-2 gap-6 mt-3"},cee=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),dee={class:"input-group"},uee=(0,i._)("option",null,"male",-1),pee=(0,i._)("option",null,"female",-1),mee=(0,i._)("option",null,"other",-1),hee=[uee,pee,mee],gee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),fee={class:"input-group"},wee={class:"grid grid-cols-2 gap-6 mt-3"},vee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),_ee={class:"input-group"},yee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Manager *",-1),xee={class:"input-group"},bee=["value"],kee={class:"grid grid-cols-3 gap-6 mt-3"},Dee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Cee={class:"input-group"},Pee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),See={class:"input-group"},zee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Nee={class:"input-group"},Tee={class:"grid grid-cols-2 gap-6 mt-3"},Mee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),Iee={class:"input-group"},Uee=(0,i._)("option",{value:"Active"},"Active",-1),Eee=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Fee=[Uee,Eee],$ee={class:"grid grid-cols-2 gap-6"},Aee=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Bee={class:"fallback"},qee={class:"text-right mt-8"},jee=["disabled"];function Vee(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",F9,[$9,l.loading?((0,i.wg)(),(0,i.iD)("div",A9,j9)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[15]||(t[15]=(0,s.iM)(((...e)=>n.onUpdateUser&&n.onUpdateUser(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",V9,[(0,i._)("div",L9,[(0,i._)("div",Z9,[(0,i._)("div",R9,[(0,i._)("div",null,[W9,(0,i._)("div",H9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[O9,(0,i._)("div",Y9,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",K9,[(0,i._)("div",null,[G9,(0,i._)("div",J9,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},see,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[ree,(0,i._)("div",iee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[lee,(0,i._)("div",nee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",oee,[(0,i._)("div",null,[cee,(0,i._)("div",dee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},hee,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[gee,(0,i._)("div",fee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",wee,[(0,i._)("div",null,[vee,(0,i._)("div",_ee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[yee,(0,i._)("div",xee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.lineManager=e),class:"form-control mt-2 sm:mr-2","aria-label":"Default select example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.managers,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e._id,value:e._id},(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName)+" - "+(0,Ns.zw)(e.contact1),9,bee)))),128))],512),[[s.bM,l.lineManager]])])])]),(0,i._)("div",kee,[(0,i._)("div",null,[Dee,(0,i._)("div",Cee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Pee,(0,i._)("div",See,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[zee,(0,i._)("div",Nee,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Tee,[(0,i._)("div",null,[Mee,(0,i._)("div",Iee,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},Fee,512),[[s.bM,l.status]])])]),(0,i._)("div",$ee,[(0,i._)("div",null,[Aee,(0,i._)("div",Bee,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[13]||(t[13]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])])]),(0,i._)("div",qee,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[14]||(t[14]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,jee)])])])])],32)])}var Lee={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",lineManager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser(),this.getMagers()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/manager/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.password=e.data.user.password,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.lineManager=e.data.user.lineManager,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateUser(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","lineManager","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("plan",this.plan),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/api/user/agent/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Customer update successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i.status),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating company:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating company:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Zee=(0,_t.Z)(Lee,[["render",Vee]]);var Ree=Zee;const Wee=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Costomers",-1),Hee={class:"flex justify-center"},Oee=(0,i._)("button",{class:"intro-y w-10 h-10 rounded-full btn bg-slate-100 dark:bg-darkmode-400 dark:border-darkmode-400 text-slate-500 mx-2 myborder","data-toggle":"tooltip","data-placement":"top",title:"Create Agent"}," Create Agent ",-1),Yee={key:0},Kee=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Gee=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Jee=[Kee,Gee],Qee={class:"grid grid-cols-12 gap-6 mt-5"},Xee={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ete={class:"flex w-full sm:w-auto"},tte={class:"w-48 relative text-slate-500"},ate=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),ste={class:"hidden xl:block mx-auto text-slate-500"},rte={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},ite={class:"table table-report -mt-2"},lte=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Avatar"),(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Email"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"UserType"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),nte={class:"text-center"},ote={class:"w-10 h-10 image-fit zoom-in"},cte=["title","src"],dte={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},ute={class:"w-40 !py-4"},pte={class:"decoration-dotted whitespace-nowrap"},mte={class:"w-40"},hte={class:"decoration-dotted whitespace-nowrap"},gte={class:"w-40 text-center"},fte={class:"font-medium whitespace-nowrap"},wte={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},vte={class:"w-40 text-center"},_te={class:"decoration-dotted whitespace-nowrap"},yte={class:"w-40 text-center !py-4"},xte={class:"table-report__action"},bte={class:"flex justify-center items-center"},kte={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Dte=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Cte={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Pte=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Ste=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),zte=[Pte,Ste],Nte={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Tte={class:"w-full sm:w-auto sm:mr-auto"},Mte={class:"pagination"},Ite={class:"page-item"},Ute=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Ete=[Ute],Fte=["onClick"],$te={class:"page-item"},Ate=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Bte=[Ate],qte=(0,i._)("option",null,"10",-1),jte=(0,i._)("option",null,"25",-1),Vte=(0,i._)("option",null,"35",-1),Lte=(0,i._)("option",null,"50",-1),Zte=(0,i._)("option",null,"100",-1),Rte=(0,i._)("option",null,"500",-1),Wte=(0,i._)("option",null,"1000",-1),Hte=[qte,jte,Vte,Lte,Zte,Rte,Wte],Ote=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function Yte(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Wee,(0,i._)("div",Hee,[(0,i.Wm)(o,{to:"/createmyagent"},{default:(0,i.w5)((()=>[Oee])),_:1})]),l.loading?((0,i.wg)(),(0,i.iD)("div",Yee,Jee)):(0,i.kq)("",!0),(0,i._)("div",Qee,[(0,i._)("div",Xee,[(0,i._)("div",ete,[(0,i._)("div",tte,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),ate])]),(0,i._)("div",ste," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",rte,[(0,i._)("table",ite,[lte,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",nte,[(0,i._)("div",ote,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,cte)):((0,i.wg)(),(0,i.iD)("img",dte))])]),(0,i._)("td",ute,[(0,i._)("a",pte,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1)]),(0,i._)("td",mte,[(0,i._)("a",hte,(0,Ns.zw)(a.email),1)]),(0,i._)("td",gte,[(0,i._)("a",fte,(0,Ns.zw)(a.contact1),1),(0,i._)("div",wte,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",vte,[(0,i._)("div",_te,(0,Ns.zw)(n.getRole(a.role)),1)]),(0,i._)("td",yte,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",xte,[(0,i._)("div",bte,[(0,i._)("a",kte,[Dte,(0,i.Wm)(o,{to:`/employerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Cte,zte)):(0,i.kq)("",!0),(0,i._)("div",Nte,[(0,i._)("nav",Tte,[(0,i._)("ul",Mte,[(0,i._)("li",Ite,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},Ete)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Fte)],2)))),128)),(0,i._)("li",$te,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},Bte)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Hte,544),[[s.bM,l.pageSize]])])]),Ote])}var Kte={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/agent/manageragents/get",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Gte=(0,_t.Z)(Kte,[["render",Yte]]);var Jte=Gte;const Qte={key:0,class:"shadow-md"},Xte=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),eae=[Xte],tae=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Customers",-1),aae={class:"grid grid-cols-12 gap-6 mt-5"},sae={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},rae={class:"flex w-full sm:w-auto"},iae={class:"w-48 relative text-slate-500"},lae=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),nae={class:"hidden xl:block mx-auto text-slate-500"},oae={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},cae={class:"table table-report -mt-2"},dae=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),uae={class:"w-40 !py-4"},pae={href:"#",class:"decoration-dotted whitespace-nowrap"},mae={class:"w-40"},hae={href:"#",class:"font-medium whitespace-nowrap"},gae={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},fae={class:"text-center"},wae={class:"flex items-center justify-center whitespace-nowrap"},vae={key:0,class:"whitespace-nowrap"},_ae={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},yae={class:"w-40 text-right"},xae={class:"pr-16"},bae={class:"w-40 !py-4"},kae={class:"table-report__action"},Dae={class:"flex justify-center items-center"},Cae={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Pae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Sae={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},zae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Nae={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Tae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Mae={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Iae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Uae={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Eae=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Fae=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),$ae=[Eae,Fae],Aae={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Bae={class:"w-full sm:w-auto sm:mr-auto"},qae={class:"pagination"},jae={class:"page-item"},Vae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Lae=[Vae],Zae=["onClick"],Rae={class:"page-item"},Wae=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Hae=[Wae],Oae=(0,i._)("option",null,"10",-1),Yae=(0,i._)("option",null,"25",-1),Kae=(0,i._)("option",null,"35",-1),Gae=(0,i._)("option",null,"50",-1),Jae=(0,i._)("option",null,"100",-1),Qae=(0,i._)("option",null,"500",-1),Xae=(0,i._)("option",null,"1000",-1),ese=[Oae,Yae,Kae,Gae,Jae,Qae,Xae],tse=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function ase(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",Qte,eae)):(0,i.kq)("",!0),tae,(0,i._)("div",aae,[(0,i._)("div",sae,[(0,i._)("div",rae,[(0,i._)("div",iae,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),lae])]),(0,i._)("div",nae," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",oae,[(0,i._)("table",cae,[dae,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",uae,[(0,i._)("a",pae,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",mae,[(0,i._)("a",hae,(0,Ns.zw)(e.contact1),1),(0,i._)("div",gae,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",fae,[(0,i._)("div",wae,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",vae,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",_ae,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",yae,[(0,i._)("div",xae,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",bae,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",kae,[(0,i._)("div",Dae,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",Cae,[Pae,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",Sae,[zae,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",Nae,[Tae,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0),(0,i._)("a",Mae,[Iae,(0,i.Wm)(o,{to:`/assignagenttocustomer/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Assign agent")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Uae,$ae)):(0,i.kq)("",!0),(0,i._)("div",Aae,[(0,i._)("nav",Bae,[(0,i._)("ul",qae,[(0,i._)("li",jae,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},Lae)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Zae)],2)))),128)),(0,i._)("li",Rae,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},Hae)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},ese,544),[[s.bM,l.pageSize]])])]),tse])}var sse={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/invididual/allindividualusermanager",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const rse=(0,_t.Z)(sse,[["render",ase]]);var ise=rse;const lse=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Company",-1),nse={key:0},ose=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),cse=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),dse=[ose,cse],use={class:"grid grid-cols-12 gap-6 mt-5"},pse={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},mse={class:"flex w-full sm:w-auto"},hse={class:"w-48 relative text-slate-500"},gse=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),fse={class:"hidden xl:block mx-auto text-slate-500"},wse={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},vse={class:"table table-report -mt-2"},_se=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Logo"),(0,i._)("th",{class:"whitespace-nowrap"},"Company name"),(0,i._)("th",{class:"whitespace-nowrap"},"Brand"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Company Manager"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Contacts")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Account Manager"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),yse={class:"w-40 !py-4"},xse={class:"w-10 h-10 image-fit zoom-in"},bse=["title","src"],kse={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Dse={class:"w-40 !py-4"},Cse={href:"#",class:"decoration-dotted whitespace-nowrap"},Pse={class:"w-40"},Sse={href:"#",class:"font-medium whitespace-nowrap"},zse={class:"text-center"},Nse={class:"flex items-center justify-center whitespace-nowrap"},Tse={class:"w-40"},Mse={href:"#",class:"font-medium whitespace-nowrap"},Ise={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Use={class:"text-center"},Ese={key:0,class:"flex items-center justify-center whitespace-nowrap"},Fse={class:"w-40 !py-4"},$se={class:"table-report__action"},Ase={key:0,class:"flex justify-center items-center"},Bse={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},qse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),jse={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Vse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Lse={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Zse=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Rse=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Wse=[Zse,Rse],Hse={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Ose={class:"w-full sm:w-auto sm:mr-auto"},Yse={class:"pagination"},Kse={class:"page-item"},Gse=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),Jse=[Gse],Qse=["onClick"],Xse={class:"page-item"},ere=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),tre=[ere],are=(0,i._)("option",null,"10",-1),sre=(0,i._)("option",null,"25",-1),rre=(0,i._)("option",null,"35",-1),ire=(0,i._)("option",null,"50",-1),lre=(0,i._)("option",null,"100",-1),nre=[are,sre,rre,ire,lre],ore=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function cre(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[lse,l.loading?((0,i.wg)(),(0,i.iD)("div",nse,dse)):(0,i.kq)("",!0),(0,i._)("div",use,[(0,i._)("div",pse,[(0,i._)("div",mse,[(0,i._)("div",hse,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),gse])]),(0,i._)("div",fse," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",wse,[(0,i._)("table",vse,[_se,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.allCompanies,(a=>((0,i.wg)(),(0,i.iD)("tr",{key:a._id,class:"intro-x"},[(0,i._)("td",yse,[(0,i._)("div",xse,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`http://localhost:8000/${a.avatar}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,bse)):((0,i.wg)(),(0,i.iD)("img",kse))])]),(0,i._)("td",Dse,[(0,i._)("a",Cse,(0,Ns.zw)(a.companyName),1)]),(0,i._)("td",Pse,[(0,i._)("a",Sse,(0,Ns.zw)(a.brand),1)]),(0,i._)("td",zse,[(0,i._)("div",Nse,(0,Ns.zw)(a.accountManager),1)]),(0,i._)("td",Tse,[(0,i._)("a",Mse,(0,Ns.zw)(a.contact1),1),(0,i._)("div",Ise,(0,Ns.zw)(a.contact2),1)]),(0,i._)("td",Use,[a.manager?((0,i.wg)(),(0,i.iD)("div",Ese,(0,Ns.zw)(a.manager.firstName)+" "+(0,Ns.zw)(a.manager.lastName),1)):(0,i.kq)("",!0)]),(0,i._)("td",Fse,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)]),(0,i._)("td",$se,["Active"===a.status?((0,i.wg)(),(0,i.iD)("div",Ase,[(0,i._)("a",Bse,[qse,(0,i.Wm)(o,{to:`/companymembers/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Employees")])),_:2},1032,["to"])]),(0,i._)("a",jse,[Vse,(0,i.Wm)(o,{to:`/viewcompanytransactions/${a._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Transactions")])),_:2},1032,["to"])])])):(0,i.kq)("",!0)])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Lse,Wse)):(0,i.kq)("",!0),(0,i._)("div",Hse,[(0,i._)("nav",Ose,[(0,i._)("ul",Yse,[(0,i._)("li",Kse,[(0,i._)("a",{class:"page-link",onClick:t[4]||(t[4]=(...e)=>n.previousPage&&n.previousPage(...e))},Jse)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Qse)],2)))),128)),(0,i._)("li",Xse,[(0,i._)("a",{class:"page-link",onClick:t[5]||(t[5]=(...e)=>n.nextPage&&n.nextPage(...e))},tre)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[6]||(t[6]=e=>l.pageSize=e),onChange:t[7]||(t[7]=(...e)=>n.changePageSize&&n.changePageSize(...e))},nre,544),[[s.bM,l.pageSize]])])]),ore])}var dre={data(){return{allCompanies:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/allmanagercompany",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.allCompanies=t.data.companies,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const ure=(0,_t.Z)(dre,[["render",cre]]);var pre=ure;const mre={key:0,class:"shadow-md"},hre=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),gre=[hre],fre=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"All Customers",-1),wre={class:"grid grid-cols-12 gap-6 mt-5"},vre={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},_re={class:"flex w-full sm:w-auto"},yre={class:"w-48 relative text-slate-500"},xre=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),bre={class:"hidden xl:block mx-auto text-slate-500"},kre={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Dre={class:"table table-report -mt-2"},Cre=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Name"),(0,i._)("th",{class:"whitespace-nowrap"},"Contacts"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Relation"),(0,i._)("th",{class:"whitespace-nowrap"},"Plan"),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Monthly Fee")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Pre={class:"w-40 !py-4"},Sre={href:"#",class:"decoration-dotted whitespace-nowrap"},zre={class:"w-40"},Nre={href:"#",class:"font-medium whitespace-nowrap"},Tre={class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Mre={class:"text-center"},Ire={class:"flex items-center justify-center whitespace-nowrap"},Ure={key:0,class:"whitespace-nowrap"},Ere={key:1,class:"text-slate-500 text-xs whitespace-nowrap mt-0.5"},Fre={class:"w-40 text-right"},$re={class:"pr-16"},Are={class:"w-40 !py-4"},Bre={class:"table-report__action"},qre={class:"flex justify-center items-center"},jre={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Vre=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Lre={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Zre=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Rre={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},Wre=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Hre={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Ore=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Yre=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Kre=[Ore,Yre],Gre={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Jre={class:"w-full sm:w-auto sm:mr-auto"},Qre={class:"pagination"},Xre={class:"page-item"},eie=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),tie=[eie],aie=["onClick"],sie={class:"page-item"},rie=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),iie=[rie],lie=(0,i._)("option",null,"10",-1),nie=(0,i._)("option",null,"25",-1),oie=(0,i._)("option",null,"35",-1),cie=(0,i._)("option",null,"50",-1),die=(0,i._)("option",null,"100",-1),uie=(0,i._)("option",null,"500",-1),pie=(0,i._)("option",null,"1000",-1),mie=[lie,nie,oie,cie,die,uie,pie],hie=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-danger mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to delete these records? <br> This process cannot be undone. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Delete</button></div></div></div></div></div>',1);function gie(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",mre,gre)):(0,i.kq)("",!0),fre,(0,i._)("div",wre,[(0,i._)("div",vre,[(0,i._)("div",_re,[(0,i._)("div",yre,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),xre])]),(0,i._)("div",bre," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1)]),(0,i._)("div",kre,[(0,i._)("table",Dre,[Cre,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.indivUsers,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Pre,[(0,i._)("a",Sre,(0,Ns.zw)(e.firstName)+" "+(0,Ns.zw)(e.lastName),1)]),(0,i._)("td",zre,[(0,i._)("a",Nre,(0,Ns.zw)(e.contact1),1),(0,i._)("div",Tre,(0,Ns.zw)(e.contact2),1)]),(0,i._)("td",Mre,[(0,i._)("div",Ire,(0,Ns.zw)(e.relation),1)]),(0,i._)("td",null,[e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",Ure,(0,Ns.zw)(e.plan[0].planName),1)):(0,i.kq)("",!0),e.plan&&e.plan.length>0?((0,i.wg)(),(0,i.iD)("div",Ere,(0,Ns.zw)(n.formatCurrency(e.plan[0].planPrice)),1)):(0,i.kq)("",!0)]),(0,i._)("td",Fre,[(0,i._)("div",$re,(0,Ns.zw)(n.formatCurrency(e.monthlyFee)),1)]),(0,i._)("td",Are,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",Bre,[(0,i._)("div",qre,["Main"!==e.relation?((0,i.wg)(),(0,i.iD)("a",jre,[Vre,(0,i.Wm)(o,{to:`/dependentprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation?((0,i.wg)(),(0,i.iD)("a",Lre,[Zre,(0,i.Wm)(o,{to:`/customerprofile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Details")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Main"===e.relation&&"Active"===e.status?((0,i.wg)(),(0,i.iD)("a",Rre,[Wre,(0,i.Wm)(o,{to:`/createdependentindividual/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Add dependets")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Hre,Kre)):(0,i.kq)("",!0),(0,i._)("div",Gre,[(0,i._)("nav",Jre,[(0,i._)("ul",Qre,[(0,i._)("li",Xre,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},tie)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,aie)],2)))),128)),(0,i._)("li",sie,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},iie)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},mie,544),[[s.bM,l.pageSize]])])]),hie])}var fie={data(){return{indivUsers:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/user/manager/allcustomersfromlogedmanager",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.indivUsers=t.data.users,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const wie=(0,_t.Z)(fie,[["render",gie]]);var vie=wie;const _ie=(0,i._)("div",{class:"intro-y flex flex-col sm:flex-row items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Chat")],-1),yie={class:"intro-y chat grid grid-cols-12 gap-5 mt-5"},xie={class:"col-span-12 lg:col-span-4 2xl:col-span-3"},bie=(0,i._)("div",{class:"intro-y pr-1"},[(0,i._)("div",{class:"box p-2"},[(0,i._)("ul",{class:"nav nav-pills",role:"tablist"},[(0,i._)("li",{id:"chats-tab",class:"nav-item flex-1",role:"presentation"},[(0,i._)("button",{class:"nav-link w-full py-2 active",type:"button"}," Chats ")])])])],-1),kie={class:"tab-content"},Die={id:"chats",class:"tab-pane active",role:"tabpanel","aria-labelledby":"chats-tab"},Cie={class:"chat__chat-list overflow-y-auto scrollbar-hidden pr-1 pt-1 mt-4"},Pie=["onClick"],Sie={class:"w-12 h-12 flex-none image-fit mr-1"},zie=["title","src"],Nie={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},Tie={key:2,class:"w-3 h-3 rounded-full absolute bottom-0 right-0 bg-success"},Mie={class:"ml-2 overflow-hidden"},Iie={class:"flex items-center"},Uie={href:"javascript:;",class:"font-medium"},Eie=(0,i._)("div",{class:"text-xs text-slate-400 ml-auto"},null,-1),Fie={class:"w-full truncate text-slate-500 mt-0.5"},$ie={key:0,class:"w-5 h-5 text-white text-center rounded-full bg-primary font-medium absolute top-0 right-0 -mt-1 -mr-1"},Aie={class:"intro-y col-span-12 lg:col-span-8 2xl:col-span-9"},Bie={class:"chat__box box"},qie={class:"h-full flex flex-col"},jie={class:"flex flex-col sm:flex-row border-b border-slate-200/60 dark:border-darkmode-400 px-5 py-4"},Vie={class:"flex items-center"},Lie={class:"w-10 h-10 sm:w-12 sm:h-12 flex-none image-fit relative"},Zie=["title","src"],Rie={class:"ml-3 mr-auto"},Wie={class:"font-medium text-base"},Hie=(0,i._)("div",{class:"text-slate-500 text-xs sm:text-sm"},null,-1),Oie={class:"overflow-y-scroll scrollbar-hidden px-5 pt-5 flex-1",id:"chat-container"},Yie={key:0,class:"chat__box__text-box flex items-end float-right mb-4"},Kie=(0,i._)("div",{class:"hidden sm:block dropdown mr-3 my-auto"},[(0,i._)("a",{href:"javascript:;",class:"dropdown-toggle w-4 h-4 text-slate-500","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-vertical",class:"w-4 h-4"})])],-1),Gie={class:"bg-primary px-4 py-3 text-white rounded-l-md rounded-t-md"},Jie={class:"mt-1 text-xs text-white text-opacity-80"},Qie={class:"w-10 h-10 hidden sm:block flex-none image-fit relative ml-5 rounded-full"},Xie=["title","src"],ele={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},tle={key:1,class:"chat__box__text-box flex items-end float-left mb-4"},ale={class:"w-10 h-10 hidden sm:block flex-none image-fit relative mr-5"},sle=["title","src"],rle={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},ile={class:"bg-slate-100 dark:bg-darkmode-400 px-4 py-3 text-slate-500 rounded-r-md rounded-t-md"},lle={class:"mt-1 text-xs text-slate-500"},nle={key:0,class:"pt-4 pb-10 sm:py-4 flex items-center border-t border-slate-200/60 dark:border-darkmode-400"},ole=(0,i.uE)('<div class="flex absolute sm:static left-0 bottom-0 ml-5 sm:ml-0 mb-5 sm:mb-0"><div class="dropdown mr-3 sm:mr-5"><a href="javascript:;" class="dropdown-toggle w-4 h-4 sm:w-5 sm:h-5 block text-slate-500" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="smile" class="w-full h-full"></i></a><div class="chat-dropdown dropdown-menu"><div class="dropdown-content"></div></div></div><div class="w-4 h-4 sm:w-5 sm:h-5 relative text-slate-500 mr-3 sm:mr-5"><i data-lucide="paperclip" class="w-full h-full"></i><input type="file" class="w-full h-full top-0 left-0 absolute opacity-0"></div></div>',1),cle=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal w-4 h-4"},[(0,i._)("path",{d:"m3 3 3 9-3 9 19-9Z"}),(0,i._)("path",{d:"M6 12h16"})],-1),dle=[cle],ule=(0,i.uE)('<div class="h-full flex items-center"><div class="mx-auto text-center"><div class="w-16 h-16 flex-none image-fit rounded-full overflow-hidden mx-auto"><img alt="Midone - HTML Admin Template" src="dist/images/profile-13.jpg"></div><div class="mt-3"><div class="font-medium">Hey, Charlize Theron!</div><div class="text-slate-500 mt-1"> Please select a chat to start messaging. </div></div></div></div>',1);function ple(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[_ie,(0,i._)("div",yie,[(0,i._)("div",xie,[bie,(0,i._)("div",kie,[(0,i._)("div",Die,[(0,i._)("div",Cie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.users,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,onClick:e=>n.selectChat(a),class:"intro-x cursor-pointer box relative flex items-center p-5 mt-5"},[(0,i._)("div",Sie,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${n.axiosBaseUrl}/${a.avatar}`,onError:t[0]||(t[0]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,zie)):((0,i.wg)(),(0,i.iD)("img",Nie)),a.isOnline?((0,i.wg)(),(0,i.iD)("div",Tie)):(0,i.kq)("",!0)]),(0,i._)("div",Mie,[(0,i._)("div",Iie,[(0,i._)("a",Uie,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),Eie]),(0,i._)("div",Fie,(0,Ns.zw)(a.contact1),1)]),a.unreadCount>0?((0,i.wg)(),(0,i.iD)("div",$ie,(0,Ns.zw)(a.unreadCount),1)):(0,i.kq)("",!0)],8,Pie)))),128))])])])]),(0,i._)("div",Aie,[(0,i._)("div",Bie,[(0,i._)("div",qie,[(0,i._)("div",jie,[(0,i._)("div",Vie,[(0,i._)("div",Lie,[l.avatarCustomer?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:l.avatarCustomer.avatarUploadDate?"Uploaded at "+l.avatarCustomer.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${l.avatarCustomer}`,onError:t[2]||(t[2]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[3]||(t[3]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Zie)):(0,i.kq)("",!0)]),(0,i._)("div",Rie,[(0,i._)("div",Wie,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),Hie])])]),(0,i._)("div",Oie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.messages,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{key:s,class:"clear-both"},[n.isCurrentUser(a)?((0,i.wg)(),(0,i.iD)("div",Yie,[Kie,(0,i._)("div",Gie,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",Jie,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)]),(0,i._)("div",Qie,[a.senderId&&a.senderId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[4]||(t[4]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[5]||(t[5]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,Xie)):((0,i.wg)(),(0,i.iD)("img",ele))])])):((0,i.wg)(),(0,i.iD)("div",tle,[(0,i._)("div",ale,[a.senderId&&a.receiverId.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${n.axiosBaseUrl}/${a.senderId.avatar}`,onError:t[6]||(t[6]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[7]||(t[7]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,sle)):((0,i.wg)(),(0,i.iD)("img",rle))]),(0,i._)("div",ile,[(0,i.Uk)((0,Ns.zw)(a.text)+" ",1),(0,i._)("div",lle,(0,Ns.zw)(n.formatTimestamp(a.timestamp)),1)])]))])))),128))]),l.activechat?((0,i.wg)(),(0,i.iD)("div",nle,[(0,i.wy)((0,i._)("textarea",{class:"chat__box__input form-control dark:bg-darkmode-600 h-16 resize-none border-transparent px-5 py-3 shadow-none focus:border-transparent focus:ring-0",rows:"1",placeholder:"Type your message...","onUpdate:modelValue":t[8]||(t[8]=e=>l.newMessage=e)},null,512),[[s.nr,l.newMessage]]),ole,(0,i._)("a",{href:"javascript:;",onClick:t[9]||(t[9]=(...e)=>n.sendMessage&&n.sendMessage(...e)),class:"w-8 h-8 sm:w-10 sm:h-10 block bg-primary text-white rounded-full flex-none flex items-center justify-center mr-5"},dle)])):(0,i.kq)("",!0)]),ule])])])])}var mle={components:{},data(){return{activechat:!1,firstName:"",lastName:"",avatarCustomer:"",users:[],messages:[],newMessage:"",profileId:"",showEmojiPicker:!1,currentUser:{_id:this.profileId},receiverId:"",selectedChat:null}},computed:{axiosBaseUrl(){return r.Z.defaults.baseURL}},mounted(){},created(){this.axios=r.Z,this.fetchUsers(),this.getProfile(),this.$socket.connect(),this.$socket.on("user-online",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.isOnline=!0)})),this.$socket.on("chat message",(e=>{console.log("ENTROU"),console.log("Received chat message:",e),this.fetchChatMessages(this.receiverUser),this.scrollToBottom()})),this.$socket.on("chat-message-read",(e=>{const t=this.users.find((t=>t._id===e));t&&(t.unreadCount=0)}))},methods:{incrementUnreadCount(e){this.$socket.emit("increment-unread-count",e)},resetUnreadCount(e){this.$socket.emit("reset-unread-count",e)},isCurrentUser(e){const t=e.senderId._id===this.profileId;return t},getProfile(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/me",{headers:{token:e}}).then((e=>{this.loading=!1,this.profileId=e.data.user._id,console.log(this.profileId)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},fetchUsers(){this.loading=!0;const e=wt.Z.get("token");r.Z.get("/api/user/manager/allcustomersfromlogedmanager",{headers:{token:e}}).then((e=>{this.users=e.data.users,console.log("Usuarios: ",e.data.users)})).catch((e=>{this.errorMessage="Error retrieving this user. Please try again.",console.error("Error retrieving plan:",e)}))},openEmojiPicker(){this.showEmojiPicker=!0},addEmoji(e){this.newMessage+=e.native},closeEmojiPicker(){this.showEmojiPicker=!1},openFilePicker(){this.$refs.fileInput.click()},attachFile(e){const t=e.target.files[0];console.log("Attached file:",t)},selectChat(e){this.selectedChat=e,this.receiverUser=e._id,this.firstName=e.firstName,this.lastName=e.lastName,this.avatarCustomer=e.avatar,this.activechat=!0,this.fetchChatMessages(this.receiverUser),this.scrollToBottom()},async fetchChatMessages(e){const t=wt.Z.get("token");try{const a=await r.Z.get(`/api/chat/getmessages?senderId=${this.profileId}&receiverId=${e}`,{headers:{token:t}});this.messages=a.data.sort(((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())),this.$socket.emit("chat-message-read",e);const s=this.users.find((t=>t._id===e));s&&(s.unreadCount=0),this.scrollToBottom()}catch(a){console.error("Error fetching chat messages:",a)}},async sendMessage(){if(""!==this.newMessage.trim()){const t={text:this.newMessage,senderId:this.profileId,receiverId:this.receiverUser},a=wt.Z.get("token");try{await r.Z.post("/api/chat/message",t,{headers:{token:a}}),t.receiverId===this.selectedChat._id?this.messages.push({...t,senderId:this.selectedChat}):this.messages.push(t),this.newMessage="",this.$socket.emit("chat message",t),this.$socket.emit("notification",{receiverId:this.receiverUser}),this.incrementUnreadCount(t.receiverId),this.scrollToBottom()}catch(e){console.error("Error sending chat message:",e)}}},scrollToBottom(){this.$nextTick((()=>{const e=document.getElementById("chat-container");e&&(e.scrollTop=e.scrollHeight)}))},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`}}};const hle=(0,_t.Z)(mle,[["render",ple]]);var gle=hle;const fle=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"All Transactions",-1),wle={class:"grid grid-cols-12 gap-6 mt-5"},vle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},_le={class:"report-box zoom-in"},yle={class:"box p-5"},xle={key:0,class:"flex text-xl"},ble={class:"text-3xl font-medium leading-8 mt-6"},kle={key:0},Dle={key:1},Cle=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Ple=[Cle],Sle=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"In progress",-1),zle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Nle={class:"report-box zoom-in"},Tle={class:"box p-5"},Mle={key:0,class:"flex text-xl"},Ile={class:"text-3xl font-medium leading-8 mt-6"},Ule={key:0},Ele={key:1},Fle=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$le=[Fle],Ale=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Pending for approval ",-1),Ble={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},qle={class:"report-box zoom-in"},jle={class:"box p-5"},Vle={key:0,class:"flex text-xl"},Lle={class:"text-3xl font-medium leading-8 mt-6"},Zle={key:0},Rle={key:1},Wle=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Hle=[Wle],Ole=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Aproved",-1),Yle={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Kle={class:"report-box zoom-in"},Gle={class:"box p-5"},Jle={key:0,class:"flex text-xl"},Qle={class:"text-3xl font-medium leading-8 mt-6"},Xle={key:0},ene={key:1},tne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),ane=[tne],sne=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Completed",-1),rne={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},ine={class:"report-box zoom-in"},lne={class:"box p-5"},nne={key:0,class:"flex text-xl"},one={class:"text-3xl font-medium leading-8 mt-6"},cne={key:0},dne={key:1},une=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),pne=[une],mne=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Canceled",-1),hne={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},gne={class:"report-box zoom-in"},fne={class:"box p-5"},wne={key:0,class:"flex text-xl"},vne={class:"text-3xl font-medium leading-8 mt-6"},_ne={key:0},yne={key:1},xne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),bne=[xne],kne=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Revoked",-1),Dne={key:0,class:"shadow-md"},Cne=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Pne=[Cne],Sne={class:"grid grid-cols-12 gap-6 mt-8"},zne={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Nne={class:"flex w-full sm:w-auto"},Tne={class:"w-48 relative text-slate-500"},Mne=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Ine={class:"ml-1"},Une=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Ene=[Une],Fne={class:"hidden xl:block mx-auto text-slate-500"},$ne=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Ane={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Bne={class:"table table-report -mt-2"},qne=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),jne={class:"w-40 !py-4"},Vne={class:"decoration-dotted whitespace-nowrap"},Lne={class:"w-40 !py-4"},Zne={key:0,class:"decoration-dotted whitespace-nowrap"},Rne={key:1,class:"decoration-dotted whitespace-nowrap"},Wne={class:"w-40 !py-4"},Hne={class:"decoration-dotted whitespace-nowrap"},One={class:"w-40"},Yne={class:"font-medium whitespace-nowrap"},Kne={class:"text-center"},Gne={key:0,class:"flex items-center justify-center whitespace-nowrap"},Jne={key:1,class:"flex items-center justify-center whitespace-nowrap"},Qne={class:"whitespace-nowrap"},Xne={class:"whitespace-nowrap"},eoe={class:"whitespace-nowrap"},toe={class:"w-40 !py-4"},aoe={class:"table-report__action"},soe={class:"flex justify-center items-center"},roe=["onClick"],ioe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),loe={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},noe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),ooe={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},coe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),doe={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},uoe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),poe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},moe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),hoe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),goe=[moe,hoe],foe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},woe={class:"w-full sm:w-auto sm:mr-auto"},voe={class:"pagination"},_oe={class:"page-item"},yoe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),xoe=[yoe],boe=["onClick"],koe={class:"page-item"},Doe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Coe=[Doe],Poe=(0,i._)("option",null,"10",-1),Soe=(0,i._)("option",null,"25",-1),zoe=(0,i._)("option",null,"35",-1),Noe=(0,i._)("option",null,"50",-1),Toe=(0,i._)("option",null,"100",-1),Moe=(0,i._)("option",null,"500",-1),Ioe=(0,i._)("option",null,"1000",-1),Uoe=[Poe,Soe,zoe,Noe,Toe,Moe,Ioe],Eoe={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Foe={class:"modal-dialog"},$oe={class:"modal-content"},Aoe={class:"modal-body p-0"},Boe={class:"p-5 text-center"},qoe=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),joe=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Voe={class:"text-slate-500 mt-2"},Loe=["href"],Zoe=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Roe(e,t,a,r,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[fle,(0,i._)("div",wle,[(0,i._)("div",vle,[(0,i.Wm)(o,{to:"/transactionsinprogress"},{default:(0,i.w5)((()=>[(0,i._)("div",_le,[(0,i._)("div",yle,[l.inprogress?((0,i.wg)(),(0,i.iD)("div",xle,(0,Ns.zw)(n.formatCurrency(l.inprogress)),1)):(0,i.kq)("",!0),(0,i._)("div",ble,[l.inprogressCount?((0,i.wg)(),(0,i.iD)("label",kle,(0,Ns.zw)(n.formatNumber(l.inprogressCount)),1)):((0,i.wg)(),(0,i.iD)("label",Dle,Ple))]),Sle])])])),_:1})]),(0,i._)("div",zle,[(0,i.Wm)(o,{to:"/transactionspending"},{default:(0,i.w5)((()=>[(0,i._)("div",Nle,[(0,i._)("div",Tle,[l.pending?((0,i.wg)(),(0,i.iD)("div",Mle,(0,Ns.zw)(n.formatCurrency(l.pending)),1)):(0,i.kq)("",!0),(0,i._)("div",Ile,[l.pending?((0,i.wg)(),(0,i.iD)("label",Ule,(0,Ns.zw)(n.formatNumber(l.pendingCount)),1)):((0,i.wg)(),(0,i.iD)("label",Ele,$le))]),Ale])])])),_:1})]),(0,i._)("div",Ble,[(0,i.Wm)(o,{to:"/transactionsaproved"},{default:(0,i.w5)((()=>[(0,i._)("div",qle,[(0,i._)("div",jle,[l.aproved?((0,i.wg)(),(0,i.iD)("div",Vle,(0,Ns.zw)(n.formatCurrency(l.aproved)),1)):(0,i.kq)("",!0),(0,i._)("div",Lle,[l.aprovedCount?((0,i.wg)(),(0,i.iD)("label",Zle,(0,Ns.zw)(n.formatNumber(l.aprovedCount)),1)):((0,i.wg)(),(0,i.iD)("label",Rle,Hle))]),Ole])])])),_:1})]),(0,i._)("div",Yle,[(0,i.Wm)(o,{to:"/transactionscompleted"},{default:(0,i.w5)((()=>[(0,i._)("div",Kle,[(0,i._)("div",Gle,[l.completed?((0,i.wg)(),(0,i.iD)("div",Jle,(0,Ns.zw)(n.formatCurrency(l.completed)),1)):(0,i.kq)("",!0),(0,i._)("div",Qle,[l.completed?((0,i.wg)(),(0,i.iD)("label",Xle,(0,Ns.zw)(n.formatNumber(l.completedCount)),1)):((0,i.wg)(),(0,i.iD)("label",ene,ane))]),sne])])])),_:1})]),(0,i._)("div",rne,[(0,i.Wm)(o,{to:"/transactionscanceled"},{default:(0,i.w5)((()=>[(0,i._)("div",ine,[(0,i._)("div",lne,[l.completed?((0,i.wg)(),(0,i.iD)("div",nne,(0,Ns.zw)(n.formatCurrency(l.canceled)),1)):(0,i.kq)("",!0),(0,i._)("div",one,[l.completed?((0,i.wg)(),(0,i.iD)("label",cne,(0,Ns.zw)(n.formatNumber(l.canceledCount)),1)):((0,i.wg)(),(0,i.iD)("label",dne,pne))]),mne])])])),_:1})]),(0,i._)("div",hne,[(0,i.Wm)(o,{to:"/transactionsrevoked"},{default:(0,i.w5)((()=>[(0,i._)("div",gne,[(0,i._)("div",fne,[l.revoked?((0,i.wg)(),(0,i.iD)("div",wne,(0,Ns.zw)(n.formatCurrency(l.revoked)),1)):(0,i.kq)("",!0),(0,i._)("div",vne,[l.revokedCount?((0,i.wg)(),(0,i.iD)("label",_ne,(0,Ns.zw)(n.formatNumber(l.revokedCount)),1)):((0,i.wg)(),(0,i.iD)("label",yne,bne))]),kne])])])),_:1})])]),l.loading?((0,i.wg)(),(0,i.iD)("label",Dne,Pne)):(0,i.kq)("",!0),(0,i._)("div",Sne,[(0,i._)("div",zne,[(0,i._)("div",Nne,[(0,i._)("div",Tne,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Mne])]),(0,i._)("div",Ine,[(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(c,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Ene)]),(0,i._)("div",Fne," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),$ne]),(0,i._)("div",Ane,[(0,i._)("table",Bne,[qne,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",jne,[(0,i._)("a",Vne,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",Lne,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",Zne,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",Rne," Individual "))]),(0,i._)("td",Wne,[(0,i._)("a",Hne,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",One,[(0,i._)("a",Yne,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",Kne,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",Gne,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",Jne,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",Qne,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",Xne,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",eoe,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",toe,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",aoe,[(0,i._)("div",soe,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[ioe,(0,i.Uk)(" Files ")],8,roe),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",loe,[noe,(0,i.Wm)(o,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",ooe,[coe,(0,i.Wm)(o,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",doe,[uoe,(0,i.Wm)(o,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",poe,goe)):(0,i.kq)("",!0),(0,i._)("div",foe,[(0,i._)("nav",woe,[(0,i._)("ul",voe,[(0,i._)("li",_oe,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},xoe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,boe)],2)))),128)),(0,i._)("li",koe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Coe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Uoe,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Eoe,[(0,i._)("div",Foe,[(0,i._)("div",$oe,[(0,i._)("div",Aoe,[(0,i._)("div",Boe,[qoe,joe,(0,i._)("div",Voe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Loe)])))),128))])])]),Zoe])])])])])}var Woe={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={page:this.currentPage,pages:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/logedmanagertransactions",{headers:{token:e},params:t});a&&(this.transactions=a.data.transactions,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count))}catch(e){console.error(e)}finally{this.loading=!1}},async fetchDashboardTotals(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/total/transactionsbystatusfrommanager",{headers:{token:e}});if(200===t.status){const e=t.data.statusCounts||{},a=["In progress","Revoked","Aproved","Pending","Completed","Canceled"];for(const t of a){const a=t.toLowerCase().replace(" ","");this[a]=e[t]?.totalAmount||0,this[a+"Count"]=e[t]?.count||0}}else console.error("Error fetching dashboard totals. Status code:",t.status),this.setAllValuesToZero()}catch(e){console.error("Error fetching dashboard totals:",e),this.setAllValuesToZero()}finally{this.loading=!1}},setAllValuesToZero(){const e=["In progress","Revoked","Aproved","Pending","Completed","Canceled"];for(const t of e){const e=t.toLowerCase().replace(" ","");this[e]=0,this[e+"Count"]=0}},async fetchDashboardAVT(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/averageapprovaltime",{headers:{token:e}}),a=t.data;this.averageApprovalTime=a.averageApprovalTime}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData(),this.fetchDashboardTotals()}};const Hoe=(0,_t.Z)(Woe,[["render",Roe]]);var Ooe=Hoe;const Yoe=e=>((0,i.dD)("data-v-14d6330b"),e=e(),(0,i.Cn)(),e),Koe={key:0,class:"shadow-md"},Goe=Yoe((()=>(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1))),Joe=[Goe],Qoe={class:"grid grid-cols-12 gap-6 mt-5"},Xoe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ece={class:"flex w-full sm:w-auto"},tce={class:"w-48 relative text-slate-500"},ace=Yoe((()=>(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1))),sce={class:"ml-1"},rce=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw" data-v-14d6330b><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" data-v-14d6330b></path><path d="M3 3v5h5" data-v-14d6330b></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" data-v-14d6330b></path><path d="M16 16h5v5" data-v-14d6330b></path></svg>',1),ice=[rce],lce={class:"hidden xl:block mx-auto text-slate-500"},nce=Yoe((()=>(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1))),oce={class:"kanban-board"},cce=["onDragenter","onDrop"],dce=["onDragstart"],uce={class:"kanban-card-container"},pce={class:"intro-y col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3"},mce={class:"box"},hce={class:"p-5 flex flex-col items-start justify-start"},gce={class:"text-slate-600 dark:text-slate-500 mt-5"},fce={class:"flex flex-wrap items-center"},wce={class:"flex flex-wrap items-center"},vce=Yoe((()=>(0,i._)("i",{"data-lucide":"layers",class:"w-4 h-4 mr-2"},null,-1))),_ce={class:"flex flex-wrap items-center"},yce={class:"text-success"},xce={class:"text-success"},bce={class:"mt-2"},kce=Yoe((()=>(0,i._)("b",null,"Files:",-1))),Dce={class:"flex flex-wrap items-center"},Cce=["href"],Pce=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink" data-v-14d6330b><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7" data-v-14d6330b></path><polyline points="14 2 14 8 20 8" data-v-14d6330b></polyline><path d="m10 18 3-3-3-3" data-v-14d6330b></path><path d="M4 18v-1a2 2 0 0 1 2-2h6" data-v-14d6330b></path></svg>',1),Sce=[Pce],zce={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Nce={class:"w-full sm:w-auto sm:mr-auto"},Tce={class:"pagination"},Mce={class:"page-item"},Ice=Yoe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1))),Uce=[Ice],Ece=["onClick"],Fce={class:"page-item"},$ce=Yoe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1))),Ace=[$ce],Bce=Yoe((()=>(0,i._)("option",null,"10",-1))),qce=Yoe((()=>(0,i._)("option",null,"25",-1))),jce=Yoe((()=>(0,i._)("option",null,"35",-1))),Vce=Yoe((()=>(0,i._)("option",null,"50",-1))),Lce=Yoe((()=>(0,i._)("option",null,"100",-1))),Zce=Yoe((()=>(0,i._)("option",null,"500",-1))),Rce=Yoe((()=>(0,i._)("option",null,"1000",-1))),Wce=[Bce,qce,jce,Vce,Lce,Zce,Rce];function Hce(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",Koe,Joe)):(0,i.kq)("",!0),(0,i._)("div",Qoe,[(0,i._)("div",Xoe,[(0,i._)("div",ece,[(0,i._)("div",tce,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),ace])]),(0,i._)("div",sce,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},ice)]),(0,i._)("div",lce," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),nce])]),(0,i._)("div",oce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.kanbanColumns,((a,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r,class:"kanban-column"},[(0,i._)("h2",null,(0,Ns.zw)(a),1),(0,i._)("div",{class:"kanban-cards overflow-y-auto",onDragenter:(0,s.iM)((e=>n.dragEnter(r)),["prevent"]),onDragover:t[6]||(t[6]=(0,s.iM)(((...t)=>e.dragOver&&e.dragOver(...t)),["prevent"])),onDrop:(0,s.iM)((e=>n.drop(r,e)),["prevent"]),ref_for:!0,ref:`kanbanColumn-${r}`},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredRequests(r),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t._id,draggable:"true",onDragstart:a=>n.dragStart(t,e.index,r,a)},[(0,i._)("div",uce,[(0,i._)("div",pce,[(0,i._)("div",mce,[(0,i._)("div",hce,[(0,i._)("div",gce,[(0,i._)("div",fce,[(0,i._)("strong",null,(0,Ns.zw)(t.title),1)]),(0,i._)("div",wce,[vce,(0,i.Uk)(" "+(0,Ns.zw)(t.comment),1)]),(0,i._)("div",_ce,[(0,i._)("strong",yce,[(0,i.Uk)((0,Ns.zw)(t.customer.firstName)+" ",1),(0,i._)("strong",xce,(0,Ns.zw)(t.customer.lastName),1)])]),(0,i._)("div",bce,[kce,(0,i._)("div",Dce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},Sce,8,Cce)])))),128))])])])])])])])],40,dce)))),128))],40,cce)])))),128))]),(0,i._)("div",zce,[(0,i._)("nav",Nce,[(0,i._)("ul",Tce,[(0,i._)("li",Mce,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},Uce)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Ece)],2)))),128)),(0,i._)("li",Fce,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},Ace)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Wce,544),[[s.bM,l.pageSize]])])])}var Oce={data(){return{currentPage:1,totalPages:1,itemsPerPage:10,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null,customerRequests:[],loading:!1,kanbanColumns:{Pending:"Pending",Received:"Received",Under_assessment:"Under assessment",canceled:"canceled",Under_approval:"Under approval",Done:"Done"},dragData:null,currentDropTarget:null}},created(){this.fetchData()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filteredRequests(){return e=>this.customerRequests.filter((t=>t.status===e))}},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},isActivePage(e){return e===this.currentPage},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/request/getfromlogedmanager",{headers:{token:e},params:t});this.customerRequests=a.data.customerRequests,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count),console.log("customerRequests:",this.customerRequests)}catch(e){console.error(e)}finally{this.loading=!1}},dragStart(e,t,a,s){console.log("Dragging card:",e),this.dragData={request:e,column:a,event:s}},dragEnter(e){console.log("target column: ",e)},async drop(e,t){if(t.preventDefault(),!this.dragData)return;const{request:a,column:s}=this.dragData;let i;if(s===e){const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const r=this.customerRequests.filter((e=>e.status===s)),l=r.findIndex((e=>e._id===a._id));r.splice(i,1),r.splice(l,0,t),console.log("Move card within",e,"from",i,"to",l)}else try{const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const l=e,n=wt.Z.get("token");console.log("New status: ",l),console.log("Card id: ",t._id),await r.Z.put(`/request/status/${t._id}`,{status:l},{headers:{token:n,"Content-Type":"application/json"}}),t.status=l;const o=this.customerRequests.filter((e=>e.status===s));o.splice(i,1);const c=this.customerRequests.filter((e=>e.status===l));c.push(t),this.customerRequests=[...this.customerRequests]}catch(l){console.error("Error updating status:",l)}this.dragData=null,t.preventDefault()}}};const Yce=(0,_t.Z)(Oce,[["render",Hce],["__scopeId","data-v-14d6330b"]]);var Kce=Yce;const Gce={class:"intro-y flex items-center mt-8"},Jce=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Agent",-1),Qce={key:0},Xce=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),ede=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),tde=[Xce,ede],ade={class:"grid grid-cols-12 gap-6 mt-5"},sde={class:"intro-y col-span-12 lg:col-span-6"},rde={class:"intro-y box p-5"},ide={class:"grid grid-cols-2 gap-6 mt-3"},lde=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),nde={class:"input-group"},ode=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),cde={class:"input-group"},dde={class:"grid grid-cols-3 gap-6 mt-3"},ude=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),pde={class:"input-group"},mde=(0,i._)("option",null,"ID",-1),hde=(0,i._)("option",null,"Drive Licence",-1),gde=(0,i._)("option",null,"Passport",-1),fde=(0,i._)("option",null,"Voters",-1),wde=(0,i._)("option",null,"...",-1),vde=[mde,hde,gde,fde,wde],_de=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),yde={class:"input-group"},xde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),bde={class:"input-group"},kde={class:"grid grid-cols-2 gap-6 mt-3"},Dde=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),Cde={class:"input-group"},Pde=(0,i._)("option",null,"male",-1),Sde=(0,i._)("option",null,"female",-1),zde=(0,i._)("option",null,"other",-1),Nde=[Pde,Sde,zde],Tde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),Mde={class:"input-group"},Ide={class:"grid grid-cols-2 gap-6 mt-3"},Ude=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Ede={class:"input-group"},Fde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 1 *",-1),$de={class:"input-group"},Ade={class:"grid grid-cols-2 gap-6 mt-3"},Bde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),qde={class:"input-group"},jde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Vde={class:"input-group"},Lde={class:"grid grid-cols-2 gap-6 mt-3"},Zde=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Rde={class:"fallback mt-4"},Wde={class:"text-right mt-8"},Hde=["disabled"];function Ode(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Gce,[Jce,l.loading?((0,i.wg)(),(0,i.iD)("div",Qce,tde)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",ade,[(0,i._)("div",sde,[(0,i._)("div",rde,[(0,i._)("div",ide,[(0,i._)("div",null,[lde,(0,i._)("div",nde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[ode,(0,i._)("div",cde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",dde,[(0,i._)("div",null,[ude,(0,i._)("div",pde,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},vde,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[_de,(0,i._)("div",yde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[xde,(0,i._)("div",bde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",kde,[(0,i._)("div",null,[Dde,(0,i._)("div",Cde,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},Nde,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[Tde,(0,i._)("div",Mde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",Ide,[(0,i._)("div",null,[Ude,(0,i._)("div",Ede,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])]),(0,i._)("div",null,[(0,i._)("div",null,[Fde,(0,i._)("div",$de,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])])])]),(0,i._)("div",Ade,[(0,i._)("div",null,[Bde,(0,i._)("div",qde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[jde,(0,i._)("div",Vde,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.lineManager=e),id:"crud-form-12",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1",hidden:""},null,512),[[s.nr,l.lineManager]]),(0,i._)("div",Lde,[(0,i._)("div",null,[Zde,(0,i._)("div",Rde,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Wde,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Hde)])])])])],32)])}var Yde={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",lineManager:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/me",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.lineManager=t.data.user._id,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateAgent(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","lineManager"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("lineManager",this.lineManager),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/agent/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Agent created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("viewmyagents"),this.isSuccess=!0,console.log(s),this.$emit("Agent created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getMagers()}};const Kde=(0,_t.Z)(Yde,[["render",Ode]]);var Gde=Kde;const Jde={class:"grid grid-cols-12 gap-6"},Qde={class:"col-span-12 2xl:col-span-9"},Xde={class:"grid grid-cols-12 gap-6"},eue={class:"col-span-12 mt-8"},tue=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"},"Dashboard")],-1),aue={class:"grid grid-cols-12 gap-6 mt-5"},sue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},rue={class:"report-box zoom-in"},iue={class:"box p-5"},lue={class:"text-3xl font-medium leading-8 mt-6"},nue={key:0},oue={key:1},cue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),due=[cue],uue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Customers",-1),pue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},mue={class:"report-box zoom-in"},hue={class:"box p-5"},gue={class:"text-3xl font-medium leading-8 mt-6"},fue={key:0},wue={key:1},vue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),_ue=[vue],yue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Companies",-1),xue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},bue={class:"report-box zoom-in"},kue={class:"box p-5"},Due={class:"text-3xl font-medium leading-8 mt-6"},Cue={key:0},Pue={key:1},Sue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),zue=[Sue],Nue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"},"Partners",-1),Tue={class:"col-span-12 sm:col-span-6 xl:col-span-3 intro-y"},Mue={class:"report-box zoom-in"},Iue={class:"box p-5"},Uue={class:"text-3xl font-medium leading-8 mt-6"},Eue={key:0},Fue={key:1},$ue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Aue=[$ue],Bue=(0,i._)("div",{class:"text-base text-slate-500 mt-1"}," Transactions ",-1),que={class:"col-span-12 lg:col-span-6 mt-8"},jue={class:"col-span-12 md:col-span-6 xl:col-span-12 xl:col-start-1 xl:row-start-1 2xl:col-start-auto 2xl:row-start-auto mt-3"},Vue=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-auto"}," New messages ")],-1),Lue={key:0},Zue={class:"box zoom-in"},Rue={class:"tiny-slider",id:"important-notes"},Wue={class:"p-5"},Hue={class:"text-base font-medium truncate"},Oue={class:"text-slate-400 mt-1"},Yue={class:"text-slate-500 text-justify mt-1"},Kue={key:1},Gue=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Jue=[Gue],Que={class:"col-span-12 xl:col-span-4 mt-6"},Xue=(0,i._)("div",{class:"intro-y flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Customer Requests ")],-1),epe={class:"mt-5"},tpe={key:0,class:"intro-y"},ape={class:"ml-4 mr-auto"},spe={class:"font-medium"},rpe={class:"text-slate-500 text-xs mt-0.5"},ipe={key:1},lpe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),npe=[lpe],ope=(0,i._)("a",{href:"#",class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),cpe={class:"col-span-12 2xl:col-span-3"},dpe={class:"2xl:border-l -mb-10 pb-10"},upe={class:"2xl:pl-6 grid grid-cols-12 gap-x-6 2xl:gap-x-0 gap-y-6"},ppe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3 2xl:mt-8"},mpe=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Recent Pending Transactions ")],-1),hpe={class:"mt-5"},gpe={key:0},fpe={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},wpe={class:"ml mr-auto"},vpe={class:"font-medium"},_pe={class:"text-slate-500 text-xs mt-0.5"},ype={class:"text-primary truncate"},xpe={key:1},bpe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),kpe=[bpe],Dpe=(0,i._)("a",{href:"/customertransactions",class:"intro-x w-full block text-center rounded-md py-3 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},"View More",-1),Cpe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},Ppe=(0,i._)("div",{class:"intro-x flex items-center h-10"},[(0,i._)("h2",{class:"text-lg font-medium truncate mr-5"}," Last Transactions "),(0,i._)("a",{href:"#",class:"ml-auto text-primary truncate"},"Show More")],-1),Spe={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},zpe={key:0},Npe={class:"box px-5 py-3 mb-3 flex items-center zoom-in"},Tpe={class:"ml mr-auto"},Mpe={class:"font-medium"},Ipe={class:"text-slate-500 text-xs mt-0.5"},Upe={class:"text-success"},Epe={key:1},Fpe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),$pe=[Fpe];function Ape(e,t,a,s,r,l){const n=(0,i.up)("notification-component"),o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n),(0,i._)("div",Jde,[(0,i._)("div",Qde,[(0,i._)("div",Xde,[(0,i._)("div",eue,[tue,(0,i._)("div",aue,[(0,i._)("div",sue,[(0,i.Wm)(o,{to:"/allcustomers"},{default:(0,i.w5)((()=>[(0,i._)("div",rue,[(0,i._)("div",iue,[(0,i._)("div",lue,[r.totalCustomers?((0,i.wg)(),(0,i.iD)("label",nue,(0,Ns.zw)(r.totalCustomers),1)):((0,i.wg)(),(0,i.iD)("label",oue,due))]),uue])])])),_:1})]),(0,i._)("div",pue,[(0,i.Wm)(o,{to:"/viewcompany"},{default:(0,i.w5)((()=>[(0,i._)("div",mue,[(0,i._)("div",hue,[(0,i._)("div",gue,[r.totalCompanies?((0,i.wg)(),(0,i.iD)("label",fue,(0,Ns.zw)(r.totalCompanies),1)):((0,i.wg)(),(0,i.iD)("label",wue,_ue))]),yue])])])),_:1})]),(0,i._)("div",xue,[(0,i.Wm)(o,{to:"/viewpartner"},{default:(0,i.w5)((()=>[(0,i._)("div",bue,[(0,i._)("div",kue,[(0,i._)("div",Due,[r.totalPartners?((0,i.wg)(),(0,i.iD)("label",Cue,(0,Ns.zw)(r.totalPartners),1)):((0,i.wg)(),(0,i.iD)("label",Pue,zue))]),Nue])])])),_:1})]),(0,i._)("div",Tue,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[(0,i._)("div",Mue,[(0,i._)("div",Iue,[(0,i._)("div",Uue,[r.totalTransactions?((0,i.wg)(),(0,i.iD)("label",Eue,(0,Ns.zw)(r.totalTransactions),1)):((0,i.wg)(),(0,i.iD)("label",Fue,Aue))]),Bue])])])),_:1})])])]),(0,i._)("div",que,[(0,i._)("div",jue,[Vue,r.recentMessages.length>0?((0,i.wg)(),(0,i.iD)("div",Lue,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentMessages,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mt-5 intro-x"},[(0,i._)("div",Zue,[(0,i._)("div",Rue,[(0,i._)("div",Wue,[(0,i._)("div",Hue,(0,Ns.zw)(e.senderName),1),(0,i._)("div",Oue,(0,Ns.zw)(l.formatDateWithTime(e.timestamp)),1),(0,i._)("div",Yue,(0,Ns.zw)(e.text),1)])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Kue,Jue))])]),(0,i._)("div",Que,[Xue,(0,i._)("div",epe,[r.recentRequests.length>0?((0,i.wg)(),(0,i.iD)("div",tpe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentRequests,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"box px-4 py-4 mb-3 flex items-center zoom-in"},[(0,i._)("div",ape,[(0,i._)("div",spe,(0,Ns.zw)(e.title),1),(0,i._)("div",rpe,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["text-black cursor-pointer font-medium",l.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)])))),128))])):((0,i.wg)(),(0,i.iD)("div",ipe,npe)),ope])])])]),(0,i._)("div",cpe,[(0,i._)("div",dpe,[(0,i._)("div",upe,[(0,i._)("div",ppe,[mpe,(0,i._)("div",hpe,[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",gpe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentPendingTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",fpe,[(0,i._)("div",wpe,[(0,i._)("div",vpe,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",_pe,(0,Ns.zw)(e.createdAt),1)]),(0,i._)("div",ype,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",xpe,kpe)),Dpe])]),(0,i._)("div",Cpe,[Ppe,(0,i._)("div",Spe,[(0,i.Wm)(o,{to:"/customertransactions"},{default:(0,i.w5)((()=>[r.recentTransactions.length>0?((0,i.wg)(),(0,i.iD)("div",zpe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.recentTransactions,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"intro-x"},[(0,i._)("div",Npe,[(0,i._)("div",Tpe,[(0,i._)("div",Mpe,(0,Ns.zw)(e.invoiceNumber),1),(0,i._)("div",Ipe,(0,Ns.zw)(l.formatDateWithTime(e.createdAt)),1)]),(0,i._)("div",Upe,(0,Ns.zw)(l.formatCurrency(e.amount)),1)])])))),128))])):((0,i.wg)(),(0,i.iD)("div",Epe,$pe))])),_:1})])])])])])])])}var Bpe={data(){return{response:null,userID:"",totalCustomers:"",totalIndivCustomers:"",totalCorpCustomers:"",totalTransactions:"",totalPendingTransactions:"",totalMessages:"",totalCompanies:"",totalPartners:"",totalServices:"",totalRequests:"",recentTransactions:[],recentPendingTransactions:[],recentMessages:[],recentRequests:[],currentMonthRevenue:"",lastMonthRevenue:"",dailyTransactionAmounts:"",servicePopularity:""}},created(){this.getDashboardData(),this.$socket.on("chat message",(e=>{console.log("Received chat message:",e)})),setInterval((()=>{this.getDashboardData()}),12e4)},methods:{formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},formatTimestamp(e){const t=new Date,a=new Date(e),s=t-a,r=Math.floor(s/1e3);if(r<60)return`${r} seconds ago`;const i=Math.floor(r/60);if(i<60)return`${i} minutes ago`;const l=Math.floor(i/60);if(l<24)return`${l} hours ago`;const n=Math.floor(l/24);return`${n} days ago`},async getDashboardData(){const e=wt.Z.get("token");await r.Z.get("/api/dashboardmanager/getdatamanager",{headers:{token:e}}).then((e=>{const t=e.data;this.totalCustomers=t.totalCustomers,this.totalIndivCustomers=t.totalIndivCustomers,this.totalCorpCustomers=t.totalCorpCustomers,this.totalTransactions=t.totalTransactions,this.totalPendingTransactions=t.totalPendingTransactions,this.totalMessages=t.totalMessages,this.totalCompanies=t.totalCompanies,this.totalPartners=t.totalPartners,this.totalServices=t.totalServices,this.totalRequests=t.totalRequests,this.recentTransactions=t.recentTransactions,this.recentPendingTransactions=t.recentPendingTransactions,this.recentMessages=t.recentMessages,this.recentRequests=t.recentRequests,this.currentMonthRevenue=t.currentMonthRevenue,this.lastMonthRevenue=t.lastMonthRevenue,this.dailyTransactionAmounts=t.dailyTransactionAmounts,this.servicePopularity=t.servicePopularity})).catch((e=>{this.errorMessage="Error retrieving this profile. Please try again.",console.error("Error retrieving profile:",e)}))}},mounted(){this.getDashboardData()}};const qpe=(0,_t.Z)(Bpe,[["render",Ape]]);var jpe=qpe;const Vpe={class:"intro-y flex items-center mt-8"},Lpe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Admin",-1),Zpe={key:0},Rpe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Wpe=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Hpe=[Rpe,Wpe],Ope={class:"grid grid-cols-12 gap-6 mt-5"},Ype={class:"intro-y col-span-12 lg:col-span-6"},Kpe={class:"intro-y box p-5"},Gpe={class:"grid grid-cols-2 gap-6 mt-3"},Jpe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Qpe={class:"input-group"},Xpe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),eme={class:"input-group"},tme={class:"grid grid-cols-3 gap-6 mt-3"},ame=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),sme={class:"input-group"},rme=(0,i._)("option",null,"ID",-1),ime=(0,i._)("option",null,"Drive Licence",-1),lme=(0,i._)("option",null,"Passport",-1),nme=(0,i._)("option",null,"Voters",-1),ome=(0,i._)("option",null,"...",-1),cme=[rme,ime,lme,nme,ome],dme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),ume={class:"input-group"},pme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),mme={class:"input-group"},hme={class:"grid grid-cols-2 gap-6 mt-3"},gme=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),fme={class:"input-group"},wme=(0,i._)("option",null,"male",-1),vme=(0,i._)("option",null,"female",-1),_me=(0,i._)("option",null,"other",-1),yme=[wme,vme,_me],xme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),bme={class:"input-group"},kme={class:"grid grid-cols-6 gap-6 mt-3"},Dme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Cme={class:"input-group"},Pme={class:"grid grid-cols-3 gap-6 mt-3"},Sme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),zme={class:"input-group"},Nme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Tme={class:"input-group"},Mme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Ime={class:"input-group"},Ume={class:"grid grid-cols-2 gap-6 mt-3"},Eme=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Fme={class:"fallback mt-4"},$me={class:"text-right mt-8"},Ame=["disabled"];function Bme(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Vpe,[Lpe,l.loading?((0,i.wg)(),(0,i.iD)("div",Zpe,Hpe)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[13]||(t[13]=(0,s.iM)(((...e)=>n.onCreateAgent&&n.onCreateAgent(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Ope,[(0,i._)("div",Ype,[(0,i._)("div",Kpe,[(0,i._)("div",Gpe,[(0,i._)("div",null,[Jpe,(0,i._)("div",Qpe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[Xpe,(0,i._)("div",eme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",tme,[(0,i._)("div",null,[ame,(0,i._)("div",sme,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},cme,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[dme,(0,i._)("div",ume,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[pme,(0,i._)("div",mme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",hme,[(0,i._)("div",null,[gme,(0,i._)("div",fme,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},yme,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[xme,(0,i._)("div",bme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",kme,[(0,i._)("div",null,[Dme,(0,i._)("div",Cme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",Pme,[(0,i._)("div",null,[Sme,(0,i._)("div",zme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Nme,(0,i._)("div",Tme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Mme,(0,i._)("div",Ime,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Ume,[(0,i._)("div",null,[Eme,(0,i._)("div",Fme,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[11]||(t[11]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",$me,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[12]||(t[12]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Ame)])])])])],32)])}var qme={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreateAgent(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/admin/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Admin created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Admin created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating Agent:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const jme=(0,_t.Z)(qme,[["render",Bme]]);var Vme=jme;const Lme={class:"intro-y flex items-center mt-8"},Zme=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Admin",-1),Rme={key:0},Wme=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Hme=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Ome=[Wme,Hme],Yme={class:"grid grid-cols-12 gap-6 mt-5"},Kme={class:"intro-y col-span-12 lg:col-span-6"},Gme={class:"intro-y box p-5"},Jme={class:"grid grid-cols-2 gap-6 mt-3"},Qme=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Xme={class:"input-group"},ehe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),the={class:"input-group"},ahe={class:"grid grid-cols-3 gap-6 mt-3"},she=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),rhe={class:"input-group"},ihe=(0,i._)("option",null,"ID",-1),lhe=(0,i._)("option",null,"Drive Licence",-1),nhe=(0,i._)("option",null,"Passport",-1),ohe=(0,i._)("option",null,"Voters",-1),che=(0,i._)("option",null,"...",-1),dhe=[ihe,lhe,nhe,ohe,che],uhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),phe={class:"input-group"},mhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),hhe={class:"input-group"},ghe={class:"grid grid-cols-2 gap-6 mt-3"},fhe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),whe={class:"input-group"},vhe=(0,i._)("option",null,"male",-1),_he=(0,i._)("option",null,"female",-1),yhe=(0,i._)("option",null,"other",-1),xhe=[vhe,_he,yhe],bhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),khe={class:"input-group"},Dhe={class:"grid grid-cols-6 gap-6 mt-3"},Che=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),Phe={class:"input-group"},She={class:"grid grid-cols-3 gap-6 mt-3"},zhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Nhe={class:"input-group"},The=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Mhe={class:"input-group"},Ihe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Uhe={class:"input-group"},Ehe={class:"grid grid-cols-2 gap-6 mt-3"},Fhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),$he={class:"input-group"},Ahe=(0,i._)("option",{value:"Active"},"Active",-1),Bhe=(0,i._)("option",{value:"Inactive"},"Inactive",-1),qhe=[Ahe,Bhe],jhe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Vhe={class:"fallback mt-4"},Lhe={class:"text-right mt-8"},Zhe=["disabled"];function Rhe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Lme,[Zme,l.loading?((0,i.wg)(),(0,i.iD)("div",Rme,Ome)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdateAdmin&&n.onUpdateAdmin(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Yme,[(0,i._)("div",Kme,[(0,i._)("div",Gme,[(0,i._)("div",Jme,[(0,i._)("div",null,[Qme,(0,i._)("div",Xme,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[ehe,(0,i._)("div",the,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",ahe,[(0,i._)("div",null,[she,(0,i._)("div",rhe,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},dhe,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[uhe,(0,i._)("div",phe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[mhe,(0,i._)("div",hhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",ghe,[(0,i._)("div",null,[fhe,(0,i._)("div",whe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},xhe,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[bhe,(0,i._)("div",khe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",Dhe,[(0,i._)("div",null,[Che,(0,i._)("div",Phe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",She,[(0,i._)("div",null,[zhe,(0,i._)("div",Nhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[The,(0,i._)("div",Mhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Ihe,(0,i._)("div",Uhe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Ehe,[(0,i._)("div",null,[Fhe,(0,i._)("div",$he,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},qhe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[jhe,(0,i._)("div",Vhe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Lhe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,Zhe)])])])])],32)])}var Whe={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.gender=e.data.user.gender,this.email=e.data.user.email,this.password=e.data.user.password,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateAdmin(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/admin/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Admin updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating admin:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating admin:",i.message),setTimeout((()=>{window.location.reload()}),3e3);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Hhe=(0,_t.Z)(Whe,[["render",Rhe]]);var Ohe=Hhe;const Yhe={key:0,class:"spinner",style:{"font-size":"18px"}},Khe={class:"intro-y flex items-center mt-8"},Ghe={key:0},Jhe=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Qhe=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),Xhe=[Jhe,Qhe],ege=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),tge={key:1},age={key:0},sge=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),rge={key:1},ige=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),lge={class:"intro-y box px-5 pt-5 mt-5"},nge={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},oge={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},cge={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},dge=["src"],uge={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},pge={class:"ml-5"},mge={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},hge={class:"text-slate-500"},gge={class:"text-slate-200 mt-1"},fge={class:"text-slate-200 mt-1"},wge={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},vge=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),_ge={class:"flex flex-col justify-center items-center lg:items-start mt-4"},yge={class:"truncate sm:whitespace-normal flex items-center"},xge=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),bge={class:"truncate sm:whitespace-normal flex items-center mt-3"},kge=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Dge={class:"truncate sm:whitespace-normal flex items-center mt-3"},Cge=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),Pge={class:"truncate sm:whitespace-normal flex items-center mt-3"},Sge=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),zge={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Nge={class:"font-medium text-center lg:text-left lg:mt-2"},Tge={class:"flex items-center justify-center lg:justify-start mt-2"},Mge={class:""},Ige={class:"ml-3 font-medium"},Uge={class:"ml-3 font-medium"},Ege={class:"flex items-center justify-center lg:justify-start mt-2"},Fge={class:""},$ge={class:"ml-3 font-medium"},Age={class:"flex items-center justify-center lg:justify-start mt-2"},Bge={class:""},qge={class:"ml-3 font-medium"},jge={key:0,class:"flex items-center justify-center lg:justify-start mt-2"},Vge={class:""},Lge={class:"ml-3 font-medium"},Zge={class:"flex items-center justify-center lg:justify-start mt-2"},Rge={class:""},Wge={class:"ml-3 font-medium"},Hge={class:"tab-content mt-5"},Oge={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Yge={class:"grid grid-cols-12 gap-6"},Kge={key:0,class:"intro-y box col-span-12 lg:col-span-6"},Gge=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Latest Transaction </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Jge=(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])],-1),Qge=[Gge,Jge],Xge={key:1,class:"intro-y box col-span-12 lg:col-span-6"},efe=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),tfe={class:"p-5"},afe={class:"tab-content"},sfe={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},rfe={key:0,class:"intro-y"},ife={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},lfe={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},nfe=["title","src"],ofe={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},cfe={class:"ml-4 mr-auto"},dfe={class:"font-medium"},ufe={class:"text-slate-500 text-xs mt-0.5"},pfe={class:"text-slate-500 text-xs mt-0.5"},mfe={key:1,class:"text-center text-gray-600 mt-4"},hfe={class:"intro-y box col-span-6 lg:col-span-12"},gfe={class:"flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"},ffe=(0,i._)("h2",{class:"font-medium text-base mr-auto"},"Uploads",-1),wfe=(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])],-1),vfe={key:0,"data-tw-toggle":"modal","data-tw-target":"#new-order-modal",class:"btn btn-outline-secondary hidden sm:flex"},_fe={key:0,class:"p-5"},yfe={class:"file"},xfe=["href"],bfe={class:"ml-4"},kfe=["href"],Dfe={class:"text-slate-500 text-xs mt-0.5"},Cfe={key:0,class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},Pfe={class:"flex items-center text-danger",href:"javascript:;"},Sfe=["onClick"],zfe=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),Nfe=[zfe],Tfe={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},Mfe=(0,i._)("a",{href:"#"},null,-1),Ife={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Ufe={class:"modal-dialog"},Efe={class:"modal-content"},Ffe=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),$fe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Afe={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},Bfe={class:"col-span-12"},qfe=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),jfe={class:"fallback"},Vfe={class:"modal-footer text-right"},Lfe=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function Zfe(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[r.loading?((0,i.wg)(),(0,i.iD)("div",Yhe)):(0,i.kq)("",!0),(0,i._)("div",Khe,[r.loading?((0,i.wg)(),(0,i.iD)("div",Ghe,Xhe)):(0,i.kq)("",!0),ege,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),"1"===r.role?((0,i.wg)(),(0,i.iD)("div",tge,[5===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",age,[(0,i.Wm)(n,{to:`/updatecorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[sge])),_:1},8,["to"])])):(0,i.kq)("",!0),4===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",rge,[(0,i.Wm)(n,{to:`/updatecustomer/${this.$route.params.id}`},{default:(0,i.w5)((()=>[ige])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",lge,[(0,i._)("div",nge,[(0,i._)("div",oge,[(0,i._)("div",cge,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,dge)):((0,i.wg)(),(0,i.iD)("img",uge))]),(0,i._)("div",pge,[(0,i._)("div",mge,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",hge,(0,Ns.zw)(l.getRole(r.CustomerRole)),1),(0,i._)("div",gge,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",fge,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",wge,[vge,(0,i._)("div",_ge,[(0,i._)("div",yge,[xge,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",bge,[kge,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",Dge,[Cge,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",Pge,[Sge,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",zge,[(0,i._)("div",Nge," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",Tge,[(0,i._)("div",Mge,[(0,i.Uk)(" Gender: "),(0,i._)("span",Ige,(0,Ns.zw)(r.gender),1),(0,i.Uk)(" || DOB: "),(0,i._)("span",Uge,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",Ege,[(0,i._)("div",Fge,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",$ge,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",Age,[(0,i._)("div",Bge,[(0,i.Uk)(" Plan: "),(0,i._)("span",qge,(0,Ns.zw)(r.plan),1)])]),r.agentFirstName?((0,i.wg)(),(0,i.iD)("div",jge,[(0,i._)("div",Vge,[(0,i.Uk)(" Agent: "),(0,i._)("span",Lge,(0,Ns.zw)(r.agentFirstName)+" "+(0,Ns.zw)(r.agentLastName),1)])])):(0,i.kq)("",!0),(0,i._)("div",Zge,[(0,i._)("div",Rge,[(0,i.Uk)(" Manager: "),(0,i._)("span",Wge,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",Hge,[(0,i._)("div",Oge,[(0,i._)("div",Yge,["a"===r.role?((0,i.wg)(),(0,i.iD)("div",Kge,Qge)):(0,i.kq)("",!0),4===r.CustomerRole||5===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Xge,[efe,(0,i._)("div",tfe,[(0,i._)("div",afe,[(0,i._)("div",sfe,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",rfe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/dependentprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",ife,[(0,i._)("div",lfe,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,nfe)):((0,i.wg)(),(0,i.iD)("img",ofe))]),(0,i._)("div",cfe,[(0,i._)("div",dfe,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",ufe,(0,Ns.zw)(a.relation),1),(0,i._)("div",pfe,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",mfe," Dependents no found. "))])])])])):(0,i.kq)("",!0),(0,i._)("div",hfe,[(0,i._)("div",gfe,[ffe,wfe,"1"===r.role||"2"===r.role?((0,i.wg)(),(0,i.iD)("button",vfe," Add files ")):(0,i.kq)("",!0)]),r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",_fe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",yfe,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,xfe)]),(0,i._)("div",bfe,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,kfe),(0,i._)("div",Dfe,(0,Ns.zw)(l.getFileSize(e)),1)]),1===r.role||2===r.role||3===r.role?((0,i.wg)(),(0,i.iD)("div",Cfe,[(0,i._)("a",Pfe,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},Nfe,8,Sfe))])])):(0,i.kq)("",!0)])))),128))])):((0,i.wg)(),(0,i.iD)("div",Tfe,[(0,i.Uk)(" No files available. Add customer documents "),Mfe]))])])])]),(0,i._)("div",Ife,[(0,i._)("div",Ufe,[(0,i._)("div",Efe,[Ffe,r.loading?((0,i.wg)(),(0,i.iD)("div",$fe)):(0,i.kq)("",!0),(0,i._)("div",Afe,[(0,i._)("div",Bfe,[qfe,(0,i._)("div",jfe,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",Vfe,[Lfe,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var Rfe={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",CustomerRole:"",address:"",balancePlan:"",contact1:"",contact2:"",company:"",dob:"",email:"",gender:"",memberShipID:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",agentFirstName:"",agentLastName:"",id:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.axios=r.Z,this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.manager=e.data.user.manager,this.managerFirstName=this.manager.firstName,this.managerLastName=this.manager.lastName,e.data.user.agent&&(this.agentFirstName=this.agent.firstName,this.agentLastName=this.agent.lastName),this.company=e.data.user.company,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.CustomerRole=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const Wfe=(0,_t.Z)(Rfe,[["render",Zfe]]);var Hfe=Wfe;const Ofe={key:0,class:"spinner",style:{"font-size":"18px"}},Yfe={class:"intro-y flex items-center mt-8"},Kfe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Employer Profile",-1),Gfe={key:0},Jfe={key:0},Qfe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),Xfe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),ewe={key:1},twe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),awe={key:2},swe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),rwe={class:"intro-y box px-5 pt-5 mt-5"},iwe={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},lwe={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},nwe={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},owe=["src"],cwe={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},dwe={class:"ml-5"},uwe={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},pwe={key:0,class:"font-medium"},mwe={class:"text-slate-500"},hwe={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},gwe=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),fwe={class:"flex flex-col justify-center items-center lg:items-start mt-4"},wwe={class:"truncate sm:whitespace-normal flex items-center"},vwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),_we={class:"truncate sm:whitespace-normal flex items-center mt-3"},ywe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-phone w-4 h-4 mr-2"},[(0,i._)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1),xwe={class:"truncate sm:whitespace-normal flex items-center mt-3"},bwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-phone w-4 h-4 mr-2"},[(0,i._)("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1),kwe={class:"truncate sm:whitespace-normal flex items-center mt-3"},Dwe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),Cwe={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},Pwe=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-2"}," About me ",-1),Swe={class:"flex items-center justify-center lg:justify-start mt-2"},zwe={class:""},Nwe={class:"ml-3 font-medium"},Twe={class:"flex items-center justify-center lg:justify-start mt-2"},Mwe={class:""},Iwe={class:"ml-3 font-medium"},Uwe={class:"flex items-center justify-center lg:justify-start mt-2"},Ewe={class:""},Fwe={class:"ml-3 font-medium"},$we={class:"flex items-center justify-center lg:justify-start mt-2"},Awe={class:""},Bwe={class:"ml-3 font-medium"},qwe={key:0,class:"flex items-center justify-center lg:justify-start mt-2"},jwe={key:0,class:""},Vwe={class:"ml-3 font-medium"};function Lwe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("div",Ofe)):(0,i.kq)("",!0),(0,i._)("div",Yfe,[Kfe,(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-secondary mt-5 mr-3",onClick:t[0]||(t[0]=(...e)=>n.goBack&&n.goBack(...e))}," Back ")]),(0,i._)("div",null,["1"===l.role?((0,i.wg)(),(0,i.iD)("div",Gfe,[1===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Jfe,[(0,i.Wm)(o,{to:`/updateadmin/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Qfe])),_:1},8,["to"])])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(o,{to:`/updatemanager/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Xfe])),_:1},8,["to"])],512),[[s.F8,2===l.CustomerRole]]),3===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",ewe,[(0,i.Wm)(o,{to:`/updateeagent/${this.$route.params.id}`},{default:(0,i.w5)((()=>[twe])),_:1},8,["to"])])):(0,i.kq)("",!0),6===l.CustomerRole||9===l.CustomerRole?((0,i.wg)(),(0,i.iD)("div",awe,[(0,i.Wm)(o,{to:`/updatepartneruser/${this.$route.params.id}`},{default:(0,i.w5)((()=>[swe])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),(0,i._)("div",rwe,[(0,i._)("div",iwe,[(0,i._)("div",lwe,[(0,i._)("div",nwe,[l.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:n.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,owe)):((0,i.wg)(),(0,i.iD)("img",cwe))]),(0,i._)("div",dwe,[(0,i._)("div",uwe,(0,Ns.zw)(l.firstName)+" "+(0,Ns.zw)(l.lastName),1),6===l.role?((0,i.wg)(),(0,i.iD)("div",pwe,(0,Ns.zw)(l.profile),1)):(0,i.kq)("",!0),(0,i._)("div",mwe,(0,Ns.zw)(n.getRole(l.CustomerRole)),1),(0,i._)("div",{class:(0,Ns.C_)(["text-slate-100 mt-1",n.getStatusClass(l.status)])},(0,Ns.zw)(l.status),3)])]),(0,i._)("div",hwe,[gwe,(0,i._)("div",fwe,[(0,i._)("div",wwe,[vwe,(0,i.Uk)(" "+(0,Ns.zw)(l.email),1)]),(0,i._)("div",_we,[ywe,(0,i.Uk)(" "+(0,Ns.zw)(l.contact1),1)]),(0,i._)("div",xwe,[bwe,(0,i.Uk)(" "+(0,Ns.zw)(l.contact2),1)]),(0,i._)("div",kwe,[Dwe,(0,i.Uk)(" "+(0,Ns.zw)(l.address),1)])])]),(0,i._)("div",Cwe,[Pwe,(0,i._)("div",Swe,[(0,i._)("div",zwe,[(0,i.Uk)(" Gender: "),(0,i._)("span",Nwe,(0,Ns.zw)(l.gender),1)])]),(0,i._)("div",Twe,[(0,i._)("div",Mwe,[(0,i.Uk)(" DOB: "),(0,i._)("span",Iwe,(0,Ns.zw)(l.dob),1)])]),(0,i._)("div",Uwe,[(0,i._)("div",Ewe,[(0,i.Uk)(" Id Type: "),(0,i._)("span",Fwe,(0,Ns.zw)(l.idType),1)])]),(0,i._)("div",$we,[(0,i._)("div",Awe,[(0,i.Uk)(" Id Number: "),(0,i._)("span",Bwe,(0,Ns.zw)(l.idNumber),1)])]),3===l.role?((0,i.wg)(),(0,i.iD)("div",qwe,[e.manager?((0,i.wg)(),(0,i.iD)("div",jwe,[(0,i.Uk)(" Manager: "),(0,i._)("span",Vwe,(0,Ns.zw)(e.manager.firstName)+" "+(0,Ns.zw)(e.manager.lastName),1)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])])])])}var Zwe={data(){return{errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],loading:!1,role:"",address:"",CustomerRole:"",managerFirstName:"",managerLastName:"",contact1:"",contact2:"",dob:"",email:"",gender:"",idNumber:"",idType:"",monthlyFee:"",relation:"",id:"",profile:"",enrolmentDate:"",status:""}},watch:{id(){this.getProfile()}},created(){this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},async getProfile(){const e=this.$route.params.id,t=wt.Z.get("token");try{const a=await r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}});if(!a.data.user)throw new Error("User data not found in the response.");{const e=a.data.user;this.firstName=e.firstName,this.lastName=e.lastName,this.contact1=e.contact1,this.contact2=e.contact2,this.dob=this.formatDate(a.data.user.dob),this.email=e.email,this.gender=e.gender,this.idNumber=e.idNumber,this.idType=e.idType,this.address=e.address,this.profile=e.profile,this.CustomerRole=a.data.user.role,a.data.user.avatar?this.avatar=`${a.data.user.avatar}`:this.avatar="",e.manager&&"object"===typeof e.manager&&(this.manager={id:e.manager._id,firstName:e.manager.firstName,lastName:e.manager.lastName}),this.status=a.data.user.status}}catch(a){console.error("Error retrieving user:",a),this.errorMessage="Error retrieving this user. Please try again."}},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e.status),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace(/\\/g,"/")}`:"../../../../dist/images/logow.png"}}};const Rwe=(0,_t.Z)(Zwe,[["render",Lwe]]);var Wwe=Rwe;const Hwe={key:0,class:"spinner",style:{"font-size":"18px"}},Owe={class:"intro-y flex items-center mt-8"},Ywe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Customer Profile",-1),Kwe={key:0},Gwe={key:0},Jwe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),Qwe={key:1},Xwe=(0,i._)("button",{class:"btn btn-secondary mt-5"},"Edit",-1),eve={class:"intro-y box px-5 pt-5 mt-5"},tve={class:"flex flex-col lg:flex-row border-b border-slate-200/60 dark:border-darkmode-400 pb-5 -mx-5"},ave={class:"flex flex-1 px-5 items-center justify-center lg:justify-start"},sve={class:"w-20 h-20 sm:w-24 sm:h-24 flex-none lg:w-32 lg:h-32 image-fit relative"},rve=["src"],ive={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},lve={class:"ml-5"},nve={class:"w-24 sm:w-40 truncate sm:whitespace-normal font-medium text-lg"},ove={class:"text-slate-500"},cve={class:"text-slate-200 mt-1"},dve={class:"text-slate-200 mt-1"},uve={class:"mt-6 lg:mt-0 flex-1 px-5 border-l border-r border-slate-200/60 dark:border-darkmode-400 border-t lg:border-t-0 pt-5 lg:pt-0"},pve=(0,i._)("div",{class:"font-medium text-center lg:text-left lg:mt-3"}," Contact Details ",-1),mve={class:"flex flex-col justify-center items-center lg:items-start mt-4"},hve={class:"truncate sm:whitespace-normal flex items-center"},gve=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-mail w-4 h-4 mr-2"},[(0,i._)("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),(0,i._)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})],-1),fve={class:"truncate sm:whitespace-normal flex items-center mt-3"},wve=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),vve={class:"truncate sm:whitespace-normal flex items-center mt-3"},_ve=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smartphone-nfc w-4 h-4 mr-2"><rect width="7" height="12" x="2" y="6" rx="1"></rect><path d="M13 8.32a7.43 7.43 0 0 1 0 7.36"></path><path d="M16.46 6.21a11.76 11.76 0 0 1 0 11.58"></path><path d="M19.91 4.1a15.91 15.91 0 0 1 .01 15.8"></path></svg>',1),yve={class:"truncate sm:whitespace-normal flex items-center mt-3"},xve=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-map-pin w-4 h-4 mr-2"},[(0,i._)("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),(0,i._)("circle",{cx:"12",cy:"10",r:"3"})],-1),bve={class:"mt-6 lg:mt-0 flex-1 px-5 border-t lg:border-0 border-slate-200/60 dark:border-darkmode-400 pt-5 lg:pt-0"},kve={class:"font-medium text-center lg:text-left lg:mt-2"},Dve={class:"flex items-center justify-center lg:justify-start mt-2"},Cve={class:""},Pve={class:"ml-3 font-medium"},Sve={class:"flex items-center justify-center lg:justify-start mt-2"},zve={class:""},Nve={class:"ml-3 font-medium"},Tve={class:"flex items-center justify-center lg:justify-start mt-2"},Mve={class:""},Ive={class:"ml-3 font-medium"},Uve={class:"flex items-center justify-center lg:justify-start mt-2"},Eve={class:""},Fve={class:"ml-3 font-medium"},$ve={class:"flex items-center justify-center lg:justify-start mt-2"},Ave={class:""},Bve={class:"ml-3 font-medium"},qve={class:"tab-content mt-5"},jve={id:"profile",class:"tab-pane active",role:"tabpanel","aria-labelledby":"profile-tab"},Vve={class:"grid grid-cols-12 gap-6"},Lve={key:0,class:"intro-y box col-span-12 lg:col-span-6"},Zve=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Latest Transaction </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Rve=(0,i._)("div",{class:"p-5"},[(0,i._)("div",{class:"tab-content"},[(0,i._)("div",{id:"latest-tasks-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"latest-tasks-new-tab"},[(0,i._)("div",{class:"flex items-center"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Compra de medicacao"),(0,i._)("div",{class:"text-slate-500"},"10:00 AM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 1.833")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Exames medicos"),(0,i._)("div",{class:"text-slate-500"},"02:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 8.721")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta com expecialista"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 5.351")]),(0,i._)("div",{class:"flex items-center mt-5"},[(0,i._)("div",{class:"border-l-2 border-primary dark:border-primary pl-4"},[(0,i._)("a",{href:"#",class:"font-medium"},"Consulta geral"),(0,i._)("div",{class:"text-slate-500"},"04:00 PM")]),(0,i._)("div",{class:"form-check form-switch ml-auto"},"$ 2.356")])]),(0,i._)("a",{href:"#",class:"btn btn-secondary block w-40 mx-auto mt-5"},"View More")])],-1),Wve=[Zve,Rve],Hve={key:1,class:"intro-y box col-span-12 lg:col-span-6"},Ove=(0,i.uE)('<div class="flex items-center px-5 py-5 sm:py-0 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto mt-3 mb-3"> Dependents </h2><div class="dropdown ml-auto sm:hidden"><a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><i data-lucide="more-horizontal" class="w-5 h-5 text-slate-500"></i></a></div></div>',1),Yve={class:"p-5"},Kve={class:"tab-content"},Gve={id:"work-in-progress-new",class:"tab-pane active",role:"tabpanel","aria-labelledby":"work-in-progress-new-tab"},Jve={key:0,class:"intro-y"},Qve={class:"box px-4 py-4 mb-3 flex items-center zoom-in"},Xve={class:"w-10 h-10 flex-none image-fit rounded-md overflow-hidden"},e_e=["title","src"],t_e={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},a_e={class:"ml-4 mr-auto"},s_e={class:"font-medium"},r_e={class:"text-slate-500 text-xs mt-0.5"},i_e={class:"text-slate-500 text-xs mt-0.5"},l_e={key:1,class:"text-center text-gray-600 mt-4"},n_e={class:"flex items-center px-5 py-5 sm:py-3 border-b border-slate-200/60 dark:border-darkmode-400"},o_e=(0,i._)("h2",{class:"font-medium text-base mr-auto"},"Files",-1),c_e=(0,i._)("div",{class:"dropdown ml-auto sm:hidden"},[(0,i._)("a",{class:"dropdown-toggle w-5 h-5 block",href:"javascript:;","aria-expanded":"false","data-tw-toggle":"dropdown"},[(0,i._)("i",{"data-lucide":"more-horizontal",class:"w-5 h-5 text-slate-500"})])],-1),d_e={key:0,"data-tw-toggle":"modal","data-tw-target":"#new-order-modal",class:"btn btn-outline-secondary hidden sm:flex"},u_e={key:0,class:"p-5"},p_e={class:"file"},m_e=["href"],h_e={class:"ml-4"},g_e=["href"],f_e={class:"text-slate-500 text-xs mt-0.5"},w_e={key:0,class:"dropdown ml-auto mouser",style:{cursor:"pointer"}},v_e={class:"flex items-center text-danger",href:"javascript:;"},__e=["onClick"],y_e=(0,i.uE)('<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line>',5),x_e=[y_e],b_e={key:1,class:"intro-y w-full block text-center rounded-md py-4 border border-dotted border-slate-400 dark:border-darkmode-300 text-slate-500"},k_e=(0,i._)("a",{href:"#"},null,-1),D_e={id:"new-order-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},C_e={class:"modal-dialog"},P_e={class:"modal-content"},S_e=(0,i._)("div",{class:"modal-header"},[(0,i._)("h2",{class:"font-medium text-base mr-auto"},[(0,i.Uk)(" Upload file "),(0,i._)("span",null,".jpeg .png .pdf")])],-1),z_e={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},N_e={class:"modal-body grid grid-cols-12 gap-4 gap-y-3"},T_e={class:"col-span-12"},M_e=(0,i._)("label",{for:"pos-form-1",class:"form-label"},"Name",-1),I_e={class:"fallback"},U_e={class:"modal-footer text-right"},E_e=(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-32 mr-1"}," Cancel ",-1);function F_e(e,t,a,s,r,l){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[r.loading?((0,i.wg)(),(0,i.iD)("div",Hwe)):(0,i.kq)("",!0),(0,i._)("div",Owe,[Ywe,(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back "),"1"===r.role?((0,i.wg)(),(0,i.iD)("div",Kwe,[7===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Gwe,[(0,i.Wm)(n,{to:`/updatependentcorporate/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Jwe])),_:1},8,["to"])])):(0,i.kq)("",!0),8===r.CustomerRole?((0,i.wg)(),(0,i.iD)("div",Qwe,[(0,i.Wm)(n,{to:`/updatedependentindividual/${this.$route.params.id}`},{default:(0,i.w5)((()=>[Xwe])),_:1},8,["to"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",eve,[(0,i._)("div",tve,[(0,i._)("div",ave,[(0,i._)("div",sve,[r.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,src:l.getAvatarUrl(),alt:"profilecustomer",class:"rounded-full"},null,8,rve)):((0,i.wg)(),(0,i.iD)("img",ive))]),(0,i._)("div",lve,[(0,i._)("div",nve,(0,Ns.zw)(r.firstName)+" "+(0,Ns.zw)(r.lastName),1),(0,i._)("div",ove,(0,Ns.zw)(l.getRole(r.CustomerRole)),1),(0,i._)("div",cve,(0,Ns.zw)(r.memberShipID),1),(0,i._)("div",dve,(0,Ns.zw)(l.formatCurrency(r.monthlyFee)),1),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(r.status)])},(0,Ns.zw)(r.status),3)])]),(0,i._)("div",uve,[pve,(0,i._)("div",mve,[(0,i._)("div",hve,[gve,(0,i.Uk)(" "+(0,Ns.zw)(r.email),1)]),(0,i._)("div",fve,[wve,(0,i.Uk)(" "+(0,Ns.zw)(r.contact1),1)]),(0,i._)("div",vve,[_ve,(0,i.Uk)(" "+(0,Ns.zw)(r.contact2),1)]),(0,i._)("div",yve,[xve,(0,i.Uk)(" "+(0,Ns.zw)(r.address),1)])])]),(0,i._)("div",bve,[(0,i._)("div",kve," Member type: "+(0,Ns.zw)(r.relation),1),(0,i._)("div",Dve,[(0,i._)("div",Cve,[(0,i.Uk)(" Gender: "),(0,i._)("span",Pve,(0,Ns.zw)(r.gender),1)])]),(0,i._)("div",Sve,[(0,i._)("div",zve,[(0,i.Uk)(" DOB: "),(0,i._)("span",Nve,(0,Ns.zw)(r.dob),1)])]),(0,i._)("div",Tve,[(0,i._)("div",Mve,[(0,i.Uk)(" Enrolment Date : "),(0,i._)("span",Ive,(0,Ns.zw)(r.enrolmentDate),1)])]),(0,i._)("div",Uve,[(0,i._)("div",Eve,[(0,i.Uk)(" Plan: "),(0,i._)("span",Fve,(0,Ns.zw)(r.plan),1)])]),(0,i._)("div",$ve,[(0,i._)("div",Ave,[(0,i.Uk)(" Manager: "),(0,i._)("span",Bve,(0,Ns.zw)(r.managerFirstName)+" "+(0,Ns.zw)(r.managerLastName),1)])])])])]),(0,i._)("div",qve,[(0,i._)("div",jve,[(0,i._)("div",Vve,[r.condition?((0,i.wg)(),(0,i.iD)("div",Lve,Wve)):(0,i.kq)("",!0),4===r.role||5===r.role?((0,i.wg)(),(0,i.iD)("div",Hve,[Ove,(0,i._)("div",Yve,[(0,i._)("div",Kve,[(0,i._)("div",Gve,[r.myMembers.length>0?((0,i.wg)(),(0,i.iD)("div",Jve,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.myMembers,(a=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y",key:a._id},[(0,i.Wm)(n,{to:`/customerprofile/${a._id}`},{default:(0,i.w5)((()=>[(0,i._)("div",Qve,[(0,i._)("div",Xve,[a.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"partner logo",src:`${e.axios.defaults.baseURL}/${a.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,e_e)):((0,i.wg)(),(0,i.iD)("img",t_e))]),(0,i._)("div",a_e,[(0,i._)("div",s_e,(0,Ns.zw)(a.firstName)+" "+(0,Ns.zw)(a.lastName),1),(0,i._)("div",r_e,(0,Ns.zw)(a.relation),1),(0,i._)("div",i_e,(0,Ns.zw)(this.formatDate(a.enrolmentDate)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])),_:2},1032,["to"])])))),128))])):((0,i.wg)(),(0,i.iD)("div",l_e," No members found. "))])])])])):(0,i.kq)("",!0),(0,i._)("div",{class:(0,Ns.C_)(l.getColumnSpanClass)},[(0,i._)("div",n_e,[o_e,c_e,"1"===r.role||"2"===r.role||"3"===r.role?((0,i.wg)(),(0,i.iD)("button",d_e," Add files ")):(0,i.kq)("",!0)]),r.multipleFiles&&r.multipleFiles.length>0?((0,i.wg)(),(0,i.iD)("div",u_e,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.multipleFiles,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"flex items-center mt-5"},[(0,i._)("div",p_e,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"w-12 file__icon file__icon--directory"},null,8,m_e)]),(0,i._)("div",h_e,[(0,i._)("a",{href:l.getFilePath(e),target:"_blank",class:"font-medium"},(0,Ns.zw)(e),9,g_e),(0,i._)("div",f_e,(0,Ns.zw)(l.getFileSize(e)),1)]),"1"===r.role||"2"===r.role||"3"===r.role?((0,i.wg)(),(0,i.iD)("div",w_e,[(0,i._)("a",v_e,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-trash-2",onClick:t=>l.deleteFile(e)},x_e,8,__e))])])):(0,i.kq)("",!0)])))),128))])):((0,i.wg)(),(0,i.iD)("div",b_e,[(0,i.Uk)(" No files available. Add customer documents "),k_e]))],2)])])]),(0,i._)("div",D_e,[(0,i._)("div",C_e,[(0,i._)("div",P_e,[S_e,r.loading?((0,i.wg)(),(0,i.iD)("div",z_e)):(0,i.kq)("",!0),(0,i._)("div",N_e,[(0,i._)("div",T_e,[M_e,(0,i._)("div",I_e,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",required:"",onChange:t[3]||(t[3]=(...e)=>l.handleFileInputChange&&l.handleFileInputChange(...e))},null,544)])])]),(0,i._)("div",U_e,[E_e,(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-primary w-32",onClick:t[4]||(t[4]=(...e)=>l.uploadFiles&&l.uploadFiles(...e))}," Upload ")])])])])])}var $_e={data(){return{plan:"",errorMessage:"",firstName:"",lastName:"",avatar:"",multipleFiles:[],files:[],myMembers:[],loading:!1,role:"",CustomerRole:"",address:"",balancePlan:"",memberShipID:"",contact1:"",contact2:"",dob:"",email:"",gender:"",idNumber:"",idType:"",monthlyFee:"",relation:"",manager:"",managerFirstName:"",managerLastName:"",id:"",enrolmentDate:"",status:"",condition:!1}},watch:{id(){this.getProfile()}},created(){this.role=wt.Z.get("role"),this.getProfile()},computed:{},methods:{getColumnSpanClass(){const e=this.CustomerRole;return 4===e||5===e?"intro-y box col-span-12 lg:col-span-12":7===e||8===e?"intro-y box col-span-6 lg:col-span-6":"intro-y box lg:col-span-12"},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getRole(e){return 1===e?"Admin":2===e?"Line Manager":3===e?"Agent":""},getProfile(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/userprofile/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.myMembers=e.data.user.myMembers,this.managerFirstName=e.data.user.accountOwner.manager.firstName,this.managerLastName=e.data.user.accountOwner.manager.lastName,this.plan=e.data.user.plan[0].planName,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.address=e.data.user.address,this.balancePlan=e.data.user.balancePlan,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.memberShipID=e.data.user.memberShipID,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.email=e.data.user.email,this.gender=e.data.user.gender,this.idNumber=e.data.user.idNumber,this.idType=e.data.user.idType,this.monthlyFee=e.data.user.monthlyFee,this.relation=e.data.user.relation,this.status=e.data.user.status,this.CustomerRole=e.data.user.role,e.data.user.multipleFiles?this.multipleFiles=e.data.user.multipleFiles.split(","):this.multipleFiles=[],e.data.user.avatar?this.avatar=`${e.data.user.avatar}`:this.avatar=""})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},showToast(e,t){const a=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}});a.fire({icon:e,text:t})},uploadFiles(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=this.$route.params.id,a=wt.Z.get("token"),s=new FormData;this.files.forEach((e=>{s.append("multipleFiles[]",e)})),0!==this.files.length?(this.loading=!0,r.Z.put(`/api/user/uploadmultiplefiles/${t}`,s,{headers:{"Content-Type":"multipart/form-data",token:a}}).then((e=>{e.data.success&&(this.$refs.fileInput.value="",this.$refs.fileInput.files=null,this.$refs.fileInput.dispatchEvent(new Event("change")),Ar().fire({icon:"success",title:"Success!",toast:!0,text:"Files uploaded successfully",timer:3e3,showConfirmButton:!1,position:"top-end"}).then((()=>{}))),this.getProfile(),this.loading=!1})).catch((e=>{console.error("Error uploading file:",e),this.loading=!1}))):e.fire({icon:"error",text:"Please select at least one file",timer:3e3})},deleteFile(e){this.loading=!0,Ar().fire({title:"Are you sure?",text:"You are about to delete the file. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.isConfirmed){const t=wt.Z.get("token");r.Z.delete("/api/admin/file/delete",{headers:{token:t},data:{userId:this.$route.params.id,file:e}}).then((e=>{console.log(e),this.getProfile(),Ar().fire("Deleted!","The file has been deleted.","success")})).catch((e=>{console.error("Error deleting file:",e),Ar().fire("Error!","Failed to delete the file.","error")})).finally((()=>{this.loading=!1}))}else this.loading=!1}))},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"}}};const A_e=(0,_t.Z)($_e,[["render",F_e]]);var B_e=A_e;const q_e={class:"intro-y flex items-center mt-8"},j_e=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Manager",-1),V_e={key:0},L_e=(0,i._)("div",{class:"spinner-border text-primary",role:"status"},[(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-loader"},[(0,i._)("line",{x1:"12",x2:"12",y1:"2",y2:"6"}),(0,i._)("line",{x1:"12",x2:"12",y1:"18",y2:"22"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}),(0,i._)("line",{x1:"2",x2:"6",y1:"12",y2:"12"}),(0,i._)("line",{x1:"18",x2:"22",y1:"12",y2:"12"}),(0,i._)("line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}),(0,i._)("line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"})]),(0,i._)("span",{class:"sr-only"},"Loading...")],-1),Z_e=(0,i._)("i",{class:"fa fa-spinner fa-spin fa-3x fa-fw"},null,-1),R_e=[L_e,Z_e],W_e={class:"grid grid-cols-12 gap-6 mt-5"},H_e={class:"intro-y col-span-12 lg:col-span-6"},O_e={class:"intro-y box p-5"},Y_e={class:"grid grid-cols-2 gap-6 mt-3"},K_e=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),G_e={class:"input-group"},J_e=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),Q_e={class:"input-group"},X_e={class:"grid grid-cols-3 gap-6 mt-3"},eye=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),tye={class:"input-group"},aye=(0,i._)("option",null,"ID",-1),sye=(0,i._)("option",null,"Drive Licence",-1),rye=(0,i._)("option",null,"Passport",-1),iye=(0,i._)("option",null,"Voters",-1),lye=(0,i._)("option",null,"...",-1),nye=[aye,sye,rye,iye,lye],oye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),cye={class:"input-group"},dye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),uye={class:"input-group"},pye={class:"grid grid-cols-2 gap-6 mt-3"},mye=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),hye={class:"input-group"},gye=(0,i._)("option",null,"male",-1),fye=(0,i._)("option",null,"female",-1),wye=(0,i._)("option",null,"other",-1),vye=[gye,fye,wye],_ye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),yye={class:"input-group"},xye={class:"grid grid-cols-6 gap-6 mt-3"},bye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),kye={class:"input-group"},Dye={class:"grid grid-cols-3 gap-6 mt-3"},Cye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Pye={class:"input-group"},Sye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),zye={class:"input-group"},Nye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Tye={class:"input-group"},Mye={class:"grid grid-cols-2 gap-6 mt-3"},Iye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Uye={class:"fallback mt-4"},Eye={class:"text-right mt-8"},Fye=["disabled"];function $ye(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",q_e,[j_e,l.loading?((0,i.wg)(),(0,i.iD)("div",V_e,R_e)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[13]||(t[13]=(0,s.iM)(((...e)=>n.onCreateManager&&n.onCreateManager(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",W_e,[(0,i._)("div",H_e,[(0,i._)("div",O_e,[(0,i._)("div",Y_e,[(0,i._)("div",null,[K_e,(0,i._)("div",G_e,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[J_e,(0,i._)("div",Q_e,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",X_e,[(0,i._)("div",null,[eye,(0,i._)("div",tye,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},nye,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[oye,(0,i._)("div",cye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[dye,(0,i._)("div",uye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",pye,[(0,i._)("div",null,[mye,(0,i._)("div",hye,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},vye,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[_ye,(0,i._)("div",yye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",xye,[(0,i._)("div",null,[bye,(0,i._)("div",kye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",Dye,[(0,i._)("div",null,[Cye,(0,i._)("div",Pye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Sye,(0,i._)("div",zye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[Nye,(0,i._)("div",Tye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Mye,[(0,i._)("div",null,[Iye,(0,i._)("div",Uye,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[11]||(t[11]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Eye,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[12]||(t[12]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,Fye)])])])])],32)])}var Aye={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",password:"",avatar:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},onFileChange(e){const t=e.target.files[0];this.avatar=t},async onCreateManager(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("email",this.email),a.append("address",this.address),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("password",this.password),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/user/manager/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Manager created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/employermanagement"),this.isSuccess=!0,console.log(s),this.$emit("Manager created successfully")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating post:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating manager:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const Bye=(0,_t.Z)(Aye,[["render",$ye]]);var qye=Bye;const jye={key:0,class:"shadow-md"},Vye=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Lye=[Vye],Zye=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Update Admin")],-1),Rye={class:"grid grid-cols-12 gap-6 mt-5"},Wye={class:"intro-y col-span-12 lg:col-span-6"},Hye={class:"intro-y box p-5"},Oye={class:"grid grid-cols-2 gap-6 mt-3"},Yye=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"First name *",-1),Kye={class:"input-group"},Gye=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Last name *",-1),Jye={class:"input-group"},Qye={class:"grid grid-cols-3 gap-6 mt-3"},Xye=(0,i._)("label",{for:"crud-form-19",class:"form-label"},"ID Type *",-1),exe={class:"input-group"},txe=(0,i._)("option",null,"ID",-1),axe=(0,i._)("option",null,"Drive Licence",-1),sxe=(0,i._)("option",null,"Passport",-1),rxe=(0,i._)("option",null,"Voters",-1),ixe=(0,i._)("option",null,"...",-1),lxe=[txe,axe,sxe,rxe,ixe],nxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"ID Number *",-1),oxe={class:"input-group"},cxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"DOB *",-1),dxe={class:"input-group"},uxe={class:"grid grid-cols-2 gap-6 mt-3"},pxe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),mxe={class:"input-group"},hxe=(0,i._)("option",null,"male",-1),gxe=(0,i._)("option",null,"female",-1),fxe=(0,i._)("option",null,"other",-1),wxe=[hxe,gxe,fxe],vxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Email *",-1),_xe={class:"input-group"},yxe={class:"grid grid-cols-6 gap-6 mt-3"},xxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Address *",-1),bxe={class:"input-group"},kxe={class:"grid grid-cols-3 gap-6 mt-3"},Dxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact *",-1),Cxe={class:"input-group"},Pxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Contact 2",-1),Sxe={class:"input-group"},zxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Password",-1),Nxe={class:"input-group"},Txe={class:"grid grid-cols-2 gap-6 mt-3"},Mxe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Status",-1),Ixe={class:"input-group"},Uxe=(0,i._)("option",{value:"Active"},"Active",-1),Exe=(0,i._)("option",{value:"Inactive"},"Inactive",-1),Fxe=[Uxe,Exe],$xe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select Avatar",-1),Axe={class:"fallback mt-4"},Bxe={class:"text-right mt-8"},qxe=["disabled"];function jxe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",jye,Lye)):(0,i.kq)("",!0),Zye,(0,i._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>n.onUpdateManager&&n.onUpdateManager(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",Rye,[(0,i._)("div",Wye,[(0,i._)("div",Hye,[(0,i._)("div",Oye,[(0,i._)("div",null,[Yye,(0,i._)("div",Kye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.firstName=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"first name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.firstName]])])]),(0,i._)("div",null,[Gye,(0,i._)("div",Jye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.lastName=e),id:"crud-form-5",type:"text",class:"form-control",placeholder:"last name","aria-describedby":"input-group-1"},null,512),[[s.nr,l.lastName]])])])]),(0,i._)("div",Qye,[(0,i._)("div",null,[Xye,(0,i._)("div",exe,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=e=>l.idType=e)},lxe,512),[[s.bM,l.idType]])])]),(0,i._)("div",null,[nxe,(0,i._)("div",oxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.idNumber=e),id:"crud-form-6",type:"text",class:"form-control",placeholder:"id number","aria-describedby":"input-group-1"},null,512),[[s.nr,l.idNumber]])])]),(0,i._)("div",null,[cxe,(0,i._)("div",dxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.dob=e),id:"crud-form-4",type:"date",class:"form-control",placeholder:"date","aria-describedby":"input-group-1"},null,512),[[s.nr,l.dob]])])])]),(0,i._)("div",uxe,[(0,i._)("div",null,[pxe,(0,i._)("div",mxe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.gender=e),class:"form-select","aria-label":"Default select example"},wxe,512),[[s.bM,l.gender]])])]),(0,i._)("div",null,[vxe,(0,i._)("div",_xe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),id:"crud-form-10",type:"text",class:"form-control",placeholder:"email","aria-describedby":"input-group-1"},null,512),[[s.nr,l.email]])])])]),(0,i._)("div",yxe,[(0,i._)("div",null,[xxe,(0,i._)("div",bxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.address=e),id:"crud-form-11",type:"text",class:"form-control mt-2 sm:mr-2",placeholder:"address","aria-describedby":"input-group-1"},null,512),[[s.nr,l.address]])])])]),(0,i._)("div",kxe,[(0,i._)("div",null,[Dxe,(0,i._)("div",Cxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.contact1=e),id:"crud-form-12",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact1]])])]),(0,i._)("div",null,[Pxe,(0,i._)("div",Sxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.contact2=e),id:"crud-form-13",type:"number",class:"form-control mt-2 sm:mr-2",placeholder:"contact","aria-describedby":"input-group-1"},null,512),[[s.nr,l.contact2]])])]),(0,i._)("div",null,[zxe,(0,i._)("div",Nxe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.password=e),id:"crud-form-14",type:"password",class:"form-control mt-2 sm:mr-2",placeholder:"password","aria-describedby":"input-group-1"},null,512),[[s.nr,l.password]])])])]),(0,i._)("div",Txe,[(0,i._)("div",null,[Mxe,(0,i._)("div",Ixe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},Fxe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[$xe,(0,i._)("div",Axe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png",onChange:t[12]||(t[12]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",Bxe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[13]||(t[13]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.loading}," Update ",8,qxe)])])])])],32)])}var Vxe={data(){return{firstName:"",lastName:"",idType:"",idNumber:"",dob:"",gender:"",email:"",address:"",contact1:"",contact2:"",relation:"",manager:"",password:"",formattedDob:"",formattedEnrolment:"",plans:[],managers:[],status:"",avatar:null,btnloading:!1,loading:!1}},watch:{id(){this.getUser()}},created(){this.getUser()},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},goBack(){this.$router.go(-1)},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},getUser(){this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token");r.Z.get(`/api/user/${e}`,{headers:{token:t}}).then((e=>{this.loading=!1,this.firstName=e.data.user.firstName,this.lastName=e.data.user.lastName,this.idType=e.data.user.idType,this.idNumber=e.data.user.idNumber,this.dob=this.formatDate(e.data.user.dob),this.enrolmentDate=this.formatDate(e.data.user.enrolmentDate),this.gender=e.data.user.gender,this.password=e.data.user.password,this.email=e.data.user.email,this.address=e.data.user.address,this.contact1=e.data.user.contact1,this.contact2=e.data.user.contact2,this.status=e.data.user.status})).catch((e=>{this.errorMessage="Error retrieving this plan. Please try again.",console.error("Error retrieving plan:",e)}))},onFileChange(e){const t=e.target.files[0];this.avatar=t},validateContacts(){return!isNaN(this.contact1)&&!isNaN(this.contact2)},async onUpdateManager(){const e=this.$route.params.id,t=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),a=["firstName","lastName","idType","idNumber","dob","gender","email","address","contact1","contact2","status"],s=wt.Z.get("token");for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});if(this.validateContacts())try{const a=new FormData;a.append("firstName",this.firstName),a.append("lastName",this.lastName),a.append("idType",this.idType),a.append("idNumber",this.idNumber),a.append("dob",this.dob),a.append("gender",this.gender),a.append("address",this.address),a.append("password",this.password),a.append("email",this.email),a.append("contact1",this.contact1),a.append("contact2",this.contact2),a.append("avatar",this.avatar),a.append("status",this.status),this.btnloading=!0;const i=await r.Z.put(`/user/manager/update/${e}`,a,{headers:{token:s,"Content-Type":"multipart/form-data"}});t.fire({icon:"success",title:"Success!",text:"Manager updated successfully",timer:3e3}),this.btnloading=!1,this.$router.go(-1),this.isSuccess=!0,console.log(i),this.$emit("update successfully")}catch(i){if(i.response&&i.response.data&&i.response.data.error){const e=i.response.data.error;Ar().fire({icon:"error",title:"Error!",text:e}),this.btnloading=!1,console.error("Error updating manager:",e),setTimeout((()=>{}),3e3)}else Ar().fire({icon:"error",title:"Error!",text:"An error occurred. Please try again."}),console.error("Error updating manager:",i.message);this.btnloading=!1}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Contact must be a number",timer:3e3,showConfirmButton:!1,position:"top-end"})}}};const Lxe=(0,_t.Z)(Vxe,[["render",jxe]]);var Zxe=Lxe;const Rxe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Services",-1),Wxe={key:0,class:"shadow-md"},Hxe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Oxe=[Hxe],Yxe={class:"grid grid-cols-12 gap-6 mt-5"},Kxe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Gxe={class:"flex w-full sm:w-auto"},Jxe={class:"w-48 relative text-slate-500"},Qxe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Xxe={class:"box"},ebe={class:"flex items-start px-5 pt-5"},tbe={key:0,class:"absolute right-0 top-0 mr-5 mt-3 dropdown"},abe=(0,i.uE)('<a class="dropdown-toggle w-5 h-5 block" href="javascript:;" aria-expanded="false" data-tw-toggle="dropdown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a>',1),sbe={class:"dropdown-menu w-40"},rbe={class:"dropdown-content"},ibe=(0,i._)("label",{class:"dropdown-item"}," Edit ",-1),lbe={class:"text-center lg:text-left p-5 text-slate-500 text-xs mt-0.5"},nbe={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-5"},obe={class:"flex items-center justify-left lg:justify-start text-slate-500 mt-1"},cbe={class:"w-full flex flex-col lg:flex-row items-left mt-3"},dbe={class:""},ube={class:"text-slate-500 text-xs mt-0.5"},pbe={class:"text-slate-500 text-xs mt-0.5 text-success"},mbe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},hbe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),gbe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),fbe=[hbe,gbe],wbe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center mt-5"},vbe={class:"w-full sm:w-auto sm:mr-auto"},_be={class:"pagination"},ybe={class:"page-item"},xbe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),bbe=[xbe],kbe=["onClick"],Dbe={class:"page-item"},Cbe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Pbe=[Cbe],Sbe=(0,i._)("option",null,"10",-1),zbe=(0,i._)("option",null,"25",-1),Nbe=(0,i._)("option",null,"35",-1),Tbe=(0,i._)("option",null,"50",-1),Mbe=(0,i._)("option",null,"100",-1),Ibe=(0,i._)("option",null,"500",-1),Ube=(0,i._)("option",null,"1000",-1),Ebe=[Sbe,zbe,Nbe,Tbe,Mbe,Ibe,Ube];function Fbe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[Rxe,l.loading?((0,i.wg)(),(0,i.iD)("label",Wxe,Oxe)):(0,i.kq)("",!0),(0,i._)("div",Yxe,[(0,i._)("div",Kxe,[(0,i._)("div",Gxe,[(0,i._)("div",Jxe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Qxe])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.myservices,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"intro-y col-span-12 md:col-span-6 lg:col-span-4",key:e._id},[(0,i._)("div",Xxe,[(0,i._)("div",ebe,[1===l.role?((0,i.wg)(),(0,i.iD)("div",tbe,[abe,(0,i._)("div",sbe,[(0,i._)("div",rbe,[(0,i.Wm)(o,{to:`/updateservice/${e._id}`},{default:(0,i.w5)((()=>[ibe])),_:2},1032,["to"])])])])):(0,i.kq)("",!0)]),(0,i._)("div",lbe,[(0,i._)("div",null,(0,Ns.zw)(e.serviceDescription),1),(0,i._)("div",nbe,(0,Ns.zw)(e.serviceName),1),(0,i._)("div",obe,(0,Ns.zw)(e.serviceAreaOfCover),1),(0,i._)("div",cbe,[(0,i._)("div",dbe,[(0,i._)("div",ube,[(0,i.Uk)(" Service price: "),(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice)),1)]),(0,i._)("div",pbe,[(0,i.Uk)(" Remaining balance: "),(0,i._)("strong",null,(0,Ns.zw)(n.formatCurrency(e.servicePrice-e.remainingBalance)),1)])])])])])])))),128)),l.loading?((0,i.wg)(),(0,i.iD)("div",mbe,fbe)):(0,i.kq)("",!0)]),(0,i._)("div",wbe,[(0,i._)("nav",vbe,[(0,i._)("ul",_be,[(0,i._)("li",ybe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},bbe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,kbe)],2)))),128)),(0,i._)("li",Dbe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},Pbe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},Ebe,544),[[s.bM,l.pageSize]])])])}var $be={data(){return{myservices:[],currentPage:1,totalPages:1,itemsPerPage:12,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",status:"",role:null}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize};this.searchTerm&&(t.serviceName=this.searchTerm);const a=await r.Z.get("/api/getmyservices",{headers:{token:e},params:t});a.data.success&&(this.myservices=a.data.planService),this.count=a.data.totalServices,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData();const e=localStorage.getItem("role");this.role="1"===e?1:0},mounted(){}};const Abe=(0,_t.Z)($be,[["render",Fbe]]);var Bbe=Abe;const qbe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Transactions",-1),jbe={key:0,class:"shadow-md"},Vbe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),Lbe=[Vbe],Zbe={class:"grid grid-cols-12 gap-12 mt-5"},Rbe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Wbe={class:"flex w-full sm:w-auto"},Hbe={class:"w-48 relative text-slate-500"},Obe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),Ybe={class:"ml-1"},Kbe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),Gbe=[Kbe],Jbe={class:"hidden xl:block mx-auto text-slate-500"},Qbe=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),Xbe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},eke={class:"table table-report -mt-2"},tke=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),ake={class:"w-40 !py-4"},ske={href:"#",class:"decoration-dotted whitespace-nowrap"},rke={class:"w-40"},ike={href:"#",class:"font-medium whitespace-nowrap"},lke={class:"text-center"},nke={key:0,class:"flex items-center justify-center whitespace-nowrap"},oke={key:1,class:"flex items-center justify-center whitespace-nowrap"},cke={class:"whitespace-nowrap"},dke={class:"whitespace-nowrap"},uke={class:"whitespace-nowrap"},pke={class:"w-40 !py-4"},mke={class:"table-report__action"},hke={class:"flex justify-center items-center"},gke=["onClick"],fke=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),wke={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},vke=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),_ke={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},yke=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),xke=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),bke=[yke,xke],kke={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Dke={class:"w-full sm:w-auto sm:mr-auto"},Cke={class:"pagination"},Pke={class:"page-item"},Ske=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),zke=[Ske],Nke=["onClick"],Tke={class:"page-item"},Mke=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),Ike=[Mke],Uke=(0,i._)("option",null,"10",-1),Eke=(0,i._)("option",null,"25",-1),Fke=(0,i._)("option",null,"35",-1),$ke=(0,i._)("option",null,"50",-1),Ake=(0,i._)("option",null,"100",-1),Bke=(0,i._)("option",null,"500",-1),qke=(0,i._)("option",null,"1000",-1),jke=[Uke,Eke,Fke,$ke,Ake,Bke,qke],Vke={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},Lke={class:"modal-dialog"},Zke={class:"modal-content"},Rke={class:"modal-body p-0"},Wke={class:"p-5 text-center"},Hke=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),Oke=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),Yke={class:"text-slate-500 mt-2"},Kke=["href"],Gke=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function Jke(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[qbe,l.loading?((0,i.wg)(),(0,i.iD)("label",jbe,Lbe)):(0,i.kq)("",!0),(0,i._)("div",Zbe,[(0,i._)("div",Rbe,[(0,i._)("div",Wbe,[(0,i._)("div",Hbe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Obe])]),(0,i._)("div",Ybe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},Gbe)]),(0,i._)("div",Jbe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),Qbe]),(0,i._)("div",Xbe,[(0,i._)("table",eke,[tke,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",ake,[(0,i._)("a",ske,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",rke,[(0,i._)("a",ike,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",lke,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",nke,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",oke,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",cke,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",dke,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",uke,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",pke,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",mke,[(0,i._)("div",hke,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[fke,(0,i.Uk)(" Files ")],8,gke),"Completed"===e.status?((0,i.wg)(),(0,i.iD)("a",wke,[vke,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",_ke,bke)):(0,i.kq)("",!0),(0,i._)("div",kke,[(0,i._)("nav",Dke,[(0,i._)("ul",Cke,[(0,i._)("li",Pke,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},zke)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,Nke)],2)))),128)),(0,i._)("li",Tke,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},Ike)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},jke,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",Vke,[(0,i._)("div",Lke,[(0,i._)("div",Zke,[(0,i._)("div",Rke,[(0,i._)("div",Wke,[Hke,Oke,(0,i._)("div",Yke,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,Kke)])))),128))])])]),Gke])])])])])}var Qke={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`http://localhost:8000/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/get/logedusertransaction",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const Xke=(0,_t.Z)(Qke,[["render",Jke]]);var eDe=Xke;const tDe={key:0,class:"shadow-md"},aDe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),sDe=[aDe],rDe={class:"grid grid-cols-12 gap-6 mt-5"},iDe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},lDe={class:"flex w-full sm:w-auto"},nDe={class:"w-48 relative text-slate-500"},oDe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),cDe={class:"hidden xl:block mx-auto text-slate-500"},dDe=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),uDe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},pDe={class:"intro-y grid grid-cols-12 gap-3 sm:gap-6 mt-5"},mDe={class:"file box rounded-md px-5 pt-8 pb-5 px-3 sm:px-5 relative zoom-in"},hDe=(0,i._)("div",{class:"absolute left-0 top-0 mt-3 ml-3"},null,-1),gDe=["href"],fDe=["href"],wDe=(0,i._)("div",{class:"text-slate-500 text-xs text-center mt-0.5"},null,-1),vDe={class:"absolute top-0 right-0 mr-2 mt-3 dropdown ml-auto"},_De=["href"],yDe=(0,i._)("i",{"data-lucide":"more-vertical",class:"w-5 h-5 text-slate-500"},null,-1),xDe=[yDe],bDe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},kDe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),DDe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),CDe=[kDe,DDe],PDe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},SDe={class:"w-full sm:w-auto sm:mr-auto"},zDe={class:"pagination"},NDe={class:"page-item"},TDe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),MDe=[TDe],IDe=["onClick"],UDe={class:"page-item"},EDe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),FDe=[EDe],$De=(0,i._)("option",null,"10",-1),ADe=(0,i._)("option",null,"25",-1),BDe=(0,i._)("option",null,"35",-1),qDe=(0,i._)("option",null,"50",-1),jDe=(0,i._)("option",null,"100",-1),VDe=(0,i._)("option",null,"500",-1),LDe=(0,i._)("option",null,"1000",-1),ZDe=[$De,ADe,BDe,qDe,jDe,VDe,LDe];function RDe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",tDe,sDe)):(0,i.kq)("",!0),(0,i._)("div",rDe,[(0,i._)("div",iDe,[(0,i._)("div",lDe,[(0,i._)("div",nDe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),oDe])]),(0,i._)("div",cDe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),dDe]),(0,i._)("div",uDe,[(0,i._)("div",pDe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.fileTemplates,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e._id,class:"intro-y col-span-6 sm:col-span-4 md:col-span-3 2xl:col-span-2"},[(0,i._)("div",mDe,[hDe,(0,i._)("a",{href:n.getFilePath(e.fileTemplate),target:"_blank",class:"w-3/5 file__icon file__icon--empty-directory mx-auto"},null,8,gDe),(0,i._)("a",{href:n.getFilePath(e.fileTemplate),target:"_blank",class:"block font-medium mt-4 text-center truncate"},(0,Ns.zw)(e.description),9,fDe),wDe,(0,i._)("div",vDe,[(0,i._)("a",{href:n.getFilePath(e.fileTemplate),class:"dropdown-toggle w-5 h-5 block","aria-expanded":"false","data-tw-toggle":"dropdown"},xDe,8,_De)])])])))),128))])]),l.loading?((0,i.wg)(),(0,i.iD)("div",bDe,CDe)):(0,i.kq)("",!0),(0,i._)("div",PDe,[(0,i._)("nav",SDe,[(0,i._)("ul",zDe,[(0,i._)("li",NDe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},MDe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,IDe)],2)))),128)),(0,i._)("li",UDe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},FDe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},ZDe,544),[[s.bM,l.pageSize]])])])])}var WDe={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",fileTemplates:""}},computed:{formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getFilePath(e){return`http://localhost:8000/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/active/filetemplate",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.fileTemplates=t.data.fileTemplates,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Completed"===e?"text-success":"Pending"===e?"text-pending":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const HDe=(0,_t.Z)(WDe,[["render",RDe]]);var ODe=HDe;const YDe={key:0,class:"shadow-md"},KDe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),GDe=[KDe],JDe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"View template file",-1),QDe={class:"grid grid-cols-12 gap-6 mt-5"},XDe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},eCe={class:"flex w-full sm:w-auto"},tCe={class:"w-48 relative text-slate-500"},aCe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),sCe={class:"hidden xl:block mx-auto text-slate-500"},rCe={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},iCe=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Add template ")],-1),lCe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},nCe={class:"table table-report -mt-2"},oCe=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"text-center whitespace-nowrap"},"File description"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Satus"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Date"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),cCe={class:"text-center"},dCe={class:"flex items-center justify-center whitespace-nowrap"},uCe={class:"text-center"},pCe={class:"text-center"},mCe={class:"flex items-center justify-center whitespace-nowrap"},hCe={class:"table-report__action"},gCe={class:"flex justify-center items-center"},fCe=["href"],wCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),vCe={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},_Ce=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),yCe={class:"flex items-center text-primary whitespace-nowrap mr-5",href:"javascript:;"},xCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),bCe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},kCe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),DCe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),CCe=[kCe,DCe],PCe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},SCe={class:"w-full sm:w-auto sm:mr-auto"},zCe={class:"pagination"},NCe={class:"page-item"},TCe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),MCe=[TCe],ICe=["onClick"],UCe={class:"page-item"},ECe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),FCe=[ECe],$Ce=(0,i._)("option",null,"10",-1),ACe=(0,i._)("option",null,"25",-1),BCe=(0,i._)("option",null,"35",-1),qCe=(0,i._)("option",null,"50",-1),jCe=(0,i._)("option",null,"100",-1),VCe=[$Ce,ACe,BCe,qCe,jCe],LCe=(0,i.uE)('<div id="delete-confirmation-modal" class="modal" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body p-0"><div class="p-5 text-center"><i data-lucide="x-circle" class="w-16 h-16 text-warning mx-auto mt-3"></i><div class="text-3xl mt-5">Are you sure?</div><div class="text-slate-500 mt-2"> Do you really want to change status? <br> This client will lose access to all services. </div></div><div class="px-5 pb-8 text-center"><button type="button" data-tw-dismiss="modal" class="btn btn-outline-secondary w-24 mr-1"> Cancel </button><button type="button" class="btn btn-danger w-24">Confirm</button></div></div></div></div></div>',1);function ZCe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",YDe,GDe)):(0,i.kq)("",!0),JDe,(0,i._)("div",QDe,[(0,i._)("div",XDe,[(0,i._)("div",eCe,[(0,i._)("div",tCe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),aCe])]),(0,i._)("div",sCe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",rCe,[(0,i.Wm)(o,{to:"/createtemplatefile"},{default:(0,i.w5)((()=>[iCe])),_:1})])]),(0,i._)("div",lCe,[(0,i._)("table",nCe,[oCe,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.fileTemplates,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",cCe,[(0,i._)("div",dCe,(0,Ns.zw)(e.description),1)]),(0,i._)("td",uCe,[(0,i._)("div",{class:(0,Ns.C_)(["flex items-center justify-center whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",pCe,[(0,i._)("div",mCe,(0,Ns.zw)(n.formatDate(e.updatedAt)),1)]),(0,i._)("td",hCe,[(0,i._)("div",gCe,[(0,i._)("a",{class:"flex items-center text-primary whitespace-nowrap mr-5",href:n.getFilePath(e.fileTemplate),target:"_blank"},[wCe,(0,i.Uk)(" View ")],8,fCe),(0,i._)("a",vCe,[_Ce,(0,i.Wm)(o,{to:`/updatetemplatefile/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Edit")])),_:2},1032,["to"])]),(0,i._)("a",yCe,[xCe,(0,i.Wm)(o,{to:`/viewpartneruser/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Delete")])),_:2},1032,["to"])])])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",bCe,CCe)):(0,i.kq)("",!0),(0,i._)("div",PCe,[(0,i._)("nav",SCe,[(0,i._)("ul",zCe,[(0,i._)("li",NCe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},MCe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,ICe)],2)))),128)),(0,i._)("li",UCe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},FCe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},VCe,544),[[s.bM,l.pageSize]])])]),LCe])}var RCe={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",fileTemplates:""}},computed:{formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getStatusClass(e){return"Active"===e?"text-success":"Inactive"===e?"text-danger":""},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDate(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/get/templates",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.fileTemplates=t.data.fileTemplates,this.count=t.data.count,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)},getFileName(e){const t=e.split("-")[2];return t},getFileSize(e){if(!e)return"";const t=e.split("-")[2];return t?`${t} KB`:""}},created(){this.fetchData()}};const WCe=(0,_t.Z)(RCe,[["render",ZCe]]);var HCe=WCe;const OCe={key:0,class:"shadow-md"},YCe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),KCe=[YCe],GCe=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Template File")],-1),JCe={class:"grid grid-cols-12 gap-6 mt-5"},QCe={class:"intro-y col-span-12 lg:col-span-6"},XCe={class:"intro-y box p-5"},ePe={class:"grid grid-cols-6 gap-6 mt-3"},tPe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Description *",-1),aPe={class:"input-group"},sPe={class:"grid grid-cols-6 gap-6 mt-5"},rPe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select file",-1),iPe={class:"fallback mt-4"},lPe={class:"text-right mt-8"},nPe=["disabled"];function oPe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",OCe,KCe)):(0,i.kq)("",!0),GCe,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>n.onCreateTemplateFile&&n.onCreateTemplateFile(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",JCe,[(0,i._)("div",QCe,[(0,i._)("div",XCe,[(0,i._)("div",ePe,[(0,i._)("div",null,[tPe,(0,i._)("div",aPe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.description=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.description]])])])]),(0,i._)("div",sPe,[(0,i._)("div",null,[rPe,(0,i._)("div",iPe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[1]||(t[1]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",lPe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Save ",8,nPe)])])])])],32)])}var cPe={data(){return{description:"",fileTemplate:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},onFileChange(e){const t=e.target.files[0];this.fileTemplate=t},async getMagers(){this.loading=!0;const e=wt.Z.get("token");try{const t=await r.Z.get("/api/user/employer/agent/active/get",{headers:{token:e}});if(!t.data.success)throw new Error("Failed to fetch plans");this.managers=t.data.employer,this.loading=!1}catch(t){console.error("Error fetching plans:",t),this.loading=!1}},async onCreateTemplateFile(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["description","fileTemplate"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("description",this.description),a.append("fileTemplate",this.fileTemplate),this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/filestemplate/create",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Template created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewtemplatefiles"),this.isSuccess=!0,console.log(s),this.$emit("templatecreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating template:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating template:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){}};const dPe=(0,_t.Z)(cPe,[["render",oPe]]);var uPe=dPe;const pPe={key:0,class:"shadow-md"},mPe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),hPe=[mPe],gPe=(0,i._)("div",{class:"intro-y flex items-center mt-8"},[(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Template File")],-1),fPe={class:"grid grid-cols-12 gap-6 mt-5"},wPe={class:"intro-y col-span-12 lg:col-span-6"},vPe={class:"intro-y box p-5"},_Pe={class:"grid grid-cols-6 gap-6 mt-3"},yPe=(0,i._)("label",{for:"crud-form-15",class:"form-label"},"Description *",-1),xPe={class:"input-group"},bPe=(0,i._)("div",{class:"grid grid-cols-6 gap-6 mt-3"},null,-1),kPe={class:"grid grid-cols-6 gap-6 mt-5"},DPe=(0,i._)("label",{for:"crud-form-17",class:"form-label"},"Gender *",-1),CPe={class:"input-group"},PPe=(0,i._)("option",null,"Active",-1),SPe=(0,i._)("option",null,"Inactive",-1),zPe=[PPe,SPe],NPe=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select file",-1),TPe={class:"fallback mt-4"},MPe={class:"text-right mt-8"},IPe=["disabled"];function UPe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",pPe,hPe)):(0,i.kq)("",!0),gPe,(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>n.onUpdateTemplateFile&&n.onUpdateTemplateFile(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",fPe,[(0,i._)("div",wPe,[(0,i._)("div",vPe,[(0,i._)("div",_Pe,[(0,i._)("div",null,[yPe,(0,i._)("div",xPe,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.description=e),id:"crud-form-16",type:"text",class:"form-control",placeholder:"description","aria-describedby":"input-group-1"},null,512),[[s.nr,l.description]])])])]),bPe,(0,i._)("div",kPe,[(0,i._)("div",null,[DPe,(0,i._)("div",CPe,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.status=e),class:"form-select","aria-label":"Default select example"},zPe,512),[[s.bM,l.status]])])]),(0,i._)("div",null,[NPe,(0,i._)("div",TPe,[(0,i._)("input",{id:"fileInput",ref:"fileInput",type:"file",accept:".jpg, .jpeg, .png, .pdf",onChange:t[2]||(t[2]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,544)])])]),(0,i._)("div",MPe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[3]||(t[3]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.btnloading}," Update ",8,IPe)])])])])],32)])}var EPe={data(){return{description:"",status:"",fileTemplate:null,loading:!1,btnloading:!1}},methods:{goBack(){this.$router.go(-1)},async getTemplate(){this.btnloading=!0,this.loading=!0;try{const e=wt.Z.get("token"),t=this.$route.params.templateId,a=await r.Z.get(`/api/single/template/${t}`,{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error("Failed to fetch plans");this.description=a.data.template.description,this.status=a.data.template.status,this.loading=!1,this.btnloading=!1}catch(e){console.error("Error fetching plans:",e),this.loading=!1}},onFileChange(e){const t=e.target.files[0];this.fileTemplate=t},async onUpdateTemplateFile(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["description","fileTemplate"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;a.append("description",this.description),a.append("fileTemplate",this.fileTemplate),a.append("status",this.status),this.btnloading=!0,this.loading=!0;const s=this.$route.params.templateId,i=await r.Z.put(`/api/update/template/${s}`,a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Template updated successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewtemplatefiles"),this.isSuccess=!0,console.log(i),this.$emit("templateupdated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error update template:",this.errorMessage),setTimeout((()=>{window.location.reload()}),3e3)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error update template:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.getTemplate()}};const FPe=(0,_t.Z)(EPe,[["render",UPe]]);var $Pe=FPe;const APe=e=>((0,i.dD)("data-v-52642198"),e=e(),(0,i.Cn)(),e),BPe={key:0,class:"shadow-md"},qPe=APe((()=>(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1))),jPe=[qPe],VPe={class:"grid grid-cols-12 gap-6 mt-5"},LPe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},ZPe={class:"flex w-full sm:w-auto"},RPe={class:"w-48 relative text-slate-500"},WPe=APe((()=>(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1))),HPe={class:"ml-1"},OPe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw" data-v-52642198><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" data-v-52642198></path><path d="M3 3v5h5" data-v-52642198></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" data-v-52642198></path><path d="M16 16h5v5" data-v-52642198></path></svg>',1),YPe=[OPe],KPe={class:"hidden xl:block mx-auto text-slate-500"},GPe=APe((()=>(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1))),JPe={class:"kanban-board"},QPe=["onDragenter","onDrop"],XPe=["onDragstart"],eSe={class:"kanban-card-container"},tSe={class:"intro-y col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3"},aSe={class:"box"},sSe={class:"p-5 flex flex-col items-start justify-start"},rSe={class:"text-slate-600 dark:text-slate-500 mt-5"},iSe={class:"flex flex-wrap items-center"},lSe={class:"flex flex-wrap items-center"},nSe=APe((()=>(0,i._)("i",{"data-lucide":"layers",class:"w-4 h-4 mr-2"},null,-1))),oSe={class:"flex flex-wrap items-center"},cSe={class:"mt-2"},dSe=APe((()=>(0,i._)("b",null,"Files:",-1))),uSe={class:"flex flex-wrap items-center"},pSe=["href"],mSe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink" data-v-52642198><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7" data-v-52642198></path><polyline points="14 2 14 8 20 8" data-v-52642198></polyline><path d="m10 18 3-3-3-3" data-v-52642198></path><path d="M4 18v-1a2 2 0 0 1 2-2h6" data-v-52642198></path></svg>',1),hSe=[mSe],gSe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},fSe={class:"w-full sm:w-auto sm:mr-auto"},wSe={class:"pagination"},vSe={class:"page-item"},_Se=APe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1))),ySe=[_Se],xSe=["onClick"],bSe={class:"page-item"},kSe=APe((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1))),DSe=[kSe],CSe=APe((()=>(0,i._)("option",null,"10",-1))),PSe=APe((()=>(0,i._)("option",null,"25",-1))),SSe=APe((()=>(0,i._)("option",null,"35",-1))),zSe=APe((()=>(0,i._)("option",null,"50",-1))),NSe=APe((()=>(0,i._)("option",null,"100",-1))),TSe=APe((()=>(0,i._)("option",null,"500",-1))),MSe=APe((()=>(0,i._)("option",null,"1000",-1))),ISe=[CSe,PSe,SSe,zSe,NSe,TSe,MSe];function USe(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr");return(0,i.wg)(),(0,i.iD)("div",null,[l.loading?((0,i.wg)(),(0,i.iD)("label",BPe,jPe)):(0,i.kq)("",!0),(0,i._)("div",VPe,[(0,i._)("div",LPe,[(0,i._)("div",ZPe,[(0,i._)("div",RPe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),WPe])]),(0,i._)("div",HPe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},YPe)]),(0,i._)("div",KPe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),GPe])]),(0,i._)("div",JPe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.kanbanColumns,((a,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r,class:"kanban-column"},[(0,i._)("h2",null,(0,Ns.zw)(a),1),(0,i._)("div",{class:"kanban-cards overflow-y-auto",onDragenter:(0,s.iM)((e=>n.dragEnter(r)),["prevent"]),onDragover:t[6]||(t[6]=(0,s.iM)(((...t)=>e.dragOver&&e.dragOver(...t)),["prevent"])),onDrop:(0,s.iM)((e=>n.drop(r,e)),["prevent"]),ref_for:!0,ref:`kanbanColumn-${r}`},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredRequests(r),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t._id,draggable:"true",onDragstart:a=>n.dragStart(t,e.index,r,a)},[(0,i._)("div",eSe,[(0,i._)("div",tSe,[(0,i._)("div",aSe,[(0,i._)("div",sSe,[(0,i._)("div",rSe,[(0,i._)("div",iSe,[(0,i._)("strong",null,(0,Ns.zw)(t.title),1)]),(0,i._)("div",lSe,[nSe,(0,i.Uk)(" "+(0,Ns.zw)(t.comment),1)]),(0,i._)("div",oSe,[(0,i._)("strong",null,[(0,i.Uk)((0,Ns.zw)(t.customer.firstName)+" ",1),(0,i._)("strong",null,(0,Ns.zw)(t.customer.lastName),1)])]),(0,i._)("div",cSe,[dSe,(0,i._)("div",uSe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},hSe,8,pSe)])))),128))])])])])])])])],40,XPe)))),128))],40,QPe)])))),128))]),(0,i._)("div",gSe,[(0,i._)("nav",fSe,[(0,i._)("ul",wSe,[(0,i._)("li",vSe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.previousPage&&n.previousPage(...e))},ySe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,xSe)],2)))),128)),(0,i._)("li",bSe,[(0,i._)("a",{class:"page-link",onClick:t[8]||(t[8]=(...e)=>n.nextPage&&n.nextPage(...e))},DSe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[9]||(t[9]=e=>l.pageSize=e),onChange:t[10]||(t[10]=(...e)=>n.changePageSize&&n.changePageSize(...e))},ISe,544),[[s.bM,l.pageSize]])])])}var ESe={data(){return{currentPage:1,totalPages:1,itemsPerPage:10,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",startDate:"",endDate:"",selectedDate:null,customerRequests:[],loading:!1,kanbanColumns:{Pending:"Pending",Received:"Received",Under_assessment:"Under assessment",canceled:"canceled",Under_approval:"Under approval",Done:"Done"},dragData:null,currentDropTarget:null}},created(){this.fetchData()},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},filteredRequests(){return e=>this.customerRequests.filter((t=>t.status===e))}},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},isActivePage(e){return e===this.currentPage},getFilePath(e){return`http://localhost:8000/${e}`},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/request/getall",{headers:{token:e},params:t});this.customerRequests=a.data.customerRequests,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count),console.log("customerRequests:",this.customerRequests)}catch(e){console.error(e)}finally{this.loading=!1}},dragStart(e,t,a,s){console.log("Dragging card:",e),this.dragData={request:e,column:a,event:s}},dragEnter(e){console.log("target column: ",e)},async drop(e,t){if(t.preventDefault(),!this.dragData)return;const{request:a,column:s}=this.dragData;let i;if(s===e){const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const r=this.customerRequests.filter((e=>e.status===s)),l=r.findIndex((e=>e._id===a._id));r.splice(i,1),r.splice(l,0,t),console.log("Move card within",e,"from",i,"to",l)}else try{const t=this.customerRequests.find((e=>e._id===a._id));i=this.customerRequests.findIndex((e=>e._id===a._id));const l=e,n=wt.Z.get("token");console.log("New status: ",l),console.log("Card id: ",t._id),await r.Z.put(`/request/status/${t._id}`,{status:l},{headers:{token:n,"Content-Type":"application/json"}}),t.status=l;const o=this.customerRequests.filter((e=>e.status===s));o.splice(i,1);const c=this.customerRequests.filter((e=>e.status===l));c.push(t),this.customerRequests=[...this.customerRequests]}catch(l){console.error("Error updating status:",l)}this.dragData=null,t.preventDefault()}}};const FSe=(0,_t.Z)(ESe,[["render",USe],["__scopeId","data-v-52642198"]]);var $Se=FSe;const ASe={class:"intro-y flex items-center mt-8"},BSe=(0,i._)("h2",{class:"text-lg font-medium mr-auto"},"Create Request",-1),qSe={key:0,class:"shadow-md"},jSe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),VSe=[jSe],LSe={class:"grid grid-cols-12 gap-6 mt-5"},ZSe={class:"intro-y col-span-12 lg:col-span-6"},RSe={class:"intro-y box p-5"},WSe={class:"grid grid-cols-2 gap-6 mt-3"},HSe=(0,i._)("label",{for:"crud-form-21",class:"form-label"},"Agent",-1),OSe={class:"input-group"},YSe={class:"form-control"},KSe=(0,i._)("label",{for:"crud-form-18",class:"form-label"},"Subject *",-1),GSe={class:"input-group"},JSe=["disabled"],QSe=(0,i._)("option",null,"Add New Member/ Dependent",-1),XSe=(0,i._)("option",null,"Surgery",-1),eze=[QSe,XSe],tze={class:"grid grid-cols-6 gap-6 mt-3"},aze=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Message",-1),sze={class:"input-group"},rze=["disabled"],ize={class:"grid grid-cols-2 gap-6 mt-5"},lze=(0,i._)("label",{for:"crud-form-4",class:"form-label"},"Select attachments",-1),nze={class:"fallback mt-4"},oze=["disabled"],cze={class:"text-right mt-8"},dze=["disabled"];function uze(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",ASe,[BSe,l.loading?((0,i.wg)(),(0,i.iD)("label",qSe,VSe)):(0,i.kq)("",!0)]),(0,i._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>n.onCreateRequest&&n.onCreateRequest(...e)),["prevent"])),enctype:"multipart/form-data","data-single":"true",action:"/file-upload"},[(0,i._)("div",LSe,[(0,i._)("div",ZSe,[(0,i._)("div",RSe,[(0,i._)("div",WSe,[(0,i._)("div",null,[HSe,(0,i._)("div",OSe,[(0,i._)("div",YSe,[(0,i._)("strong",null,(0,Ns.zw)(l.agentFirstName),1),(0,i.Uk)(" "+(0,Ns.zw)()+" ",1),(0,i._)("strong",null,(0,Ns.zw)(l.agentLastName),1)])])]),(0,i._)("div",null,[KSe,(0,i._)("div",GSe,[(0,i.wy)((0,i._)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":t[0]||(t[0]=e=>l.title=e),disabled:l.loading},eze,8,JSe),[[s.bM,l.title]])])])]),(0,i._)("div",tze,[(0,i._)("div",null,[aze,(0,i._)("div",sze,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.comment=e),id:"crud-form-6",rows:"5",class:"form-control",placeholder:"comment","aria-describedby":"input-group-1",disabled:l.loading},null,8,rze),[[s.nr,l.comment]])])])]),(0,i._)("div",ize,[(0,i._)("div",null,[lze,(0,i._)("div",nze,[(0,i._)("input",{ref:"fileInput",type:"file",multiple:"",accept:".jpg, .jpeg, .png, .pdf",required:"",onChange:t[2]||(t[2]=(...e)=>n.handleFileInputChange&&n.handleFileInputChange(...e)),disabled:l.loading},null,40,oze)])])]),(0,i._)("div",cze,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1",onClick:t[3]||(t[3]=(...e)=>n.goBack&&n.goBack(...e))}," Cancel "),(0,i._)("button",{type:"submit",class:"btn btn-primary w-24",disabled:l.loading}," Create ",8,dze)])])])])],32)])}var pze={data(){return{agentFirstName:"",agentLastName:"",comment:"",title:"",serviceId:"",loading:!1,btnloading:!1}},methods:{handleFileInputChange(e){const t=e.target.files,a=Array.from(t);this.files=a.filter((e=>e.size>0));const s=["image/jpeg","image/png","application/pdf"],r=this.files.filter((e=>!s.includes(e.type)));if(r.length>0){const e=r.map((e=>e.name)).join(", ");return this.showToast("error",`Invalid file type: ${e}`),this.$refs.fileInput.value="",this.$refs.fileInput.files=null,void this.$refs.fileInput.dispatchEvent(new Event("change"))}},goBack(){this.$router.go(-1)},async fetch(){this.loading=!0;try{const e=wt.Z.get("token"),t=await r.Z.get("/api/me",{headers:{token:e,"Content-Type":"multipart/form-data"}});if(!t.data.user||"object"!==typeof t.data.user)throw new Error("Failed to fetch services");this.loading=!1,t.data.user.manager?(this.agentFirstName=t.data.user.manager.firstName,this.agentLastName=t.data.user.manager.lastName):t.data.user.accountOwner&&"object"===typeof t.data.user.accountOwner&&(this.agentFirstName=t.data.user.accountOwner.firstName,this.agentLastName=t.data.user.accountOwner.lastName)}catch(e){console.error("Error fetching services:",e),this.loading=!1}},async onCreateRequest(){const e=Ar().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Ar().stopTimer),e.addEventListener("mouseleave",Ar().resumeTimer)}}),t=wt.Z.get("token"),a=["title"];for(const r of a)if(""===this[r])return void Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:`${r} cannot be empty`,timer:3e3,showConfirmButton:!1,position:"top-end"});try{const a=new FormData;if(this.files.forEach((e=>{a.append("files[]",e)})),a.append("title",this.title),a.append("comment",this.comment),0===this.files.length)return void e.fire({icon:"error",text:"Please select at least one file",timer:3e3});this.btnloading=!0,this.loading=!0;const s=await r.Z.post("/api/request/createnew",a,{headers:{token:t,"Content-Type":"multipart/form-data"}});e.fire({icon:"success",title:"Success!",text:"Request created successfully",timer:3e3}),this.btnloading=!1,this.loading=!1,this.$router.push("/viewrequest"),this.isSuccess=!0,console.log(s),this.$emit("requestcreated")}catch(s){s.response&&s.response.data&&s.response.data.error?(this.errorMessage=s.response.data.error,Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating request:",this.errorMessage)):(this.errorMessage="An error occurred. Please try again.",Ar().fire({icon:"error",title:"Error!",text:this.errorMessage}),console.error("Error creating request:",s.message)),this.btnloading=!1,this.loading=!1}}},created(){this.fetch()}};const mze=(0,_t.Z)(pze,[["render",uze]]);var hze=mze;function gze(e,t){return(0,i.wg)(),(0,i.iD)("div")}const fze={},wze=(0,_t.Z)(fze,[["render",gze]]);var vze=wze;const _ze=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"My Requests",-1),yze={key:0,class:"shadow-md"},xze=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),bze=[xze],kze={class:"grid grid-cols-12 gap-6 mt-5"},Dze={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},Cze={class:"flex w-full sm:w-auto"},Pze={class:"w-48 relative text-slate-500"},Sze=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),zze={class:"hidden xl:block mx-auto text-slate-500"},Nze={class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},Tze=(0,i._)("button",{class:"btn btn-primary shadow-md mr-2"},[(0,i._)("i",{"data-lucide":"file-text",class:"w-4 h-4 mr-2"}),(0,i.Uk)(" Add new request ")],-1),Mze={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},Ize={class:"table table-report -mt-2"},Uze=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"Subject"),(0,i._)("th",{class:"whitespace-nowrap"},"Message"),(0,i._)("th",{class:"whitespace-nowrap"},"Files"),(0,i._)("th",{class:"whitespace-nowrap"},"Status"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Date")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),Eze={class:"w-40 !py-4"},Fze={class:"whitespace-nowrap"},$ze={class:"whitespace-nowrap"},Aze={class:"flex items-center space-x-2"},Bze=["href"],qze=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),jze=[qze],Vze={class:"w-40 !py-4"},Lze={class:"whitespace-nowrap"},Zze={class:"table-report__action"},Rze={class:"flex justify-center items-center"},Wze={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},Hze=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-check-square"},[(0,i._)("polyline",{points:"9 11 12 14 22 4"}),(0,i._)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})],-1),Oze={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},Yze=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),Kze=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),Gze=[Yze,Kze],Jze={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},Qze={class:"w-full sm:w-auto sm:mr-auto"},Xze={class:"pagination"},eNe={class:"page-item"},tNe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),aNe=[tNe],sNe=["onClick"],rNe={class:"page-item"},iNe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),lNe=[iNe],nNe=(0,i._)("option",null,"10",-1),oNe=(0,i._)("option",null,"25",-1),cNe=(0,i._)("option",null,"35",-1),dNe=(0,i._)("option",null,"50",-1),uNe=(0,i._)("option",null,"100",-1),pNe=(0,i._)("option",null,"500",-1),mNe=(0,i._)("option",null,"1000",-1),hNe=[nNe,oNe,cNe,dNe,uNe,pNe,mNe];function gNe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[_ze,l.loading?((0,i.wg)(),(0,i.iD)("label",yze,bze)):(0,i.kq)("",!0),(0,i._)("div",kze,[(0,i._)("div",Dze,[(0,i._)("div",Cze,[(0,i._)("div",Pze,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),Sze])]),(0,i._)("div",zze," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),(0,i._)("div",Nze,[(0,i.Wm)(o,{to:"/createrequest"},{default:(0,i.w5)((()=>[Tze])),_:1})])]),(0,i._)("div",Mze,[(0,i._)("table",Ize,[Uze,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",Eze,(0,Ns.zw)(e.title),1),(0,i._)("td",Fze,(0,Ns.zw)(e.comment),1),(0,i._)("td",$ze,[(0,i._)("div",Aze,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.files.split(","),(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"mr-2"},[(0,i._)("a",{href:n.getFilePath(e),target:"_blank",class:"flex items-center"},jze,8,Bze)])))),128))])]),(0,i._)("td",Vze,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.status)])},(0,Ns.zw)(e.status),3)]),(0,i._)("td",null,[(0,i._)("div",Lze,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",Zze,[(0,i._)("div",Rze,["Completed"!==e.transactionStatus&&"Revoked"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",Wze,[Hze,(0,i.Wm)(o,{to:`/requesthistory/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("history")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",Oze,Gze)):(0,i.kq)("",!0),(0,i._)("div",Jze,[(0,i._)("nav",Qze,[(0,i._)("ul",Xze,[(0,i._)("li",eNe,[(0,i._)("a",{class:"page-link",onClick:t[2]||(t[2]=(...e)=>n.previousPage&&n.previousPage(...e))},aNe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,sNe)],2)))),128)),(0,i._)("li",rNe,[(0,i._)("a",{class:"page-link",onClick:t[3]||(t[3]=(...e)=>n.nextPage&&n.nextPage(...e))},lNe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[4]||(t[4]=e=>l.pageSize=e),onChange:t[5]||(t[5]=(...e)=>n.changePageSize&&n.changePageSize(...e))},hNe,544),[[s.bM,l.pageSize]])])])])}var fNe={data(){return{companyName:"",transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t=await r.Z.get("/api/request/get/logeduser/request",{headers:{token:e},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=t.data.customerRequests,this.count=t.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Completed"===e?"text-success":"Pending"===e?"text-pending":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const wNe=(0,_t.Z)(fNe,[["render",gNe]]);var vNe=wNe;const _Ne=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-10"},"Request history",-1),yNe={key:0,class:"shadow-md"},xNe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),bNe=[xNe],kNe={class:"col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-12 mt-3"},DNe={class:"intro-x flex items-center h-10"},CNe={class:"ml-auto text-primary"},PNe={class:"mt-5 relative before:block before:absolute before:w-px before:h-[85%] before:bg-slate-200 before:dark:bg-darkmode-400 before:ml-5 before:mt-5"},SNe={class:"before:block before:absolute before:w-20 before:h-px before:bg-slate-200 before:dark:bg-darkmode-400 before:mt-5 before:ml-5"},zNe={class:"w-10 h-10 flex-none image-fit rounded-full overflow-hidden"},NNe=["title","src"],TNe={key:1,src:Xb,alt:"profilecustomer",class:"rounded-full"},MNe={class:"box px-5 py-3 ml-4 flex-1 zoom-in"},INe={class:"flex items-center"},UNe={class:"font-medium"},ENe={class:"text-xs text-slate-500 ml-auto"};function FNe(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div",null,[_Ne,r.loading?((0,i.wg)(),(0,i.iD)("label",yNe,bNe)):(0,i.kq)("",!0),(0,i._)("div",kNe,[(0,i._)("div",DNe,[(0,i._)("div",CNe,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-1 mt-5",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))}," Back ")])]),(0,i._)("div",PNe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.transactions,(a=>((0,i.wg)(),(0,i.iD)("div",{key:a._id,class:"intro-x relative flex items-center mb-3"},[(0,i._)("div",SNe,[(0,i._)("div",zNe,[a.changedBy.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"tooltip rounded-full",title:a.avatarUploadDate?"Uploaded at "+a.avatarUploadDate:"Avatar Image",alt:"Company logo",src:`${e.axios.defaults.baseURL}/${a.changedBy.avatar}`,onError:t[1]||(t[1]=(...t)=>e.handleAvatarError&&e.handleAvatarError(...t)),onLoad:t[2]||(t[2]=(...t)=>e.handleAvatarLoad&&e.handleAvatarLoad(...t))},null,40,NNe)):((0,i.wg)(),(0,i.iD)("img",TNe))])]),(0,i._)("div",MNe,[(0,i._)("div",INe,[(0,i._)("div",UNe,(0,Ns.zw)(a.changedBy.firstName)+" "+(0,Ns.zw)(a.changedBy.lastName),1),(0,i._)("div",ENe,(0,Ns.zw)(l.formatDateWithTime(a.date)),1)]),(0,i._)("div",{class:(0,Ns.C_)(["lg:text-left mt-3 lg:mt-0",l.getStatusClass(a.status)])},(0,Ns.zw)(a.status),3)])])))),128))])])])}var $Ne={data(){return{transactions:[],currentPage:1,totalPages:1,itemsPerPage:10,loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:""}},computed:{hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{goBack(){this.$router.go(-1)},getAvatarUrl(){return this.avatar?`${r.Z.defaults.baseURL}/${this.avatar.replace("\\","/")}`:"../../../../dist/images/logow.png"},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=this.$route.params.id,t=wt.Z.get("token"),a=await r.Z.get(`/api/request/get/${e}`,{headers:{token:t},params:{pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm}});this.transactions=a.data.customerRequest.statusHistory,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const ANe=(0,_t.Z)($Ne,[["render",FNe]]);var BNe=ANe;const qNe=(0,i.uE)('<div class="intro-y flex items-center mt-8"><h2 class="text-lg font-medium mr-auto">FAQ</h2></div><div class="grid grid-cols-12 gap-6"><div class="intro-y col-span-12 lg:col-span-4 xl:col-span-3"><div class="box mt-5"><div class="p-5"><a class="flex items-center text-primary font-medium" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> About Our Products </a><a class="flex items-center mt-5" href="#"><i data-lucide="box" class="w-4 h-4 mr-2"></i> Related License </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Single Application License </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Multi Application License </a></div><div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400"><a class="flex items-center" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> Trem of Use </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Product Review </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Privacy Policy </a></div><div class="p-5 border-t border-slate-200/60 dark:border-darkmode-400"><a class="flex items-center" href="#"><i data-lucide="activity" class="w-4 h-4 mr-2"></i> About Our Products </a><a class="flex items-center mt-5" href="#"><i data-lucide="box" class="w-4 h-4 mr-2"></i> Related License </a><a class="flex items-center mt-5" href="#"><i data-lucide="lock" class="w-4 h-4 mr-2"></i> Single Application License </a><a class="flex items-center mt-5" href="#"><i data-lucide="settings" class="w-4 h-4 mr-2"></i> Multi Application License </a></div></div></div><div class="intro-y col-span-12 lg:col-span-8 xl:col-span-9"><div class="intro-y box lg:mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">About Our Products</h2></div><div id="faq-accordion-1" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-1" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-1" aria-expanded="true" aria-controls="faq-accordion-collapse-1"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-1" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-1" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-2" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-2" aria-expanded="false" aria-controls="faq-accordion-collapse-2"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-2" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-2" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-3" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-3" aria-expanded="false" aria-controls="faq-accordion-collapse-3"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-3" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-3" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-4" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-4" aria-expanded="false" aria-controls="faq-accordion-collapse-4"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-4" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-4" data-tw-parent="#faq-accordion-1"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div><div class="intro-y box mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto">Related License</h2></div><div id="faq-accordion-2" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-5" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-5" aria-expanded="true" aria-controls="faq-accordion-collapse-5"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-5" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-5" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-6" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-6" aria-expanded="false" aria-controls="faq-accordion-collapse-6"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-6" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-6" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-7" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-7" aria-expanded="false" aria-controls="faq-accordion-collapse-7"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-7" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-7" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-8" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-8" aria-expanded="false" aria-controls="faq-accordion-collapse-8"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-8" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-8" data-tw-parent="#faq-accordion-2"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div><div class="intro-y box mt-5"><div class="flex items-center p-5 border-b border-slate-200/60 dark:border-darkmode-400"><h2 class="font-medium text-base mr-auto"> Single Application License </h2></div><div id="faq-accordion-3" class="accordion p-5"><div class="accordion-item"><div id="faq-accordion-content-9" class="accordion-header"><button class="accordion-button" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-9" aria-expanded="true" aria-controls="faq-accordion-collapse-9"> OpenSSL Essentials: Working with SSL Certificates, Private Keys </button></div><div id="faq-accordion-collapse-9" class="accordion-collapse collapse show" aria-labelledby="faq-accordion-content-9" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-10" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-10" aria-expanded="false" aria-controls="faq-accordion-collapse-10"> Understanding IP Addresses, Subnets, and CIDR Notation </button></div><div id="faq-accordion-collapse-10" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-10" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-11" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-11" aria-expanded="false" aria-controls="faq-accordion-collapse-11"> How To Troubleshoot Common HTTP Error Codes </button></div><div id="faq-accordion-collapse-11" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-11" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div><div class="accordion-item"><div id="faq-accordion-content-12" class="accordion-header"><button class="accordion-button collapsed" type="button" data-tw-toggle="collapse" data-tw-target="#faq-accordion-collapse-12" aria-expanded="false" aria-controls="faq-accordion-collapse-12"> An Introduction to Securing your Linux VPS </button></div><div id="faq-accordion-collapse-12" class="accordion-collapse collapse" aria-labelledby="faq-accordion-content-12" data-tw-parent="#faq-accordion-3"><div class="accordion-body text-slate-600 dark:text-slate-500 leading-relaxed"> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. </div></div></div></div></div></div></div>',2);function jNe(e,t){return qNe}const VNe={},LNe=(0,_t.Z)(VNe,[["render",jNe]]);var ZNe=LNe,RNe=a.p+"img/error-illustration.e408b457.svg";const WNe=(0,i.uE)('<div class="error-page flex flex-col lg:flex-row items-center justify-center h-screen text-center lg:text-left"><div class="-intro-x lg:mr-20"><img alt="Midone - HTML Admin Template" class="h-48 lg:h-auto" src="'+RNe+'"></div><div class="text-white mt-10 lg:mt-0"><div class="intro-x text-8xl font-medium">404</div><div class="intro-x text-xl lg:text-3xl font-medium mt-5">Oops. This page has gone missing.</div><div class="intro-x text-lg mt-3">You may have mistyped the address or the page may have moved.</div><button class="intro-x btn py-3 px-4 text-white border-white dark:border-darkmode-400 dark:text-slate-200 mt-10">Back to Home</button></div></div>',1),HNe=[WNe];function ONe(e,t){return(0,i.wg)(),(0,i.iD)("div",null,HNe)}const YNe={},KNe=(0,_t.Z)(YNe,[["render",ONe]]);var GNe=KNe;const JNe=e=>((0,i.dD)("data-v-eff1a282"),e=e(),(0,i.Cn)(),e),QNe={class:"login"},XNe={class:"sm:px-10"},eTe={class:"block xl:grid grid-cols-2 gap-4"},tTe=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen" data-v-eff1a282><a href="#" class="-intro-x flex items-center pt-5" data-v-eff1a282><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'" data-v-eff1a282><span class="text-white text-lg ml-3" data-v-eff1a282> Mediplus </span></a><div class="my-auto" data-v-eff1a282><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'" data-v-eff1a282><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10" data-v-eff1a282><br data-v-eff1a282> Create a new password </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400" data-v-eff1a282></div></div></div>',1),aTe={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},sTe={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},rTe=JNe((()=>(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Create new password ",-1))),iTe=JNe((()=>(0,i._)("div",{class:"invalid-feedback"},null,-1))),lTe=JNe((()=>(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"},null,-1))),nTe={class:"intro-x mt-8"},oTe=JNe((()=>(0,i._)("div",{class:"invalid-feedback"},null,-1))),cTe=(0,i.uE)('<div class="intro-x mt-5 xl:mt-8 text-center xl:text-left" data-v-eff1a282><button class="btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top" type="submit" data-v-eff1a282> Create </button></div><div class="intro-x mt-10 xl:mt-24 text-slate-600 dark:text-slate-500 text-center xl:text-left" data-v-eff1a282> By signin up, you agree to our <a class="text-primary dark:text-slate-200" href="#" data-v-eff1a282>Terms and Conditions</a> &amp; <a class="text-primary dark:text-slate-200" href="#" data-v-eff1a282>Privacy Policy</a></div>',2);function dTe(e,t,a,r,l,n){return(0,i.wg)(),(0,i.iD)("div",QNe,[(0,i._)("div",XNe,[(0,i._)("div",eTe,[tTe,(0,i._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...t)=>e.onLogin&&e.onLogin(...t)),["prevent"]))},[(0,i._)("div",aTe,[(0,i._)("div",sTe,[rTe,iTe,lTe,(0,i._)("div",nTe,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.newPassword=e),class:"intro-x login__input form-control py-3 px-4 block",placeholder:"insert a new password"},null,512),[[s.nr,l.newPassword]]),(0,i.wy)((0,i._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.retrynewPassword=e),class:"intro-x login__input form-control py-3 px-4 block mt-4",placeholder:"insert password again"},null,512),[[s.nr,l.retrynewPassword]]),oTe]),cTe])])],32)])])])}var uTe={data(){return{newPassword:"",retrynewPassword:"",token:null}},methods:{resetPassword(){this.errors={};let e={newPassword:this.newPassword,retrynewPassword:this.retrynewPassword,token:this.$route.params.token};r.Z.post("/reset-password",e).then((e=>{200===e.status&&(this.$emit("loginSuccess"),this.$router.go("/"))})).catch((e=>{e.response&&e.response.data&&e.response.data.error&&(this.errors={email:[e.response.data.error]},console.log(this.errors))}))}}};const pTe=(0,_t.Z)(uTe,[["render",dTe],["__scopeId","data-v-eff1a282"]]);var mTe=pTe;const hTe={class:"login"},gTe={class:"sm:px-10"},fTe={class:"block xl:grid grid-cols-2 gap-4"},wTe=(0,i.uE)('<div class="hidden xl:flex flex-col min-h-screen"><a href="#" class="-intro-x flex items-center pt-5"><img alt="Midone - HTML Admin Template" class="w-6" src="'+u+'"><span class="text-white text-lg ml-3"> Mediplus </span></a><div class="my-auto"><img alt="Midone - HTML Admin Template" class="-intro-x w-1/2 -mt-16" src="'+vr+'"><div class="-intro-x text-white font-medium text-4xl leading-tight mt-10"><br> Recover your account. </div><div class="-intro-x mt-5 text-lg text-white text-opacity-70 dark:text-slate-400"></div></div></div>',1),vTe={class:"h-screen xl:h-auto flex py-5 xl:py-0 my-10 xl:my-0 container sm:px-10"},_Te={class:"my-auto mx-auto xl:ml-20 bg-white dark:bg-darkmode-600 xl:bg-transparent px-5 sm:px-8 py-8 xl:p-0 rounded-md shadow-md xl:shadow-none w-full sm:w-3/4 lg:w-2/4 xl:w-auto"},yTe=(0,i._)("h2",{class:"intro-x font-bold text-2xl xl:text-3xl text-center xl:text-left"}," Forget password ",-1),xTe={key:0,class:"invalid-feedback"},bTe=(0,i._)("div",{class:"intro-x mt-2 text-slate-400 xl:hidden text-center"}," Sign in to your account.. ",-1),kTe={class:"intro-x mt-8"},DTe={key:0,class:"invalid-feedback"},CTe={class:"intro-h mt-5 xl:mt-8 text-center xl:text-left"},PTe=(0,i._)("button",{class:"btn btn-primary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit"}," Recover ",-1),STe=(0,i._)("button",{class:"btn btn-secondary py-3 px-4 w-full xl:w-32 xl:mr-3 align-top",type:"submit"}," Login ",-1);function zTe(e,t,a,r,l,n){const o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",hTe,[(0,i._)("div",gTe,[(0,i._)("div",fTe,[wTe,(0,i._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>n.onLogin&&n.onLogin(...e)),["prevent"]))},[(0,i._)("div",vTe,[(0,i._)("div",_Te,[yTe,l.errors.email?((0,i.wg)(),(0,i.iD)("div",xTe,(0,Ns.zw)(l.errors.email[0]),1)):(0,i.kq)("",!0),bTe,(0,i._)("div",kTe,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),class:(0,Ns.C_)(["intro-x login__input form-control py-3 px-4 block",{"is-invalid":l.errors.email}]),placeholder:"Email"},null,2),[[s.nr,l.email]]),l.errors.password?((0,i.wg)(),(0,i.iD)("div",DTe,(0,Ns.zw)(l.errors.password[0]),1)):(0,i.kq)("",!0)]),(0,i._)("div",CTe,[PTe,(0,i.Wm)(o,{to:"/login"},{default:(0,i.w5)((()=>[STe])),_:1})])])])],32)])])])}var NTe={data(){return{email:"",errors:{}}},methods:{onLogin(){this.errors={};let e={email:this.email};r.Z.post("/forgot-password",e).then((e=>{200===e.status&&(localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role),this.$emit("Email sent"),Ar().fire({icon:"success",title:"Password reset email sent...",text:"Check you email"})),this.email=""})).catch((e=>{e.response&&e.response.data&&e.response.data.error&&(console.log(e.response.data),Ar().fire({icon:"error",title:"Oops...",text:e.response.data.error}))}))}},beforeRouteEnter(e,t,a){const s=localStorage.getItem("token");s?a({name:"Dashboard"}):a()}};const TTe=(0,_t.Z)(NTe,[["render",zTe]]);var MTe=TTe;const ITe=(0,i._)("h2",{class:"intro-y text-lg font-medium mt-5"},"Transactions in progress",-1),UTe={key:0,class:"shadow-md"},ETe=(0,i._)("div",{class:"spinner",style:{"font-size":"18px"}},null,-1),FTe=[ETe],$Te={class:"grid grid-cols-12 gap-6 mt-8"},ATe={class:"intro-y col-span-12 flex flex-wrap xl:flex-nowrap items-center mt-2"},BTe={class:"flex w-full sm:w-auto"},qTe={class:"w-48 relative text-slate-500"},jTe=(0,i._)("i",{class:"w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0","data-lucide":"search"},null,-1),VTe={class:"ml-1"},LTe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-3 h-3 lucide lucide-refresh-ccw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 16h5v5"></path></svg>',1),ZTe=[LTe],RTe={class:"hidden xl:block mx-auto text-slate-500"},WTe=(0,i._)("div",{class:"w-full xl:w-auto flex items-center mt-3 xl:mt-0"},null,-1),HTe={class:"intro-y col-span-12 overflow-auto 2xl:overflow-visible"},OTe={class:"table table-report -mt-2"},YTe=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"whitespace-nowrap"},"INVOICE"),(0,i._)("th",{class:"whitespace-nowrap"},"Company"),(0,i._)("th",{class:"whitespace-nowrap"},"Partner"),(0,i._)("th",{class:"whitespace-nowrap"},"Customer"),(0,i._)("th",{class:"text-center whitespace-nowrap"},"Amount"),(0,i._)("th",{class:"whitespace-nowrap"},"Service"),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Created At")]),(0,i._)("th",{class:"twhitespace-nowrap"},[(0,i._)("div",{class:""},"Updated At")]),(0,i._)("th",{class:"text-right whitespace-nowrap"},[(0,i._)("div",{class:"pr-16"},"Status")]),(0,i._)("th",{class:"text-center whitespace-nowrap"},"ACTIONS")])],-1),KTe={class:"w-40 !py-4"},GTe={class:"decoration-dotted whitespace-nowrap"},JTe={class:"w-40 !py-4"},QTe={key:0,class:"decoration-dotted whitespace-nowrap"},XTe={key:1,class:"decoration-dotted whitespace-nowrap"},eMe={class:"w-40 !py-4"},tMe={class:"decoration-dotted whitespace-nowrap"},aMe={class:"w-40"},sMe={class:"font-medium whitespace-nowrap"},rMe={class:"text-center"},iMe={key:0,class:"flex items-center justify-center whitespace-nowrap"},lMe={key:1,class:"flex items-center justify-center whitespace-nowrap"},nMe={class:"whitespace-nowrap"},oMe={class:"whitespace-nowrap"},cMe={class:"whitespace-nowrap"},dMe={class:"w-40 !py-4"},uMe={class:"table-report__action"},pMe={class:"flex justify-center items-center"},mMe=["onClick"],hMe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),gMe={key:0,class:"flex items-center text-primary whitespace-nowrap mr-5"},fMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 mr-1 lucide lucide-pencil"},[(0,i._)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,i._)("path",{d:"m15 5 4 4"})],-1),wMe={key:1,class:"flex items-center text-primary whitespace-nowrap mr-5"},vMe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-file-symlink"><path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v7"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10 18 3-3-3-3"></path><path d="M4 18v-1a2 2 0 0 1 2-2h6"></path></svg>',1),_Me={key:2,class:"flex items-center text-primary whitespace-nowrap mr-5"},yMe=(0,i.uE)('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-1 lucide lucide-trash-2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1),xMe={key:0,class:"col-span-6 sm:col-span-3 xl:col-span-2 flex flex-col justify-end items-center"},bMe=(0,i._)("i",{"data-loading-icon":"puff",class:"w-8 h-8"},null,-1),kMe=(0,i._)("div",{class:"text-center text-xs mt-2"},"Loading...",-1),DMe=[bMe,kMe],CMe={class:"intro-y col-span-12 flex flex-wrap sm:flex-row sm:flex-nowrap items-center"},PMe={class:"w-full sm:w-auto sm:mr-auto"},SMe={class:"pagination"},zMe={class:"page-item"},NMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide-chevron-left"},[(0,i._)("path",{d:"m11 17-5-5 5-5"}),(0,i._)("path",{d:"m18 17-5-5 5-5"})],-1),TMe=[NMe],MMe=["onClick"],IMe={class:"page-item"},UMe=(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"w-4 h-4 lucide lucide lucide-chevrons-right"},[(0,i._)("path",{d:"m6 17 5-5-5-5"}),(0,i._)("path",{d:"m13 17 5-5-5-5"})],-1),EMe=[UMe],FMe=(0,i._)("option",null,"10",-1),$Me=(0,i._)("option",null,"25",-1),AMe=(0,i._)("option",null,"35",-1),BMe=(0,i._)("option",null,"50",-1),qMe=(0,i._)("option",null,"100",-1),jMe=(0,i._)("option",null,"500",-1),VMe=(0,i._)("option",null,"1000",-1),LMe=[FMe,$Me,AMe,BMe,qMe,jMe,VMe],ZMe={id:"files-modal",class:"modal",tabindex:"-1","aria-hidden":"true"},RMe={class:"modal-dialog"},WMe={class:"modal-content"},HMe={class:"modal-body p-0"},OMe={class:"p-5 text-center"},YMe=(0,i._)("i",{"data-lucide":"x-circle",class:"w-16 h-16 text-danger mx-auto mt-3"},null,-1),KMe=(0,i._)("div",{class:"text-3xl mt-5"},"Transaction files",-1),GMe={class:"text-slate-500 mt-2"},JMe=["href"],QMe=(0,i._)("div",{class:"px-5 pb-8 text-center"},[(0,i._)("button",{type:"button","data-tw-dismiss":"modal",class:"btn btn-outline-secondary w-24 mr-1"}," Cancel ")],-1);function XMe(e,t,a,r,l,n){const o=(0,i.up)("vue-flatpickr"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",null,[ITe,l.loading?((0,i.wg)(),(0,i.iD)("label",UTe,FTe)):(0,i.kq)("",!0),(0,i._)("div",$Te,[(0,i._)("div",ATe,[(0,i._)("div",BTe,[(0,i._)("div",qTe,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control w-48 box pr-10",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>n.applyFilter&&n.applyFilter(...e))},null,544),[[s.nr,l.searchTerm]]),jTe])]),(0,i._)("div",VTe,[(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"startDate",modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.startDate=e),config:n.datePickerConfig,placeholder:"Select start Date"},null,8,["modelValue","config"]),(0,i.Wm)(o,{class:"box pr-10 ml-2 custom-date-input",id:"endDate",modelValue:l.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.endDate=e),config:n.datePickerConfig,placeholder:"Select last Date"},null,8,["modelValue","config"]),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[4]||(t[4]=(...e)=>n.applyFilterDate&&n.applyFilterDate(...e))}," Search by date "),(0,i._)("button",{class:"btn btn-outline-primary inline-block ml-5",onClick:t[5]||(t[5]=(...e)=>n.refresh&&n.refresh(...e))},ZTe)]),(0,i._)("div",RTe," Showing "+(0,Ns.zw)(l.firstEntryIndex)+" to "+(0,Ns.zw)(l.lastEntryIndex)+" of "+(0,Ns.zw)(l.count)+" entries ",1),WTe]),(0,i._)("div",HTe,[(0,i._)("table",OTe,[YTe,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactions,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e._id,class:"intro-x"},[(0,i._)("td",KTe,[(0,i._)("a",GTe,(0,Ns.zw)(e.invoiceNumber),1)]),(0,i._)("td",JTe,[e.customerId&&void 0!==e.customerId.company?((0,i.wg)(),(0,i.iD)("div",QTe,(0,Ns.zw)(e.customerId.company.companyName),1)):((0,i.wg)(),(0,i.iD)("div",XTe," Individual "))]),(0,i._)("td",eMe,[(0,i._)("a",tMe,(0,Ns.zw)(e.user.partnerUser.partnerName),1)]),(0,i._)("td",aMe,[(0,i._)("a",sMe,(0,Ns.zw)(e.customerId.firstName)+" "+(0,Ns.zw)(e.customerId.lastName),1)]),(0,i._)("td",rMe,["Revoked"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("div",iMe,(0,Ns.zw)(n.formatCurrency(e.amount)),1)):((0,i.wg)(),(0,i.iD)("div",lMe,(0,Ns.zw)(n.formatCurrency(e.revokedAmount)),1))]),(0,i._)("td",null,[(0,i._)("div",nMe,(0,Ns.zw)(e.serviceIds[0].serviceName),1)]),(0,i._)("td",null,[(0,i._)("div",oMe,(0,Ns.zw)(n.formatDateWithTime(e.createdAt)),1)]),(0,i._)("td",null,[(0,i._)("div",cMe,(0,Ns.zw)(n.formatDateWithTime(e.updatedAt)),1)]),(0,i._)("td",dMe,[(0,i._)("div",{class:(0,Ns.C_)(["whitespace-nowrap",n.getStatusClass(e.transactionStatus)])},(0,Ns.zw)(e.transactionStatus),3)]),(0,i._)("td",uMe,[(0,i._)("div",pMe,[(0,i._)("a",{href:"javascript:;",class:"flex items-center text-primary whitespace-nowrap mr-5",onClick:t=>n.openTransactionFilesModal(e),"data-tw-toggle":"modal","data-tw-target":"#files-modal"},[hMe,(0,i.Uk)(" Files ")],8,mMe),"Pending"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",gMe,[fMe,(0,i.Wm)(c,{to:`/customertransactiondetail/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit ")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"===e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",wMe,[vMe,(0,i.Wm)(c,{to:`/transactioninvoice/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Invoice")])),_:2},1032,["to"])])):(0,i.kq)("",!0),"Completed"!==e.transactionStatus&&"Canceled"!==e.transactionStatus?((0,i.wg)(),(0,i.iD)("a",_Me,[yMe,(0,i.Wm)(c,{to:`/canceltransaction/${e._id}`},{default:(0,i.w5)((()=>[(0,i.Uk)("Cancel")])),_:2},1032,["to"])])):(0,i.kq)("",!0)])])])))),128))])])]),l.loading?((0,i.wg)(),(0,i.iD)("div",xMe,DMe)):(0,i.kq)("",!0),(0,i._)("div",CMe,[(0,i._)("nav",PMe,[(0,i._)("ul",SMe,[(0,i._)("li",zMe,[(0,i._)("a",{class:"page-link",onClick:t[6]||(t[6]=(...e)=>n.previousPage&&n.previousPage(...e))},TMe)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.totalPages,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,Ns.C_)(["page-item",{active:n.isActivePage(e)}]),key:e},[(0,i._)("a",{class:"page-link",onClick:t=>n.goToPage(e)},(0,Ns.zw)(e),9,MMe)],2)))),128)),(0,i._)("li",IMe,[(0,i._)("a",{class:"page-link",onClick:t[7]||(t[7]=(...e)=>n.nextPage&&n.nextPage(...e))},EMe)])])]),(0,i.wy)((0,i._)("select",{class:"w-20 form-select box mt-3 sm:mt-0","onUpdate:modelValue":t[8]||(t[8]=e=>l.pageSize=e),onChange:t[9]||(t[9]=(...e)=>n.changePageSize&&n.changePageSize(...e))},LMe,544),[[s.bM,l.pageSize]])])]),(0,i._)("div",ZMe,[(0,i._)("div",RMe,[(0,i._)("div",WMe,[(0,i._)("div",HMe,[(0,i._)("div",OMe,[YMe,KMe,(0,i._)("div",GMe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.transactionFiles,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i.Uk)((0,Ns.zw)(t+1)+". ",1),(0,i._)("a",{href:n.getFilePath(e),target:"_blank"},(0,Ns.zw)(n.shortenFileName(e)),9,JMe)])))),128))])])]),QMe])])])])])}var eIe={data(){return{transactions:[],transactionFiles:[],currentPage:1,totalPages:1,itemsPerPage:10,firtName:"",lastName:"",idType:"",loading:!1,pageSize:10,count:0,firstEntryIndex:0,lastEntryIndex:0,searchTerm:"",inprogress:"",revoked:"",aproved:"",pending:"",completed:"",inprogressCount:"",revokedCount:"",aprovedCount:"",pendingCount:"",completedCount:"",canceled:"",canceledCount:"",averageApprovalTime:"",startDate:"",endDate:"",selectedDate:null}},computed:{datePickerConfig(){return{dateFormat:"Y-m-d"}},formattedAverageApprovalTime(){const e=this.averageApprovalTime,t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),s=Math.floor(e/36e5%24),r=Math.floor(e/864e5);let i="";return r>0&&(i+=`${r} days `),s>0&&(i+=`${s} hours `),a>0&&(i+=`${a} minutes `),(t>0||""===i)&&(i+=`${t} seconds`),i},hasPreviousPage(){return this.currentPage>1},hasNextPage(){return this.currentPage<this.totalPages}},watch:{currentPage:"fetchData",pageSize:"fetchData",searchTerm:"fetchData"},methods:{refresh(){this.startDate=null,this.endDate=null,this.searchTerm=null,this.fetchData()},applyFilterDate(){if(this.startDate&&this.endDate){const e=new Date(this.startDate).toISOString(),t=new Date(this.endDate).toISOString();console.log("Selected Date Range:"),console.log("Start Date:",e),console.log("End Date:",t),this.currentPage=1,this.fetchData()}else Ar().fire({icon:"warning",title:"Warning!",toast:!0,text:"Please select both start and end dates.",timer:3e3,showConfirmButton:!1,position:"top-end"})},shortenFileName(e,t=20){return e.length>t?e.slice(0,t)+"...":e},openTransactionFilesModal(e){this.transactionFiles=e.multipleFiles.split(",");const t=document.getElementById("files-modal");t.style.display="block"},getFilePath(e){return`${r.Z.defaults.baseURL}/${e}`},formatNumber(e){if(isNaN(e))return"Invalid Number";const t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},formatDateWithTime(e){const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${r} ${i}:${l}`},formatCurrency(e){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return t.format(e)},isActivePage(e){return e===this.currentPage},async fetchData(){try{this.loading=!0;const e=wt.Z.get("token"),t={pageNumber:this.currentPage,pageSize:this.pageSize,searchTerm:this.searchTerm};this.startDate&&this.endDate&&(t.startDate=this.startDate,t.endDate=this.endDate);const a=await r.Z.get("/api/ctransation/get/transaction/inprogress",{headers:{token:e},params:t});this.transactions=a.data.transactions,this.count=a.data.total,this.totalPages=Math.ceil(this.count/this.pageSize),this.firstEntryIndex=(this.currentPage-1)*this.pageSize+1,this.lastEntryIndex=Math.min(this.currentPage*this.pageSize,this.count)}catch(e){console.error(e)}finally{this.loading=!1}},applyFilter(){this.currentPage=1,this.fetchData()},previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},goToPage(e){e!==this.currentPage&&(this.currentPage=e,this.fetchData())},async changePageSize(){this.currentPage=1,this.itemsPerPage=this.pageSize,await this.fetchData()},getStatusClass(e){return"Done"===e?"text-success":"Pending"===e?"text-pending":"Canceled"===e?"text-danger":"Under_approval"===e?"text-warning":"Under_assessment"===e?"text-muted":"Received"===e?"text-primary":"Completed"===e?"text-success":"Revoked"===e?"text-danger":""},exportToExcel(){const e=document.querySelector("table"),t=Un.P6.table_to_book(e);(0,Un.NC)(t,"service_list.xlsx")},exportToPDF(){const e=document.querySelector("table");setTimeout((()=>{const t=document.createElement("div");t.appendChild(e),Fn()().set({filename:"transactions_list.pdf"}).from(t).save()}),500)}},created(){this.fetchData()}};const tIe=(0,_t.Z)(eIe,[["render",XMe]]);var aIe=tIe;const sIe=[{path:"/",component:gn,name:"Dashboard",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/managerdashboard",component:jpe,name:"Manager Dashboard",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/partner",component:Sz,name:"Partner",meta:{requiresAuth:!0,roles:["6","11"]}},{path:"/viewplan",component:Bn,name:"View Plan",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/allcustomers",component:h8,name:"View All Customers",meta:{requiresAuth:!0,roles:["1"]}},{path:"/createplan",component:uo,name:"Create Plan",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updateplan/:id",component:Ro,name:"Edit Plan",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewservices/:id",component:qc,name:"View Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createservice/:id",component:fd,name:"Create Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateservice/:id",component:Yd,name:"Edit Service",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/customertransactions",component:$m,name:"Customer Transactions",meta:{requiresAuth:!0,roles:["1"]}},{path:"/customertransactiondetail/:id",component:Uh,name:"Customer Transaction Detail",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/canceltransaction/:id",component:Eg,name:"Cancel Transaction",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionspending",component:lw,name:"Pending Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsaproved",component:Mv,name:"Aproved Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionscanceled",component:sy,name:"Canceled Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionscompleted",component:zx,name:"Completed Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsrevoked",component:Qb,name:"Revoked Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionsinprogress",component:aIe,name:"In Progress Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/transactionhitory/:id",component:AL,name:"Transaction Hitory",meta:{requiresAuth:!0,roles:["6","9"]}},{path:"/viewcompanytransactions/:id",component:$G,name:"View Company Transactions",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/chat",component:rD,name:"Chat",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/adminchat",component:mC,name:"Admin Chat Page",meta:{requiresAuth:!0,roles:["1"]}},{path:"/event",component:_C,name:"Event",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/createpartner",component:KC,name:"Create Partner",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatepartner/:id",component:FP,name:"Update Partner",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewpartner",component:WS,name:"View Partner",meta:{requiresAuth:!0,roles:["1"]}},{path:"/createpartneruser/:id",component:HT,name:"Create Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updatepartneruser/:id",component:GM,name:"Update Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewpartneruser/:id",component:ZI,name:"View Partner User",meta:{requiresAuth:!0,roles:["1"]}},{path:"/searchcustomer",component:Sz,name:"Search Customer",meta:{requiresAuth:!0,roles:["6"]}},{path:"/hospital",component:cN,name:"Hospital Search Customer",meta:{requiresAuth:!0,roles:["6"]}},{path:"/farmacy",component:LN,name:"Farmacy Search Customer",meta:{requiresAuth:!0,roles:["9"]}},{path:"/createtransaction/:id",component:hU,name:"Create Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/hospitaltransaction/:id",component:BU,name:"Hospital Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/farmacytransaction/:id",component:pE,name:"farmacy Transaction",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/updatetransaction/:id",component:nF,name:"Update Transaction",meta:{requiresAuth:!0,roles:["1","2","6"]}},{path:"/updatehospitaltransaction/:id",component:c$,name:"Update Hospital Transaction",meta:{requiresAuth:!0,roles:["6"]}},{path:"/mytransactions",component:TA,name:"My Transactions",meta:{requiresAuth:!0,roles:["6"]}},{path:"/alltransactions",component:KB,name:"All Transactions",meta:{requiresAuth:!0,roles:["6"]}},{path:"/transactiondetails/:id",component:qj,name:"Transaction Detail",meta:{requiresAuth:!0,roles:["1","6"]}},{path:"/transactioninvoice/:id",component:IV,name:"Transaction Invoice",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/createcompany",component:gZ,name:"Create Company",meta:{requiresAuth:!0,roles:["1"]}},{path:"/updatecompany/:id",component:aR,name:"Update Company",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewcompany",component:dW,name:"View Company",meta:{requiresAuth:!0,roles:["1"]}},{path:"/companymembers/:id",component:yH,name:"View Company Members",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createcorporate/:id",component:UO,name:"Create Company Member",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createbulkcorporate/:id",component:XO,name:"Create Bulk Company Employers",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatecorporate/:id",component:uK,name:"Update Company Member",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/customerprofile/:id",component:Hfe,name:"Customer Profile",meta:{requiresAuth:!0,roles:["1","2","3","5","7","8"]}},{path:"/employerprofile/:id",component:Wwe,name:"Employer Profile",meta:{requiresAuth:!0,roles:["1","2","3","6"]}},{path:"/dependentprofile/:id",component:B_e,name:"Dependent Profile",meta:{requiresAuth:!0,roles:["1","2","3","4","5","7","8"]}},{path:"/createdependentcorporate/:id",component:aQ,name:"Create Dependent Corporate",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createdependentindividual/:id",component:bX,name:"Create Dependent Individual",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatependentcorporate/:id",component:L0,name:"Update Dependent Corporate",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatedependentindividual/:id",component:n2,name:"Update Dependent Invididual",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createcustomer",component:_4,name:"Create Individual Customer",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewcustomer",component:t6,name:"View Individual Customer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/viewmycustomers",component:ise,name:"View My Individual Customer",meta:{requiresAuth:!0,roles:["2","3"]}},{path:"/updatecustomer/:id",component:Y5,name:"Update Individual Customer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createemployer/",component:v8,name:"Create Employer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateemployer/:id",component:b8,name:"Update Employer",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/employermanagement/",component:T7,name:"Employer management",meta:{requiresAuth:!0,roles:["1"]}},{path:"/allmanagertransactions/",component:Ooe,name:"All Manager Transactions",meta:{requiresAuth:!0,roles:["2"]}},{path:"/managerrequests/",component:Kce,name:"Manager Requests",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmyagents/",component:Jte,name:"View My Agents",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewindividualcustomer/",component:ise,name:"View My Invidividual Customer",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmanagercompanies/",component:pre,name:"View Manager Companies",meta:{requiresAuth:!0,roles:["2"]}},{path:"/viewmyallcustomers/",component:vie,name:"View My All Customers",meta:{requiresAuth:!0,roles:["2"]}},{path:"/managerchatpage/",component:gle,name:"Manager Chat Page",meta:{requiresAuth:!0,roles:["2"]}},{path:"/createmyagent/",component:Gde,name:"Create My Agent",meta:{requiresAuth:!0,roles:["2"]}},{path:"/createagent/",component:E9,name:"Create Agent",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateeagent/:id",component:Ree,name:"Update Agent",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createadmin/",component:Vme,name:"Create Admin",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updateadmin/:id",component:Ohe,name:"Update Admin",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/createmanager/",component:qye,name:"Create Manager",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/updatemanager/:id",component:Zxe,name:"Update Manager",meta:{requiresAuth:!0,roles:["1","2"]}},{path:"/myservices",component:Bbe,name:"My Services",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/usertransactions",component:eDe,name:"User Transactions",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/templatefiles",component:ODe,name:"Template Files",meta:{requiresAuth:!0,roles:["4","5","6","7","8"]}},{path:"/viewtemplatefiles",component:HCe,name:"View Template Files",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/createtemplatefile",component:uPe,name:"Create Template File",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/updatetemplatefile/:templateId",component:$Pe,name:"Update Template File",meta:{requiresAuth:!0,roles:["1","2","3"]}},{path:"/viewrequestadmin",component:$Se,name:"View Customer Request",meta:{requiresAuth:!0,roles:["1"]}},{path:"/viewrequest",component:vNe,name:"View Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/createrequest",component:hze,name:"Create Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/updaterequst",component:vze,name:"Update Request",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/requesthistory/:id",component:BNe,name:"Request History",meta:{requiresAuth:!0,roles:["4","5","7","8"]}},{path:"/faq",component:ZNe,name:"Faq",meta:{requiresAuth:!0,roles:["1","2","3","4","5","6","7","8"]}},{path:"/login",name:"Login",components:{default:jr,login:jr},meta:{requiresAuth:!1}},{path:"/signup",component:ri},{path:"/:pathMatch(.*)*",name:"NotFound",component:GNe},{path:"/reset/:token",name:"Reset Token",component:mTe,meta:{requiresAuth:!1}},{path:"/forget-password",name:"Forget Password",component:MTe}],rIe=(0,wr.p7)({history:(0,wr.PO)(),routes:sIe});let iIe;function lIe(){clearTimeout(iIe),iIe=setTimeout((()=>{nIe(),window.location.replace("/login")}),9e5)}function nIe(){wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore")}async function oIe(e){try{const t=await r.Z.get("/api/check/verify-token/",{headers:{token:e}});return 200===t.status}catch(t){return wt.Z.remove("token"),wt.Z.remove("role"),sessionStorage.removeItem("visitedBefore"),!1}}rIe.beforeEach(((e,t,a)=>{const s=wt.Z.get("token"),r=wt.Z.get("role");if(e.meta.requiresAuth&&!s||"false"===oIe(s)&&"Login"!==e.name)return nIe(),window.location.replace("/login"),a({path:"/login"});if("/"===e.path&&s){if("2"===r)return a({path:"/managerdashboard"});if("6"===r)return a({path:"/hospital"});if("9"===r)return a({path:"/farmacy"});if("4"===r||"5"===r||"6"===r||"8"===r)return a({path:"/usertransactions"})}if(e.meta.roles&&!e.meta.roles.includes(r))return a({name:"NotFound"});s&&lIe(),a()}));var cIe=rIe,dIe={},uIe={},pIe={async[ti](e,t){let a={firstName:"Mario",lastName:"Mario",gender:"male",relation:1,monthlyFee:"15487",memberShipID:"sddft4545re",idType:"ID",idNumber:"3454545656T",address:"Aeroporto",contact1:"849904322",contact2:"841585260",partnerLocation:"",userType:5,company:"649dd2ec9ed28e0d733bfb1a",plan:"649d27687ab4f8c23da44c4c",email:t.email,password:t.password};try{let e=await r.Z.post(`${r.Z.defaults.baseURL}/api/signup`,a);200===e.status&&console.log("")}catch(s){console.error(s)}}},mIe={namespaced:!0,state(){return{name:"State Hama"}},mutations:dIe,getters:uIe,actions:pIe};const hIe=(0,ei.MT)({modules:{auth:mIe}});var gIe=hIe;function fIe(e,t,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div")}var wIe={data(){return{notifications:[]}},created(){}};const vIe=(0,_t.Z)(wIe,[["render",fIe]]);var _Ie=vIe,yIe=a(7851),xIe=a(484);r.Z.defaults.baseURL="https://zeus-api-63pe.onrender.com",r.Z.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&401===e.response.status){let t=e.response.data.returnMessage;wt.Z.set("logoutReason",t);const a=r.Z.get("/api/logout");a.data.success&&(wt.Z.remove("token"),cIe.push("/login"))}return Promise.reject(e)}));const bIe=(0,s.ri)(hr);bIe.use(fr()),bIe.use(cIe),bIe.use(gIe),bIe.component("notification-component",_Ie);const kIe=(0,yIe.ZP)("ws://zeus-api-63pe.onrender.com",{transports:["websocket","polling","flashsocket"]});bIe.config.globalProperties.$socket=kIe,bIe.config.globalProperties.$socketStatus="connecting",kIe.on("connect",(()=>{console.log("Socket connected"),bIe.config.globalProperties.$socketStatus="connected"})),kIe.on("disconnect",(()=>{console.log("Socket disconnected"),bIe.config.globalProperties.$socketStatus="disconnected"})),bIe.component("vue-flatpickr",xIe.Z),bIe.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,i){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],i=e[d][2];for(var n=!0,o=0;o<s.length;o++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(n=!1,i<l&&(l=i));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var i=Object.create(null);a.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var n=2&r&&s;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){l[e]=function(){return s[e]}}));return l["default"]=function(){return s},a.d(i,l),i}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{128:"edff9f7e",617:"aff632da"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-authentication:";a.l=function(s,r,i,l){if(e[s])e[s].push(r);else{var n,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+i){n=u;break}}n||(o=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+i),n.src=s),e[s]=[r];var p=function(t,a){n.onerror=n.onload=null,clearTimeout(m);var r=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=p.bind(null,n.onerror),n.onload=p.bind(null,n.onload),o&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,s){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var i=new Promise((function(a,s){r=e[t]=[a,s]}));s.push(r[2]=i);var l=a.p+a.u(t),n=new Error,o=function(s){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.src;n.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",n.name="ChunkLoadError",n.type=i,n.request=l,r[1](n)}};a.l(l,o,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,l=s[0],n=s[1],o=s[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(o)var d=o(a)}for(t&&t(s);c<l.length;c++)i=l[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkvue_authentication"]=self["webpackChunkvue_authentication"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(4090)}));s=a.O(s)})();
//# sourceMappingURL=app.8b1f3afc.js.map